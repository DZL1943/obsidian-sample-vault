"use strict";var St=Object.defineProperty;var pn=Object.getOwnPropertyDescriptor;var un=Object.getOwnPropertyNames;var mn=Object.prototype.hasOwnProperty;var cn=(e,t)=>{for(var o in t)St(e,o,{get:t[o],enumerable:!0})},hn=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of un(t))!mn.call(e,r)&&r!==o&&St(e,r,{get:()=>t[r],enumerable:!(n=pn(t,r))||n.enumerable});return e};var bn=e=>hn(St({},"__esModule",{value:!0}),e);var Bi={};cn(Bi,{default:()=>zt});module.exports=bn(Bi);var fn=require("obsidian");var we=require("@codemirror/language"),Y=require("@codemirror/view");var gn=(e,t)=>{if(typeof e=="number"){if(t===3)return{mode:"rgb",r:(e>>8&15|e>>4&240)/255,g:(e>>4&15|e&240)/255,b:(e&15|e<<4&240)/255};if(t===4)return{mode:"rgb",r:(e>>12&15|e>>8&240)/255,g:(e>>8&15|e>>4&240)/255,b:(e>>4&15|e&240)/255,alpha:(e&15|e<<4&240)/255};if(t===6)return{mode:"rgb",r:(e>>16&255)/255,g:(e>>8&255)/255,b:(e&255)/255};if(t===8)return{mode:"rgb",r:(e>>24&255)/255,g:(e>>16&255)/255,b:(e>>8&255)/255,alpha:(e&255)/255}}},We=gn;var xn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Oo=xn;var vn=e=>We(Oo[e.toLowerCase()],6),Do=vn;var Mn=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,yn=e=>{let t;return(t=e.match(Mn))?We(parseInt(t[1],16),t[1].length):void 0},Se=yn;var H="([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)",tf=`(?:${H}|none)`,ae=`${H}%`,of=`(?:${H}%|none)`,Ne=`(?:${H}%|${H})`,Tn=`(?:${H}%|${H}|none)`,qo=`(?:${H}(deg|grad|rad|turn)|${H})`,rf=`(?:${H}(deg|grad|rad|turn)|${H}|none)`,G="\\s*,\\s*";var nf=new RegExp("^"+Tn+"$");var kn=new RegExp(`^rgba?\\(\\s*${H}${G}${H}${G}${H}\\s*(?:,\\s*${Ne}\\s*)?\\)$`),wn=new RegExp(`^rgba?\\(\\s*${ae}${G}${ae}${G}${ae}\\s*(?:,\\s*${Ne}\\s*)?\\)$`),zn=e=>{let t={mode:"rgb"},o;if(o=e.match(kn))o[1]!==void 0&&(t.r=o[1]/255),o[2]!==void 0&&(t.g=o[2]/255),o[3]!==void 0&&(t.b=o[3]/255);else if(o=e.match(wn))o[1]!==void 0&&(t.r=o[1]/100),o[2]!==void 0&&(t.g=o[2]/100),o[3]!==void 0&&(t.b=o[3]/100);else return;return o[4]!==void 0?t.alpha=Math.max(0,Math.min(1,o[4]/100)):o[5]!==void 0&&(t.alpha=Math.max(0,Math.min(1,+o[5]))),t},Jo=zn;var Ln=(e,t)=>e===void 0?void 0:typeof e!="object"?Pe(e):e.mode!==void 0?e:t?{...e,mode:t}:void 0,Ge=Ln;var Rn=(e="rgb")=>t=>(t=Ge(t,e))!==void 0?t.mode===e?t:D[t.mode][e]?D[t.mode][e](t):e==="rgb"?D[t.mode].rgb(t):D.rgb[e](D[t.mode].rgb(t)):void 0,V=Rn;var D={},Fo={},$e=[],Nt={},Cn=e=>e,g=e=>(D[e.mode]={...D[e.mode],...e.toMode},Object.keys(e.fromMode||{}).forEach(t=>{D[t]||(D[t]={}),D[t][e.mode]=e.fromMode[t]}),e.ranges||(e.ranges={}),e.difference||(e.difference={}),e.channels.forEach(t=>{if(e.ranges[t]===void 0&&(e.ranges[t]=[0,1]),!e.interpolate[t])throw new Error(`Missing interpolator for: ${t}`);typeof e.interpolate[t]=="function"&&(e.interpolate[t]={use:e.interpolate[t]}),e.interpolate[t].fixup||(e.interpolate[t].fixup=Cn)}),Fo[e.mode]=e,(e.parse||[]).forEach(t=>{Hn(t,e.mode)}),V(e.mode)),Ve=e=>Fo[e],Hn=(e,t)=>{if(typeof e=="string"){if(!t)throw new Error("'mode' required when 'parser' is a string");Nt[e]=t}else typeof e=="function"&&$e.indexOf(e)<0&&$e.push(e)};var Pt=/[^\x00-\x7F]|[a-zA-Z_]/,Xn=/[^\x00-\x7F]|[-\w]/,l={Function:"function",Ident:"ident",Number:"number",Percentage:"percentage",ParenClose:")",None:"none",Hue:"hue",Alpha:"alpha"},u=0;function Ze(e){let t=e[u],o=e[u+1];return t==="-"||t==="+"?/\d/.test(o)||o==="."&&/\d/.test(e[u+2]):t==="."?/\d/.test(o):/\d/.test(t)}function $t(e){if(u>=e.length)return!1;let t=e[u];if(Pt.test(t))return!0;if(t==="-"){if(e.length-u<2)return!1;let o=e[u+1];return!!(o==="-"||Pt.test(o))}return!1}var _n={deg:1,rad:180/Math.PI,grad:9/10,turn:360};function Ee(e){let t="";if((e[u]==="-"||e[u]==="+")&&(t+=e[u++]),t+=Ue(e),e[u]==="."&&/\d/.test(e[u+1])&&(t+=e[u++]+Ue(e)),(e[u]==="e"||e[u]==="E")&&((e[u+1]==="-"||e[u+1]==="+")&&/\d/.test(e[u+2])?t+=e[u++]+e[u++]+Ue(e):/\d/.test(e[u+1])&&(t+=e[u++]+Ue(e))),$t(e)){let o=Ke(e);return o==="deg"||o==="rad"||o==="turn"||o==="grad"?{type:l.Hue,value:t*_n[o]}:void 0}return e[u]==="%"?(u++,{type:l.Percentage,value:+t}):{type:l.Number,value:+t}}function Ue(e){let t="";for(;/\d/.test(e[u]);)t+=e[u++];return t}function Ke(e){let t="";for(;u<e.length&&Xn.test(e[u]);)t+=e[u++];return t}function Sn(e){let t=Ke(e);return e[u]==="("?(u++,{type:l.Function,value:t}):t==="none"?{type:l.None,value:void 0}:{type:l.Ident,value:t}}function Nn(e=""){let t=e.trim(),o=[],n;for(u=0;u<t.length;){if(n=t[u++],n===`
`||n==="	"||n===" "){for(;u<t.length&&(t[u]===`
`||t[u]==="	"||t[u]===" ");)u++;continue}if(n===",")return;if(n===")"){o.push({type:l.ParenClose});continue}if(n==="+"){if(u--,Ze(t)){o.push(Ee(t));continue}return}if(n==="-"){if(u--,Ze(t)){o.push(Ee(t));continue}if($t(t)){o.push({type:l.Ident,value:Ke(t)});continue}return}if(n==="."){if(u--,Ze(t)){o.push(Ee(t));continue}return}if(n==="/"){for(;u<t.length&&(t[u]===`
`||t[u]==="	"||t[u]===" ");)u++;let r;if(Ze(t)&&(r=Ee(t),r.type!==l.Hue)){o.push({type:l.Alpha,value:r});continue}if($t(t)&&Ke(t)==="none"){o.push({type:l.Alpha,value:{type:l.None,value:void 0}});continue}return}if(/\d/.test(n)){u--,o.push(Ee(t));continue}if(Pt.test(n)){u--,o.push(Sn(t));continue}return}return o}function Pn(e){e._i=0;let t=e[e._i++];if(!t||t.type!==l.Function||t.value!=="color"||(t=e[e._i++],t.type!==l.Ident))return;let o=Nt[t.value];if(!o)return;let n={mode:o},r=Yo(e,!1);if(!r)return;let a=Ve(o).channels;for(let i=0,f,d;i<a.length;i++)f=r[i],d=a[i],f.type!==l.None&&(n[d]=f.type===l.Number?f.value:f.value/100,d==="alpha"&&(n[d]=Math.max(0,Math.min(1,n[d]))));return n}function Yo(e,t){let o=[],n;for(;e._i<e.length;){if(n=e[e._i++],n.type===l.None||n.type===l.Number||n.type===l.Alpha||n.type===l.Percentage||t&&n.type===l.Hue){o.push(n);continue}if(n.type===l.ParenClose){if(e._i<e.length)return;continue}return}if(!(o.length<3||o.length>4)){if(o.length===4){if(o[3].type!==l.Alpha)return;o[3]=o[3].value}return o.length===3&&o.push({type:l.None,value:void 0}),o.every(r=>r.type!==l.Alpha)?o:void 0}}function $n(e,t){e._i=0;let o=e[e._i++];if(!o||o.type!==l.Function)return;let n=Yo(e,t);if(n)return n.unshift(o.value),n}var En=e=>{if(typeof e!="string")return;let t=Nn(e),o=t?$n(t,!0):void 0,n,r=0,a=$e.length;for(;r<a;)if((n=$e[r++](e,o))!==void 0)return n;return t?Pn(t):void 0},Pe=En;function An(e,t){if(!t||t[0]!=="rgb"&&t[0]!=="rgba")return;let o={mode:"rgb"},[,n,r,a,i]=t;if(!(n.type===l.Hue||r.type===l.Hue||a.type===l.Hue))return n.type!==l.None&&(o.r=n.type===l.Number?n.value/255:n.value/100),r.type!==l.None&&(o.g=r.type===l.Number?r.value/255:r.value/100),a.type!==l.None&&(o.b=a.type===l.Number?a.value/255:a.value/100),i.type!==l.None&&(o.alpha=Math.min(1,Math.max(0,i.type===l.Number?i.value:i.value/100))),o}var jo=An;var In=e=>e==="transparent"?{mode:"rgb",r:0,g:0,b:0,alpha:0}:void 0,Bo=In;var Wo=(e,t,o)=>e+o*(t-e);var On=e=>{let t=[];for(let o=0;o<e.length-1;o++){let n=e[o],r=e[o+1];n===void 0&&r===void 0?t.push(void 0):n!==void 0&&r!==void 0?t.push([n,r]):t.push(n!==void 0?[n,n]:[r,r])}return t},Go=e=>t=>{let o=On(t);return n=>{let r=n*o.length,a=n>=1?o.length-1:Math.max(Math.floor(r),0),i=o[a];return i===void 0?void 0:e(i[0],i[1],r-a)}};var s=Go(Wo);var c=e=>{let t=!1,o=e.map(n=>n!==void 0?(t=!0,n):1);return t?o:e};var Dn={mode:"rgb",channels:["r","g","b","alpha"],parse:[jo,Se,Jo,Do,Bo,"srgb"],serialize:"srgb",interpolate:{r:s,g:s,b:s,alpha:{use:s,fixup:c}},gamut:!0,white:{r:1,g:1,b:1},black:{r:0,g:0,b:0}},E=Dn;var Et=(e=0)=>Math.pow(Math.abs(e),2.19921875)*Math.sign(e),qn=e=>{let t=Et(e.r),o=Et(e.g),n=Et(e.b),r={mode:"xyz65",x:.5766690429101305*t+.1855582379065463*o+.1882286462349947*n,y:.297344975250536*t+.6273635662554661*o+.0752914584939979*n,z:.0270313613864123*t+.0706888525358272*o+.9913375368376386*n};return e.alpha!==void 0&&(r.alpha=e.alpha),r},At=qn;var It=e=>Math.pow(Math.abs(e),.4547069271758437)*Math.sign(e),Jn=({x:e,y:t,z:o,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r={mode:"a98",r:It(e*2.0415879038107465-t*.5650069742788597-.3447313507783297*o),g:It(e*-.9692436362808798+t*1.8759675015077206+.0415550574071756*o),b:It(e*.0134442806320312-t*.1183623922310184+1.0151749943912058*o)};return n!==void 0&&(r.alpha=n),r},Ot=Jn;var Dt=(e=0)=>{let t=Math.abs(e);return t<=.04045?e/12.92:(Math.sign(e)||1)*Math.pow((t+.055)/1.055,2.4)},Fn=({r:e,g:t,b:o,alpha:n})=>{let r={mode:"lrgb",r:Dt(e),g:Dt(t),b:Dt(o)};return n!==void 0&&(r.alpha=n),r},A=Fn;var Yn=e=>{let{r:t,g:o,b:n,alpha:r}=A(e),a={mode:"xyz65",x:.4123907992659593*t+.357584339383878*o+.1804807884018343*n,y:.2126390058715102*t+.715168678767756*o+.0721923153607337*n,z:.0193308187155918*t+.119194779794626*o+.9505321522496607*n};return r!==void 0&&(a.alpha=r),a},S=Yn;var qt=(e=0)=>{let t=Math.abs(e);return t>.0031308?(Math.sign(e)||1)*(1.055*Math.pow(t,.4166666666666667)-.055):e*12.92},jn=({r:e,g:t,b:o,alpha:n},r="rgb")=>{let a={mode:r,r:qt(e),g:qt(t),b:qt(o)};return n!==void 0&&(a.alpha=n),a},I=jn;var Bn=({x:e,y:t,z:o,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r=I({r:e*3.2409699419045226-t*1.537383177570094-.4986107602930034*o,g:e*-.9692436362808796+t*1.8759675015077204+.0415550574071756*o,b:e*.0556300796969936-t*.2039769588889765+1.0569715142428784*o});return n!==void 0&&(r.alpha=n),r},N=Bn;var Wn={...E,mode:"a98",parse:["a98-rgb"],serialize:"a98-rgb",fromMode:{rgb:e=>Ot(S(e)),xyz65:Ot},toMode:{rgb:e=>N(At(e)),xyz65:At}},Vo=Wn;var Gn=e=>(e=e%360)<0?e+360:e,x=Gn;var Vn=(e,t)=>e.map((o,n,r)=>{if(o===void 0)return o;let a=x(o);return n===0||e[n-1]===void 0?a:t(a-x(r[n-1]))}).reduce((o,n)=>!o.length||n===void 0||o[o.length-1]===void 0?(o.push(n),o):(o.push(n+o[o.length-1]),o),[]),z=e=>Vn(e,t=>Math.abs(t)<=180?t:t-360*Math.sign(t));var T=[-.14861,1.78277,-.29227,-.90649,1.97294,0],Zo=Math.PI/180,Uo=180/Math.PI;var Ko=T[3]*T[4],Qo=T[1]*T[4],er=T[1]*T[2]-T[0]*T[3],Zn=({r:e,g:t,b:o,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r=(er*o+e*Ko-t*Qo)/(er+Ko-Qo),a=o-r,i=(T[4]*(t-r)-T[2]*a)/T[3],f={mode:"cubehelix",l:r,s:r===0||r===1?void 0:Math.sqrt(a*a+i*i)/(T[4]*r*(1-r))};return f.s&&(f.h=Math.atan2(i,a)*Uo-120),n!==void 0&&(f.alpha=n),f},tr=Zn;var Un=({h:e,s:t,l:o,alpha:n})=>{let r={mode:"rgb"};e=(e===void 0?0:e+120)*Zo,o===void 0&&(o=0);let a=t===void 0?0:t*o*(1-o),i=Math.cos(e),f=Math.sin(e);return r.r=o+a*(T[0]*i+T[1]*f),r.g=o+a*(T[2]*i+T[3]*f),r.b=o+a*(T[4]*i+T[5]*f),n!==void 0&&(r.alpha=n),r},or=Un;var Z=(e,t)=>{if(e.h===void 0||t.h===void 0||!e.s||!t.s)return 0;let o=x(e.h),n=x(t.h),r=Math.sin((n-o+360)/2*Math.PI/180);return 2*Math.sqrt(e.s*t.s)*r},rr=(e,t)=>{if(e.h===void 0||t.h===void 0)return 0;let o=x(e.h),n=x(t.h);return Math.abs(n-o)>180?o-(n-360*Math.sign(n-o)):n-o},U=(e,t)=>{if(e.h===void 0||t.h===void 0||!e.c||!t.c)return 0;let o=x(e.h),n=x(t.h),r=Math.sin((n-o+360)/2*Math.PI/180);return 2*Math.sqrt(e.c*t.c)*r};var L=e=>{let t=e.reduce((n,r)=>{if(r!==void 0){let a=r*Math.PI/180;n.sin+=Math.sin(a),n.cos+=Math.cos(a)}return n},{sin:0,cos:0}),o=Math.atan2(t.sin,t.cos)*180/Math.PI;return o<0?360+o:o};var Kn={mode:"cubehelix",channels:["h","s","l","alpha"],parse:["--cubehelix"],serialize:"--cubehelix",ranges:{h:[0,360],s:[0,4.614],l:[0,1]},fromMode:{rgb:tr},toMode:{rgb:or},interpolate:{h:{use:s,fixup:z},s,l:s,alpha:{use:s,fixup:c}},difference:{h:Z},average:{h:L}},nr=Kn;var Qn=({l:e,a:t,b:o,alpha:n},r="lch")=>{t===void 0&&(t=0),o===void 0&&(o=0);let a=Math.sqrt(t*t+o*o),i={mode:r,l:e,c:a};return a&&(i.h=x(Math.atan2(o,t)*180/Math.PI)),n!==void 0&&(i.alpha=n),i},P=Qn;var ea=({l:e,c:t,h:o,alpha:n},r="lab")=>{o===void 0&&(o=0);let a={mode:r,l:e,a:t?t*Math.cos(o/180*Math.PI):0,b:t?t*Math.sin(o/180*Math.PI):0};return n!==void 0&&(a.alpha=n),a},$=ea;var Qe=Math.pow(29,3)/Math.pow(3,3),et=Math.pow(6,3)/Math.pow(29,3);var M={X:.9642956764295677,Y:1,Z:.8251046025104602},K={X:.3127/.329,Y:1,Z:(1-.3127-.329)/.329},x0=Math.pow(29,3)/Math.pow(3,3),v0=Math.pow(6,3)/Math.pow(29,3);var Jt=e=>Math.pow(e,3)>et?Math.pow(e,3):(116*e-16)/Qe,ta=({l:e,a:t,b:o,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r=(e+16)/116,a=t/500+r,i=r-o/200,f={mode:"xyz65",x:Jt(a)*K.X,y:Jt(r)*K.Y,z:Jt(i)*K.Z};return n!==void 0&&(f.alpha=n),f},tt=ta;var oa=e=>N(tt(e)),Q=oa;var Ft=e=>e>et?Math.cbrt(e):(Qe*e+16)/116,ra=({x:e,y:t,z:o,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r=Ft(e/K.X),a=Ft(t/K.Y),i=Ft(o/K.Z),f={mode:"lab65",l:116*a-16,a:500*(r-a),b:200*(a-i)};return n!==void 0&&(f.alpha=n),f},ot=ra;var na=e=>{let t=ot(S(e));return e.r===e.b&&e.b===e.g&&(t.a=t.b=0),t},ee=na;var ie=.14444444444444443*Math.PI,pe=Math.cos(ie),ue=Math.sin(ie),rt=100/Math.log(139/100);var aa=({l:e,c:t,h:o,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r={mode:"lab65",l:(Math.exp(e*1/rt)-1)/.0039},a=(Math.exp(.0435*t*1*1)-1)/.075,i=a*Math.cos(o/180*Math.PI-ie),f=a*Math.sin(o/180*Math.PI-ie);return r.a=i*pe-f/.83*ue,r.b=i*ue+f/.83*pe,n!==void 0&&(r.alpha=n),r},Ie=aa;var ia=({l:e,a:t,b:o,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r=t*pe+o*ue,a=.83*(o*pe-t*ue),i=Math.sqrt(r*r+a*a),f={mode:"dlch",l:rt/1*Math.log(1+.0039*e),c:Math.log(1+.075*i)/(.0435*1*1)};return f.c&&(f.h=x((Math.atan2(a,r)+ie)/Math.PI*180)),n!==void 0&&(f.alpha=n),f},Oe=ia;var ar=e=>Ie(P(e,"dlch")),ir=e=>$(Oe(e),"dlab"),fa={mode:"dlab",parse:["--din99o-lab"],serialize:"--din99o-lab",toMode:{lab65:ar,rgb:e=>Q(ar(e))},fromMode:{lab65:ir,rgb:e=>ir(ee(e))},channels:["l","a","b","alpha"],ranges:{l:[0,100],a:[-40.09,45.501],b:[-40.469,44.344]},interpolate:{l:s,a:s,b:s,alpha:{use:s,fixup:c}}},fr=fa;var la={mode:"dlch",parse:["--din99o-lch"],serialize:"--din99o-lch",toMode:{lab65:Ie,dlab:e=>$(e,"dlab"),rgb:e=>Q(Ie(e))},fromMode:{lab65:Oe,dlab:e=>P(e,"dlch"),rgb:e=>Oe(ee(e))},channels:["l","c","h","alpha"],ranges:{l:[0,100],c:[0,51.484],h:[0,360]},interpolate:{l:s,c:s,h:{use:s,fixup:z},alpha:{use:s,fixup:c}},difference:{h:U},average:{h:L}},lr=la;function jt({h:e,s:t,i:o,alpha:n}){e=x(e!==void 0?e:0),t===void 0&&(t=0),o===void 0&&(o=0);let r=Math.abs(e/60%2-1),a;switch(Math.floor(e/60)){case 0:a={r:o*(1+t*(3/(2-r)-1)),g:o*(1+t*(3*(1-r)/(2-r)-1)),b:o*(1-t)};break;case 1:a={r:o*(1+t*(3*(1-r)/(2-r)-1)),g:o*(1+t*(3/(2-r)-1)),b:o*(1-t)};break;case 2:a={r:o*(1-t),g:o*(1+t*(3/(2-r)-1)),b:o*(1+t*(3*(1-r)/(2-r)-1))};break;case 3:a={r:o*(1-t),g:o*(1+t*(3*(1-r)/(2-r)-1)),b:o*(1+t*(3/(2-r)-1))};break;case 4:a={r:o*(1+t*(3*(1-r)/(2-r)-1)),g:o*(1-t),b:o*(1+t*(3/(2-r)-1))};break;case 5:a={r:o*(1+t*(3/(2-r)-1)),g:o*(1-t),b:o*(1+t*(3*(1-r)/(2-r)-1))};break;default:a={r:o*(1-t),g:o*(1-t),b:o*(1-t)}}return a.mode="rgb",n!==void 0&&(a.alpha=n),a}function Bt({r:e,g:t,b:o,alpha:n}){e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r=Math.max(e,t,o),a=Math.min(e,t,o),i={mode:"hsi",s:e+t+o===0?0:1-3*a/(e+t+o),i:(e+t+o)/3};return r-a!==0&&(i.h=(r===e?(t-o)/(r-a)+(t<o)*6:r===t?(o-e)/(r-a)+2:(e-t)/(r-a)+4)*60),n!==void 0&&(i.alpha=n),i}var sa={mode:"hsi",toMode:{rgb:jt},parse:["--hsi"],serialize:"--hsi",fromMode:{rgb:Bt},channels:["h","s","i","alpha"],ranges:{h:[0,360]},gamut:"rgb",interpolate:{h:{use:s,fixup:z},s,i:s,alpha:{use:s,fixup:c}},difference:{h:Z},average:{h:L}},sr=sa;function Wt({h:e,s:t,l:o,alpha:n}){e=x(e!==void 0?e:0),t===void 0&&(t=0),o===void 0&&(o=0);let r=o+t*(o<.5?o:1-o),a=r-(r-o)*2*Math.abs(e/60%2-1),i;switch(Math.floor(e/60)){case 0:i={r,g:a,b:2*o-r};break;case 1:i={r:a,g:r,b:2*o-r};break;case 2:i={r:2*o-r,g:r,b:a};break;case 3:i={r:2*o-r,g:a,b:r};break;case 4:i={r:a,g:2*o-r,b:r};break;case 5:i={r,g:2*o-r,b:a};break;default:i={r:2*o-r,g:2*o-r,b:2*o-r}}return i.mode="rgb",n!==void 0&&(i.alpha=n),i}function Gt({r:e,g:t,b:o,alpha:n}){e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r=Math.max(e,t,o),a=Math.min(e,t,o),i={mode:"hsl",s:r===a?0:(r-a)/(1-Math.abs(r+a-1)),l:.5*(r+a)};return r-a!==0&&(i.h=(r===e?(t-o)/(r-a)+(t<o)*6:r===t?(o-e)/(r-a)+2:(e-t)/(r-a)+4)*60),n!==void 0&&(i.alpha=n),i}var da=(e,t)=>{switch(t){case"deg":return+e;case"rad":return e/Math.PI*180;case"grad":return e/10*9;case"turn":return e*360}},dr=da;var pa=new RegExp(`^hsla?\\(\\s*${qo}${G}${ae}${G}${ae}\\s*(?:,\\s*${Ne}\\s*)?\\)$`),ua=e=>{let t=e.match(pa);if(!t)return;let o={mode:"hsl"};return t[3]!==void 0?o.h=+t[3]:t[1]!==void 0&&t[2]!==void 0&&(o.h=dr(t[1],t[2])),t[4]!==void 0&&(o.s=Math.min(Math.max(0,t[4]/100),1)),t[5]!==void 0&&(o.l=Math.min(Math.max(0,t[5]/100),1)),t[6]!==void 0?o.alpha=Math.max(0,Math.min(1,t[6]/100)):t[7]!==void 0&&(o.alpha=Math.max(0,Math.min(1,+t[7]))),o},pr=ua;function ma(e,t){if(!t||t[0]!=="hsl"&&t[0]!=="hsla")return;let o={mode:"hsl"},[,n,r,a,i]=t;if(n.type!==l.None){if(n.type===l.Percentage)return;o.h=n.value}if(r.type!==l.None){if(r.type===l.Hue)return;o.s=r.value/100}if(a.type!==l.None){if(a.type===l.Hue)return;o.l=a.value/100}return i.type!==l.None&&(o.alpha=Math.min(1,Math.max(0,i.type===l.Number?i.value:i.value/100))),o}var ur=ma;var ca={mode:"hsl",toMode:{rgb:Wt},fromMode:{rgb:Gt},channels:["h","s","l","alpha"],ranges:{h:[0,360]},gamut:"rgb",parse:[ur,pr],serialize:e=>`hsl(${e.h!==void 0?e.h:"none"} ${e.s!==void 0?e.s*100+"%":"none"} ${e.l!==void 0?e.l*100+"%":"none"}${e.alpha<1?` / ${e.alpha}`:""})`,interpolate:{h:{use:s,fixup:z},s,l:s,alpha:{use:s,fixup:c}},difference:{h:Z},average:{h:L}},nt=ca;function De({h:e,s:t,v:o,alpha:n}){e=x(e!==void 0?e:0),t===void 0&&(t=0),o===void 0&&(o=0);let r=Math.abs(e/60%2-1),a;switch(Math.floor(e/60)){case 0:a={r:o,g:o*(1-t*r),b:o*(1-t)};break;case 1:a={r:o*(1-t*r),g:o,b:o*(1-t)};break;case 2:a={r:o*(1-t),g:o,b:o*(1-t*r)};break;case 3:a={r:o*(1-t),g:o*(1-t*r),b:o};break;case 4:a={r:o*(1-t*r),g:o*(1-t),b:o};break;case 5:a={r:o,g:o*(1-t),b:o*(1-t*r)};break;default:a={r:o*(1-t),g:o*(1-t),b:o*(1-t)}}return a.mode="rgb",n!==void 0&&(a.alpha=n),a}function qe({r:e,g:t,b:o,alpha:n}){e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r=Math.max(e,t,o),a=Math.min(e,t,o),i={mode:"hsv",s:r===0?0:1-a/r,v:r};return r-a!==0&&(i.h=(r===e?(t-o)/(r-a)+(t<o)*6:r===t?(o-e)/(r-a)+2:(e-t)/(r-a)+4)*60),n!==void 0&&(i.alpha=n),i}var ha={mode:"hsv",toMode:{rgb:De},parse:["--hsv"],serialize:"--hsv",fromMode:{rgb:qe},channels:["h","s","v","alpha"],ranges:{h:[0,360]},gamut:"rgb",interpolate:{h:{use:s,fixup:z},s,v:s,alpha:{use:s,fixup:c}},difference:{h:Z},average:{h:L}},at=ha;function Vt({h:e,w:t,b:o,alpha:n}){if(t===void 0&&(t=0),o===void 0&&(o=0),t+o>1){let r=t+o;t/=r,o/=r}return De({h:e,s:o===1?1:1-t/(1-o),v:1-o,alpha:n})}function Zt(e){let t=qe(e);if(t===void 0)return;let o=t.s!==void 0?t.s:0,n=t.v!==void 0?t.v:0,r={mode:"hwb",w:(1-o)*n,b:1-n};return t.h!==void 0&&(r.h=t.h),t.alpha!==void 0&&(r.alpha=t.alpha),r}function ba(e,t){if(!t||t[0]!=="hwb")return;let o={mode:"hwb"},[,n,r,a,i]=t;if(n.type!==l.None){if(n.type===l.Percentage)return;o.h=n.value}if(r.type!==l.None){if(r.type===l.Hue)return;o.w=r.value/100}if(a.type!==l.None){if(a.type===l.Hue)return;o.b=a.value/100}return i.type!==l.None&&(o.alpha=Math.min(1,Math.max(0,i.type===l.Number?i.value:i.value/100))),o}var mr=ba;var ga={mode:"hwb",toMode:{rgb:Vt},fromMode:{rgb:Zt},channels:["h","w","b","alpha"],ranges:{h:[0,360]},gamut:"rgb",parse:[mr],serialize:e=>`hwb(${e.h!==void 0?e.h:"none"} ${e.w!==void 0?e.w*100+"%":"none"} ${e.b!==void 0?e.b*100+"%":"none"}${e.alpha<1?` / ${e.alpha}`:""})`,interpolate:{h:{use:s,fixup:z},w:s,b:s,alpha:{use:s,fixup:c}},difference:{h:rr},average:{h:L}},cr=ga;var me=.1593017578125,hr=78.84375,ce=.8359375,he=18.8515625,be=18.6875;function it(e){if(e<0)return 0;let t=Math.pow(e,1/hr);return 1e4*Math.pow(Math.max(0,t-ce)/(he-be*t),1/me)}function ft(e){if(e<0)return 0;let t=Math.pow(e/1e4,me);return Math.pow((ce+he*t)/(1+be*t),hr)}var Ut=e=>Math.max(e/203,0),va=({i:e,t,p:o,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r=it(e+.008609037037932761*t+.11102962500302593*o),a=it(e-.00860903703793275*t-.11102962500302599*o),i=it(e+.5600313357106791*t-.32062717498731885*o),f={mode:"xyz65",x:Ut(2.070152218389422*r-1.3263473389671556*a+.2066510476294051*i),y:Ut(.3647385209748074*r+.680566024947227*a-.0453045459220346*i),z:Ut(-.049747207535812*r-.0492609666966138*a+1.1880659249923042*i)};return n!==void 0&&(f.alpha=n),f},Kt=va;var Qt=(e=0)=>Math.max(e*203,0),Ma=({x:e,y:t,z:o,alpha:n})=>{let r=Qt(e),a=Qt(t),i=Qt(o),f=ft(.3592832590121217*r+.6976051147779502*a-.0358915932320289*i),d=ft(-.1920808463704995*r+1.1004767970374323*a+.0753748658519118*i),p=ft(.0070797844607477*r+.0748396662186366*a+.8433265453898765*i),m=.5*f+.5*d,h=1.61376953125*f-3.323486328125*d+1.709716796875*p,b=4.378173828125*f-4.24560546875*d-.132568359375*p,v={mode:"itp",i:m,t:h,p:b};return n!==void 0&&(v.alpha=n),v},eo=Ma;var ya={mode:"itp",channels:["i","t","p","alpha"],parse:["--ictcp"],serialize:"--ictcp",toMode:{xyz65:Kt,rgb:e=>N(Kt(e))},fromMode:{xyz65:eo,rgb:e=>eo(S(e))},ranges:{i:[0,.581],t:[-.369,.272],p:[-.164,.331]},interpolate:{i:s,t:s,p:s,alpha:{use:s,fixup:c}}},br=ya;var Ta=134.03437499999998,ka=16295499532821565e-27,to=e=>{if(e<0)return 0;let t=Math.pow(e/1e4,me);return Math.pow((ce+he*t)/(1+be*t),Ta)},oo=(e=0)=>Math.max(e*203,0),wa=({x:e,y:t,z:o,alpha:n})=>{e=oo(e),t=oo(t),o=oo(o);let r=1.15*e-.15*o,a=.66*t+.34*e,i=to(.41478972*r+.579999*a+.014648*o),f=to(-.20151*r+1.120649*a+.0531008*o),d=to(-.0166008*r+.2648*a+.6684799*o),p=(i+f)/2,m={mode:"jab",j:.44*p/(1-.56*p)-ka,a:3.524*i-4.066708*f+.542708*d,b:.199076*i+1.096799*f-1.295875*d};return n!==void 0&&(m.alpha=n),m},lt=wa;var za=134.03437499999998,gr=16295499532821565e-27,ro=e=>{if(e<0)return 0;let t=Math.pow(e,1/za);return 1e4*Math.pow((ce-t)/(be*t-he),1/me)},no=e=>e/203,La=({j:e,a:t,b:o,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r=(e+gr)/(.44+.56*(e+gr)),a=ro(r+.13860504*t+.058047316*o),i=ro(r-.13860504*t-.058047316*o),f=ro(r-.096019242*t-.8118919*o),d={mode:"xyz65",x:no(1.661373024652174*a-.914523081304348*i+.23136208173913045*f),y:no(-.3250758611844533*a+1.571847026732543*i-.21825383453227928*f),z:no(-.090982811*a-.31272829*i+1.5227666*f)};return n!==void 0&&(d.alpha=n),d},st=La;var Ra=e=>{let t=lt(S(e));return e.r===e.b&&e.b===e.g&&(t.a=t.b=0),t},dt=Ra;var Ca=e=>N(st(e)),pt=Ca;var Ha={mode:"jab",channels:["j","a","b","alpha"],parse:["--jzazbz"],serialize:"--jzazbz",fromMode:{rgb:dt,xyz65:lt},toMode:{rgb:pt,xyz65:st},ranges:{j:[0,.222],a:[-.109,.129],b:[-.185,.134]},interpolate:{j:s,a:s,b:s,alpha:{use:s,fixup:c}}},xr=Ha;var Xa=({j:e,a:t,b:o,alpha:n})=>{t===void 0&&(t=0),o===void 0&&(o=0);let r=Math.sqrt(t*t+o*o),a={mode:"jch",j:e,c:r};return r&&(a.h=x(Math.atan2(o,t)*180/Math.PI)),n!==void 0&&(a.alpha=n),a},ao=Xa;var _a=({j:e,c:t,h:o,alpha:n})=>{o===void 0&&(o=0);let r={mode:"jab",j:e,a:t?t*Math.cos(o/180*Math.PI):0,b:t?t*Math.sin(o/180*Math.PI):0};return n!==void 0&&(r.alpha=n),r},io=_a;var Sa={mode:"jch",parse:["--jzczhz"],serialize:"--jzczhz",toMode:{jab:io,rgb:e=>pt(io(e))},fromMode:{rgb:e=>ao(dt(e)),jab:ao},channels:["j","c","h","alpha"],ranges:{j:[0,.221],c:[0,.19],h:[0,360]},interpolate:{h:{use:s,fixup:z},c:s,j:s,alpha:{use:s,fixup:c}},difference:{h:U},average:{h:L}},vr=Sa;var te=Math.pow(29,3)/Math.pow(3,3),ge=Math.pow(6,3)/Math.pow(29,3);var fo=e=>Math.pow(e,3)>ge?Math.pow(e,3):(116*e-16)/te,Na=({l:e,a:t,b:o,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r=(e+16)/116,a=t/500+r,i=r-o/200,f={mode:"xyz50",x:fo(a)*M.X,y:fo(r)*M.Y,z:fo(i)*M.Z};return n!==void 0&&(f.alpha=n),f},xe=Na;var Pa=({x:e,y:t,z:o,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r=I({r:e*3.1341359569958707-t*1.6173863321612538-.4906619460083532*o,g:e*-.978795502912089+t*1.916254567259524+.03344273116131949*o,b:e*.07195537988411677-t*.2289768264158322+1.405386058324125*o});return n!==void 0&&(r.alpha=n),r},q=Pa;var $a=e=>q(xe(e)),ut=$a;var Ea=e=>{let{r:t,g:o,b:n,alpha:r}=A(e),a={mode:"xyz50",x:.436065742824811*t+.3851514688337912*o+.14307845442264197*n,y:.22249319175623702*t+.7168870538238823*o+.06061979053616537*n,z:.013923904500943465*t+.09708128566574634*o+.7140993584005155*n};return r!==void 0&&(a.alpha=r),a},J=Ea;var lo=e=>e>ge?Math.cbrt(e):(te*e+16)/116,Aa=({x:e,y:t,z:o,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r=lo(e/M.X),a=lo(t/M.Y),i=lo(o/M.Z),f={mode:"lab",l:116*a-16,a:500*(r-a),b:200*(a-i)};return n!==void 0&&(f.alpha=n),f},ve=Aa;var Ia=e=>{let t=ve(J(e));return e.r===e.b&&e.b===e.g&&(t.a=t.b=0),t},mt=Ia;function Oa(e,t){if(!t||t[0]!=="lab")return;let o={mode:"lab"},[,n,r,a,i]=t;if(!(n.type===l.Hue||r.type===l.Hue||a.type===l.Hue))return n.type!==l.None&&(o.l=Math.min(Math.max(0,n.value),100)),r.type!==l.None&&(o.a=r.type===l.Number?r.value:r.value*125/100),a.type!==l.None&&(o.b=a.type===l.Number?a.value:a.value*125/100),i.type!==l.None&&(o.alpha=Math.min(1,Math.max(0,i.type===l.Number?i.value:i.value/100))),o}var Mr=Oa;var Da={mode:"lab",toMode:{xyz50:xe,rgb:ut},fromMode:{xyz50:ve,rgb:mt},channels:["l","a","b","alpha"],ranges:{l:[0,100],a:[-125,125],b:[-125,125]},parse:[Mr],serialize:e=>`lab(${e.l!==void 0?e.l:"none"} ${e.a!==void 0?e.a:"none"} ${e.b!==void 0?e.b:"none"}${e.alpha<1?` / ${e.alpha}`:""})`,interpolate:{l:s,a:s,b:s,alpha:{use:s,fixup:c}}},Me=Da;var qa={...Me,mode:"lab65",parse:["--lab-d65"],serialize:"--lab-d65",toMode:{xyz65:tt,rgb:Q},fromMode:{xyz65:ot,rgb:ee},ranges:{l:[0,100],a:[-125,125],b:[-125,125]}},yr=qa;function Ja(e,t){if(!t||t[0]!=="lch")return;let o={mode:"lch"},[,n,r,a,i]=t;if(n.type!==l.None){if(n.type===l.Hue)return;o.l=Math.min(Math.max(0,n.value),100)}if(r.type!==l.None&&(o.c=Math.max(0,r.type===l.Number?r.value:r.value*150/100)),a.type!==l.None){if(a.type===l.Percentage)return;o.h=a.value}return i.type!==l.None&&(o.alpha=Math.min(1,Math.max(0,i.type===l.Number?i.value:i.value/100))),o}var Tr=Ja;var Fa={mode:"lch",toMode:{lab:$,rgb:e=>ut($(e))},fromMode:{rgb:e=>P(mt(e)),lab:P},channels:["l","c","h","alpha"],ranges:{l:[0,100],c:[0,150],h:[0,360]},parse:[Tr],serialize:e=>`lch(${e.l!==void 0?e.l:"none"} ${e.c!==void 0?e.c:"none"} ${e.h!==void 0?e.h:"none"}${e.alpha<1?` / ${e.alpha}`:""})`,interpolate:{h:{use:s,fixup:z},c:s,l:s,alpha:{use:s,fixup:c}},difference:{h:U},average:{h:L}},ye=Fa;var Ya={...ye,mode:"lch65",parse:["--lch-d65"],serialize:"--lch-d65",toMode:{lab65:e=>$(e,"lab65"),rgb:e=>Q($(e,"lab65"))},fromMode:{rgb:e=>P(ee(e),"lch65"),lab65:e=>P(e,"lch65")},ranges:{l:[0,100],c:[0,150],h:[0,360]}},kr=Ya;var ja=({l:e,u:t,v:o,alpha:n})=>{t===void 0&&(t=0),o===void 0&&(o=0);let r=Math.sqrt(t*t+o*o),a={mode:"lchuv",l:e,c:r};return r&&(a.h=x(Math.atan2(o,t)*180/Math.PI)),n!==void 0&&(a.alpha=n),a},so=ja;var Ba=({l:e,c:t,h:o,alpha:n})=>{o===void 0&&(o=0);let r={mode:"luv",l:e,u:t?t*Math.cos(o/180*Math.PI):0,v:t?t*Math.sin(o/180*Math.PI):0};return n!==void 0&&(r.alpha=n),r},po=Ba;var wr=(e,t,o)=>4*e/(e+15*t+3*o),zr=(e,t,o)=>9*t/(e+15*t+3*o),Wa=wr(M.X,M.Y,M.Z),Ga=zr(M.X,M.Y,M.Z),Va=e=>e<=ge?te*e:116*Math.cbrt(e)-16,Za=({x:e,y:t,z:o,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r=Va(t/M.Y),a=wr(e,t,o),i=zr(e,t,o);!isFinite(a)||!isFinite(i)?r=a=i=0:(a=13*r*(a-Wa),i=13*r*(i-Ga));let f={mode:"luv",l:r,u:a,v:i};return n!==void 0&&(f.alpha=n),f},Je=Za;var Ua=(e,t,o)=>4*e/(e+15*t+3*o),Ka=(e,t,o)=>9*t/(e+15*t+3*o),Qa=Ua(M.X,M.Y,M.Z),ei=Ka(M.X,M.Y,M.Z),ti=({l:e,u:t,v:o,alpha:n})=>{if(e===void 0&&(e=0),e===0)return{mode:"xyz50",x:0,y:0,z:0};t===void 0&&(t=0),o===void 0&&(o=0);let r=t/(13*e)+Qa,a=o/(13*e)+ei,i=M.Y*(e<=8?e/te:Math.pow((e+16)/116,3)),f=i*(9*r)/(4*a),d=i*(12-3*r-20*a)/(4*a),p={mode:"xyz50",x:f,y:i,z:d};return n!==void 0&&(p.alpha=n),p},Fe=ti;var oi=e=>so(Je(J(e))),ri=e=>q(Fe(po(e))),ni={mode:"lchuv",toMode:{luv:po,rgb:ri},fromMode:{rgb:oi,luv:so},channels:["l","c","h","alpha"],parse:["--lchuv"],serialize:"--lchuv",ranges:{l:[0,100],c:[0,176.956],h:[0,360]},interpolate:{h:{use:s,fixup:z},c:s,l:s,alpha:{use:s,fixup:c}},difference:{h:U},average:{h:L}},Lr=ni;var ai={...E,mode:"lrgb",toMode:{rgb:I},fromMode:{rgb:A},parse:["srgb-linear"],serialize:"srgb-linear"},Rr=ai;var ii={mode:"luv",toMode:{xyz50:Fe,rgb:e=>q(Fe(e))},fromMode:{xyz50:Je,rgb:e=>Je(J(e))},channels:["l","u","v","alpha"],parse:["--luv"],serialize:"--luv",ranges:{l:[0,100],u:[-84.936,175.042],v:[-125.882,87.243]},interpolate:{l:s,u:s,v:s,alpha:{use:s,fixup:c}}},Cr=ii;var fi=({r:e,g:t,b:o,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r=Math.cbrt(.412221469470763*e+.5363325372617348*t+.0514459932675022*o),a=Math.cbrt(.2119034958178252*e+.6806995506452344*t+.1073969535369406*o),i=Math.cbrt(.0883024591900564*e+.2817188391361215*t+.6299787016738222*o),f={mode:"oklab",l:.210454268309314*r+.7936177747023054*a-.0040720430116193*i,a:1.9779985324311684*r-2.42859224204858*a+.450593709617411*i,b:.0259040424655478*r+.7827717124575296*a-.8086757549230774*i};return n!==void 0&&(f.alpha=n),f},ct=fi;var li=e=>{let t=ct(A(e));return e.r===e.b&&e.b===e.g&&(t.a=t.b=0),t},oe=li;var si=({l:e,a:t,b:o,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r=Math.pow(e+.3963377773761749*t+.2158037573099136*o,3),a=Math.pow(e-.1055613458156586*t-.0638541728258133*o,3),i=Math.pow(e-.0894841775298119*t-1.2914855480194092*o,3),f={mode:"lrgb",r:4.076741636075957*r-3.3077115392580616*a+.2309699031821044*i,g:-1.2684379732850317*r+2.6097573492876887*a-.3413193760026573*i,b:-.0041960761386756*r-.7034186179359362*a+1.7076146940746117*i};return n!==void 0&&(f.alpha=n),f},F=si;var di=e=>I(F(e)),re=di;function Ye(e){let n=1.170873786407767;return .5*(n*e-.206+Math.sqrt((n*e-.206)*(n*e-.206)+4*.03*n*e))}function fe(e){return(e*e+.206*e)/(1.170873786407767*(e+.03))}function pi(e,t){let o,n,r,a,i,f,d,p;-1.88170328*e-.80936493*t>1?(o=1.19086277,n=1.76576728,r=.59662641,a=.75515197,i=.56771245,f=4.0767416621,d=-3.3077115913,p=.2309699292):1.81444104*e-1.19445276*t>1?(o=.73956515,n=-.45954404,r=.08285427,a=.1254107,i=.14503204,f=-1.2684380046,d=2.6097574011,p=-.3413193965):(o=1.35733652,n=-.00915799,r=-1.1513021,a=-.50559606,i=.00692167,f=-.0041960863,d=-.7034186147,p=1.707614701);let m=o+n*e+r*t+a*e*e+i*e*t,h=.3963377774*e+.2158037573*t,b=-.1055613458*e-.0638541728*t,v=-.0894841775*e-1.291485548*t;{let k=1+m*h,R=1+m*b,w=1+m*v,_=k*k*k,C=R*R*R,W=w*w*w,ze=3*h*k*k,Le=3*b*R*R,Re=3*v*w*w,Ce=6*h*h*k,He=6*b*b*R,Xe=6*v*v*w,de=f*_+d*C+p*W,ne=f*ze+d*Le+p*Re,_e=f*Ce+d*He+p*Xe;m=m-de*ne/(ne*ne-.5*de*_e)}return m}function uo(e,t){let o=pi(e,t),n=F({l:1,a:o*e,b:o*t}),r=Math.cbrt(1/Math.max(n.r,n.g,n.b)),a=r*o;return[r,a]}function ui(e,t,o,n,r,a=null){a||(a=uo(e,t));let i;if((o-r)*a[1]-(a[0]-r)*n<=0)i=a[1]*r/(n*a[0]+a[1]*(r-o));else{i=a[1]*(r-1)/(n*(a[0]-1)+a[1]*(r-o));{let f=o-r,d=n,p=.3963377774*e+.2158037573*t,m=-.1055613458*e-.0638541728*t,h=-.0894841775*e-1.291485548*t,b=f+d*p,v=f+d*m,k=f+d*h;{let R=r*(1-i)+i*o,w=i*n,_=R+w*p,C=R+w*m,W=R+w*h,ze=_*_*_,Le=C*C*C,Re=W*W*W,Ce=3*b*_*_,He=3*v*C*C,Xe=3*k*W*W,de=6*b*b*_,ne=6*v*v*C,_e=6*k*k*W,No=4.0767416621*ze-3.3077115913*Le+.2309699292*Re-1,Lt=4.0767416621*Ce-3.3077115913*He+.2309699292*Xe,ln=4.0767416621*de-3.3077115913*ne+.2309699292*_e,Po=Lt/(Lt*Lt-.5*No*ln),Rt=-No*Po,$o=-1.2684380046*ze+2.6097574011*Le-.3413193965*Re-1,Ct=-1.2684380046*Ce+2.6097574011*He-.3413193965*Xe,sn=-1.2684380046*de+2.6097574011*ne-.3413193965*_e,Eo=Ct/(Ct*Ct-.5*$o*sn),Ht=-$o*Eo,Ao=-.0041960863*ze-.7034186147*Le+1.707614701*Re-1,Xt=-.0041960863*Ce-.7034186147*He+1.707614701*Xe,dn=-.0041960863*de-.7034186147*ne+1.707614701*_e,Io=Xt/(Xt*Xt-.5*Ao*dn),_t=-Ao*Io;Rt=Po>=0?Rt:1e6,Ht=Eo>=0?Ht:1e6,_t=Io>=0?_t:1e6,i+=Math.min(Rt,Math.min(Ht,_t))}}}return i}function je(e,t,o=null){o||(o=uo(e,t));let n=o[0],r=o[1];return[r/n,r/(1-n)]}function ht(e,t,o){let n=uo(t,o),r=ui(t,o,e,1,e,n),a=je(t,o,n),i=.11516993+1/(7.4477897+4.1590124*o+t*(-2.19557347+1.75198401*o+t*(-2.13704948-10.02301043*o+t*(-4.24894561+5.38770819*o+4.69891013*t)))),f=.11239642+1/(1.6132032-.68124379*o+t*(.40370612+.90148123*o+t*(-.27087943+.6122399*o+t*(.00299215-.45399568*o-.14661872*t)))),d=r/Math.min(e*a[0],(1-e)*a[1]),p=e*i,m=(1-e)*f,h=.9*d*Math.sqrt(Math.sqrt(1/(1/(p*p*p*p)+1/(m*m*m*m))));return p=e*.4,m=(1-e)*.8,[Math.sqrt(1/(1/(p*p)+1/(m*m))),h,r]}function bt(e){let t=e.l!==void 0?e.l:0,o=e.a!==void 0?e.a:0,n=e.b!==void 0?e.b:0,r={mode:"okhsl",l:Ye(t)};e.alpha!==void 0&&(r.alpha=e.alpha);let a=Math.sqrt(o*o+n*n);if(!a)return r.s=0,r;let[i,f,d]=ht(t,o/a,n/a),p;if(a<f){let m=0,h=.8*i,b=1-h/f;p=(a-m)/(h+b*(a-m))*.8}else{let m=f,h=.2*f*f*1.25*1.25/i,b=1-h/(d-f);p=.8+.2*((a-m)/(h+b*(a-m)))}return p&&(r.s=p,r.h=x(Math.atan2(n,o)*180/Math.PI)),r}function gt(e){let t=e.h!==void 0?e.h:0,o=e.s!==void 0?e.s:0,n=e.l!==void 0?e.l:0,r={mode:"oklab",l:fe(n)};if(e.alpha!==void 0&&(r.alpha=e.alpha),!o||n===1)return r.a=r.b=0,r;let a=Math.cos(t/180*Math.PI),i=Math.sin(t/180*Math.PI),[f,d,p]=ht(r.l,a,i),m,h,b,v;o<.8?(m=1.25*o,h=0,b=.8*f,v=1-b/d):(m=5*(o-.8),h=d,b=.2*d*d*1.25*1.25/f,v=1-b/(p-d));let k=h+m*b/(1-v*m);return r.a=k*a,r.b=k*i,r}var mi={...nt,mode:"okhsl",channels:["h","s","l","alpha"],parse:["--okhsl"],serialize:"--okhsl",fromMode:{oklab:bt,rgb:e=>bt(oe(e))},toMode:{oklab:gt,rgb:e=>re(gt(e))}},Hr=mi;function xt(e){let t=e.l!==void 0?e.l:0,o=e.a!==void 0?e.a:0,n=e.b!==void 0?e.b:0,r=Math.sqrt(o*o+n*n),a=r?o/r:1,i=r?n/r:1,[f,d]=je(a,i),p=.5,m=1-p/f,h=d/(r+t*d),b=h*t,v=h*r,k=fe(b),R=v*k/b,w=F({l:k,a:a*R,b:i*R}),_=Math.cbrt(1/Math.max(w.r,w.g,w.b,0));t=t/_,r=r/_*Ye(t)/t,t=Ye(t);let C={mode:"okhsv",s:r?(p+d)*v/(d*p+d*m*v):0,v:t?t/b:0};return C.s&&(C.h=x(Math.atan2(n,o)*180/Math.PI)),e.alpha!==void 0&&(C.alpha=e.alpha),C}function vt(e){let t={mode:"oklab"};e.alpha!==void 0&&(t.alpha=e.alpha);let o=e.h!==void 0?e.h:0,n=e.s!==void 0?e.s:0,r=e.v!==void 0?e.v:0,a=Math.cos(o/180*Math.PI),i=Math.sin(o/180*Math.PI),[f,d]=je(a,i),p=.5,m=1-p/f,h=1-n*p/(p+d-d*m*n),b=n*d*p/(p+d-d*m*n),v=fe(h),k=b*v/h,R=F({l:v,a:a*k,b:i*k}),w=Math.cbrt(1/Math.max(R.r,R.g,R.b,0)),_=fe(r*h),C=b*_/h;return t.l=_*w,t.a=C*a*w,t.b=C*i*w,t}var ci={...at,mode:"okhsv",channels:["h","s","v","alpha"],parse:["--okhsv"],serialize:"--okhsv",fromMode:{oklab:xt,rgb:e=>xt(oe(e))},toMode:{oklab:vt,rgb:e=>re(vt(e))}},Xr=ci;function hi(e,t){if(!t||t[0]!=="oklab")return;let o={mode:"oklab"},[,n,r,a,i]=t;if(!(n.type===l.Hue||r.type===l.Hue||a.type===l.Hue))return n.type!==l.None&&(o.l=Math.min(Math.max(0,n.type===l.Number?n.value:n.value/100),1)),r.type!==l.None&&(o.a=r.type===l.Number?r.value:r.value*.4/100),a.type!==l.None&&(o.b=a.type===l.Number?a.value:a.value*.4/100),i.type!==l.None&&(o.alpha=Math.min(1,Math.max(0,i.type===l.Number?i.value:i.value/100))),o}var _r=hi;var bi={...Me,mode:"oklab",toMode:{lrgb:F,rgb:re},fromMode:{lrgb:ct,rgb:oe},ranges:{l:[0,1],a:[-.4,.4],b:[-.4,.4]},parse:[_r],serialize:e=>`oklab(${e.l!==void 0?e.l:"none"} ${e.a!==void 0?e.a:"none"} ${e.b!==void 0?e.b:"none"}${e.alpha<1?` / ${e.alpha}`:""})`},Sr=bi;function gi(e,t){if(!t||t[0]!=="oklch")return;let o={mode:"oklch"},[,n,r,a,i]=t;if(n.type!==l.None){if(n.type===l.Hue)return;o.l=Math.min(Math.max(0,n.type===l.Number?n.value:n.value/100),1)}if(r.type!==l.None&&(o.c=Math.max(0,r.type===l.Number?r.value:r.value*.4/100)),a.type!==l.None){if(a.type===l.Percentage)return;o.h=a.value}return i.type!==l.None&&(o.alpha=Math.min(1,Math.max(0,i.type===l.Number?i.value:i.value/100))),o}var Nr=gi;var xi={...ye,mode:"oklch",toMode:{oklab:e=>$(e,"oklab"),rgb:e=>re($(e,"oklab"))},fromMode:{rgb:e=>P(oe(e),"oklch"),oklab:e=>P(e,"oklch")},parse:[Nr],serialize:e=>`oklch(${e.l!==void 0?e.l:"none"} ${e.c!==void 0?e.c:"none"} ${e.h!==void 0?e.h:"none"}${e.alpha<1?` / ${e.alpha}`:""})`,ranges:{l:[0,1],c:[0,.4],h:[0,360]}},Pr=xi;var vi=e=>{let{r:t,g:o,b:n,alpha:r}=A(e),a={mode:"xyz65",x:.486570948648216*t+.265667693169093*o+.1982172852343625*n,y:.2289745640697487*t+.6917385218365062*o+.079286914093745*n,z:0*t+.0451133818589026*o+1.043944368900976*n};return r!==void 0&&(a.alpha=r),a},mo=vi;var Mi=({x:e,y:t,z:o,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r=I({r:e*2.4934969119414263-t*.9313836179191242-.402710784450717*o,g:e*-.8294889695615749+t*1.7626640603183465+.0236246858419436*o,b:e*.0358458302437845-t*.0761723892680418+.9568845240076871*o},"p3");return n!==void 0&&(r.alpha=n),r},co=Mi;var yi={...E,mode:"p3",parse:["display-p3"],serialize:"display-p3",fromMode:{rgb:e=>co(S(e)),xyz65:co},toMode:{rgb:e=>N(mo(e)),xyz65:mo}},$r=yi;var ho=e=>{let t=Math.abs(e);return t>=.001953125?Math.sign(e)*Math.pow(t,.5555555555555556):16*e},Ti=({x:e,y:t,z:o,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r={mode:"prophoto",r:ho(e*1.3457868816471585-t*.2555720873797946-.0511018649755453*o),g:ho(e*-.5446307051249019+t*1.5082477428451466+.0205274474364214*o),b:ho(e*0+t*0+1.2119675456389452*o)};return n!==void 0&&(r.alpha=n),r},bo=Ti;var go=(e=0)=>{let t=Math.abs(e);return t>=.03125?Math.sign(e)*Math.pow(t,1.8):e/16},ki=e=>{let t=go(e.r),o=go(e.g),n=go(e.b),r={mode:"xyz50",x:.7977666449006423*t+.1351812974005331*o+.0313477341283922*n,y:.2880748288194013*t+.7118352342418731*o+899369387256e-16*n,z:0*t+0*o+.8251046025104602*n};return e.alpha!==void 0&&(r.alpha=e.alpha),r},xo=ki;var wi={...E,mode:"prophoto",parse:["prophoto-rgb"],serialize:"prophoto-rgb",fromMode:{xyz50:bo,rgb:e=>bo(J(e))},toMode:{xyz50:xo,rgb:e=>q(xo(e))}},Er=wi;var Ar=1.09929682680944,zi=.018053968510807,vo=e=>{let t=Math.abs(e);return t>zi?(Math.sign(e)||1)*(Ar*Math.pow(t,.45)-(Ar-1)):4.5*e},Li=({x:e,y:t,z:o,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r={mode:"rec2020",r:vo(e*1.7166511879712683-t*.3556707837763925-.2533662813736599*o),g:vo(e*-.6666843518324893+t*1.6164812366349395+.0157685458139111*o),b:vo(e*.0176398574453108-t*.0427706132578085+.9421031212354739*o)};return n!==void 0&&(r.alpha=n),r},Mo=Li;var Ir=1.09929682680944,Ri=.018053968510807,yo=(e=0)=>{let t=Math.abs(e);return t<Ri*4.5?e/4.5:(Math.sign(e)||1)*Math.pow((t+Ir-1)/Ir,1/.45)},Ci=e=>{let t=yo(e.r),o=yo(e.g),n=yo(e.b),r={mode:"xyz65",x:.6369580483012911*t+.1446169035862083*o+.1688809751641721*n,y:.262700212011267*t+.6779980715188708*o+.059301716469862*n,z:0*t+.0280726930490874*o+1.0609850577107909*n};return e.alpha!==void 0&&(r.alpha=e.alpha),r},To=Ci;var Hi={...E,mode:"rec2020",fromMode:{xyz65:Mo,rgb:e=>Mo(S(e))},toMode:{xyz65:To,rgb:e=>N(To(e))},parse:["rec2020"],serialize:"rec2020"},Or=Hi;var B=.0037930732552754493,Mt=Math.cbrt(B);var ko=e=>Math.cbrt(e)-Mt,Xi=e=>{let{r:t,g:o,b:n,alpha:r}=A(e),a=ko(.3*t+.622*o+.078*n+B),i=ko(.23*t+.692*o+.078*n+B),f=ko(.2434226892454782*t+.2047674442449682*o+.5518098665095535*n+B),d={mode:"xyb",x:(a-i)/2,y:(a+i)/2,b:f-(a+i)/2};return r!==void 0&&(d.alpha=r),d},Dr=Xi;var wo=e=>Math.pow(e+Mt,3),_i=({x:e,y:t,b:o,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r=wo(e+t)-B,a=wo(t-e)-B,i=wo(o+t)-B,f=I({r:11.031566904639861*r-9.866943908131562*a-.16462299650829934*i,g:-3.2541473810744237*r+4.418770377582723*a-.16462299650829934*i,b:-3.6588512867136815*r+2.7129230459360922*a+1.9459282407775895*i});return n!==void 0&&(f.alpha=n),f},qr=_i;var Si={mode:"xyb",channels:["x","y","b","alpha"],parse:["--xyb"],serialize:"--xyb",toMode:{rgb:qr},fromMode:{rgb:Dr},ranges:{x:[-.0154,.0281],y:[0,.8453],b:[-.2778,.388]},interpolate:{x:s,y:s,b:s,alpha:{use:s,fixup:c}}},Jr=Si;var Ni={mode:"xyz50",parse:["xyz-d50"],serialize:"xyz-d50",toMode:{rgb:q,lab:ve},fromMode:{rgb:J,lab:xe},channels:["x","y","z","alpha"],ranges:{x:[0,.964],y:[0,.999],z:[0,.825]},interpolate:{x:s,y:s,z:s,alpha:{use:s,fixup:c}}},Fr=Ni;var Pi=e=>{let{x:t,y:o,z:n,alpha:r}=e;t===void 0&&(t=0),o===void 0&&(o=0),n===void 0&&(n=0);let a={mode:"xyz50",x:1.0479298208405488*t+.0229467933410191*o-.0501922295431356*n,y:.0296278156881593*t+.990434484573249*o-.0170738250293851*n,z:-.0092430581525912*t+.0150551448965779*o+.7518742899580008*n};return r!==void 0&&(a.alpha=r),a},Yr=Pi;var $i=e=>{let{x:t,y:o,z:n,alpha:r}=e;t===void 0&&(t=0),o===void 0&&(o=0),n===void 0&&(n=0);let a={mode:"xyz65",x:.9554734527042182*t-.0230985368742614*o+.0632593086610217*n,y:-.0283697069632081*t+1.0099954580058226*o+.021041398966943*n,z:.0123140016883199*t-.0205076964334779*o+1.3303659366080753*n};return r!==void 0&&(a.alpha=r),a},jr=$i;var Ei={mode:"xyz65",toMode:{rgb:N,xyz50:Yr},fromMode:{rgb:S,xyz50:jr},ranges:{x:[0,.95],y:[0,1],z:[0,1.088]},channels:["x","y","z","alpha"],parse:["xyz","xyz-d65"],serialize:"xyz-d65",interpolate:{x:s,y:s,z:s,alpha:{use:s,fixup:c}}},Br=Ei;var Ai=({r:e,g:t,b:o,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r={mode:"yiq",y:.29889531*e+.58662247*t+.11448223*o,i:.59597799*e-.2741761*t-.32180189*o,q:.21147017*e-.52261711*t+.31114694*o};return n!==void 0&&(r.alpha=n),r},Wr=Ai;var Ii=({y:e,i:t,q:o,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0);let r={mode:"rgb",r:e+.95608445*t+.6208885*o,g:e-.27137664*t-.6486059*o,b:e-1.10561724*t+1.70250126*o};return n!==void 0&&(r.alpha=n),r},Gr=Ii;var Oi={mode:"yiq",toMode:{rgb:Gr},fromMode:{rgb:Wr},channels:["y","i","q","alpha"],parse:["--yiq"],serialize:"--yiq",ranges:{i:[-.595,.595],q:[-.522,.522]},interpolate:{y:s,i:s,q:s,alpha:{use:s,fixup:c}}},Vr=Oi;var Di=(e,t)=>Math.round(e*(t=Math.pow(10,t)))/t,qi=(e=4)=>t=>typeof t=="number"?Di(t,e):t,Te=qi;var Em=Te(2),Ji=e=>Math.max(0,Math.min(1,e||0)),zo=e=>Math.round(Ji(e)*255),Fi=V("rgb"),Am=V("hsl"),Zr=e=>{if(e===void 0)return;let t=zo(e.r),o=zo(e.g),n=zo(e.b);return"#"+(1<<24|t<<16|o<<8|n).toString(16).slice(1)};var Lo=e=>{let t=Ge(e);if(!t)return;let o=Ve(t.mode);if(!o.serialize||typeof o.serialize=="string"){let n=`color(${o.serialize||`--${t.mode}`} `;return o.channels.forEach((r,a)=>{r!=="alpha"&&(n+=(a?" ":"")+(t[r]!==void 0?t[r]:"none"))}),t.alpha!==void 0&&t.alpha<1&&(n+=` / ${t.alpha}`),n+")"}if(typeof o.serialize=="function")return o.serialize(t)},Ro=e=>Zr(Fi(e));var Tc=g(Vo),kc=g(nr),wc=g(fr),zc=g(lr),Lc=g(sr),Rc=g(nt),Cc=g(at),Hc=g(cr),Xc=g(br),_c=g(xr),Sc=g(vr),Nc=g(Me),Pc=g(yr),$c=g(ye),Ec=g(kr),Ac=g(Lr),Ic=g(Rr),Oc=g(Cr),Dc=g(Hr),qc=g(Xr),Jc=g(Sr),Fc=g(Pr),Yc=g($r),jc=g(Er),Bc=g(Or),Wc=g(E),Gc=g(Jr),Vc=g(Fr),Zc=g(Br),Uc=g(Vr);var rn=require("obsidian");var y=Te(2),Be=Te(4),Ur=/[0-9.%]+/g,Kr=(e,t,o)=>{var a,i,f;let n=V(t.mode)(o);if(!n)return;n.alpha=t.alpha;let r=(a=e.match(Ur))==null?void 0:a.map(d=>d.contains("%"));return n.mode==="rgb"&&e.startsWith("rgb")?se(e,[y(n.r*255),y(n.g*255),y(n.b*255),le(n.alpha,r==null?void 0:r.at(3))]):n.mode==="hsl"&&e.startsWith("hsl")?se(e,[y((i=n.h)!=null?i:0),X(y(n.s*100),r==null?void 0:r.at(1)),X(y(n.l*100),r==null?void 0:r.at(2)),le(n.alpha,r==null?void 0:r.at(3))]):n.mode==="hwb"&&e.startsWith("hwb")?se(e,[y((f=n.h)!=null?f:0),X(y(n.w*100),r==null?void 0:r.at(1)),X(y(n.b*100),r==null?void 0:r.at(2)),le(n.alpha,r==null?void 0:r.at(3))]):n.mode==="lab"&&e.startsWith("lab")?se(e,[X(y(n.l),r==null?void 0:r.at(0)),X(y(n.a),r==null?void 0:r.at(1)),X(y(n.b),r==null?void 0:r.at(2)),le(n.alpha,r==null?void 0:r.at(3))]):n.mode==="lch"&&e.startsWith("lch")?se(e,[X(y(n.l),r==null?void 0:r.at(0)),r!=null&&r.at(1)?X(y(n.c/1.5),!0):y(n.c),y(n.h),le(n.alpha,r==null?void 0:r.at(3))]):n.mode==="oklab"&&e.startsWith("oklab")?se(e,[r!=null&&r.at(0)?X(y(n.l*100),!0):Be(n.l),r!=null&&r.at(1)?X(y((n.a+.4)*125),!0):Be(n.a),r!=null&&r.at(2)?X(y((n.b+.4)*125),!0):Be(n.b),le(n.alpha,r==null?void 0:r.at(3))]):n.mode==="oklch"&&e.startsWith("oklch")?se(e,[r!=null&&r.at(0)?X(y(n.l*100),!0):Be(n.l),r!=null&&r.at(1)?X(y(n.c*250),!0):Be(n.c),y(n.h),le(n.alpha,r==null?void 0:r.at(3))]):n.mode==="rgb"?o:Lo(n)},le=(e,t)=>{if(e!==void 0)return t?X(e*100,!0):e},se=(e,t)=>{let o=e.split(Ur);return o.reduce((n,r,a)=>{var i;return a===o.length-1?`${n}${r}`:`${n}${r}${(i=t[a])!=null?i:0}`},"")},X=(e,t=!1)=>{if(e!==void 0)return`${e}${t?"%":""}`};var O=require("obsidian"),en="css-inlay-palettes",ke=e=>e.toLocaleLowerCase().replace(/\s+/g,"-"),Qr=e=>e.split(",").flatMap(t=>{let o=t.replaceAll(".css-color-inlay","").replace(/[&.]/g,"").trim();return o.toLocaleLowerCase()===o?[o]:[]}),yt=()=>{let e=[];for(let t of document.styleSheets)for(let o of t.cssRules)if(o instanceof CSSStyleRule&&o.selectorText.contains(".css-color-inlay")){if(o.cssRules.length>0)for(let n of o.cssRules)n instanceof CSSStyleRule&&n.selectorText.startsWith("&")&&n.styleMap.has("color")&&e.push(...Qr(n.selectorText));o.selectorText!==".css-color-inlay"&&o.cssRules.length===0&&o.styleMap.has("color")&&e.push(...Qr(o.selectorText))}return e},Xo=e=>(0,O.normalizePath)(`${e.vault.configDir}/snippets/${en}.css`),Yi=async e=>{if(!await e.vault.adapter.exists(Xo(e)))return!1;let t=await e.vault.adapter.read((0,O.normalizePath)(`${e.vault.configDir}/appearance.json`));try{return JSON.parse(t).enabledCssSnippets.includes(en)}catch(o){return!1}},ji=async e=>await e.vault.adapter.exists(Xo(e))?new Promise(t=>{new Co(e,o=>t(o)).open()}):!0,tn=async e=>{if(await ji(e))try{await fetch("https://raw.githubusercontent.com/GRA0007/obsidian-css-inlay-colors/refs/heads/main/palettes.css").then(t=>{if(!t.ok)throw new Error("Failed to fetch");return t.text()}).then(t=>e.vault.adapter.write(Xo(e),t)),new O.Notice("Palette file downloaded"),await Yi(e)||new Ho(e).open()}catch(t){new O.Notice("Failed to download file")}},Co=class extends O.Modal{constructor(t,o){super(t),this.setTitle("Overwrite Existing Palettes"),this.setContent("You've already got a custom palette file in your snippets directory, would you like to redownload and overwrite it?");let n=!1;new O.Setting(this.contentEl).addButton(r=>r.setButtonText("Cancel").onClick(()=>{this.close()})).addButton(r=>r.setButtonText("Replace existing file").setCta().onClick(()=>{n=!0,this.close()})),this.setCloseCallback(()=>o(n))}},Ho=class extends O.Modal{constructor(t){super(t),this.setTitle("Enable CSS Snippet"),this.setContent('The custom palette file has been downloaded, you should now enable it from the "Appearance \u2192 CSS snippets" setting.'),new O.Setting(this.contentEl).addButton(o=>o.setButtonText("Got it").onClick(()=>{this.close()}))}};var Tt=(e,t)=>{e=e.trim();let o=!1;e.startsWith("[")&&e.endsWith("]")&&(e=e.slice(1,-1),o=!0);let n;if(t.length>0&&e.startsWith("(")&&e.endsWith(")")&&t.includes(ke(e.slice(1,-1)))&&(e=e.slice(1,-1),n="palette"),!n)try{if(n=Pe(e.toLocaleLowerCase()),n===void 0||n.mode==="rgb"&&Se(e)&&e.charAt(0)!=="#")return}catch(r){return}return{text:e,color:n,isNameHidden:o}};var nn=e=>Y.ViewPlugin.fromClass(class{constructor(t){this.view=t;this.decorations=Y.Decoration.none;this.decorations=on(t,e)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged||(0,we.syntaxTree)(t.startState)!==(0,we.syntaxTree)(t.state))&&(this.decorations=on(t.view,e))}},{decorations:t=>t.decorations}),kt=class extends Y.WidgetType{constructor(o,n,r,a,i){super();this.text=o;this.color=n;this.colorPickerEnabled=r;this.hideName=a;this.view=i}eq(o){return o.text===this.text}toDOM(){let o=document.createElement("label");if(o.className=`css-color-inlay ${this.color==="palette"?`css-color-palette ${ke(this.text)}`:""} ${this.hideName?"css-color-name-hidden":""}`,o.style.color=this.text,this.colorPickerEnabled&&this.color!=="palette"){let r=document.createElement("input");r.type="color",r.value=Ro(this.color),r.addEventListener("change",a=>{if(!a.currentTarget||!a.currentTarget.instanceOf(HTMLInputElement))return;let i=this.view.posAtDOM(n);this.view.dispatch({changes:{from:i,to:i+this.text.length,insert:Kr(this.text,this.color,a.currentTarget.value)}})}),o.append(r)}let n=document.createElement("span");return n.className="cm-inline-code css-color-wrapper",n.append(o),n}},on=(e,t)=>{if(!e.state.field(rn.editorLivePreviewField))return Y.Decoration.none;let o=[],n=t.palettesEnabled?yt():[];for(let{from:r,to:a}of e.visibleRanges)(0,we.syntaxTree)(e.state).iterate({from:r,to:a,enter:i=>{var f;if((f=i.type.prop(we.tokenClassNodeProp))!=null&&f.split(" ").includes("inline-code")){let d=Tt(e.state.sliceDoc(i.from,i.to),n);if(!d)return;let{text:p,color:m,isNameHidden:h}=d;if((t.hideNames||h)&&!e.state.selection.ranges.some(b=>b.from-1<=i.to&&b.to+1>=i.from)){let b=Y.Decoration.replace({widget:new kt(p,m,t.colorPickerEnabled,!0,e)});o.push(b.range(i.from,i.to))}else{let b=Y.Decoration.widget({side:1,widget:new kt(p,m,t.colorPickerEnabled,!1,e)});o.push(b.range(i.from))}}}});return Y.Decoration.set(o)};var _o=require("obsidian");var an=e=>t=>{let o=e.palettesEnabled?yt():[];for(let n of t.findAll("code")){let r=Tt(n.innerText,o);if(!r)continue;let{text:a,color:i,isNameHidden:f}=r;(e.hideNames||f)&&n.empty();let d=i==="palette"?`css-color-palette ${ke(a)}`:"";n.createSpan({prepend:!0,cls:`css-color-inlay ${d} ${e.hideNames||f?"css-color-name-hidden":""}`,attr:{style:`color: ${a};`}}),e.copyOnClick&&(n.setAttr("aria-label","Click to copy"),n.setAttr("style","cursor: pointer;"),n.addEventListener("click",p=>{p.preventDefault(),p.stopPropagation(),navigator.clipboard.writeText(a).then(()=>{let m=document.createDocumentFragment(),h=document.createElement("span");h.className=`css-color-inlay ${d}`,h.style.color=a,m.append(h),m.append(document.createTextNode("Copied color to the clipboard")),new _o.Notice(m)}).catch(()=>{new _o.Notice("Failed to copy color")})}))}};var j=require("obsidian");var So={showInLiveEditor:!0,colorPickerEnabled:!1,hideNames:!1,copyOnClick:!0,palettesEnabled:!1},wt=class extends j.PluginSettingTab{constructor(t,o){super(t,o),this.plugin=o}display(){let{containerEl:t}=this;t.empty(),new j.Setting(t).setName("Show in live preview mode").setDesc("Enable color inlays in the live preview (requires reload).").addToggle(o=>o.setValue(this.plugin.settings.showInLiveEditor).onChange(async n=>{this.plugin.settings.showInLiveEditor=n,await this.plugin.saveSettings()})),new j.Setting(t).setName("Enable the color picker").setDesc("Allows you to edit a color by clicking on the inlay.").addToggle(o=>o.setValue(this.plugin.settings.colorPickerEnabled).onChange(async n=>{this.plugin.settings.colorPickerEnabled=n,await this.plugin.saveSettings()})).descEl.createDiv({text:"Opacity and colors outside of the sRGB color space are not supported.",cls:"mod-warning"}),new j.Setting(t).setName("Hide all color names").setDesc("Hides the inline code block in live preview and reading mode for all colors so only the color inlay is visible. You can also do this on a case-by-case basis by surrounding the color with square brackets.").addToggle(o=>o.setValue(this.plugin.settings.hideNames).onChange(async n=>{this.plugin.settings.hideNames=n,await this.plugin.saveSettings()})),new j.Setting(t).setName("Copy on click").setDesc("Allows clicking on a color in reading mode to copy it to your clipboard.").addToggle(o=>o.setValue(this.plugin.settings.copyOnClick).onChange(async n=>{this.plugin.settings.copyOnClick=n,await this.plugin.saveSettings()})),new j.Setting(t).setHeading().setName("Custom Palettes"),new j.Setting(t).setName("Enable palette support").setDesc(createFragment(o=>{o.appendText("Enable custom color palette support. This will generate classes for every inline code block surrounded in parentheses so they can be targeted with a CSS snippet file."),o.createEl("br"),o.createEl("a",{text:"Learn more",href:"https://github.com/GRA0007/obsidian-css-inlay-colors?tab=readme-ov-file#custom-palettes"})})).addToggle(o=>o.setValue(this.plugin.settings.palettesEnabled).onChange(async n=>{this.plugin.settings.palettesEnabled=n,await this.plugin.saveSettings()})),new j.Setting(t).setName("Download predefined palettes").setDesc(createFragment(o=>{o.appendText("You can download a "),o.createEl("a",{text:"snippet file",href:"https://github.com/GRA0007/obsidian-css-inlay-colors/blob/main/palettes.css"}),o.appendText(" with some predefined palettes. It comes with the following:")})).addButton(o=>{o.setButtonText("Download").onClick(()=>tn(this.app))}).infoEl.createDiv({cls:"setting-item-description"}).createEl("ul",{text:createFragment(o=>{o.createEl("li",{text:createFragment(n=>{n.createEl("strong",{text:"AutoCAD Color Index"}),n.createDiv({text:"Example: (aci 91)"})})}),o.createEl("li",{text:createFragment(n=>{n.createEl("strong",{text:"Australian Color Standard (AS 2700)"}),n.createDiv({text:"Example: (as N45)"})})}),o.createEl("li",{text:createFragment(n=>{n.createEl("strong",{text:"British Standard Colors (BS 381, BS 4800)"}),n.createDiv({text:"Example: (bs 381 593) or (bs 14-E-51)"})})}),o.createEl("li",{text:createFragment(n=>{n.createEl("strong",{text:"Federal Standard (FS 595C, ANA)"}),n.createDiv({text:"Example: (fs 11086) or (fs w3-ana-609)"})})}),o.createEl("li",{text:createFragment(n=>{n.createEl("strong",{text:"RAL Colors (Classic, Design, Effect, Plastics)"}),n.createDiv({text:"Example: (ral 170 50 10) or (ral 6010)"})})})})})}};var zt=class extends fn.Plugin{constructor(){super(...arguments);this.settings=So}async onload(){await this.loadSettings(),this.registerMarkdownPostProcessor(an(this.settings)),this.settings.showInLiveEditor&&this.registerEditorExtension(nn(this.settings)),this.addSettingTab(new wt(this.app,this))}onunload(){}async loadSettings(){this.settings=Object.assign({},So,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}};
