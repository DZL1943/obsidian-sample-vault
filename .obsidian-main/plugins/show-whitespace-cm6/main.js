/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var p=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var W=Object.prototype.hasOwnProperty;var f=(h,o)=>{for(var s in o)p(h,s,{get:o[s],enumerable:!0})},y=(h,o,s,e)=>{if(o&&typeof o=="object"||typeof o=="function")for(let l of E(o))!W.call(h,l)&&l!==s&&p(h,l,{get:()=>o[l],enumerable:!(e=k(o,l))||e.enumerable});return h};var C=h=>y(p({},"__esModule",{value:!0}),h);var x={};f(x,{default:()=>v});module.exports=C(x);var g=require("@codemirror/view"),w=require("obsidian");var a=require("obsidian");var u={manifestName:"Show Whitespace",block1:{name:"Show Whitespace"},saveSettings:{name:"Save settings",resetBtn:{tooltip:"Reset to previously saved (or generated) values"},saveBtn:{tooltip:"Save current values"}},suppressPluginStyles:{name:"Suppress plugin styles",desc:"Disable the plugin's default styles. You will need to provide your own CSS snippets to customize the appearance of whitespace."},showBlockquoteMarkers:{name:"Show blockquote markers",desc:"Always display the leading '>' for blockquotes in Live Preview mode."},highlightListMarkers:{name:"Highlight List Markers",desc:"Add a visual style to the space reserved by list markers (e.g., '-', '1.')."},block2:{name:"Whitespace",desc:"By default, this plugin will show leading and trailing whitespace including marks for line endings, hard breaks, and tabs."},showAllWhitespace:{name:"Show all whitespace",desc:"Display markers for all whitespace characters, including those between words."},showConsecutiveWhitespace:{name:"Show consecutive whitespace",desc:"Display markers only for multiple consecutive whitespace characters between words (included in 'Show All Whitespace')."},showLineEndings:{name:"Show line endings",desc:"Display markers for line endings (different from hard line breaks)."},block3:{name:"Content types",desc:"The following settings allow you to enable or disable the display of whitespace characters within the document. Unless otherwise noted, the appearance of whitespace follows the settings above."},showFrontmatterWhitespace:{name:"Show frontmatter whitespace",desc:"Display whitespace characters in YAML frontmatter (properties)."},showTableWhitespace:{name:"Show table whitespace",desc:"Display leading or trailing whitespace characters in tables."},showCodeBlockWhitespace:{name:"Show code block whitespace",desc:"Display leading/trailing whitespace characters in code blocks (included in 'Show All Code Block Whitespace')"},showAllCodeBlockWhitespace:{name:"Show all code block whitespace",desc:"Display all whitespace characters in code blocks, making them look more like a code editor. This will override the settings above."}};var m={en:u},S=h=>h in m?m[h]:m.en;var r=class extends a.PluginSettingTab{constructor(o,s){super(o,s),this.plugin=s,this.icon="eye"}async save(){await this.plugin.updateSettings(this.newSettings)}async display(){await this.plugin.loadSettings(),this.reset()}async reset(){this.newSettings=JSON.parse(JSON.stringify(this.plugin.settings)),this.drawElements()}drawElements(){let o=this.plugin.manifest.id,s=window.localStorage.getItem("language"),e=S(s),l=e.manifestName||this.plugin.manifest.name;this.containerEl.empty(),this.containerEl.addClass(o),new a.Setting(this.containerEl).setHeading().setName(l),new a.Setting(this.containerEl).setName(e.saveSettings.name).setClass(`${o}-save-reset`).addButton(t=>t.setIcon("reset").setTooltip(e.saveSettings.resetBtn.tooltip).onClick(()=>{this.reset(),console.log("(SW-CM6) Configuration reset")})).addButton(t=>{t.setIcon("save").setTooltip(e.saveSettings.saveBtn.tooltip).onClick(async()=>{await this.save()}),this.saveButton=t.buttonEl}),new a.Setting(this.containerEl).setName(e.suppressPluginStyles.name).setDesc(e.suppressPluginStyles.desc).addToggle(t=>t.setValue(this.newSettings.disablePluginStyles).onChange(async i=>{let n=i!==this.newSettings.disablePluginStyles;this.newSettings.disablePluginStyles=i,n&&this.drawElements()})),new a.Setting(this.containerEl).setName(e.showBlockquoteMarkers.name).setDesc(e.showBlockquoteMarkers.desc).addToggle(t=>t.setValue(this.newSettings.showBlockquoteMarkers).onChange(async i=>{let n=i!==this.newSettings.showBlockquoteMarkers;this.newSettings.showBlockquoteMarkers=i,n&&this.drawElements()})),new a.Setting(this.containerEl).setName(e.highlightListMarkers.name).setDesc(e.highlightListMarkers.desc).addToggle(t=>t.setValue(this.newSettings.outlineListMarkers).onChange(async i=>{let n=i!==this.newSettings.outlineListMarkers;this.newSettings.outlineListMarkers=i,n&&this.drawElements()})),new a.Setting(this.containerEl).setHeading().setName(e.block2.name),this.containerEl.createEl("p",{text:e.block2.desc}),new a.Setting(this.containerEl).setName(e.showAllWhitespace.name).setDesc(e.showAllWhitespace.desc).addToggle(t=>t.setValue(this.newSettings.showAllWhitespace).onChange(async i=>{let n=i!==this.newSettings.showAllWhitespace;this.newSettings.showAllWhitespace=i,n&&this.drawElements()})),new a.Setting(this.containerEl).setName(e.showLineEndings.name).setDesc(e.showLineEndings.desc).addToggle(t=>t.setValue(this.newSettings.showLineEndings).onChange(async i=>{let n=i!==this.newSettings.showLineEndings;this.newSettings.showLineEndings=i,n&&this.drawElements()})),new a.Setting(this.containerEl).setHeading().setName(e.block3.name),this.containerEl.createEl("p",{text:e.block3.desc}),new a.Setting(this.containerEl).setName(e.showFrontmatterWhitespace.name).setDesc(e.showFrontmatterWhitespace.desc).addToggle(t=>t.setValue(this.newSettings.showFrontmatterWhitespace).onChange(async i=>{let n=i||this.newSettings.showAllWhitespace,c=n!==this.newSettings.showFrontmatterWhitespace;this.newSettings.showFrontmatterWhitespace=n,c&&this.drawElements()})),new a.Setting(this.containerEl).setName(e.showTableWhitespace.name).setDesc(e.showTableWhitespace.desc).addToggle(t=>t.setValue(this.newSettings.showTableWhitespace).onChange(async i=>{let n=i||this.newSettings.showAllWhitespace,c=n!==this.newSettings.showTableWhitespace;this.newSettings.showTableWhitespace=n,c&&this.drawElements()})),new a.Setting(this.containerEl).setName(e.showCodeBlockWhitespace.name).setDesc(e.showCodeBlockWhitespace.desc).addToggle(t=>t.setValue(this.newSettings.showCodeblockWhitespace).onChange(async i=>{let n=i||this.newSettings.showAllCodeblockWhitespace,c=n!==this.newSettings.showCodeblockWhitespace;this.newSettings.showCodeblockWhitespace=n,c&&this.drawElements()})),new a.Setting(this.containerEl).setName(e.showAllCodeBlockWhitespace.name).setDesc(e.showAllCodeBlockWhitespace.desc).addToggle(t=>t.setValue(this.newSettings.showAllCodeblockWhitespace).onChange(async i=>{let n=i!==this.newSettings.showAllCodeblockWhitespace;this.newSettings.showAllCodeblockWhitespace=i,n&&this.drawElements()}))}hide(){this.save()}};var b={disablePluginStyles:!1,enabled:!0,outlineListMarkers:!1,showAllCodeblockWhitespace:!1,showAllWhitespace:!1,showBlockquoteMarkers:!1,showCodeblockWhitespace:!1,showFrontmatterWhitespace:!0,showLineEndings:!0,showTableWhitespace:!0},d=class extends w.Plugin{constructor(){super(...arguments);this.cmExtension=[];this.classList=[];this.onExternalSettingsChange=(0,w.debounce)(async()=>{let s=await this.loadData(),e=Object.assign({},b,s);if(this.computeCMExtensionEnabled(e),!Object.keys(e).some(t=>this.settings[t]!==e[t])){console.debug("(SW-CM6) external settings unchanged, skipping update");return}this.applySettings(e),console.debug("(SW-CM6) external settings changed")},2e3,!0)}async onload(){console.info(`loading Show Whitespace (SW-CM6) v${this.manifest.version}`),await this.loadSettings(),this.addSettingTab(new r(this.app,this)),this.initClasses(),this.registerEditorExtension(this.cmExtension),this.handleExtension();let s={id:"whitespace-toggle",name:"Toggle Show Whitespace",icon:"eye",callback:async()=>this.toggleExtension(this)};this.addCommand(s)}handleExtension(){console.log("(SW-CM6) cmExtensionEnabled",this.settings.cmExtensionEnabled),this.cmExtension.length=0,this.settings.cmExtensionEnabled&&(this.cmExtension.push((0,g.highlightWhitespace)()),this.cmExtension.push((0,g.highlightTrailingWhitespace)())),this.app.workspace.updateOptions()}updateClasses(){this.removeClasses(),this.initClasses()}initClasses(){this.classList=[this.manifest.id],(!this.settings.enabled||this.settings.disablePluginStyles)&&this.classList.push("swcm6-nix-plugin-styles"),this.settings.enabled&&(this.settings.showBlockquoteMarkers&&this.classList.push("swcm6-show-blockquote-markers"),this.settings.showCodeblockWhitespace&&this.classList.push("swcm6-show-codeblock-whitespace"),this.settings.showAllCodeblockWhitespace&&this.classList.push("swcm6-show-all-codeblock-whitespace"),this.settings.showLineEndings&&this.classList.push("swcm6-show-line-endings"),this.settings.showFrontmatterWhitespace&&this.classList.push("swcm6-show-frontmatter-whitespace"),this.settings.showTableWhitespace&&this.classList.push("swcm6-show-table-whitespace"),this.settings.showAllWhitespace&&this.classList.push("swcm6-show-all-whitespace"),this.settings.outlineListMarkers&&this.classList.push("swcm6-outline-list-markers")),document.body.addClasses(this.classList)}removeClasses(){document.body.removeClasses(this.classList)}onunload(){console.log("(SW-CM6) unloading Show Whitespace"),this.removeClasses()}async handleConfigFileChange(){await super.handleConfigFileChange(),this.onExternalSettingsChange()}async toggleExtension(s){s.settings.enabled=!s.settings.enabled,s.updateSettings(this.settings)}async loadSettings(){if(!this.settings){let s=await this.loadData();this.settings=Object.assign({},b,s),this.computeCMExtensionEnabled(this.settings),console.debug("settings loaded",this.settings)}}computeCMExtensionEnabled(s){s.cmExtensionEnabled=s.enabled&&(s.showLineEndings||s.showFrontmatterWhitespace||s.showCodeblockWhitespace||s.showAllCodeblockWhitespace||s.showTableWhitespace||s.showAllWhitespace)}applySettings(s){let e=this.settings.cmExtensionEnabled;this.settings=s,e!==this.settings.cmExtensionEnabled&&this.handleExtension(),this.updateClasses()}async updateSettings(s){let e=Object.assign({},this.settings,s);this.computeCMExtensionEnabled(e),this.applySettings(e),await this.saveSettings(),console.log("(SW-CM6) settings and classes updated",this.settings)}async saveSettings(){await this.saveData(this.settings)}};var v=d;

/* nosourcemap */