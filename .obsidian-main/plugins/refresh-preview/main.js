/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

(function initCjs() {
  const globalThisRecord = globalThis;
  globalThisRecord["__name"] ??= name;
  const originalRequire = require;
  if (originalRequire && !originalRequire.__isPatched) {
    require = Object.assign(
      (id) => requirePatched(id),
      originalRequire,
      {
        __isPatched: true
      }
    );
  }
  const newFuncs = {
    __extractDefault() {
      return extractDefault;
    },
    process() {
      const browserProcess = {
        browser: true,
        cwd() {
          return "/";
        },
        env: {},
        platform: "android"
      };
      return browserProcess;
    }
  };
  for (const key of Object.keys(newFuncs)) {
    globalThisRecord[key] ??= newFuncs[key]?.();
  }
  function name(obj) {
    return obj;
  }
  function extractDefault(module2) {
    return module2 && module2.__esModule && "default" in module2 ? module2.default : module2;
  }
  const OBSIDIAN_BUILT_IN_MODULE_NAMES = [
    "obsidian",
    "@codemirror/autocomplete",
    "@codemirror/collab",
    "@codemirror/commands",
    "@codemirror/language",
    "@codemirror/lint",
    "@codemirror/search",
    "@codemirror/state",
    "@codemirror/text",
    "@codemirror/view",
    "@lezer/common",
    "@lezer/lr",
    "@lezer/highlight"
  ];
  const DEPRECATED_OBSIDIAN_BUILT_IN_MODULE_NAMES = [
    "@codemirror/closebrackets",
    "@codemirror/comment",
    "@codemirror/fold",
    "@codemirror/gutter",
    "@codemirror/highlight",
    "@codemirror/history",
    "@codemirror/matchbrackets",
    "@codemirror/panel",
    "@codemirror/rangeset",
    "@codemirror/rectangular-selection",
    "@codemirror/stream-parser",
    "@codemirror/tooltip"
  ];
  function requirePatched(id) {
    if (OBSIDIAN_BUILT_IN_MODULE_NAMES.includes(id) || DEPRECATED_OBSIDIAN_BUILT_IN_MODULE_NAMES.includes(id)) {
      return originalRequire?.(id);
    }
    if (globalThis?.app?.isMobile) {
      if (id === "process" || id === "node:process") {
        console.debug(`The most likely you can safely ignore this error. Module not found: ${id}. Fake process object is returned instead.`);
        return globalThis.process;
      }
    } else {
      const module2 = originalRequire?.(id);
      if (module2) {
        return extractDefault(module2);
      }
    }
    console.debug(`The most likely you can safely ignore this error. Module not found: ${id}. Empty object is returned instead.`);
    return {};
  }
})();

"use strict";var Ii=Object.create;var Le=Object.defineProperty;var Vi=Object.getOwnPropertyDescriptor;var Mi=Object.getOwnPropertyNames;var Ni=Object.getPrototypeOf,_i=Object.prototype.hasOwnProperty;var o=(n,e)=>Le(n,"name",{value:e,configurable:!0});var ee=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),$i=(n,e)=>{for(var t in e)Le(n,t,{get:e[t],enumerable:!0})},Gn=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Mi(e))!_i.call(n,i)&&i!==t&&Le(n,i,{get:()=>e[i],enumerable:!(r=Vi(e,i))||r.enumerable});return n};var sn=(n,e,t)=>(t=n!=null?Ii(Ni(n)):{},Gn(e||!n||!n.__esModule?Le(t,"default",{value:n,enumerable:!0}):t,n)),Bi=n=>Gn(Le({},"__esModule",{value:!0}),n);var Zn=ee((Vs,Xn)=>{var he=1e3,me=he*60,ge=me*60,de=ge*24,ji=de*7,Ui=de*365.25;Xn.exports=function(n,e){e=e||{};var t=typeof n;if(t==="string"&&n.length>0)return Hi(n);if(t==="number"&&isFinite(n))return e.long?Ki(n):zi(n);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(n))};function Hi(n){if(n=String(n),!(n.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(n);if(e){var t=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return t*Ui;case"weeks":case"week":case"w":return t*ji;case"days":case"day":case"d":return t*de;case"hours":case"hour":case"hrs":case"hr":case"h":return t*ge;case"minutes":case"minute":case"mins":case"min":case"m":return t*me;case"seconds":case"second":case"secs":case"sec":case"s":return t*he;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}o(Hi,"parse");function zi(n){var e=Math.abs(n);return e>=de?Math.round(n/de)+"d":e>=ge?Math.round(n/ge)+"h":e>=me?Math.round(n/me)+"m":e>=he?Math.round(n/he)+"s":n+"ms"}o(zi,"fmtShort");function Ki(n){var e=Math.abs(n);return e>=de?Ke(n,e,de,"day"):e>=ge?Ke(n,e,ge,"hour"):e>=me?Ke(n,e,me,"minute"):e>=he?Ke(n,e,he,"second"):n+" ms"}o(Ki,"fmtLong");function Ke(n,e,t,r){var i=e>=t*1.5;return Math.round(n/t)+" "+r+(i?"s":"")}o(Ke,"plural")});var ln=ee((Ns,Qn)=>{function Gi(n){t.debug=t,t.default=t,t.coerce=u,t.disable=a,t.enable=i,t.enabled=l,t.humanize=Zn(),t.destroy=d,Object.keys(n).forEach(f=>{t[f]=n[f]}),t.names=[],t.skips=[],t.formatters={};function e(f){let c=0;for(let p=0;p<f.length;p++)c=(c<<5)-c+f.charCodeAt(p),c|=0;return t.colors[Math.abs(c)%t.colors.length]}o(e,"selectColor"),t.selectColor=e;function t(f){let c,p=null,m,g;function C(...h){if(!C.enabled)return;let b=C,v=Number(new Date),E=v-(c||v);b.diff=E,b.prev=c,b.curr=v,c=v,h[0]=t.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");let A=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,(S,I)=>{if(S==="%%")return"%";A++;let K=t.formatters[I];if(typeof K=="function"){let N=h[A];S=K.call(b,N),h.splice(A,1),A--}return S}),t.formatArgs.call(b,h),(b.log||t.log).apply(b,h)}return o(C,"debug"),C.namespace=f,C.useColors=t.useColors(),C.color=t.selectColor(f),C.extend=r,C.destroy=t.destroy,Object.defineProperty(C,"enabled",{enumerable:!0,configurable:!1,get:o(()=>p!==null?p:(m!==t.namespaces&&(m=t.namespaces,g=t.enabled(f)),g),"get"),set:o(h=>{p=h},"set")}),typeof t.init=="function"&&t.init(C),C}o(t,"createDebug");function r(f,c){let p=t(this.namespace+(typeof c>"u"?":":c)+f);return p.log=this.log,p}o(r,"extend");function i(f){t.save(f),t.namespaces=f,t.names=[],t.skips=[];let c=(typeof f=="string"?f:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let p of c)p[0]==="-"?t.skips.push(p.slice(1)):t.names.push(p)}o(i,"enable");function s(f,c){let p=0,m=0,g=-1,C=0;for(;p<f.length;)if(m<c.length&&(c[m]===f[p]||c[m]==="*"))c[m]==="*"?(g=m,C=p,m++):(p++,m++);else if(g!==-1)m=g+1,C++,p=C;else return!1;for(;m<c.length&&c[m]==="*";)m++;return m===c.length}o(s,"matchesTemplate");function a(){let f=[...t.names,...t.skips.map(c=>"-"+c)].join(",");return t.enable(""),f}o(a,"disable");function l(f){for(let c of t.skips)if(s(f,c))return!1;for(let c of t.names)if(s(f,c))return!0;return!1}o(l,"enabled");function u(f){return f instanceof Error?f.stack||f.message:f}o(u,"coerce");function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o(d,"destroy"),t.enable(t.load()),t}o(Gi,"setup");Qn.exports=Gi});var er=ee((B,Ge)=>{B.formatArgs=qi;B.save=Ji;B.load=Xi;B.useColors=Yi;B.storage=Zi();B.destroy=(()=>{let n=!1;return()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();B.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Yi(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let n;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(n=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(n[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}o(Yi,"useColors");function qi(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+Ge.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;n.splice(1,0,e,"color: inherit");let t=0,r=0;n[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(r=t))}),n.splice(r,0,e)}o(qi,"formatArgs");B.log=console.debug||console.log||(()=>{});function Ji(n){try{n?B.storage.setItem("debug",n):B.storage.removeItem("debug")}catch{}}o(Ji,"save");function Xi(){let n;try{n=B.storage.getItem("debug")||B.storage.getItem("DEBUG")}catch{}return!n&&typeof process<"u"&&"env"in process&&(n=process.env.DEBUG),n}o(Xi,"load");function Zi(){try{return localStorage}catch{}}o(Zi,"localstorage");Ge.exports=ln()(B);var{formatters:Qi}=Ge.exports;Qi.j=function(n){try{return JSON.stringify(n)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var nr=ee((Bs,tr)=>{"use strict";tr.exports=(n,e=process.argv)=>{let t=n.startsWith("-")?"":n.length===1?"-":"--",r=e.indexOf(t+n),i=e.indexOf("--");return r!==-1&&(i===-1||r<i)}});var or=ee((Ws,ir)=>{"use strict";var eo=require("os"),rr=require("tty"),U=nr(),{env:O}=process,Ye;U("no-color")||U("no-colors")||U("color=false")||U("color=never")?Ye=0:(U("color")||U("colors")||U("color=true")||U("color=always"))&&(Ye=1);function to(){if("FORCE_COLOR"in O)return O.FORCE_COLOR==="true"?1:O.FORCE_COLOR==="false"?0:O.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(O.FORCE_COLOR,10),3)}o(to,"envForceColor");function no(n){return n===0?!1:{level:n,hasBasic:!0,has256:n>=2,has16m:n>=3}}o(no,"translateLevel");function ro(n,{streamIsTTY:e,sniffFlags:t=!0}={}){let r=to();r!==void 0&&(Ye=r);let i=t?Ye:r;if(i===0)return 0;if(t){if(U("color=16m")||U("color=full")||U("color=truecolor"))return 3;if(U("color=256"))return 2}if(n&&!e&&i===void 0)return 0;let s=i||0;if(O.TERM==="dumb")return s;if(process.platform==="win32"){let a=eo.release().split(".");return Number(a[0])>=10&&Number(a[2])>=10586?Number(a[2])>=14931?3:2:1}if("CI"in O)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(a=>a in O)||O.CI_NAME==="codeship"?1:s;if("TEAMCITY_VERSION"in O)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(O.TEAMCITY_VERSION)?1:0;if(O.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in O){let a=Number.parseInt((O.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(O.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(O.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(O.TERM)||"COLORTERM"in O?1:s}o(ro,"supportsColor");function un(n,e={}){let t=ro(n,{streamIsTTY:n&&n.isTTY,...e});return no(t)}o(un,"getSupportLevel");ir.exports={supportsColor:un,stdout:un({isTTY:rr.isatty(1)}),stderr:un({isTTY:rr.isatty(2)})}});var ar=ee((F,Je)=>{var io=require("tty"),qe=require("util");F.init=fo;F.log=lo;F.formatArgs=so;F.save=uo;F.load=co;F.useColors=oo;F.destroy=qe.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");F.colors=[6,2,3,4,5,1];try{let n=or();n&&(n.stderr||n).level>=2&&(F.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}F.inspectOpts=Object.keys(process.env).filter(n=>/^debug_/i.test(n)).reduce((n,e)=>{let t=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),r=process.env[e];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),n[t]=r,n},{});function oo(){return"colors"in F.inspectOpts?!!F.inspectOpts.colors:io.isatty(process.stderr.fd)}o(oo,"useColors");function so(n){let{namespace:e,useColors:t}=this;if(t){let r=this.color,i="\x1B[3"+(r<8?r:"8;5;"+r),s=`  ${i};1m${e} \x1B[0m`;n[0]=s+n[0].split(`
`).join(`
`+s),n.push(i+"m+"+Je.exports.humanize(this.diff)+"\x1B[0m")}else n[0]=ao()+e+" "+n[0]}o(so,"formatArgs");function ao(){return F.inspectOpts.hideDate?"":new Date().toISOString()+" "}o(ao,"getDate");function lo(...n){return process.stderr.write(qe.formatWithOptions(F.inspectOpts,...n)+`
`)}o(lo,"log");function uo(n){n?process.env.DEBUG=n:delete process.env.DEBUG}o(uo,"save");function co(){return process.env.DEBUG}o(co,"load");function fo(n){n.inspectOpts={};let e=Object.keys(F.inspectOpts);for(let t=0;t<e.length;t++)n.inspectOpts[e[t]]=F.inspectOpts[e[t]]}o(fo,"init");Je.exports=ln()(F);var{formatters:sr}=Je.exports;sr.o=function(n){return this.inspectOpts.colors=this.useColors,qe.inspect(n,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};sr.O=function(n){return this.inspectOpts.colors=this.useColors,qe.inspect(n,this.inspectOpts)}});var lr=ee((Hs,cn)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?cn.exports=er():cn.exports=ar()});var kr=ee((Wa,Sr)=>{"use strict";function X(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}o(X,"assertPath");function Tr(n,e){for(var t="",r=0,i=-1,s=0,a,l=0;l<=n.length;++l){if(l<n.length)a=n.charCodeAt(l);else{if(a===47)break;a=47}if(a===47){if(!(i===l-1||s===1))if(i!==l-1&&s===2){if(t.length<2||r!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var u=t.lastIndexOf("/");if(u!==t.length-1){u===-1?(t="",r=0):(t=t.slice(0,u),r=t.length-1-t.lastIndexOf("/")),i=l,s=0;continue}}else if(t.length===2||t.length===1){t="",r=0,i=l,s=0;continue}}e&&(t.length>0?t+="/..":t="..",r=2)}else t.length>0?t+="/"+n.slice(i+1,l):t=n.slice(i+1,l),r=l-i-1;i=l,s=0}else a===46&&s!==-1?++s:s=-1}return t}o(Tr,"normalizeStringPosix");function $o(n,e){var t=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+r:t+n+r:r}o($o,"_format");var xe={resolve:o(function(){for(var e="",t=!1,r,i=arguments.length-1;i>=-1&&!t;i--){var s;i>=0?s=arguments[i]:(r===void 0&&(r=process.cwd()),s=r),X(s),s.length!==0&&(e=s+"/"+e,t=s.charCodeAt(0)===47)}return e=Tr(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},"resolve"),normalize:o(function(e){if(X(e),e.length===0)return".";var t=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=Tr(e,!t),e.length===0&&!t&&(e="."),e.length>0&&r&&(e+="/"),t?"/"+e:e},"normalize"),isAbsolute:o(function(e){return X(e),e.length>0&&e.charCodeAt(0)===47},"isAbsolute"),join:o(function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];X(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":xe.normalize(e)},"join"),relative:o(function(e,t){if(X(e),X(t),e===t||(e=xe.resolve(e),t=xe.resolve(t),e===t))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var i=e.length,s=i-r,a=1;a<t.length&&t.charCodeAt(a)===47;++a);for(var l=t.length,u=l-a,d=s<u?s:u,f=-1,c=0;c<=d;++c){if(c===d){if(u>d){if(t.charCodeAt(a+c)===47)return t.slice(a+c+1);if(c===0)return t.slice(a+c)}else s>d&&(e.charCodeAt(r+c)===47?f=c:c===0&&(f=0));break}var p=e.charCodeAt(r+c),m=t.charCodeAt(a+c);if(p!==m)break;p===47&&(f=c)}var g="";for(c=r+f+1;c<=i;++c)(c===i||e.charCodeAt(c)===47)&&(g.length===0?g+="..":g+="/..");return g.length>0?g+t.slice(a+f):(a+=f,t.charCodeAt(a)===47&&++a,t.slice(a))},"relative"),_makeLong:o(function(e){return e},"_makeLong"),dirname:o(function(e){if(X(e),e.length===0)return".";for(var t=e.charCodeAt(0),r=t===47,i=-1,s=!0,a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),t===47){if(!s){i=a;break}}else s=!1;return i===-1?r?"/":".":r&&i===1?"//":e.slice(0,i)},"dirname"),basename:o(function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');X(e);var r=0,i=-1,s=!0,a;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var l=t.length-1,u=-1;for(a=e.length-1;a>=0;--a){var d=e.charCodeAt(a);if(d===47){if(!s){r=a+1;break}}else u===-1&&(s=!1,u=a+1),l>=0&&(d===t.charCodeAt(l)?--l===-1&&(i=a):(l=-1,i=u))}return r===i?i=u:i===-1&&(i=e.length),e.slice(r,i)}else{for(a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===47){if(!s){r=a+1;break}}else i===-1&&(s=!1,i=a+1);return i===-1?"":e.slice(r,i)}},"basename"),extname:o(function(e){X(e);for(var t=-1,r=0,i=-1,s=!0,a=0,l=e.length-1;l>=0;--l){var u=e.charCodeAt(l);if(u===47){if(!s){r=l+1;break}continue}i===-1&&(s=!1,i=l+1),u===46?t===-1?t=l:a!==1&&(a=1):t!==-1&&(a=-1)}return t===-1||i===-1||a===0||a===1&&t===i-1&&t===r+1?"":e.slice(t,i)},"extname"),format:o(function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return $o("/",e)},"format"),parse:o(function(e){X(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var r=e.charCodeAt(0),i=r===47,s;i?(t.root="/",s=1):s=0;for(var a=-1,l=0,u=-1,d=!0,f=e.length-1,c=0;f>=s;--f){if(r=e.charCodeAt(f),r===47){if(!d){l=f+1;break}continue}u===-1&&(d=!1,u=f+1),r===46?a===-1?a=f:c!==1&&(c=1):a!==-1&&(c=-1)}return a===-1||u===-1||c===0||c===1&&a===u-1&&a===l+1?u!==-1&&(l===0&&i?t.base=t.name=e.slice(1,u):t.base=t.name=e.slice(l,u)):(l===0&&i?(t.name=e.slice(1,a),t.base=e.slice(1,u)):(t.name=e.slice(l,a),t.base=e.slice(l,u)),t.ext=e.slice(a,u)),l>0?t.dir=e.slice(0,l-1):i&&(t.dir="/"),t},"parse"),sep:"/",delimiter:":",win32:null,posix:null};xe.posix=xe;Sr.exports=xe});var ai=ee((pt,si)=>{(function(n,e){typeof pt=="object"&&typeof si<"u"?e(pt):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.compareVersions={}))})(pt,(function(n){"use strict";let e=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,t=o(h=>{if(typeof h!="string")throw new TypeError("Invalid argument expected string");let b=h.match(e);if(!b)throw new Error(`Invalid argument not valid semver ('${h}' received)`);return b.shift(),b},"validateAndParse"),r=o(h=>h==="*"||h==="x"||h==="X","isWildcard"),i=o(h=>{let b=parseInt(h,10);return isNaN(b)?h:b},"tryParse"),s=o((h,b)=>typeof h!=typeof b?[String(h),String(b)]:[h,b],"forceType"),a=o((h,b)=>{if(r(h)||r(b))return 0;let[v,E]=s(i(h),i(b));return v>E?1:v<E?-1:0},"compareStrings"),l=o((h,b)=>{for(let v=0;v<Math.max(h.length,b.length);v++){let E=a(h[v]||"0",b[v]||"0");if(E!==0)return E}return 0},"compareSegments"),u=o((h,b)=>{let v=t(h),E=t(b),A=v.pop(),T=E.pop(),S=l(v,E);return S!==0?S:A&&T?l(A.split("."),T.split(".")):A||T?A?-1:1:0},"compareVersions"),d=o((h,b,v)=>{p(v);let E=u(h,b);return f[v].includes(E)},"compare"),f={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]},c=Object.keys(f),p=o(h=>{if(typeof h!="string")throw new TypeError(`Invalid operator type, expected string but got ${typeof h}`);if(c.indexOf(h)===-1)throw new Error(`Invalid operator, expected one of ${c.join("|")}`)},"assertValidOperator"),m=o((h,b)=>{if(b=b.replace(/([><=]+)\s+/g,"$1"),b.includes("||"))return b.split("||").some(P=>m(h,P));if(b.includes(" - ")){let[P,G]=b.split(" - ",2);return m(h,`>=${P} <=${G}`)}else if(b.includes(" "))return b.trim().replace(/\s{2,}/g," ").split(" ").every(P=>m(h,P));let v=b.match(/^([<>=~^]+)/),E=v?v[1]:"=";if(E!=="^"&&E!=="~")return d(h,b,E);let[A,T,S,,I]=t(h),[K,N,_,,He]=t(b),Oe=[A,T,S],V=[K,N??"x",_??"x"];if(He&&(!I||l(Oe,V)!==0||l(I.split("."),He.split("."))===-1))return!1;let $=V.findIndex(P=>P!=="0")+1,ue=E==="~"?2:$>1?$:1;return!(l(Oe.slice(0,ue),V.slice(0,ue))!==0||l(Oe.slice(ue),V.slice(ue))===-1)},"satisfies"),g=o(h=>typeof h=="string"&&/^[v\d]/.test(h)&&e.test(h),"validate"),C=o(h=>typeof h=="string"&&/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/.test(h),"validateStrict");n.compare=d,n.compareVersions=u,n.satisfies=m,n.validate=g,n.validateStrict=C}))});var Ps={};$i(Ps,{default:()=>ks});module.exports=Bi(Ps);var M=require("obsidian");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function te(){}o(te,"noop");async function Y(){}o(Y,"noopAsync");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Wi=Number.POSITIVE_INFINITY;function an(...n){let e=n.filter(s=>!!s);if(typeof AbortSignal.any=="function")return AbortSignal.any(e);if(e.length===0)return pe();if(e.length===1&&e[0])return e[0];let t=new AbortController;for(let s of e)if(s.aborted)return s;let r=[];for(let s of e)r.push(qn(s,i));return t.signal;function i(s){for(let a of r)a();t.abort(s.reason)}}o(an,"abortSignalAny");function pe(){return new AbortController().signal}o(pe,"abortSignalNever");function Yn(n){if(n===Wi)return pe();if(typeof AbortSignal.timeout=="function")return AbortSignal.timeout(n);let e=new AbortController;return window.setTimeout(()=>{e.abort(new Error(`Timed out in ${String(n)} milliseconds`))},n),e.signal}o(Yn,"abortSignalTimeout");function qn(n,e){if(n.aborted)return e(n),te;return n.addEventListener("abort",t,{once:!0}),()=>{n.removeEventListener("abort",t)};function t(r){e(r.target)}o(t,"wrappedCallback")}o(qn,"onAbort");function Jn(n,e){return new Promise((t,r)=>{qn(n,()=>{e?r(n.reason):t(n.reason)})})}o(Jn,"waitForAbort");var wn=sn(lr(),1);o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function dn(n,e){let t=n.length,r=0;for(let i=0;i<t;i++){if(!Object.hasOwn(n,i))continue;let s=n[i];e(s,i,n)&&(n[r++]=s)}n.length=r}o(dn,"filterInPlace");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var q=class{static{o(this,"AsyncEvents")}eventRefsMap=new Map;off(e,t){let r=this.eventRefsMap.get(e);r&&(dn(r,i=>i.callback!==t),r.length===0&&this.eventRefsMap.delete(e))}offref(e){let t=this.eventRefsMap.get(e.name);t&&(dn(t,r=>r!==e),t.length===0&&this.eventRefsMap.delete(e.name))}on(e,t,r){let i=this.eventRefsMap.get(e);i||(i=[],this.eventRefsMap.set(e,i));let s={asyncEvents:this,callback:t,name:e,thisArg:r};return i.push(s),s}once(e,t,r){let i=this.on(e,t,r),s=this.on(e,()=>{this.offref(i),this.offref(s)});return i}trigger(e,...t){let r=this.eventRefsMap.get(e)??[];for(let i of r.slice())this.tryTrigger(i,t)}async triggerAsync(e,...t){let r=this.eventRefsMap.get(e)??[];for(let i of r.slice())await this.tryTriggerAsync(i,t)}tryTrigger(e,t){try{e.callback.apply(e.thisArg,t)}catch(r){window.setTimeout(()=>{throw r},0)}}async tryTriggerAsync(e,t){try{await e.callback.call(e.thisArg,...t)}catch(r){window.setTimeout(()=>{throw r},0)}}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var fn="asyncError",Xe=new q;Xe.on(fn,po);var cr="An unhandled error occurred executing async operation",dr="    at",we=class n extends Error{static{o(this,"CustomStackTraceError")}constructor(e,t,r){super(e,{cause:r}),this.name="CustomStackTraceError",Error.captureStackTrace?.(this,n);let i=r,s=new Set;for(;i instanceof n;){if(s.has(i))throw new Error("Circular cause detected");s.add(i),i=i.cause}let a=(this.stack??"").split(`
`),l=t.split(`
`);/^\w*Error(?:: |$)/.test(l[0]??"")&&l.splice(0,1),a.splice(1,a.length-1,...l),this.stack=a.join(`
`)}},be=class n extends Error{static{o(this,"SilentError")}constructor(e){super(e),this.name="SilentError",Error.captureStackTrace?.(this,n)}};function fr(n){Xe.trigger(fn,n)}o(fr,"emitAsyncErrorEvent");function pn(n){if(!(n instanceof Error))return String(n);let e=n.stack??`${n.name}: ${n.message}`;if(n.cause!==void 0){let t=pn(n.cause).split(`
`);e+=`
${ur("Caused by:")}`;for(let r of t)r.trim()&&(e+=r.startsWith(dr)?`
${r}`:`
${ur(r)}`)}return e}o(pn,"errorToString");function ye(n=0){return(new Error().stack??"").split(`
`).slice(n+2).join(`
`)}o(ye,"getStackTrace");function pr(n,e){e??=globalThis.console,e.error(pn(n))}o(pr,"printError");function hr(n){let e=Xe.on(fn,n);return()=>{Xe.offref(e)}}o(hr,"registerAsyncErrorEventHandler");function De(n){throw n}o(De,"throwExpression");function ur(n){return`${dr} --- ${n} --- (0)`}o(ur,"generateStackTraceLine");function po(n){pr(n)}o(po,"handleAsyncError");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var hn="46.17.1",Ze="obsidian-dev-utils",mr=`.obsidian-dev-utils.code-highlighter-component textarea, .obsidian-dev-utils.code-highlighter-component pre, .obsidian-dev-utils.code-highlighter-component code {
  font-family: var(--font-monospace);
  line-height: var(--line-height-normal);
  margin: 0;
}
.obsidian-dev-utils.code-highlighter-component textarea, .obsidian-dev-utils.code-highlighter-component code {
  font-size: var(--code-size);
}
.obsidian-dev-utils.code-highlighter-component textarea {
  background: transparent;
  color: transparent;
  z-index: 2;
  width: 20em;
  height: 10em;
}
.obsidian-dev-utils.code-highlighter-component pre {
  position: absolute;
  pointer-events: none;
  border: var(--input-border-width) solid transparent;
  overflow: auto;
  inset: 0;
  padding: var(--size-4-1) var(--size-4-2);
  z-index: 1;
}
.obsidian-dev-utils.code-highlighter-component pre::after {
  content: "";
  display: block;
  height: var(--bottom-gap, 0);
}
.obsidian-dev-utils.code-highlighter-component pre.is-placeholder {
  opacity: 0.6;
}
.obsidian-dev-utils.code-highlighter-component code {
  display: block;
  padding: 0;
}

.obsidian-dev-utils input[type=url] {
  height: var(--input-height);
}
.obsidian-dev-utils input[type=month],
.obsidian-dev-utils input[type=tel],
.obsidian-dev-utils input[type=time],
.obsidian-dev-utils input[type=url],
.obsidian-dev-utils input[type=week] {
  -webkit-app-region: no-drag;
  background: var(--background-modifier-form-field);
  border: var(--input-border-width) solid var(--background-modifier-border);
  color: var(--text-normal);
  font-family: inherit;
  padding: var(--size-4-1) var(--size-4-2);
  font-size: var(--font-ui-small);
  border-radius: var(--input-radius);
  outline: none;
}
@media (hover: hover) {
  .obsidian-dev-utils input[type=month]:hover,
  .obsidian-dev-utils input[type=tel]:hover,
  .obsidian-dev-utils input[type=time]:hover,
  .obsidian-dev-utils input[type=url]:hover,
  .obsidian-dev-utils input[type=week]:hover {
    border-color: var(--background-modifier-border-hover);
    transition: box-shadow 0.15s ease-in-out, border 0.15s ease-in-out;
  }
}
.obsidian-dev-utils input[type=month]:active, .obsidian-dev-utils input[type=month]:focus,
.obsidian-dev-utils input[type=tel]:active,
.obsidian-dev-utils input[type=tel]:focus,
.obsidian-dev-utils input[type=time]:active,
.obsidian-dev-utils input[type=time]:focus,
.obsidian-dev-utils input[type=url]:active,
.obsidian-dev-utils input[type=url]:focus,
.obsidian-dev-utils input[type=week]:active,
.obsidian-dev-utils input[type=week]:focus {
  border-color: var(--background-modifier-border-focus);
  transition: box-shadow 0.15s ease-in-out, border 0.15s ease-in-out;
}
.obsidian-dev-utils input[type=month]:active, .obsidian-dev-utils input[type=month]:focus, .obsidian-dev-utils input[type=month]:focus-visible,
.obsidian-dev-utils input[type=tel]:active,
.obsidian-dev-utils input[type=tel]:focus,
.obsidian-dev-utils input[type=tel]:focus-visible,
.obsidian-dev-utils input[type=time]:active,
.obsidian-dev-utils input[type=time]:focus,
.obsidian-dev-utils input[type=time]:focus-visible,
.obsidian-dev-utils input[type=url]:active,
.obsidian-dev-utils input[type=url]:focus,
.obsidian-dev-utils input[type=url]:focus-visible,
.obsidian-dev-utils input[type=week]:active,
.obsidian-dev-utils input[type=week]:focus,
.obsidian-dev-utils input[type=week]:focus-visible {
  box-shadow: 0 0 0 2px var(--background-modifier-border-focus);
}
.obsidian-dev-utils input[type=month]::placeholder,
.obsidian-dev-utils input[type=tel]::placeholder,
.obsidian-dev-utils input[type=time]::placeholder,
.obsidian-dev-utils input[type=url]::placeholder,
.obsidian-dev-utils input[type=week]::placeholder {
  color: var(--text-faint);
}
.mod-rtl input[type=month],
.mod-rtl input[type=time],
.mod-rtl input[type=week],
.is-rtl input[type=month],
.is-rtl input[type=time],
.is-rtl input[type=week],
.rtl input[type=month],
.rtl input[type=time],
.rtl input[type=week] {
  direction: rtl;
}
.mod-rtl input[type=month]::-webkit-calendar-picker-indicator,
.mod-rtl input[type=time]::-webkit-calendar-picker-indicator,
.mod-rtl input[type=week]::-webkit-calendar-picker-indicator,
.is-rtl input[type=month]::-webkit-calendar-picker-indicator,
.is-rtl input[type=time]::-webkit-calendar-picker-indicator,
.is-rtl input[type=week]::-webkit-calendar-picker-indicator,
.rtl input[type=month]::-webkit-calendar-picker-indicator,
.rtl input[type=time]::-webkit-calendar-picker-indicator,
.rtl input[type=week]::-webkit-calendar-picker-indicator {
  right: var(--size-4-1);
  left: auto;
}

.obsidian-dev-utils input[type=month],
.obsidian-dev-utils input[type=time],
.obsidian-dev-utils input[type=week] {
  font-variant-numeric: tabular-nums;
  position: relative;
}
.obsidian-dev-utils input[type=month]::-webkit-datetime-edit-text,
.obsidian-dev-utils input[type=time]::-webkit-datetime-edit-text,
.obsidian-dev-utils input[type=week]::-webkit-datetime-edit-text {
  color: var(--text-faint);
  padding-inline-end: 0;
}
.obsidian-dev-utils input[type=month]::-webkit-calendar-picker-indicator,
.obsidian-dev-utils input[type=time]::-webkit-calendar-picker-indicator,
.obsidian-dev-utils input[type=week]::-webkit-calendar-picker-indicator {
  position: absolute;
  left: var(--size-4-1);
  right: auto;
  opacity: 0.5;
}
.obsidian-dev-utils input[type=month]::-webkit-datetime-edit-month-field:active, .obsidian-dev-utils input[type=month]::-webkit-datetime-edit-month-field:focus, .obsidian-dev-utils input[type=month]::-webkit-datetime-edit-day-field:active, .obsidian-dev-utils input[type=month]::-webkit-datetime-edit-day-field:focus, .obsidian-dev-utils input[type=month]::-webkit-datetime-edit-year-field:active, .obsidian-dev-utils input[type=month]::-webkit-datetime-edit-year-field:focus,
.obsidian-dev-utils input[type=time]::-webkit-datetime-edit-month-field:active,
.obsidian-dev-utils input[type=time]::-webkit-datetime-edit-month-field:focus,
.obsidian-dev-utils input[type=time]::-webkit-datetime-edit-day-field:active,
.obsidian-dev-utils input[type=time]::-webkit-datetime-edit-day-field:focus,
.obsidian-dev-utils input[type=time]::-webkit-datetime-edit-year-field:active,
.obsidian-dev-utils input[type=time]::-webkit-datetime-edit-year-field:focus,
.obsidian-dev-utils input[type=week]::-webkit-datetime-edit-month-field:active,
.obsidian-dev-utils input[type=week]::-webkit-datetime-edit-month-field:focus,
.obsidian-dev-utils input[type=week]::-webkit-datetime-edit-day-field:active,
.obsidian-dev-utils input[type=week]::-webkit-datetime-edit-day-field:focus,
.obsidian-dev-utils input[type=week]::-webkit-datetime-edit-year-field:active,
.obsidian-dev-utils input[type=week]::-webkit-datetime-edit-year-field:focus {
  background-color: var(--text-selection);
  color: var(--text-normal);
  cursor: text;
}
.mod-rtl .obsidian-dev-utils input[type=month], .is-rtl .obsidian-dev-utils input[type=month], .rtl .obsidian-dev-utils input[type=month],
.mod-rtl .obsidian-dev-utils input[type=time],
.is-rtl .obsidian-dev-utils input[type=time],
.rtl .obsidian-dev-utils input[type=time],
.mod-rtl .obsidian-dev-utils input[type=week],
.is-rtl .obsidian-dev-utils input[type=week],
.rtl .obsidian-dev-utils input[type=week] {
  direction: rtl;
}
.mod-rtl .obsidian-dev-utils input[type=month]::-webkit-calendar-picker-indicator, .is-rtl .obsidian-dev-utils input[type=month]::-webkit-calendar-picker-indicator, .rtl .obsidian-dev-utils input[type=month]::-webkit-calendar-picker-indicator,
.mod-rtl .obsidian-dev-utils input[type=time]::-webkit-calendar-picker-indicator,
.is-rtl .obsidian-dev-utils input[type=time]::-webkit-calendar-picker-indicator,
.rtl .obsidian-dev-utils input[type=time]::-webkit-calendar-picker-indicator,
.mod-rtl .obsidian-dev-utils input[type=week]::-webkit-calendar-picker-indicator,
.is-rtl .obsidian-dev-utils input[type=week]::-webkit-calendar-picker-indicator,
.rtl .obsidian-dev-utils input[type=week]::-webkit-calendar-picker-indicator {
  left: auto;
  right: var(--size-4-1);
}

body:not(.is-ios):not(.is-android) .obsidian-dev-utils input[type=month],
body:not(.is-ios):not(.is-android) .obsidian-dev-utils input[type=time],
body:not(.is-ios):not(.is-android) .obsidian-dev-utils input[type=week] {
  padding-inline-start: var(--size-4-6);
}

.obsidian-dev-utils input[type=time]::-webkit-calendar-picker-indicator {
  margin-inline-start: 0;
}

.obsidian-dev-utilsprogress.loop {
  min-width: 200px;
}

.obsidian-dev-utils.modal-container .ok-button {
  margin-right: 10px;
  margin-top: 20px;
}

.obsidian-dev-utils .multiple-dropdown-component select,
.obsidian-dev-utils .multiple-dropdown-component select:focus,
.obsidian-dev-utils .multiple-dropdown-component .dropdown {
  height: auto;
  padding-top: 3px;
}
.obsidian-dev-utils .multiple-dropdown-component select option:checked,
.obsidian-dev-utils .multiple-dropdown-component select:focus option:checked,
.obsidian-dev-utils .multiple-dropdown-component .dropdown option:checked {
  background-color: #1967d2;
  color: #fff;
}

.obsidian-dev-utils.plugin-settings-tab a:focus {
  outline: 2px solid var(--link-color);
}

.obsidian-dev-utils.prompt-modal .text-box {
  width: 100%;
}

.obsidian-dev-utils.tri-state-checkbox-component input[type=checkbox]:indeterminate {
  appearance: checkbox;
}

.obsidian-dev-utils :invalid {
  box-shadow: 0 0 0 2px var(--text-error);
}
.obsidian-dev-utils input.metadata-input-text:active:invalid, .obsidian-dev-utils input.metadata-input-text:focus-visible:invalid, .obsidian-dev-utils input.metadata-input-text:focus:invalid,
.obsidian-dev-utils input[type=date]:active:invalid,
.obsidian-dev-utils input[type=date]:focus-visible:invalid,
.obsidian-dev-utils input[type=date]:focus:invalid,
.obsidian-dev-utils input[type=datetime-local]:active:invalid,
.obsidian-dev-utils input[type=datetime-local]:focus-visible:invalid,
.obsidian-dev-utils input[type=datetime-local]:focus:invalid,
.obsidian-dev-utils input[type=email]:active:invalid,
.obsidian-dev-utils input[type=email]:focus-visible:invalid,
.obsidian-dev-utils input[type=email]:focus:invalid,
.obsidian-dev-utils input[type=number]:active:invalid,
.obsidian-dev-utils input[type=number]:focus-visible:invalid,
.obsidian-dev-utils input[type=number]:focus:invalid,
.obsidian-dev-utils input[type=password]:active:invalid,
.obsidian-dev-utils input[type=password]:focus-visible:invalid,
.obsidian-dev-utils input[type=password]:focus:invalid,
.obsidian-dev-utils input[type=search]:active:invalid,
.obsidian-dev-utils input[type=search]:focus-visible:invalid,
.obsidian-dev-utils input[type=search]:focus:invalid,
.obsidian-dev-utils input[type=text]:active:invalid,
.obsidian-dev-utils input[type=text]:focus-visible:invalid,
.obsidian-dev-utils input[type=text]:focus:invalid,
.obsidian-dev-utils textarea:active:invalid,
.obsidian-dev-utils textarea:focus-visible:invalid,
.obsidian-dev-utils textarea:focus:invalid {
  box-shadow: 0 0 0 2px var(--text-error);
}
.obsidian-dev-utils.setting-component-wrapper {
  position: relative;
  display: inline-flex;
}
.obsidian-dev-utils.overlay-validator {
  caret-color: transparent;
  cursor: default;
  position: absolute;
  background-color: transparent;
  border: none;
  outline: none;
  pointer-events: none;
  z-index: 9999;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
}
.obsidian-dev-utils.tooltip.tooltip-validator {
  position: absolute;
  top: calc(100% + 8px);
  width: max-content;
}

/*# sourceMappingURL=data:application/json;charset=utf-8,%7B%22version%22:3,%22sourceRoot%22:%22%22,%22sources%22:%5B%22../src/styles/code-highlighter-component.scss%22,%22../src/styles/input.scss%22,%22../src/styles/input-time.scss%22,%22../src/styles/loop.scss%22,%22../src/styles/modal-container.scss%22,%22../src/styles/multiple-dropdown-component.scss%22,%22../src/styles/plugin-settings-tab.scss%22,%22../src/styles/prompt-modal.scss%22,%22../src/styles/tri-state-checkbox-component.scss%22,%22../src/styles/validation.scss%22%5D,%22names%22:%5B%5D,%22mappings%22:%22AAEI;EACE;EACA;EACA;;AAGF;EACE;;AAGF;EACE;EACA;EACA;EACA;EACA;;AAGF;EACE;EACA;EACA;EACA;EACA;EACA;EACA;;AAGF;EACE;EACA;EACA;;AAGF;EACE;;AAGF;EACE;EACA;;;ACzCJ;EACE;;AAGF;AAAA;AAAA;AAAA;AAAA;EAKE;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;AAGE;EACE;AAAA;AAAA;AAAA;AAAA;IACE;IACA,YACE;;;AAMR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EAEE;EACA,YACE;;AAIJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EAGE;;AAGF;AAAA;AAAA;AAAA;AAAA;EACE;;AASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EAGE;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EACE;EACA;;;AC7DV;AAAA;AAAA;EAGE;EACA;;AAEA;AAAA;AAAA;EACE;EACA;;AAGF;AAAA;AAAA;EACE;EACA;EACA;EACA;;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EAEE;EACA;EACA;;AAIK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EAGP;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EACE;EACA;;;AAKF;AAAA;AAAA;EACE;;;AAMJ;EACE;;;ACjDJ;EACE;;;ACAA;EACE;EACA;;;ACFF;AAAA;AAAA;EAGE;EACA;;AAEA;AAAA;AAAA;EACE;EACA;;;ACRJ;EACE;;;ACDF;EACE;;;ACDF;EACE;;;ACEJ;EAJA;;AAoBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EApBJ;;AA0BA;EACE;EACA;;AAGF;EACE;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;AAGF;EACE;EACA;EACA%22,%22file%22:%22styles.css%22,%22sourcesContent%22:%5B%22.obsidian-dev-utils%20%7B%5Cn%20%20&.code-highlighter-component%20%7B%5Cn%20%20%20%20textarea,%20pre,%20code%20%7B%5Cn%20%20%20%20%20%20font-family:%20var(--font-monospace);%5Cn%20%20%20%20%20%20line-height:%20var(--line-height-normal);%5Cn%20%20%20%20%20%20margin:%200;%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20textarea,%20code%20%7B%5Cn%20%20%20%20%20%20font-size:%20var(--code-size);%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20textarea%20%7B%5Cn%20%20%20%20%20%20background:%20transparent;%5Cn%20%20%20%20%20%20color:%20transparent;%5Cn%20%20%20%20%20%20z-index:%202;%5Cn%20%20%20%20%20%20width:%2020em;%5Cn%20%20%20%20%20%20height:%2010em;%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20pre%20%7B%5Cn%20%20%20%20%20%20position:%20absolute;%5Cn%20%20%20%20%20%20pointer-events:%20none;%5Cn%20%20%20%20%20%20border:%20var(--input-border-width)%20solid%20transparent;%5Cn%20%20%20%20%20%20overflow:%20auto;%5Cn%20%20%20%20%20%20inset:%200;%5Cn%20%20%20%20%20%20padding:%20var(--size-4-1)%20var(--size-4-2);%5Cn%20%20%20%20%20%20z-index:%201;%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20pre::after%20%7B%5Cn%20%20%20%20%20%20content:%20%5C%22%5C%22;%5Cn%20%20%20%20%20%20display:%20block;%5Cn%20%20%20%20%20%20height:%20var(--bottom-gap,%200);%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20pre.is-placeholder%20%7B%5Cn%20%20%20%20%20%20opacity:%200.6;%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20code%20%7B%5Cn%20%20%20%20%20%20display:%20block;%5Cn%20%20%20%20%20%20padding:%200;%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cn%20%20input%5Btype='url'%5D%20%7B%5Cn%20%20%20%20height:%20var(--input-height)%5Cn%20%20%7D%5Cn%5Cn%20%20input%5Btype='month'%5D,%5Cn%20%20input%5Btype='tel'%5D,%5Cn%20%20input%5Btype='time'%5D,%5Cn%20%20input%5Btype='url'%5D,%5Cn%20%20input%5Btype='week'%5D%20%7B%5Cn%20%20%20%20-webkit-app-region:%20no-drag;%5Cn%20%20%20%20background:%20var(--background-modifier-form-field);%5Cn%20%20%20%20border:%20var(--input-border-width)%20solid%20var(--background-modifier-border);%5Cn%20%20%20%20color:%20var(--text-normal);%5Cn%20%20%20%20font-family:%20inherit;%5Cn%20%20%20%20padding:%20var(--size-4-1)%20var(--size-4-2);%5Cn%20%20%20%20font-size:%20var(--font-ui-small);%5Cn%20%20%20%20border-radius:%20var(--input-radius);%5Cn%20%20%20%20outline:%20none;%5Cn%5Cn%20%20%20%20@at-root%20%7B%5Cn%20%20%20%20%20%20@media%20(hover:%20hover)%20%7B%5Cn%20%20%20%20%20%20%20%20&:hover%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20border-color:%20var(--background-modifier-border-hover);%5Cn%20%20%20%20%20%20%20%20%20%20transition:%5Cn%20%20%20%20%20%20%20%20%20%20%20%20box-shadow%200.15s%20ease-in-out,%5Cn%20%20%20%20%20%20%20%20%20%20%20%20border%200.15s%20ease-in-out;%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20&:active,%5Cn%20%20%20%20&:focus%20%7B%5Cn%20%20%20%20%20%20border-color:%20var(--background-modifier-border-focus);%5Cn%20%20%20%20%20%20transition:%5Cn%20%20%20%20%20%20%20%20box-shadow%200.15s%20ease-in-out,%5Cn%20%20%20%20%20%20%20%20border%200.15s%20ease-in-out;%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20&:active,%5Cn%20%20%20%20&:focus,%5Cn%20%20%20%20&:focus-visible%20%7B%5Cn%20%20%20%20%20%20box-shadow:%200%200%200%202px%20var(--background-modifier-border-focus);%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20&::placeholder%20%7B%5Cn%20%20%20%20%20%20color:%20var(--text-faint);%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%5Cn%20%20@at-root%20%7B%5Cn%20%20%20%20.mod-rtl,%5Cn%20%20%20%20.is-rtl,%5Cn%20%20%20%20.rtl%20%7B%5Cn%20%20%20%20%20%20&%20%7B%5Cn%20%20%20%20%20%20%20%20input%5Btype='month'%5D,%5Cn%20%20%20%20%20%20%20%20input%5Btype='time'%5D,%5Cn%20%20%20%20%20%20%20%20input%5Btype='week'%5D%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20direction:%20rtl;%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20&::-webkit-calendar-picker-indicator%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20right:%20var(--size-4-1);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20left:%20auto;%5Cn%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cn%20%20input%5Btype='month'%5D,%5Cn%20%20input%5Btype='time'%5D,%5Cn%20%20input%5Btype='week'%5D%20%7B%5Cn%20%20%20%20font-variant-numeric:%20tabular-nums;%5Cn%20%20%20%20position:%20relative;%5Cn%5Cn%20%20%20%20&::-webkit-datetime-edit-text%20%7B%5Cn%20%20%20%20%20%20color:%20var(--text-faint);%5Cn%20%20%20%20%20%20padding-inline-end:%200;%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20&::-webkit-calendar-picker-indicator%20%7B%5Cn%20%20%20%20%20%20position:%20absolute;%5Cn%20%20%20%20%20%20left:%20var(--size-4-1);%5Cn%20%20%20%20%20%20right:%20auto;%5Cn%20%20%20%20%20%20opacity:%200.5;%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20&::-webkit-datetime-edit-month-field,%5Cn%20%20%20%20&::-webkit-datetime-edit-day-field,%5Cn%20%20%20%20&::-webkit-datetime-edit-year-field%20%7B%5Cn%20%20%20%20%20%20&:active,%5Cn%20%20%20%20%20%20&:focus%20%7B%5Cn%20%20%20%20%20%20%20%20background-color:%20var(--text-selection);%5Cn%20%20%20%20%20%20%20%20color:%20var(--text-normal);%5Cn%20%20%20%20%20%20%20%20cursor:%20text;%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20@at-root%20.mod-rtl%20&,%5Cn%20%20%20%20%20%20.is-rtl%20&,%5Cn%20%20%20%20%20%20.rtl%20&%20%7B%5Cn%20%20%20%20%20%20direction:%20rtl;%5Cn%5Cn%20%20%20%20%20%20&::-webkit-calendar-picker-indicator%20%7B%5Cn%20%20%20%20%20%20%20%20left:%20auto;%5Cn%20%20%20%20%20%20%20%20right:%20var(--size-4-1);%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20@at-root%20%7B%5Cn%20%20%20%20%20%20body:not(.is-ios):not(.is-android)%20&%20%7B%5Cn%20%20%20%20%20%20%20%20padding-inline-start:%20var(--size-4-6);%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%5Cn%20%20input%5Btype='time'%5D%20%7B%5Cn%20%20%20%20&::-webkit-calendar-picker-indicator%20%7B%5Cn%20%20%20%20%20%20margin-inline-start:%200;%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cn%20%20&progress.loop%20%7B%5Cn%20%20%20%20min-width:%20200px;%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cn%20%20&.modal-container%20%7B%5Cn%20%20%20%20.ok-button%20%7B%5Cn%20%20%20%20%20%20margin-right:%2010px;%5Cn%20%20%20%20%20%20margin-top:%2020px;%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cn%20%20.multiple-dropdown-component%20%7B%5Cn%20%20%20%20select,%5Cn%20%20%20%20select:focus,%5Cn%20%20%20%20.dropdown%20%7B%5Cn%20%20%20%20%20%20height:%20auto;%5Cn%20%20%20%20%20%20padding-top:%203px;%5Cn%5Cn%20%20%20%20%20%20option:checked%20%7B%5Cn%20%20%20%20%20%20%20%20background-color:%20%231967d2;%5Cn%20%20%20%20%20%20%20%20color:%20%23fff;%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cn%20%20&.plugin-settings-tab%20%7B%5Cn%20%20%20%20a:focus%20%7B%5Cn%20%20%20%20%20%20outline:%202px%20solid%20var(--link-color);%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cn%20%20&.prompt-modal%20%7B%5Cn%20%20%20%20.text-box%20%7B%5Cn%20%20%20%20%20%20width:%20100%25;%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cr%5Cn%20%20&.tri-state-checkbox-component%20%7B%5Cr%5Cn%20%20%20%20input%5Btype='checkbox'%5D:indeterminate%20%7B%5Cr%5Cn%20%20%20%20%20%20appearance:%20checkbox;%5Cr%5Cn%20%20%20%20%7D%5Cr%5Cn%20%20%7D%5Cr%5Cn%7D%5Cr%5Cn%22,%22@mixin%20invalid%20%7B%5Cn%20%20box-shadow:%200%200%200%202px%20var(--text-error);%5Cn%7D%5Cn%5Cn.obsidian-dev-utils%20%7B%5Cn%20%20:invalid%20%7B%5Cn%20%20%20%20@include%20invalid;%5Cn%20%20%7D%5Cn%5Cn%20%20input.metadata-input-text,%5Cn%20%20input%5Btype='date'%5D,%5Cn%20%20input%5Btype='datetime-local'%5D,%5Cn%20%20input%5Btype='email'%5D,%5Cn%20%20input%5Btype='number'%5D,%5Cn%20%20input%5Btype='password'%5D,%5Cn%20%20input%5Btype='search'%5D,%5Cn%20%20input%5Btype='text'%5D,%5Cn%20%20textarea%20%7B%5Cn%20%20%20%20&:active,%5Cn%20%20%20%20&:focus-visible,%5Cn%20%20%20%20&:focus%20%7B%5Cn%20%20%20%20%20%20&:invalid%20%7B%5Cn%20%20%20%20%20%20%20%20@include%20invalid;%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%5Cn%20%20&.setting-component-wrapper%20%7B%5Cn%20%20%20%20position:%20relative;%5Cn%20%20%20%20display:%20inline-flex;%5Cn%20%20%7D%5Cn%5Cn%20%20&.overlay-validator%20%7B%5Cn%20%20%20%20caret-color:%20transparent;%5Cn%20%20%20%20cursor:%20default;%5Cn%20%20%20%20position:%20absolute;%5Cn%20%20%20%20background-color:%20transparent;%5Cn%20%20%20%20border:%20none;%5Cn%20%20%20%20outline:%20none;%5Cn%20%20%20%20pointer-events:%20none;%5Cn%20%20%20%20z-index:%209999;%5Cn%20%20%20%20left:%200;%5Cn%20%20%20%20top:%200;%5Cn%20%20%20%20width:%20100%25;%5Cn%20%20%20%20height:%20100%25;%5Cn%20%20%7D%5Cn%5Cn%20%20&.tooltip.tooltip-validator%20%7B%5Cn%20%20%20%20position:%20absolute;%5Cn%20%20%20%20top:%20calc(100%25%20+%208px);%5Cn%20%20%20%20width:%20max-content;%5Cn%20%20%7D%5Cn%7D%5Cn%22%5D%7D */
`;o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var mn=class{static{o(this,"ValueWrapper")}constructor(e){this.value=e}};function ho(){let n=globalThis.app;if(n)return n;try{return globalThis.require("obsidian/app")}catch{throw new Error("Obsidian App global instance not found")}}o(ho,"getApp");function ve(n,e,t){let i=n??mo()??globalThis;return i.obsidianDevUtilsState??={},i.obsidianDevUtilsState[e]??=new mn(t)}o(ve,"getObsidianDevUtilsState");function mo(){return typeof window>"u"?null:ho()}o(mo,"getAppOrNull");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var gn="__no-plugin-id-initialized__",gr=gn;function Qe(){return gr}o(Qe,"getPluginId");function wr(n){n&&(gr=n)}o(wr,"setPluginId");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var br=",",et="-";function yr(){return{disable:go,enable:wo,get:tt,set:Ie}}o(yr,"getDebugController");function Ve(n,e=0){let t=`${n}:${String(e)}`,r=ve(null,"debuggers",new Map).value,i=r.get(t);return i||(i=Me()(n),i.log=(s,...a)=>{yo(n,e,s,...a)},r.set(t,i)),i}o(Ve,"getDebugger");function Ce(n){let e=Qe(),t=e===gn?"":`${e}:`;return Ve(`${t}${Ze}:${n}`)}o(Ce,"getLibDebugger");function vr(n){let e=Me().enabled(n),t=e?"enabled":"disabled",r=e?"disable":"enable",i=tt();Ie(n),Ve(n)(`Debug messages for plugin ${n} are ${t}. See https://github.com/mnaoumov/obsidian-dev-utils/blob/main/docs/debugging.md how to ${r} them.`),Ie(i)}o(vr,"showInitialDebugMessage");function go(n){let e=new Set(tt());for(let t of Ne(n)){if(t.startsWith(et))continue;let r=et+t;e.has(t)&&e.delete(t),e.add(r)}Ie(Array.from(e))}o(go,"disableNamespaces");function wo(n){let e=new Set(tt());for(let t of Ne(n)){if(!t.startsWith(et)){let r=et+t;e.has(r)&&e.delete(r)}e.add(t)}Ie(Array.from(e))}o(wo,"enableNamespaces");function tt(){return Ne(Me().load()??"")}o(tt,"getNamespaces");function Me(){return typeof window>"u"?wn.default:ve(null,"debug",wn.default).value}o(Me,"getSharedDebugLibInstance");function bo(){return typeof window<"u"}o(bo,"isInObsidian");function yo(n,e,t,...r){if(!Me().enabled(n))return;if(!bo()){console.debug(t,...r);return}let i=4,s=new Error().stack?.split(`
`)??[];s.splice(0,i+e),console.debug(t,...r,`

---
Logger stack trace:
`,vo(s.join(`
`)))}o(yo,"logWithCaller");function vo(n){return new we("Debug mode: intentional placeholder error. See https://github.com/mnaoumov/obsidian-dev-utils/blob/main/docs/debugging.md.",n,void 0)}o(vo,"makeStackTraceError");function Ie(n){Me().enable(Ne(n).join(br))}o(Ie,"setNamespaces");function Ne(n){return typeof n=="string"?n.split(br).filter(Boolean):n.flatMap(Ne)}o(Ne,"toArray");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Ao={"\n":"\\n","\r":"\\r","	":"\\t","\b":"\\b","\f":"\\f","'":"\\'",'"':'\\"',"\\":"\\\\"};var Eo={};for(let[n,e]of Object.entries(Ao))Eo[e]=n;function bn(n,e,t){return typeof t>"u"?n:(e instanceof RegExp&&!e.global&&(e=new RegExp(e.source,`${e.flags}g`)),typeof t=="string"?n.replaceAll(e,t):n.replaceAll(e,(r,...i)=>{let a=typeof i.at(-1)=="object",l=a?i.length-2:i.length-1,u={groups:a?i.at(-1):void 0,missingGroupIndices:[],offset:i.at(l-1),source:i.at(l),substring:r},d=i.slice(0,l-1).map((f,c)=>{if(typeof f=="string")return f;if(typeof f>"u")return u.missingGroupIndices.push(c),"";throw new Error(`Unexpected argument type: ${typeof f}`)});return t(u,...d)??u.substring}))}o(bn,"replaceAll");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var xo=[{constructor:ArrayBuffer,equalityComparer:To},{constructor:Date,equalityComparer:So},{constructor:RegExp,equalityComparer:Po},{constructor:Map,equalityComparer:ko},{constructor:Set,equalityComparer:Oo}];function J(n,e){if(n===e)return!0;if(typeof n!="object"||typeof e!="object"||n===null||e===null)return!1;let t=n.constructor,r=e.constructor;if(t!==r)return!1;if(t!==Object){let u=Fo(n,e);if(u!==void 0)return u}let i=Ae(n),s=Ae(e);if(i.length!==s.length)return!1;let a=n,l=e;for(let u of i)if(!s.includes(u)||!J(a[u],l[u]))return!1;return!0}o(J,"deepEqual");function ne(n){return typeof n!="object"||n===null?n:"default"in n?n.default:n}o(ne,"extractDefaultExportInterop");function Ae(n){let e=[],t=n;for(;t;){let r=Object.getOwnPropertyDescriptors(t);for(let[i,s]of Object.entries(r)){if(i==="__proto__"||typeof s.value=="function")continue;let a=typeof s.get=="function",l=typeof s.set=="function";if(a||l){a&&l&&e.push(i);continue}s.enumerable&&s.writable&&e.push(i)}t=Object.getPrototypeOf(t)}return e.sort()}o(Ae,"getAllKeys");function To(n,e){if(n.byteLength!==e.byteLength)return!1;let t=new Uint8Array(n),r=new Uint8Array(e);return J(t,r)}o(To,"deepEqualArrayBuffer");function So(n,e){return n.getTime()===e.getTime()}o(So,"deepEqualDate");function ko(n,e){if(n.size!==e.size)return!1;for(let[t,r]of n.entries())if(!e.has(t)||!J(r,e.get(t)))return!1;return!0}o(ko,"deepEqualMap");function Po(n,e){return n.source===e.source&&n.flags===e.flags}o(Po,"deepEqualRegExp");function Oo(n,e){if(n.size!==e.size)return!1;for(let t of n){if(e.has(t))continue;let r=!1;for(let i of e)if(J(t,i)){r=!0;break}if(!r)return!1}return!0}o(Oo,"deepEqualSet");function Fo(n,e){for(let{constructor:t,equalityComparer:r}of xo)if(n instanceof t&&e instanceof t)return r(n,e)}o(Fo,"deepEqualTyped");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();async function Ro(n,e){e??=ye(1);try{await n()}catch(t){let r=new we(cr,e,t);if(Lo(r))return;fr(r)}}o(Ro,"addErrorHandler");function Ee(n,e){return e??=ye(1),(...t)=>{let r=ye(1);e=`${e??""}
    at --- convertAsyncToSync --- (0)
${r}`,k(()=>n(...t),e)}}o(Ee,"convertAsyncToSync");function Lo(n){let e=n;for(;!(e instanceof be);){if(!(e instanceof Error))return!1;e=e.cause}return Ce("Async:handleSilentError")(n),!0}o(Lo,"handleSilentError");function k(n,e){e??=ye(1),Ro(n,e)}o(k,"invokeAsyncSafely");function Cr(n,e=0,t,r){r??=pe(),r.throwIfAborted(),t??=ye(1),k(async()=>{await Do(e,r,!0),await n(r)},t)}o(Cr,"invokeAsyncSafelyAfterDelay");async function Do(n,e,t){await Jn(an(e,Yn(n))),t&&e?.throwIfAborted()}o(Do,"sleep");var ie=require("obsidian");var Io=require("obsidian"),Vo=require("obsidian"),Mo=require("obsidian"),Na=require("obsidian"),_a=require("obsidian"),No=require("obsidian"),_o=require("obsidian"),Er=require("obsidian");var re={AudioRecorder:"audio-recorder",Backlink:"backlink",Bases:"bases",Bookmarks:"bookmarks",Canvas:"canvas",CommandPalette:"command-palette",DailyNotes:"daily-notes",EditorStatus:"editor-status",FileExplorer:"file-explorer",FileRecovery:"file-recovery",Footnotes:"footnotes",GlobalSearch:"global-search",Graph:"graph",MarkdownImporter:"markdown-importer",NoteComposer:"note-composer",OutgoingLink:"outgoing-link",Outline:"outline",PagePreview:"page-preview",Properties:"properties",Publish:"publish",RandomNote:"random-note",SlashCommand:"slash-command",Slides:"slides",Switcher:"switcher",Sync:"sync",TagPane:"tag-pane",Templates:"templates",Webviewer:"webviewer",WordCount:"word-count",Workspaces:"workspaces",ZkPrefixer:"zk-prefixer"},Ar={AllProperties:"all-properties",Audio:"audio",Backlink:re.Backlink,Bases:re.Bases,Bookmarks:re.Bookmarks,Canvas:re.Canvas,Empty:"empty",FileExplorer:re.FileExplorer,FileProperties:"file-properties",Graph:re.Graph,Image:"image",LocalGraph:"localgraph",Markdown:"markdown",OutgoingLink:re.OutgoingLink,Outline:re.Outline,Pdf:"pdf",ReleaseNotes:"release-notes",Search:"search",Sync:"sync",Table:"table",Tag:"tag",Video:"video",Webviewer:"webviewer",WebviewerHistory:"webviewer-history"};async function xr(){return await(0,Er.loadPrism)()}o(xr,"loadPrism");var yn=sn(kr(),1);o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Bo=/[a-zA-Z]:\/[^:]*$/,Z=yn.default.posix,za=Z.delimiter,Ka=yn.default.posix.sep,Wo=Z.basename,jo=Z.dirname,vn=Z.extname,Ga=Z.format;var Uo=Z.join,Ya=Z.normalize,qa=Z.parse,Ja=Z.relative;function Pr(...n){let e=Z.resolve(...n);return e=Ho(e),Bo.exec(e)?.[0]??e}o(Pr,"resolve");function Ho(n){return bn(n,"\\","/")}o(Ho,"toPosixPath");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var zo="md";function Ko(n,e,t){if(Te(e))return e.extension===t;if(typeof e=="string"){let r=nt(n,e);return r?r.extension===t:vn(e).slice(1)===t}return!1}o(Ko,"checkExtension");function Cn(n,e,t){if(e===null)return null;if(Rr(e))return n.vault.fileMap[e.path]??e;let r=Or(n,e,t);if(r)return r;let i=Dr(e);return i===e?null:Or(n,i,t)}o(Cn,"getAbstractFileOrNull");function nt(n,e,t){let r=Cn(n,e,t);return Te(r)?r:null}o(nt,"getFileOrNull");function An(n,e){if(Rr(e))return e.path;let t=Cn(n,e);return t?t.path:Dr(e)}o(An,"getPath");function Rr(n){return n instanceof ie.TAbstractFile}o(Rr,"isAbstractFile");function Te(n){return n instanceof ie.TFile}o(Te,"isFile");function Lr(n,e){return Ko(n,e,zo)}o(Lr,"isMarkdownFile");function Or(n,e,t){return t??=n.vault.adapter.insensitive,t?n.vault.getAbstractFileByPathInsensitive(e):n.vault.getAbstractFileByPath(e)}o(Or,"getFileInternal");function Dr(n){return(0,ie.normalizePath)(Pr("/",n))}o(Dr,"getResolvedPath");var cs=require("obsidian");var y=o(n=>typeof n=="string","isString"),_e=o(()=>{let n,e,t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t},"defer"),Ir=o(n=>n==null?"":""+n,"makeString"),Go=o((n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},"copy"),Yo=/###/g,Vr=o(n=>n&&n.indexOf("###")>-1?n.replace(Yo,"."):n,"cleanKey"),Mr=o(n=>!n||y(n),"canNotTraverseDeeper"),$e=o((n,e,t)=>{let r=y(e)?e.split("."):e,i=0;for(;i<r.length-1;){if(Mr(n))return{};let s=Vr(r[i]);!n[s]&&t&&(n[s]=new t),Object.prototype.hasOwnProperty.call(n,s)?n=n[s]:n={},++i}return Mr(n)?{}:{obj:n,k:Vr(r[i])}},"getLastOfPath"),Nr=o((n,e,t)=>{let{obj:r,k:i}=$e(n,e,Object);if(r!==void 0||e.length===1){r[i]=t;return}let s=e[e.length-1],a=e.slice(0,e.length-1),l=$e(n,a,Object);for(;l.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),l=$e(n,a,Object),l?.obj&&typeof l.obj[`${l.k}.${s}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${s}`]=t},"setPath"),qo=o((n,e,t,r)=>{let{obj:i,k:s}=$e(n,e,Object);i[s]=i[s]||[],i[s].push(t)},"pushPath"),it=o((n,e)=>{let{obj:t,k:r}=$e(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},"getPath"),Jo=o((n,e,t)=>{let r=it(n,t);return r!==void 0?r:it(e,t)},"getPathWithDefaults"),Hr=o((n,e,t)=>{for(let r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?y(n[r])||n[r]instanceof String||y(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):Hr(n[r],e[r],t):n[r]=e[r]);return n},"deepExtend"),Se=o(n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"regexEscape"),Xo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},Zo=o(n=>y(n)?n.replace(/[&<>"'\/]/g,e=>Xo[e]):n,"escape"),Sn=class{static{o(this,"RegExpCache")}constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){let t=this.regExpMap.get(e);if(t!==void 0)return t;let r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}},Qo=[" ",",","?","!",";"],es=new Sn(20),ts=o((n,e,t)=>{e=e||"",t=t||"";let r=Qo.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(r.length===0)return!0;let i=es.getRegExp(`(${r.map(a=>a==="?"?"\\?":a).join("|")})`),s=!i.test(n);if(!s){let a=n.indexOf(t);a>0&&!i.test(n.substring(0,a))&&(s=!0)}return s},"looksLikeObjectPath"),kn=o((n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;let r=e.split(t),i=n;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let a,l="";for(let u=s;u<r.length;++u)if(u!==s&&(l+=t),l+=r[u],a=i[l],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&u<r.length-1)continue;s+=u-s+1;break}i=a}return i},"deepFind"),Be=o(n=>n?.replace("_","-"),"getCleanedCode"),ns={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}},Pn=class n{static{o(this,"Logger")}constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||ns,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,i){return i&&!this.debug?null:(y(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new n(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new n(this.logger,e)}},Q=new Pn,ke=class{static{o(this,"EventEmitter")}constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);let i=this.observers[r].get(t)||0;this.observers[r].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,s])=>{for(let a=0;a<s;a++)i(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,s])=>{for(let a=0;a<s;a++)i.apply(i,[e,...t])})}},ot=class extends ke{static{o(this,"ResourceStore")}constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){let t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r,i={}){let s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure,l;e.indexOf(".")>-1?l=e.split("."):(l=[e,t],r&&(Array.isArray(r)?l.push(...r):y(r)&&s?l.push(...r.split(s)):l.push(r)));let u=it(this.data,l);return!u&&!t&&!r&&e.indexOf(".")>-1&&(e=l[0],t=l[1],r=l.slice(2).join(".")),u||!a||!y(r)?u:kn(this.data?.[e]?.[t],r,s)}addResource(e,t,r,i,s={silent:!1}){let a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,l=[e,t];r&&(l=l.concat(a?r.split(a):r)),e.indexOf(".")>-1&&(l=e.split("."),i=t,t=l[1]),this.addNamespaces(t),Nr(this.data,l,i),s.silent||this.emit("added",e,t,r,i)}addResources(e,t,r,i={silent:!1}){for(let s in r)(y(r[s])||Array.isArray(r[s]))&&this.addResource(e,t,s,r[s],{silent:!0});i.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,i,s,a={silent:!1,skipCopy:!1}){let l=[e,t];e.indexOf(".")>-1&&(l=e.split("."),i=r,r=t,t=l[1]),this.addNamespaces(t);let u=it(this.data,l)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?Hr(u,r,s):u={...u,...r},Nr(this.data,l,u),a.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){let t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}},zr={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,i){return n.forEach(s=>{e=this.processors[s]?.process(e,t,r,i)??e}),e}},Kr=Symbol("i18next/PATH_KEY");function rs(){let n=[],e=Object.create(null),t;return e.get=(r,i)=>(t?.revoke?.(),i===Kr?n:(n.push(i),t=Proxy.revocable(r,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}o(rs,"createProxy");function On(n,e){let{[Kr]:t}=n(rs());return t.join(e?.keySeparator??".")}o(On,"keysFromSelector");var _r={},En=o(n=>!y(n)&&typeof n!="boolean"&&typeof n!="number","shouldHandleAsObject"),st=class n extends ke{static{o(this,"Translator")}constructor(e,t={}){super(),Go(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Q.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){let r={...t};if(e==null)return!1;let i=this.resolve(e,r);if(i?.res===void 0)return!1;let s=En(i.res);return!(r.returnObjects===!1&&s)}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");let i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,s=t.ns||this.options.defaultNS||[],a=r&&e.indexOf(r)>-1,l=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!ts(e,r,i);if(a&&!l){let u=e.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:e,namespaces:y(s)?[s]:s};let d=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(d[0])>-1)&&(s=d.shift()),e=d.join(i)}return{key:e,namespaces:y(s)?[s]:s}}translate(e,t,r){let i=typeof t=="object"?{...t}:t;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=On(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);let s=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:l,namespaces:u}=this.extractFromKey(e[e.length-1],i),d=u[u.length-1],f=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;f===void 0&&(f=":");let c=i.lng||this.language,p=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c?.toLowerCase()==="cimode")return p?s?{res:`${d}${f}${l}`,usedKey:l,exactUsedKey:l,usedLng:c,usedNS:d,usedParams:this.getUsedParamsDetails(i)}:`${d}${f}${l}`:s?{res:l,usedKey:l,exactUsedKey:l,usedLng:c,usedNS:d,usedParams:this.getUsedParamsDetails(i)}:l;let m=this.resolve(e,i),g=m?.res,C=m?.usedKey||l,h=m?.exactUsedKey||l,b=["[object Number]","[object Function]","[object RegExp]"],v=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,E=!this.i18nFormat||this.i18nFormat.handleAsObject,A=i.count!==void 0&&!y(i.count),T=n.hasDefaultValue(i),S=A?this.pluralResolver.getSuffix(c,i.count,i):"",I=i.ordinal&&A?this.pluralResolver.getSuffix(c,i.count,{ordinal:!1}):"",K=A&&!i.ordinal&&i.count===0,N=K&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${S}`]||i[`defaultValue${I}`]||i.defaultValue,_=g;E&&!g&&T&&(_=N);let He=En(_),Oe=Object.prototype.toString.apply(_);if(E&&_&&He&&b.indexOf(Oe)<0&&!(y(v)&&Array.isArray(_))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");let V=this.options.returnedObjectHandler?this.options.returnedObjectHandler(C,_,{...i,ns:u}):`key '${l} (${this.language})' returned an object instead of string.`;return s?(m.res=V,m.usedParams=this.getUsedParamsDetails(i),m):V}if(a){let V=Array.isArray(_),$=V?[]:{},ue=V?h:C;for(let P in _)if(Object.prototype.hasOwnProperty.call(_,P)){let G=`${ue}${a}${P}`;T&&!g?$[P]=this.translate(G,{...i,defaultValue:En(N)?N[P]:void 0,joinArrays:!1,ns:u}):$[P]=this.translate(G,{...i,joinArrays:!1,ns:u}),$[P]===G&&($[P]=_[P])}g=$}}else if(E&&y(v)&&Array.isArray(g))g=g.join(v),g&&(g=this.extendTranslation(g,e,i,r));else{let V=!1,$=!1;!this.isValidLookup(g)&&T&&(V=!0,g=N),this.isValidLookup(g)||($=!0,g=l);let P=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&$?void 0:g,G=T&&N!==g&&this.options.updateMissing;if($||V||G){if(this.logger.log(G?"updateKey":"missingKey",c,d,l,G?N:g),a){let j=this.resolve(l,{...i,keySeparator:!1});j&&j.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Fe=[],ze=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ze&&ze[0])for(let j=0;j<ze.length;j++)Fe.push(ze[j]);else this.options.saveMissingTo==="all"?Fe=this.languageUtils.toResolveHierarchy(i.lng||this.language):Fe.push(i.lng||this.language);let zn=o((j,ce,Re)=>{let Kn=T&&Re!==g?Re:P;this.options.missingKeyHandler?this.options.missingKeyHandler(j,d,ce,Kn,G,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(j,d,ce,Kn,G,i),this.emit("missingKey",j,d,ce,g)},"send");this.options.saveMissing&&(this.options.saveMissingPlurals&&A?Fe.forEach(j=>{let ce=this.pluralResolver.getSuffixes(j,i);K&&i[`defaultValue${this.options.pluralSeparator}zero`]&&ce.indexOf(`${this.options.pluralSeparator}zero`)<0&&ce.push(`${this.options.pluralSeparator}zero`),ce.forEach(Re=>{zn([j],l+Re,i[`defaultValue${Re}`]||N)})}):zn(Fe,l,N))}g=this.extendTranslation(g,e,i,m,r),$&&g===l&&this.options.appendNamespaceToMissingKey&&(g=`${d}${f}${l}`),($||V)&&this.options.parseMissingKeyHandler&&(g=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}${f}${l}`:l,V?g:void 0,i))}return s?(m.res=g,m.usedParams=this.getUsedParamsDetails(i),m):g}extendTranslation(e,t,r,i,s){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});let u=y(e)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),d;if(u){let c=e.match(this.interpolator.nestingRegexp);d=c&&c.length}let f=r.replace&&!y(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,r.lng||this.language||i.usedLng,r),u){let c=e.match(this.interpolator.nestingRegexp),p=c&&c.length;d<p&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...c)=>s?.[0]===c[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${c[0]} in key: ${t[0]}`),null):this.translate(...c,t),r)),r.interpolation&&this.interpolator.reset()}let a=r.postProcess||this.options.postProcess,l=y(a)?[a]:a;return e!=null&&l?.length&&r.applyPostProcessor!==!1&&(e=zr.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,t={}){let r,i,s,a,l;return y(e)&&(e=[e]),e.forEach(u=>{if(this.isValidLookup(r))return;let d=this.extractFromKey(u,t),f=d.key;i=f;let c=d.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));let p=t.count!==void 0&&!y(t.count),m=p&&!t.ordinal&&t.count===0,g=t.context!==void 0&&(y(t.context)||typeof t.context=="number")&&t.context!=="",C=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);c.forEach(h=>{this.isValidLookup(r)||(l=h,!_r[`${C[0]}-${h}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(l)&&(_r[`${C[0]}-${h}`]=!0,this.logger.warn(`key "${i}" for languages "${C.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),C.forEach(b=>{if(this.isValidLookup(r))return;a=b;let v=[f];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(v,f,b,h,t);else{let A;p&&(A=this.pluralResolver.getSuffix(b,t.count,t));let T=`${this.options.pluralSeparator}zero`,S=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(t.ordinal&&A.indexOf(S)===0&&v.push(f+A.replace(S,this.options.pluralSeparator)),v.push(f+A),m&&v.push(f+T)),g){let I=`${f}${this.options.contextSeparator||"_"}${t.context}`;v.push(I),p&&(t.ordinal&&A.indexOf(S)===0&&v.push(I+A.replace(S,this.options.pluralSeparator)),v.push(I+A),m&&v.push(I+T))}}let E;for(;E=v.pop();)this.isValidLookup(r)||(s=E,r=this.getResource(b,h,E,t))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:a,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,r,i):this.resourceStore.getResource(e,t,r,i)}getUsedParamsDetails(e={}){let t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!y(e.replace),i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(let s of t)delete i[s]}return i}static hasDefaultValue(e){let t="defaultValue";for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}},at=class{static{o(this,"LanguageUtil")}constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Q.create("languageUtils")}getScriptPartFromCode(e){if(e=Be(e),!e||e.indexOf("-")<0)return null;let t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Be(e),!e||e.indexOf("-")<0)return e;let t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(y(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;let i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;let i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return t=i;let s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return t=s;t=this.options.supportedLngs.find(a=>{if(a===s)return a;if(!(a.indexOf("-")<0&&s.indexOf("-")<0)&&(a.indexOf("-")>0&&s.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===s||a.indexOf(s)===0&&s.length>1))return a})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),y(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){let r=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),i=[],s=o(a=>{a&&(this.isSupportedCode(a)?i.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))},"addCode");return y(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):y(e)&&s(this.formatLanguageCode(e)),r.forEach(a=>{i.indexOf(a)<0&&s(this.formatLanguageCode(a))}),i}},$r={zero:0,one:1,two:2,few:3,many:4,other:5},Br={select:o(n=>n===1?"one":"other","select"),resolvedOptions:o(()=>({pluralCategories:["one","other"]}),"resolvedOptions")},Fn=class{static{o(this,"PluralResolver")}constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Q.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){let r=Be(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Br;if(!e.match(/-|_/))return Br;let u=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(u,t)}return this.pluralRulesCache[s]=a,a}needsPlural(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,r={}){return this.getSuffixes(e,r).map(i=>`${t}${i}`)}getSuffixes(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((i,s)=>$r[i]-$r[s]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t,r={}){let i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}},Wr=o((n,e,t,r=".",i=!0)=>{let s=Jo(n,e,t);return!s&&i&&y(t)&&(s=kn(n,t,r),s===void 0&&(s=kn(e,t,r))),s},"deepFindWithDefaults"),xn=o(n=>n.replace(/\$/g,"$$$$"),"regexSafe"),lt=class{static{o(this,"Interpolator")}constructor(e={}){this.logger=Q.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});let{escape:t,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:a,suffix:l,suffixEscaped:u,formatSeparator:d,unescapeSuffix:f,unescapePrefix:c,nestingPrefix:p,nestingPrefixEscaped:m,nestingSuffix:g,nestingSuffixEscaped:C,nestingOptionsSeparator:h,maxReplaces:b,alwaysFormat:v}=e.interpolation;this.escape=t!==void 0?t:Zo,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?Se(s):a||"{{",this.suffix=l?Se(l):u||"}}",this.formatSeparator=d||",",this.unescapePrefix=f?"":c||"-",this.unescapeSuffix=this.unescapePrefix?"":f||"",this.nestingPrefix=p?Se(p):m||Se("$t("),this.nestingSuffix=g?Se(g):C||Se(")"),this.nestingOptionsSeparator=h||",",this.maxReplaces=b||1e3,this.alwaysFormat=v!==void 0?v:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){let e=o((t,r)=>t?.source===r?(t.lastIndex=0,t):new RegExp(r,"g"),"getOrResetRegExp");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,r,i){let s,a,l,u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=o(m=>{if(m.indexOf(this.formatSeparator)<0){let b=Wr(t,u,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(b,void 0,r,{...i,...t,interpolationkey:m}):b}let g=m.split(this.formatSeparator),C=g.shift().trim(),h=g.join(this.formatSeparator).trim();return this.format(Wr(t,u,C,this.options.keySeparator,this.options.ignoreJSONStructure),h,r,{...i,...t,interpolationkey:C})},"handleFormat");this.resetRegExp();let f=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,c=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:o(m=>xn(m),"safeValue")},{regex:this.regexp,safeValue:o(m=>this.escapeValue?xn(this.escape(m)):xn(m),"safeValue")}].forEach(m=>{for(l=0;s=m.regex.exec(e);){let g=s[1].trim();if(a=d(g),a===void 0)if(typeof f=="function"){let h=f(e,s,i);a=y(h)?h:""}else if(i&&Object.prototype.hasOwnProperty.call(i,g))a="";else if(c){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${g} for interpolating ${e}`),a="";else!y(a)&&!this.useRawValueToEscape&&(a=Ir(a));let C=m.safeValue(a);if(e=e.replace(s[0],C),c?(m.regex.lastIndex+=a.length,m.regex.lastIndex-=s[0].length):m.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,t,r={}){let i,s,a,l=o((u,d)=>{let f=this.nestingOptionsSeparator;if(u.indexOf(f)<0)return u;let c=u.split(new RegExp(`${f}[ ]*{`)),p=`{${c[1]}`;u=c[0],p=this.interpolate(p,a);let m=p.match(/'/g),g=p.match(/"/g);((m?.length??0)%2===0&&!g||g.length%2!==0)&&(p=p.replace(/'/g,'"'));try{a=JSON.parse(p),d&&(a={...d,...a})}catch(C){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,C),`${u}${f}${p}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,u},"handleHasOptions");for(;i=this.nestingRegexp.exec(e);){let u=[];a={...r},a=a.replace&&!y(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let d=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(d!==-1&&(u=i[1].slice(d).split(this.formatSeparator).map(f=>f.trim()).filter(Boolean),i[1]=i[1].slice(0,d)),s=t(l.call(this,i[1].trim(),a),a),s&&i[0]===e&&!y(s))return s;y(s)||(s=Ir(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),u.length&&(s=u.reduce((f,c)=>this.format(f,c,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}},is=o(n=>{let e=n.toLowerCase().trim(),t={};if(n.indexOf("(")>-1){let r=n.split("(");e=r[0].toLowerCase().trim();let i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(a=>{if(a){let[l,...u]=a.split(":"),d=u.join(":").trim().replace(/^'+|'+$/g,""),f=l.trim();t[f]||(t[f]=d),d==="false"&&(t[f]=!1),d==="true"&&(t[f]=!0),isNaN(d)||(t[f]=parseInt(d,10))}})}return{formatName:e,formatOptions:t}},"parseFormatStr"),jr=o(n=>{let e={};return(t,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});let a=r+JSON.stringify(s),l=e[a];return l||(l=n(Be(r),i),e[a]=l),l(t)}},"createCachedFormatter"),os=o(n=>(e,t,r)=>n(Be(t),r)(e),"createNonCachedFormatter"),Rn=class{static{o(this,"Formatter")}constructor(e={}){this.logger=Q.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";let r=t.cacheInBuiltFormats?jr:os;this.formats={number:r((i,s)=>{let a=new Intl.NumberFormat(i,{...s});return l=>a.format(l)}),currency:r((i,s)=>{let a=new Intl.NumberFormat(i,{...s,style:"currency"});return l=>a.format(l)}),datetime:r((i,s)=>{let a=new Intl.DateTimeFormat(i,{...s});return l=>a.format(l)}),relativetime:r((i,s)=>{let a=new Intl.RelativeTimeFormat(i,{...s});return l=>a.format(l,s.range||"day")}),list:r((i,s)=>{let a=new Intl.ListFormat(i,{...s});return l=>a.format(l)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=jr(t)}format(e,t,r,i={}){let s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(l=>l.indexOf(")")>-1)){let l=s.findIndex(u=>u.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,l)].join(this.formatSeparator)}return s.reduce((l,u)=>{let{formatName:d,formatOptions:f}=is(u);if(this.formats[d]){let c=l;try{let p=i?.formatParams?.[i.interpolationkey]||{},m=p.locale||p.lng||i.locale||i.lng||r;c=this.formats[d](l,m,{...f,...i,...p})}catch(p){this.logger.warn(p)}return c}else this.logger.warn(`there was no format function for ${d}`);return l},e)}},ss=o((n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)},"removePending"),Ln=class extends ke{static{o(this,"Connector")}constructor(e,t,r,i={}){super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=Q.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,i.backend,i)}queueLoad(e,t,r,i){let s={},a={},l={},u={};return e.forEach(d=>{let f=!0;t.forEach(c=>{let p=`${d}|${c}`;!r.reload&&this.store.hasResourceBundle(d,c)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?a[p]===void 0&&(a[p]=!0):(this.state[p]=1,f=!1,a[p]===void 0&&(a[p]=!0),s[p]===void 0&&(s[p]=!0),u[c]===void 0&&(u[c]=!0)))}),f||(l[d]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(u)}}loaded(e,t,r){let i=e.split("|"),s=i[0],a=i[1];t&&this.emit("failedLoading",s,a,t),!t&&r&&this.store.addResourceBundle(s,a,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);let l={};this.queue.forEach(u=>{qo(u.loaded,[s],a),ss(u,e),t&&u.errors.push(t),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(d=>{l[d]||(l[d]={});let f=u.loaded[d];f.length&&f.forEach(c=>{l[d][c]===void 0&&(l[d][c]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(u=>!u.done)}read(e,t,r,i=0,s=this.retryTimeout,a){if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:i,wait:s,callback:a});return}this.readingCalls++;let l=o((d,f)=>{if(this.readingCalls--,this.waitingReads.length>0){let c=this.waitingReads.shift();this.read(c.lng,c.ns,c.fcName,c.tried,c.wait,c.callback)}if(d&&f&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,i+1,s*2,a)},s);return}a(d,f)},"resolver"),u=this.backend[r].bind(this.backend);if(u.length===2){try{let d=u(e,t);d&&typeof d.then=="function"?d.then(f=>l(null,f)).catch(l):l(null,d)}catch(d){l(d)}return}return u(e,t,l)}prepareLoading(e,t,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();y(e)&&(e=this.languageUtils.toResolveHierarchy(e)),y(t)&&(t=[t]);let s=this.queueLoad(e,t,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e,t=""){let r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(a,l)=>{a&&this.logger.warn(`${t}loading namespace ${s} for language ${i} failed`,a),!a&&l&&this.logger.log(`${t}loaded namespace ${s} for language ${i}`,l),this.loaded(e,a,l)})}saveMissing(e,t,r,i,s,a={},l=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){let u={...a,isUpdate:s},d=this.backend.create.bind(this.backend);if(d.length<6)try{let f;d.length===5?f=d(e,t,r,i,u):f=d(e,t,r,i),f&&typeof f.then=="function"?f.then(c=>l(null,c)).catch(l):l(null,f)}catch(f){l(f)}else d(e,t,r,i,l,u)}!e||!e[0]||this.store.addResource(e[0],t,r,i)}}},Tn=o(()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:o(n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),y(n[1])&&(e.defaultValue=n[1]),y(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){let t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},"overloadTranslationOptionHandler"),interpolation:{escapeValue:!0,format:o(n=>n,"format"),prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),"get"),Ur=o(n=>(y(n.ns)&&(n.ns=[n.ns]),y(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),y(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),"transformOptions"),rt=o(()=>{},"noop"),as=o(n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})},"bindMemberFunctions"),Dn=class n extends ke{static{o(this,"I18n")}constructor(e={},t){if(super(),this.options=Ur(e),this.services={},this.logger=Q,this.modules={external:[]},as(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(y(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));let r=Tn();this.options={...r,...this.options,...Ur(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=r.overloadTranslationOptionHandler);let i=o(d=>d?typeof d=="function"?new d:d:null,"createClassOnDemand");if(!this.options.isClone){this.modules.logger?Q.init(i(this.modules.logger),this.options):Q.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=Rn;let f=new at(this.options);this.store=new ot(this.options.resources,this.options);let c=this.services;c.logger=Q,c.resourceStore=this.store,c.languageUtils=f,c.pluralResolver=new Fn(f,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),d&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(c.formatter=i(d),c.formatter.init&&c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new lt(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new Ln(i(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",(m,...g)=>{this.emit(m,...g)}),this.modules.languageDetector&&(c.languageDetector=i(this.modules.languageDetector),c.languageDetector.init&&c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=i(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new st(this.services,this.options),this.translator.on("*",(m,...g)=>{this.emit(m,...g)}),this.modules.external.forEach(m=>{m.init&&m.init(this)})}if(this.format=this.options.interpolation.format,t||(t=rt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){let d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=(...f)=>this.store[d](...f)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=(...f)=>(this.store[d](...f),this)});let l=_e(),u=o(()=>{let d=o((f,c)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(c),t(f,c)},"finish");if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)},"load");return this.options.resources||!this.options.initAsync?u():setTimeout(u,0),l}loadResources(e,t=rt){let r=t,i=y(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();let s=[],a=o(l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(d=>{d!=="cimode"&&s.indexOf(d)<0&&s.push(d)})},"append");i?a(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u=>a(u)),this.options.preload?.forEach?.(l=>a(l)),this.services.backendConnector.load(s,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(l)})}else r(null)}reloadResources(e,t,r){let i=_e();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=rt),this.services.backendConnector.reload(e,t,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&zr.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){let r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;let r=_e();this.emit("languageChanging",e);let i=o(l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},"setLngProps"),s=o((l,u)=>{u?this.isLanguageChangingTo===e&&(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,r.resolve((...d)=>this.t(...d)),t&&t(l,(...d)=>this.t(...d))},"done"),a=o(l=>{!e&&!l&&this.services.languageDetector&&(l=[]);let u=y(l)?l:l&&l[0],d=this.store.hasLanguageSomeTranslations(u)?u:this.services.languageUtils.getBestMatchFromCodes(y(l)?[l]:l);d&&(this.language||i(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector?.cacheUserLanguage?.(d)),this.loadResources(d,f=>{s(f,d)})},"setLng");return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),r}getFixedT(e,t,r){let i=o((s,a,...l)=>{let u;typeof a!="object"?u=this.options.overloadTranslationOptionHandler([s,a].concat(l)):u={...a},u.lng=u.lng||i.lng,u.lngs=u.lngs||i.lngs,u.ns=u.ns||i.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||r||i.keyPrefix);let d=this.options.keySeparator||".",f;return u.keyPrefix&&Array.isArray(s)?f=s.map(c=>(typeof c=="function"&&(c=On(c,{...this.options,...a})),`${u.keyPrefix}${d}${c}`)):(typeof s=="function"&&(s=On(s,{...this.options,...a})),f=u.keyPrefix?`${u.keyPrefix}${d}${s}`:s),this.t(f,u)},"fixedT");return y(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=r,i}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;let r=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;let a=o((l,u)=>{let d=this.services.backendConnector.state[`${l}|${u}`];return d===-1||d===0||d===2},"loadNotPending");if(t.precheck){let l=t.precheck(this,a);if(l!==void 0)return l}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,e)&&(!i||a(s,e)))}loadNamespaces(e,t){let r=_e();return this.options.ns?(y(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),t&&t(i)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){let r=_e();y(e)&&(e=[e]);let i=this.options.preload||[],s=e.filter(a=>i.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=i.concat(s),this.loadResources(a=>{r.resolve(),t&&t(a)}),r):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{let i=new Intl.Locale(e);if(i&&i.getTextInfo){let s=i.getTextInfo();if(s&&s.direction)return s.direction}}catch{}let t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new at(Tn());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){let r=new n(e,t);return r.createInstance=n.createInstance,r}cloneInstance(e={},t=rt){let r=e.forkResourceStore;r&&delete e.forkResourceStore;let i={...this.options,...e,isClone:!0},s=new n(i);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(l=>{s[l]=this[l]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){let l=Object.keys(this.store.data).reduce((u,d)=>(u[d]={...this.store.data[d]},u[d]=Object.keys(u[d]).reduce((f,c)=>(f[c]={...u[d][c]},f),u[d]),u),{});s.store=new ot(l,i),s.services.resourceStore=s.store}if(e.interpolation){let u={...Tn().interpolation,...this.options.interpolation,...e.interpolation},d={...i,interpolation:u};s.services.interpolator=new lt(d)}return s.translator=new st(s.services,i),s.translator.on("*",(l,...u)=>{s.emit(l,...u)}),s.init(i,t),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}},L=Dn.createInstance(),ll=L.createInstance,ul=L.dir,Gr=L.init,cl=L.loadResources,dl=L.reloadResources,fl=L.use,pl=L.changeLanguage,hl=L.getFixedT,Yr=L.t,ml=L.exists,gl=L.setDefaultNamespace,wl=L.hasLoadedNamespace,bl=L.loadNamespaces,yl=L.loadLanguages;var Jr=require("obsidian");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var ut={obsidianDevUtils:{asyncWithNotice:{milliseconds:"milliseconds...",operation:"Operation",runningFor:"Running for",terminateOperation:"You can terminate the operation by clicking the button below, but be aware it might leave the vault in an inconsistent state.",timedOut:"The operation timed out after {{duration}} milliseconds."},buttons:{cancel:"Cancel",ok:"OK"},callout:{loadContent:"Load content for callout"},dataview:{itemsPerPage:"Items per page:",jumpToPage:"Jump to page:",pageHeader:"Page {{pageNumber}} of {{totalPages}}, Total items: {{totalItems}}"},metadataCache:{getBacklinksForFilePath:"Get backlinks for {{filePath}}"},notices:{attachmentIsStillUsed:"Attachment {{attachmentPath}} is still used by other notes. It will not be deleted.",unhandledError:"An unhandled error occurred. Please check the console for more information."},queue:{flushQueue:"Flush queue"},renameDeleteHandler:{handleDelete:"Handle delete: {{filePath}}",handleOrphanedRenames:"Handle orphaned renames",handleRename:"Handle rename: {{oldPath}} -> {{newPath}}",updatedLinks:"Updated {{linksCount}} links in {{filesCount}} files."},vault:{processFile:"Process file {{filePath}}"}}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var In="en",ls={en:ut},ct=ls;o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var qr="translation",Vn=!1;async function Mn(n,e=!0){Vn||(Vn=!0,await Gr({fallbackLng:In,initAsync:e,interpolation:{escapeValue:!1},lng:(0,Jr.getLanguage)(),resources:Object.fromEntries(Object.entries(n).map(([t,r])=>[t,{[qr]:r}])),returnEmptyString:!1,returnNull:!1}),L.addResourceBundle(In,qr,ut,!0,!1))}o(Mn,"initI18N");function us(n,e){return Vn||(console.warn("I18N was not initialized, initializing default obsidian-dev-utils translations"),k(()=>Mn(ct,!1))),Yr(n,e)}o(us,"tImpl");var We=us;o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Nn=require("obsidian");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Qr=require("obsidian");var Zr=require("@codemirror/state"),ps=require("@codemirror/view");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();async function ei(n,e){if(!Lr(n,e))return;let t=An(n,e);for(let r of n.workspace.getLeavesOfType(Ar.Markdown))r.view instanceof Qr.MarkdownView&&r.view.file?.path===t&&r.view.dirty&&await r.view.save()}o(ei,"saveNote");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();async function ws(n){await new Promise(e=>{n.metadataCache.onCleanCache(e)})}o(ws,"ensureMetadataCacheReady");async function ti(n,e){let t=nt(n,e);try{if(!t)return null;if(t.deleted)return n.metadataCache.getFileCache(t);await ei(n,t);let r=n.metadataCache.fileCache[t.path];return r?.mtime===t.stat.mtime&&r.size===t.stat.size&&n.metadataCache.metadataCache[r.hash]||(await n.metadataCache.computeFileMetadataAsync(t),await ws(n)),n.metadataCache.getFileCache(t)}catch(r){if(!t||t.deleted)return null;throw r}}o(ti,"getCacheSafe");function ni(n,e){let t=Object.keys(e).map(r=>bs(n,r,e[r]));return t.length===1?t[0]:function(){t.forEach(r=>r())}}o(ni,"around");function bs(n,e,t){let r=n[e],i=n.hasOwnProperty(e),s=i?r:function(){return Object.getPrototypeOf(n)[e].apply(this,arguments)},a=t(s);return r&&Object.setPrototypeOf(a,r),Object.setPrototypeOf(l,a),n[e]=l,u;function l(...d){return a===s&&n[e]===l&&u(),a.apply(this,d)}o(l,"wrapper");function u(){n[e]===l&&(i?n[e]=s:delete n[e]),a!==s&&(a=s,Object.setPrototypeOf(l,r||Function))}o(u,"remove")}o(bs,"around1");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function ys(n,e){return ni(n,e)}o(ys,"around");function ri(n,e,t){let r=ys(e,t),i=!1;function s(){if(!i)try{r()}finally{i=!0}}return o(s,"uninstallerWrapper"),n.register(s),r}o(ri,"registerPatch");var mt=require("obsidian");var ii=require("obsidian");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var dt=class extends ii.Component{static{o(this,"AsyncEventsComponent")}registerAsyncEvent(e){ft(this,e)}};function ft(n,e){n.register(()=>{e.asyncEvents.offref(e)})}o(ft,"registerAsyncEvent");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function vs(n){let e=new Set;return n.workspace.iterateAllLeaves(t=>{e.add(t.getContainer())}),Array.from(e)}o(vs,"getAllContainers");function oi(n){return vs(n).map(e=>e.win)}o(oi,"getAllDomWindows");var ui=sn(ai(),1);o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var w=(n=>(n.AlertModal="alert-modal",n.CancelButton="cancel-button",n.CheckboxComponent="checkbox-component",n.CodeHighlighterComponent="code-highlighter-component",n.ConfirmModal="confirm-modal",n.DateComponent="date-component",n.DateTimeComponent="datetime-component",n.EmailComponent="email-component",n.FileComponent="file-component",n.IsPlaceholder="is-placeholder",n.LibraryName="obsidian-dev-utils",n.MonthComponent="month-component",n.MultipleDropdownComponent="multiple-dropdown-component",n.MultipleEmailComponent="multiple-email-component",n.MultipleFileComponent="multiple-file-component",n.MultipleTextComponent="multiple-text-component",n.NumberComponent="number-component",n.OkButton="ok-button",n.OverlayValidator="overlay-validator",n.PasswordComponent="password-component",n.PluginSettingsTab="plugin-settings-tab",n.PromptModal="prompt-modal",n.SelectItemModal="select-item-modal",n.SettingComponentWrapper="setting-component-wrapper",n.TelephoneComponent="telephone-component",n.TextBox="text-box",n.TimeComponent="time-component",n.Tooltip="tooltip",n.TooltipArrow="tooltip-arrow",n.TooltipValidator="tooltip-validator",n.TriStateCheckboxComponent="tri-state-checkbox-component",n.TypedDropdownComponent="typed-dropdown-component",n.TypedMultipleDropdownComponent="typed-multiple-dropdown-component",n.UrlComponent="url-component",n.WeekComponent="week-component",n))(w||{});o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var li=`${Ze}-styles`;function x(n,...e){n.addClass(w.LibraryName,Qe(),...e)}o(x,"addPluginCssClasses");function ci(n){let e=n;e.DEBUG=yr()}o(ci,"initDebugController");function di(n,e){wr(e),vr(e);let t=ve(n,"lastLibraryVersion","0.0.0");(0,ui.compareVersions)(hn,t.value)<=0||(t.value=hn,document.head.querySelector(`#${li}`)?.remove(),document.head.createEl("style",{attr:{id:li},text:mr}))}o(di,"initPluginContext");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var ht=class extends mt.Plugin{static{o(this,"PluginBase")}events=new q;get abortSignal(){if(!this._abortSignal)throw new Error("Abort signal not defined");return this._abortSignal}get settings(){return this.settingsManager.settingsWrapper.safeSettings}get settingsManager(){if(!this._settingsManager)throw new Error("Settings manager not defined");return this._settingsManager}get settingsTab(){if(!this._settingsTab)throw new Error("Settings tab not defined");return this._settingsTab}_abortSignal;_settingsManager=null;_settingsTab=null;lifecycleEventNames=new Set;notice;consoleDebug(e,...t){Ve(this.manifest.id,1)(e,...t)}async onExternalSettingsChange(){await super.onExternalSettingsChange?.(),await this._settingsManager?.loadFromFile(!1)}async onload(){await super.onload(),await this.onloadImpl(),Cr(this.afterLoad.bind(this))}onunload(){super.onunload(),k(async()=>{try{await this.onunloadImpl()}finally{await this.triggerLifecycleEvent("unload")}})}registerDomWindowHandler(e){let t=window;e(t),this.app.workspace.onLayoutReady(()=>{for(let r of oi(this.app))r!==t&&e(r);this.registerEvent(this.app.workspace.on("window-open",r=>{e(r.win)}))})}registerForLifecycleEvent(e,t){k(async()=>{await this.waitForLifecycleEvent(e),await t()})}registerPopupDocumentDomEvent(e,t,r){this.registerDomWindowHandler(i=>{this.registerDomEvent(i.document,e,t,r)})}registerPopupWindowDomEvent(e,t,r){this.registerDomWindowHandler(i=>{this.registerDomEvent(i,e,t,r)})}async waitForLifecycleEvent(e){this.lifecycleEventNames.has(e)||await new Promise(t=>{this.events.once(e,()=>{t()})})}createSettingsManager(){return null}createSettingsTab(){return null}createTranslationsMap(){return ct}handleAsyncError(e){this.showNotice(We(t=>t.obsidianDevUtils.notices.unhandledError))}async onLayoutReady(){await Y()}async onloadImpl(){di(this.app,this.manifest.id),this.registerDomWindowHandler(t=>{ci(t)}),await Mn(this.createTranslationsMap()),this.register(hr(this.handleAsyncError.bind(this))),this._settingsManager=this.createSettingsManager(),this._settingsManager&&(ft(this,this._settingsManager.on("loadSettings",this.onLoadSettings.bind(this))),ft(this,this._settingsManager.on("saveSettings",this.onSaveSettings.bind(this)))),await this._settingsManager?.loadFromFile(!0),this._settingsTab=this.createSettingsTab(),this._settingsTab&&this.addSettingTab(this._settingsTab);let e=new AbortController;this._abortSignal=e.signal,this.register(()=>{e.abort(new be(`Plugin ${this.manifest.id} had been unloaded`))})}async onLoadSettings(e,t){await Y()}async onSaveSettings(e,t,r){await Y()}async onunloadImpl(){await Y()}showNotice(e){this.notice&&this.notice.hide(),this.notice=new mt.Notice(`${this.manifest.name}
${e}`)}async afterLoad(){this.abortSignal.aborted||(await this.triggerLifecycleEvent("load"),this.app.workspace.onLayoutReady(Ee(this.onLayoutReadyBase.bind(this))))}async onLayoutReadyBase(){try{await this.onLayoutReady()}finally{await this.triggerLifecycleEvent("layoutReady")}}async triggerLifecycleEvent(e){this.lifecycleEventNames.add(e),await this.events.triggerAsync(e)}};var fi=require("obsidian");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var gt=class{static{o(this,"CommandBase")}icon;id;name;app;originalId;originalName;plugin;constructor(e){this.id=e.id,this.name=e.name,this.icon=e.icon,this.plugin=e.plugin,this.app=this.plugin.app,this.originalId=this.id,this.originalName=this.name}register(){this.plugin.addCommand(this)}},oe=class{static{o(this,"CommandInvocationBase")}constructor(e){this.plugin=e,this.app=e.app}app;lastCanExecuteResult;invoke(e){return this.lastCanExecuteResult=this.canExecute(),!e&&this.lastCanExecuteResult&&k(()=>this.execute()),this.lastCanExecuteResult}async invokeAsync(e){this.lastCanExecuteResult=this.canExecute(),!e&&this.lastCanExecuteResult&&await this.execute()}canExecute(){return!0}async execute(){if(this.lastCanExecuteResult===void 0)throw new Error("canExecute() must be called before execute()");if(!this.lastCanExecuteResult)throw new Error("canExecute() must return true before execute()");await Promise.resolve()}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var se=class extends gt{static{o(this,"NonEditorCommandBase")}checkCallback(e){return this.createCommandInvocation().invoke(e)}};var _n=class extends oe{static{o(this,"RefreshActiveViewCommandInvocation")}get activeView(){if(!this._activeView)throw new Error("Active view not set");return this._activeView}_activeView=null;constructor(e){super(e)}canExecute(){let e=this.app.workspace.getActiveViewOfType(fi.View);return this._activeView=e,!!e}async execute(){await this.plugin.refreshView(this.activeView)}},wt=class extends se{static{o(this,"RefreshActiveViewCommand")}constructor(e){super({icon:"refresh-ccw",id:"refresh-active-view",name:"Refresh active view",plugin:e})}createCommandInvocation(){return new _n(this.plugin)}};var Pc=require("obsidian");var $n=class extends oe{static{o(this,"RefreshAllOpenViewsCommandInvocation")}get activeView(){if(!this._activeView)throw new Error("Active view not set");return this._activeView}_activeView=null;constructor(e){super(e)}async execute(){await this.plugin.refreshAllOpenViews()}},bt=class extends se{static{o(this,"RefreshAllOpenViewsCommand")}constructor(e){super({icon:"refresh-ccw",id:"refresh-all-open-views",name:"Refresh all open views",plugin:e})}createCommandInvocation(){return new $n(this.plugin)}};var Ic=require("obsidian");var Bn=class extends oe{static{o(this,"RefreshAllVisibleViewsCommandInvocation")}get activeView(){if(!this._activeView)throw new Error("Active view not set");return this._activeView}_activeView=null;constructor(e){super(e)}async execute(){await this.plugin.refreshAllVisibleViews()}},yt=class extends se{static{o(this,"RefreshAllVisibleViewsCommand")}constructor(e){super({icon:"refresh-ccw",id:"refresh-all-visible-views",name:"Refresh all visible views",plugin:e})}createCommandInvocation(){return new Bn(this.plugin)}};var vt=class{static{o(this,"PluginSettings")}autoRefreshIntervalInSeconds=5;autoRefreshMode="Off";excludeViewTypesForAutoRefresh=[];includeViewTypesForAutoRefresh=[];shouldAutoRefreshMarkdownViewInSourceMode=!1;shouldAutoRefreshOnFileChange=!1;shouldLoadDeferredViewsOnAutoRefresh=!1;shouldLoadDeferredViewsOnStart=!1;shouldUseQuickMarkdownViewRefresh=!0;isViewTypeIncluded(e){return(this.includeViewTypesForAutoRefresh.length===0||this.includeViewTypesForAutoRefresh.includes(e))&&!this.excludeViewTypesForAutoRefresh.includes(e)}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var ae=class{static{o(this,"Transformer")}getTransformer(e){if(e===this.id)return this;throw new Error(`Transformer with id ${e} not found`)}transformObjectRecursively(e){return this.transformValueRecursively(e,"")}getTransformerId(e,t){return this.canTransform(e,t)?this.id:null}transformValueRecursively(e,t){let r=this.getTransformerId(e,t);if(r){let a=this.transformValue(e,t);return a===void 0?void 0:{__transformerId:r,transformedValue:a}}if(e===null)return null;if(typeof e!="object")return e;if(Array.isArray(e))return e.map((a,l)=>this.transformValueRecursively(a,String(l)));let i=e;if(i.__transformerId)return this.getTransformer(i.__transformerId).restoreValue(i.transformedValue,t);let s={};for(let a of Ae(e)){let l=e[a],u=this.transformValueRecursively(l,a);s[a]=u}return s}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var H=class extends ae{static{o(this,"TypedTransformer")}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Ct=class extends H{static{o(this,"DateTransformer")}get id(){return"date"}canTransform(e){return e instanceof Date}restoreValue(e){return new Date(e)}transformValue(e){return e.toISOString()}};var pi=require("obsidian");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var At=class extends H{static{o(this,"DurationTransformer")}get id(){return"duration"}canTransform(e){let t=e??{};return!!t.asHours&&!!t.asMinutes&&!!t.asSeconds&&!!t.asMilliseconds}restoreValue(e){return pi.moment.duration(e)}transformValue(e){return e.toISOString()}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Et=class extends ae{static{o(this,"GroupTransformer")}constructor(e){super(),this.transformers=e}get id(){return"group"}canTransform(e,t){return this.getFirstTransformerThatCanTransform(e,t)!==null}getTransformer(e){return this.transformers.find(t=>t.id===e)??De(`No transformer with id ${e} found`)}transformValue(e,t){let r=this.getFirstTransformerThatCanTransform(e,t);if(r===null)throw new Error("No transformer can transform the value");return r.transformValue(e,t)}getTransformerId(e,t){let r=this.getFirstTransformerThatCanTransform(e,t);return r===null?null:r.id}restoreValue(){throw new Error("GroupTransformer does not support restoring values")}getFirstTransformerThatCanTransform(e,t){return this.transformers.find(r=>r.canTransform(e,t))??null}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var xt=class extends H{static{o(this,"MapTransformer")}get id(){return"map"}canTransform(e){return e instanceof Map}restoreValue(e){return new Map(e)}transformValue(e){return Array.from(e.entries())}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Tt=class extends H{static{o(this,"SetTransformer")}get id(){return"set"}canTransform(e){return e instanceof Set}restoreValue(e){return new Set(e)}transformValue(e){return Array.from(e)}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Cs="_",St=class extends ae{static{o(this,"SkipPrivatePropertyTransformer")}get id(){return"skip-private-property"}canTransform(e,t){return t.startsWith(Cs)}transformValue(){}restoreValue(){throw new Error("SkipPrivatePropertyTransformer does not support restoring values")}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var je=class{static{o(this,"TwoWayMap")}keyValueMap=new Map;valueKeyMap=new Map;constructor(e=[]){for(let[t,r]of e)this.set(t,r)}clear(){this.keyValueMap.clear(),this.valueKeyMap.clear()}deleteKey(e){let t=this.getValue(e);t!==void 0&&this.valueKeyMap.delete(t),this.keyValueMap.delete(e)}deleteValue(e){let t=this.getKey(e);t!==void 0&&this.keyValueMap.delete(t),this.valueKeyMap.delete(e)}entries(){return this.keyValueMap.entries()}getKey(e){return this.valueKeyMap.get(e)}getValue(e){return this.keyValueMap.get(e)}hasKey(e){return this.keyValueMap.has(e)}hasValue(e){return this.valueKeyMap.has(e)}keys(){return this.keyValueMap.keys()}set(e,t){this.deleteKey(e),this.deleteValue(t),this.keyValueMap.set(e,t),this.valueKeyMap.set(t,e)}values(){return this.valueKeyMap.keys()}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var kt=class extends H{static{o(this,"TwoWayMapTransformer")}get id(){return"two-way-map"}canTransform(e){return e instanceof je}restoreValue(e){return new je(e)}transformValue(e){return Array.from(e.entries())}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var As=new Et([new St,new Ct,new At,new xt,new Tt,new kt]),Pt=class extends q{static{o(this,"PluginSettingsManagerBase")}constructor(e){super(),this.plugin=e,this.app=e.app,this.defaultSettings=this.createDefaultSettings(),this.currentSettingsWrapper=this.createDefaultSettingsWrapper(),this.lastSavedSettingsWrapper=this.createDefaultSettingsWrapper(),this.propertyNames=Ae(this.currentSettingsWrapper.settings),this.registerValidators(),this.registerLegacySettingsConverters()}app;defaultSettings;get settingsWrapper(){return this.currentSettingsWrapper}currentSettingsWrapper;lastSavedSettingsWrapper;legacySettingsConverters=[];propertyNames;validators=new Map;async editAndSave(e,t){await this.edit(e),await this.saveToFile(t)}async ensureSafe(e){let t=await this.validate(e);for(let r of this.propertyNames)t[r]&&(e[r]=this.defaultSettings[r])}async getSafeCopy(e){let t=await this.cloneSettings(e);return await this.ensureSafe(t),t}async loadFromFile(e){let t=await this.plugin.loadData();this.lastSavedSettingsWrapper=this.createDefaultSettingsWrapper(),this.currentSettingsWrapper=this.createDefaultSettingsWrapper();try{if(t==null)return;if(typeof t!="object"){console.error(`Invalid settings from data.json. Expected Object, got: ${typeof t}`);return}let r=t,i=await this.rawRecordToSettings(r),s=await this.validate(i);for(let l of this.propertyNames)this.setPropertyImpl(l,i[l],s[l]);this.lastSavedSettingsWrapper=await this.cloneSettingsWrapper(this.currentSettingsWrapper);let a=await this.settingsToRawRecord(this.currentSettingsWrapper.settings);J(a,t)||await this.saveToFileImpl()}finally{await this.triggerAsync("loadSettings",this.currentSettingsWrapper,e)}}on(e,t,r){return super.on(e,t,r)}async revalidate(){return await this.edit(te),this.currentSettingsWrapper.validationMessages}async saveToFile(e){J(this.lastSavedSettingsWrapper.settings,this.currentSettingsWrapper.settings)||(await this.saveToFileImpl(),await this.triggerAsync("saveSettings",this.currentSettingsWrapper,this.lastSavedSettingsWrapper,e),this.lastSavedSettingsWrapper=await this.cloneSettingsWrapper(this.currentSettingsWrapper))}async setProperty(e,t){return await this.edit(r=>{r[e]=t}),this.currentSettingsWrapper.validationMessages[e]}async validate(e){let t={};for(let[r,i]of this.validators.entries()){let s=await i(e[r],e);s&&(t[r]=s)}return t}getTransformer(){return As}async onLoadRecord(e){for(let t of this.legacySettingsConverters)t(e);await Promise.resolve()}async onSavingRecord(e){await Y()}registerLegacySettingsConverter(e,t){let r=this;this.legacySettingsConverters.push(i);function i(s){let a=new Set(Object.keys(new e)),l=new Set(r.propertyNames),u=s;t(u);for(let d of Object.keys(u))l.has(d)||a.has(d)&&delete s[d]}o(i,"legacySettingsConverter")}registerLegacySettingsConverters(){}registerValidator(e,t){this.validators.set(e,t)}registerValidators(){}async cloneSettings(e){let t=await this.settingsToRawRecord(e),r=JSON.stringify(t),i=JSON.parse(r);return await this.rawRecordToSettings(i)}async cloneSettingsWrapper(e){return{safeSettings:await this.cloneSettings(e.safeSettings),settings:await this.cloneSettings(e.settings),validationMessages:{...e.validationMessages}}}createDefaultSettingsWrapper(){return{safeSettings:this.createDefaultSettings(),settings:this.createDefaultSettings(),validationMessages:{}}}async edit(e){try{await e(this.currentSettingsWrapper.settings)}finally{let t=await this.validate(this.currentSettingsWrapper.settings);for(let r of this.propertyNames){let i=t[r]??"";this.currentSettingsWrapper.validationMessages[r]=i,this.currentSettingsWrapper.safeSettings[r]=i?this.defaultSettings[r]:this.currentSettingsWrapper.settings[r]}}}isValidPropertyName(e){return typeof e!="string"?!1:this.propertyNames.includes(e)}async rawRecordToSettings(e){e=this.getTransformer().transformObjectRecursively(e),await this.onLoadRecord(e);let t=this.createDefaultSettings();for(let[r,i]of Object.entries(e)){if(!this.isValidPropertyName(r)){Ce("PluginSettingsManagerBase:rawRecordToSettings")(`Unknown property: ${r}`);continue}typeof i!=typeof this.defaultSettings[r]&&Ce("PluginSettingsManagerBase:rawRecordToSettings")("Possible invalid value type. It might lead to an unexpected behavior of the plugin. There is also a chance it is a false-negative warning, as we are unable to determine the exact type of the value in runtime.",{defaultValue:this.defaultSettings[r],propertyName:r,value:i}),t[r]=i}return t}async saveToFileImpl(){await this.plugin.saveData(await this.settingsToRawRecord(this.currentSettingsWrapper.settings))}setPropertyImpl(e,t,r){this.currentSettingsWrapper.settings[e]=t,this.currentSettingsWrapper.validationMessages[e]=r??"",this.currentSettingsWrapper.safeSettings[e]=r?this.defaultSettings[e]:t}async settingsToRawRecord(e){let t={};for(let r of this.propertyNames)t[r]=e[r];return await this.onSavingRecord(t),this.getTransformer().transformObjectRecursively(t)}};var Ot=class extends Pt{static{o(this,"PluginSettingsManager")}createDefaultSettings(){return new vt}async onLoadRecord(e){await super.onLoadRecord(e);let t=e;t.autoRefreshOnFileChange!==void 0&&(t.shouldAutoRefreshOnFileChange=t.autoRefreshOnFileChange,delete t.autoRefreshOnFileChange)}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function Wn(n,e){n.createEl("strong",{cls:"markdown-rendered code"},t=>{t.createEl("code",{text:e})})}o(Wn,"appendCodeBlock");function hi(n){return`${String(n)}px`}o(hi,"toPx");var fe=require("obsidian");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function Ft(n){let e=n.parentElement;if(!e)throw new Error("Element must be attached to the DOM");if(e.classList.contains(w.SettingComponentWrapper))return e;let t=Array.from(e.children),r=createDiv();x(r,w.SettingComponentWrapper);for(let i of t)r.appendChild(i);return e.appendChild(r),r}o(Ft,"ensureWrapped");var mi=require("obsidian");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var jn=class{static{o(this,"AbstractTextComponentWrapper")}constructor(e){this.abstractTextComponent=e}empty(){this.abstractTextComponent.setValue("")}isEmpty(){return this.abstractTextComponent.getValue()===""}setPlaceholderValue(e){return this.abstractTextComponent.setPlaceholder(e),this}};function gi(n){return Es(n)?n:n instanceof mi.AbstractTextComponent?new jn(n):null}o(gi,"getTextBasedComponentValue");function Es(n){let e=n;return typeof e.setPlaceholderValue=="function"&&typeof e.isEmpty=="function"}o(Es,"isTextBasedComponent");var D=require("obsidian");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Rt=class{static{o(this,"OverlayValidatorComponent")}constructor(e){this.el=e;let t=Ft(e);this._validatorEl=t.createEl("input",{attr:{tabindex:-1}}),x(this._validatorEl,w.OverlayValidator),this._validatorEl.addEventListener("focus",()=>{this.el.focus()}),this._validatorEl.isActiveElement=this.isElementOrDescendantActive.bind(this);let r=this.el.querySelector("[tabindex]");r||(this.el.getAttr("tabindex")===null&&(this.el.tabIndex=-1),r=this.el),this.el.addEventListener("focusin",()=>{this.forceBlurValidatorEl()}),this.el.addEventListener("click",()=>{r.focus()}),this.el.addEventListener("focusout",()=>{window.setTimeout(()=>{this.isElementOrDescendantActive()||this.forceBlurValidatorEl()},0)})}get validatorEl(){return this._validatorEl}_validatorEl;forceBlurValidatorEl(){this._validatorEl.dispatchEvent(new Event("blur"))}isElementOrDescendantActive(){return this.el.contains(document.activeElement)}},le=class{static{o(this,"ValidatorElementWrapper")}constructor(e){this.validatorEl=e}};function wi(n){return xs(n)?n:n instanceof D.ColorComponent?new le(n.colorPickerEl):n instanceof D.DropdownComponent?new le(n.selectEl):n instanceof D.ProgressBarComponent?new Rt(n.progressBar):n instanceof D.SearchComponent?new le(n.inputEl):n instanceof D.SliderComponent?new le(n.sliderEl):n instanceof D.TextAreaComponent?new le(n.inputEl):n instanceof D.TextComponent?new le(n.inputEl):n instanceof D.ToggleComponent?new Rt(n.toggleEl):null}o(wi,"getValidatorComponent");function xs(n){return!!n.validatorEl}o(xs,"isValidatorComponent");var Ts=require("obsidian");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function bi(n){return n.validationMessage!==void 0}o(bi,"isValidationMessageHolder");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Un="PluginSettingsTab",Lt=class extends fe.PluginSettingTab{static{o(this,"PluginSettingsTabBase")}constructor(e){super(e.app,e),this.plugin=e,x(this.containerEl,w.PluginSettingsTab),this.saveSettingsDebounced=(0,fe.debounce)(Ee(()=>this.plugin.settingsManager.saveToFile(Un)),this.saveSettingsDebounceTimeoutInMilliseconds),this.asyncEventsComponent=new dt,this.asyncEvents=new q}get isOpen(){return this._isOpen}get saveSettingsDebounceTimeoutInMilliseconds(){return 2e3}_isOpen=!1;asyncEvents;asyncEventsComponent;saveSettingsDebounced;get pluginSettings(){return this.plugin.settingsManager.settingsWrapper.settings}bind(e,t,r){let s={...{componentToPluginSettingsValueConverter:o(A=>A,"componentToPluginSettingsValueConverter"),onChanged:te,pluginSettingsToComponentValueConverter:o(A=>A,"pluginSettingsToComponentValueConverter"),shouldResetSettingWhenComponentIsEmpty:!0,shouldShowPlaceholderForDefaultValues:!0,shouldShowValidationMessage:!0},...r},a=wi(e)?.validatorEl,l=gi(e),u=this.pluginSettings[t],d=this.plugin.settingsManager.defaultSettings[t],f=s.pluginSettingsToComponentValueConverter(d);l?.setPlaceholderValue(f);let c,p=null,m=null;if(a){let A=Ft(a);p=A.createDiv(),x(p,w.Tooltip,w.TooltipValidator),m=p.createSpan();let T=p.createDiv();x(T,w.TooltipArrow),p.hide(),A.appendChild(p)}this.asyncEventsComponent.registerAsyncEvent(this.on("validationMessageChanged",(A,T)=>{t===A&&(c=T,v())}));let g=!1,C=!1;l&&s.shouldShowPlaceholderForDefaultValues&&J(u,d)?l.empty():e.setValue(s.pluginSettingsToComponentValueConverter(u));let h=!1,v=(0,fe.debounce)(()=>{requestAnimationFrame(()=>{E()})},100);return e.onChange(async A=>{if(h){h=!1;return}g=!1;let T=this.pluginSettings[t],S,I=!0;if(C=!!l?.isEmpty()&&s.shouldResetSettingWhenComponentIsEmpty,C)S=d;else{let K=s.componentToPluginSettingsValueConverter(A);bi(K)?(c=K.validationMessage,I=!1):S=K}I&&(c=await this.plugin.settingsManager.setProperty(t,S),l&&s.shouldShowPlaceholderForDefaultValues&&!l.isEmpty()&&J(S,d)&&(g=!0)),v(),I&&await s.onChanged(S,T),this.saveSettingsDebounced()}),a?.addEventListener("focus",()=>{v()}),a?.addEventListener("blur",()=>{v()}),a?.addEventListener("click",()=>{requestAnimationFrame(()=>{v()})}),c=this.plugin.settingsManager.settingsWrapper.validationMessages[t]??"",v(),e;function E(){a?.isActiveElement()||(g?(g=!1,l?.isEmpty()||(h=!0,l?.empty())):C&&(C=!1,l?.isEmpty()&&(h=!0,e.setValue(f)))),a&&(c===""&&(a.setCustomValidity(""),a.checkValidity(),c=a.validationMessage),a.setCustomValidity(c),s.shouldShowValidationMessage?(m&&(m.textContent=c),p?.toggle(!!c)):c&&(0,fe.setTooltip)(a,c))}o(E,"updateValidatorEl")}display(){this.containerEl.empty(),this._isOpen=!0,this.asyncEventsComponent.load(),this.asyncEventsComponent.registerAsyncEvent(this.plugin.settingsManager.on("loadSettings",this.onLoadSettings.bind(this))),this.asyncEventsComponent.registerAsyncEvent(this.plugin.settingsManager.on("saveSettings",this.onSaveSettings.bind(this)))}hide(){super.hide(),this.saveSettingsDebounced.cancel(),this._isOpen=!1,this.asyncEventsComponent.unload(),this.asyncEventsComponent.load(),k(()=>this.hideAsync())}async hideAsync(){await this.plugin.settingsManager.saveToFile(Un)}show(){this.app.setting.openTab(this)}async onLoadSettings(e,t){this.display(),await Y()}async revalidate(){let e=await this.plugin.settingsManager.revalidate();await this.updateValidations(e)}on(e,t,r){return this.asyncEvents.on(e,t,r)}async onSaveSettings(e,t,r){if(r===Un){await this.updateValidations(e.validationMessages);return}this.display()}async updateValidations(e){for(let[t,r]of Object.entries(e))await this.asyncEvents.triggerAsync("validationMessageChanged",t,r)}};var Ue=require("obsidian");var yi=require("obsidian");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Dt=class extends yi.ValueComponent{static{o(this,"CheckboxComponent")}inputEl;get validatorEl(){return this.inputEl}changeCallback;constructor(e){super(),x(e,w.CheckboxComponent),this.inputEl=e.createEl("input",{type:"checkbox"}),this.inputEl.addEventListener("change",this.onChanged.bind(this))}getValue(){return this.inputEl.checked}onChange(e){return this.changeCallback=e,this}onChanged(){this.changeCallback?.(this.getValue())}setDisabled(e){return super.setDisabled(e),this.inputEl.disabled=e,this}setValue(e){return this.inputEl.checked=e,this}};var Vt=require("obsidian");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var It=class extends Vt.ValueComponent{static{o(this,"CodeHighlighterComponent")}get inputEl(){return this.textAreaComponent.inputEl}get validatorEl(){return this.inputEl}codeEl;placeholder="";preEl;tabSize;textAreaComponent;constructor(e){super(),x(e,w.CodeHighlighterComponent);let t=e.createDiv();x(t,w.SettingComponentWrapper),this.textAreaComponent=new Vt.TextAreaComponent(t),this.preEl=t.createEl("pre",{attr:{tabIndex:"-1"}}),this.codeEl=this.preEl.createEl("code",{attr:{tabIndex:"-1"}}),this.inputEl.addEventListener("input",Ee(this.updateHighlightedCode.bind(this))),this.inputEl.addEventListener("scroll",this.handleScroll.bind(this)),this.inputEl.addEventListener("keydown",this.handleKeyDown.bind(this));let r=2;this.tabSize=r}empty(){this.setValue("")}getValue(){return this.textAreaComponent.getValue()}isEmpty(){return this.textAreaComponent.getValue()===""}onChange(e){return this.textAreaComponent.onChange(()=>e(this.getValue())),this}setDisabled(e){return super.setDisabled(e),this.textAreaComponent.setDisabled(e),this}setLanguage(e){let t="language-";for(let r of[this.preEl,this.codeEl]){for(let i of Array.from(r.classList))i.startsWith(t)&&r.classList.remove(i);r.classList.add(`${t}${e}`)}return this}setPlaceholder(e){return this.placeholder=e,k(this.updateHighlightedCode.bind(this)),this}setPlaceholderValue(e){return this.setPlaceholder(e),this}setTabSize(e){return this.tabSize=e,this}setValue(e){return this.textAreaComponent.setValue(e),k(this.updateHighlightedCode.bind(this)),this}handleKeyDown(e){if(e.key!=="Tab")return;if(e.preventDefault(),e.ctrlKey||e.metaKey){let f=Array.from(activeDocument.querySelectorAll(':is(a, button, input, select, textarea, [tabindex]):not([tabindex="-1"]):not(:disabled):not([type="hidden"])')),c=f.indexOf(this.inputEl),p=e.shiftKey?-1:1;f[(c+p+f.length)%f.length]?.focus();return}let t=this.getValue(),r=this.inputEl.selectionStart,i=this.inputEl.selectionEnd,s=t.slice(0,r),a=t.slice(i),l=" ".repeat(this.tabSize),u=s;e.shiftKey?s.endsWith(l)&&(u=s.slice(0,-this.tabSize)):u=s+l;let d=`${u}${a}`;this.setValue(d),this.inputEl.selectionStart=u.length,this.inputEl.selectionEnd=u.length}handleScroll(){this.preEl.scrollTop=this.inputEl.scrollTop,this.preEl.scrollLeft=this.inputEl.scrollLeft}async updateHighlightedCode(){this.codeEl.textContent=this.inputEl.value||this.placeholder,(await xr()).highlightElement(this.codeEl),this.preEl.toggleClass(w.IsPlaceholder,this.isEmpty()),requestAnimationFrame(()=>{let t=Math.max(0,this.inputEl.scrollHeight-this.preEl.scrollHeight);this.preEl.setCssProps({"--bottom-gap":hi(t)}),this.handleScroll()})}};var Ai=require("obsidian");var Mt=require("obsidian");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var R=class extends Mt.ValueComponent{static{o(this,"TypedTextComponent")}inputEl;get validatorEl(){return this.inputEl}textComponent;constructor(e,t,r){super(),this.textComponent=new Mt.TextComponent(e),this.inputEl=this.textComponent.inputEl,this.inputEl.type=t,x(e,r)}getValue(){return this.valueFromString(this.textComponent.getValue())}onChange(e){return this.textComponent.onChange(()=>e(this.getValue())),this}onChanged(){this.textComponent.onChanged()}setDisabled(e){return super.setDisabled(e),this.textComponent.setDisabled(e),this}setValue(e){return this.textComponent.setValue(this.valueToString(e)),this}valueToString(e){return String(e)}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var W=class extends R{static{o(this,"TypedRangeTextComponent")}setMax(e){return this.inputEl.max=this.valueToString(e),this}setMin(e){return this.inputEl.min=this.valueToString(e),this}setStep(e){return this.inputEl.step=String(e),this}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var vi=ne(Ai.moment),Ci="YYYY-MM-DD",Nt=class extends W{static{o(this,"DateComponent")}constructor(e){super(e,"date",w.DateComponent)}valueFromString(e){return vi(e,Ci).toDate()}valueToString(e){return vi(e).format(Ci)}};var Ti=require("obsidian");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Ei=ne(Ti.moment),xi="YYYY-MM-DDTHH:mm",_t=class extends W{static{o(this,"DateTimeComponent")}constructor(e){super(e,"datetime-local",w.DateTimeComponent)}valueFromString(e){return Ei(e,xi).toDate()}valueToString(e){return Ei(e).format(xi)}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var $t=class extends R{static{o(this,"EmailComponent")}constructor(e){super(e,"email",w.EmailComponent)}empty(){this.setValue("")}isEmpty(){return this.getValue()===""}setPlaceholderValue(e){return this.textComponent.setPlaceholder(e),this}valueFromString(e){return e}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Bt=class extends R{static{o(this,"FileComponent")}constructor(e){super(e,"file",w.FileComponent)}getValue(){return this.inputEl.files?.[0]??null}valueFromString(){return this.getValue()}valueToString(e){return e?.name??""}};var Pi=require("obsidian");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Si=ne(Pi.moment),ki="YYYY-MM",Wt=class extends W{static{o(this,"MonthComponent")}constructor(e){super(e,"month",w.MonthComponent)}valueFromString(e){let t=Si(e,ki);if(!t.isValid())throw new Error("Invalid month");return{month:t.month()+1,year:t.year()}}valueToString(e){return Si().year(e.year).month(e.month-1).format(ki)}};var jt=require("obsidian");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Pe=class extends jt.ValueComponent{static{o(this,"MultipleDropdownComponent")}get selectEl(){return this.dropdownComponent.selectEl}get validatorEl(){return this.selectEl}dropdownComponent;constructor(e){super(),this.dropdownComponent=new jt.DropdownComponent(e),this.dropdownComponent.selectEl.multiple=!0,x(e,w.MultipleDropdownComponent)}addOption(e,t){return this.dropdownComponent.addOption(e,t),this}addOptions(e){return this.dropdownComponent.addOptions(e),this}getValue(){return Array.from(this.dropdownComponent.selectEl.selectedOptions).map(e=>e.value)}onChange(e){return this.dropdownComponent.onChange(()=>e(this.getValue())),this}setDisabled(e){return super.setDisabled(e),this.dropdownComponent.setDisabled(e),this}setValue(e){for(let t of Array.from(this.dropdownComponent.selectEl.options))t.selected=e.includes(t.value);return this}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Ut=class extends R{static{o(this,"MultipleEmailComponent")}constructor(e){super(e,"email",w.MultipleEmailComponent),this.inputEl.multiple=!0}valueFromString(e){return e.split(",").map(t=>t.trim())}valueToString(e){return e.join(", ")}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Ht=class extends R{static{o(this,"MultipleFileComponent")}constructor(e){super(e,"file",w.MultipleFileComponent),this.inputEl.multiple=!0}getValue(){return Array.from(this.inputEl.files??[])}valueFromString(){return this.getValue()}valueToString(e){return e[0]?.name??""}};var Kt=require("obsidian");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var zt=class extends Kt.ValueComponent{static{o(this,"MultipleTextComponent")}get inputEl(){return this.textAreaComponent.inputEl}get validatorEl(){return this.inputEl}textAreaComponent;constructor(e){super(),this.textAreaComponent=new Kt.TextAreaComponent(e),x(e,w.MultipleTextComponent)}empty(){this.textAreaComponent.setValue("")}getValue(){return this.textAreaComponent.getValue().split(`
`)}isEmpty(){return this.textAreaComponent.getValue()===""}onChange(e){return this.textAreaComponent.onChange(()=>e(this.getValue())),this}setDisabled(e){return super.setDisabled(e),this.textAreaComponent.setDisabled(e),this}setPlaceholder(e){return this.textAreaComponent.setPlaceholder(e),this}setPlaceholderValue(e){return this.setPlaceholder(this.valueToString(e)),this}setValue(e){return this.textAreaComponent.setValue(this.valueToString(e)),this}valueToString(e){return e.join(`
`)}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Gt=class extends W{static{o(this,"NumberComponent")}constructor(e){super(e,"number",w.NumberComponent)}empty(){this.textComponent.setValue("")}isEmpty(){return this.textComponent.getValue()===""}setPlaceholder(e){return this.textComponent.setPlaceholder(e),this}setPlaceholderValue(e){return this.textComponent.setPlaceholder(this.valueToString(e)),this}valueFromString(e){return parseInt(e,10)}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Yt=class extends R{static{o(this,"PasswordComponent")}constructor(e){super(e,"password",w.PasswordComponent)}setPlaceholder(e){return this.textComponent.setPlaceholder(e),this}valueFromString(e){return e}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var qt=class extends R{static{o(this,"TelephoneComponent")}constructor(e){super(e,"tel",w.TelephoneComponent)}empty(){this.textComponent.setValue("")}isEmpty(){return this.textComponent.getValue()===""}setPlaceholderValue(e){return this.textComponent.setPlaceholder(e),this}valueFromString(e){return e}};var Hn=require("obsidian");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Jt=class extends W{static{o(this,"TimeComponent")}constructor(e){super(e,"time",w.TimeComponent)}valueFromString(e){return Hn.moment.duration(e)}valueToString(e){let t;return e.milliseconds()>0?t="HH:mm:ss.SSS":e.seconds()>0?t="HH:mm:ss":t="HH:mm",Hn.moment.utc(e.asMilliseconds()).format(t)}};var Oi=require("obsidian");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Xt=class extends Oi.ValueComponent{static{o(this,"TriStateCheckboxComponent")}inputEl;get validatorEl(){return this.inputEl}changeCallback;constructor(e){super(),x(e,w.TriStateCheckboxComponent),this.inputEl=e.createEl("input",{type:"checkbox"}),this.inputEl.addEventListener("change",this.onChanged.bind(this))}getValue(){return this.inputEl.indeterminate?null:this.inputEl.checked}onChange(e){return this.changeCallback=e,this}onChanged(){this.changeCallback?.(this.getValue())}setDisabled(e){return super.setDisabled(e),this.inputEl.disabled=e,this}setValue(e){return this.inputEl.indeterminate=e===null,this.inputEl.checked=e??!1,this}};var Qt=require("obsidian");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Zt=class extends Qt.ValueComponent{static{o(this,"TypedDropdownComponent")}get selectEl(){return this.dropdownComponent.selectEl}get validatorEl(){return this.selectEl}dropdownComponent;values=[];constructor(e){super(),this.dropdownComponent=new Qt.DropdownComponent(e),x(e,w.TypedDropdownComponent)}addOption(e,t){let r=this.values.indexOf(e);return r===-1&&(this.values.push(e),r=this.values.length-1),this.dropdownComponent.addOption(String(r),t),this}addOptions(e){for(let[t,r]of e.entries())this.addOption(t,r);return this}getValue(){return this.values[this.dropdownComponent.selectEl.selectedIndex]??null}onChange(e){return this.dropdownComponent.onChange(()=>e(this.getValue())),this}setDisabled(e){return super.setDisabled(e),this.dropdownComponent.setDisabled(e),this}setValue(e){let t=e===null?-1:this.values.indexOf(e);return this.dropdownComponent.selectEl.selectedIndex=t,this}};var Fi=require("obsidian");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var en=class extends Fi.ValueComponent{static{o(this,"TypedMultipleDropdownComponent")}get selectEl(){return this.multipleDropdownComponent.selectEl}get validatorEl(){return this.selectEl}multipleDropdownComponent;values=[];constructor(e){super(),this.multipleDropdownComponent=new Pe(e),x(e,w.TypedMultipleDropdownComponent)}addOption(e,t){let r=this.values.indexOf(e);return r===-1&&(this.values.push(e),r=this.values.length-1),this.multipleDropdownComponent.addOption(String(r),t),this}addOptions(e){for(let[t,r]of e.entries())this.addOption(t,r);return this}getValue(){return this.multipleDropdownComponent.getValue().map(t=>parseInt(t,10)).map(t=>this.values[t]).filter(t=>t!==void 0)}onChange(e){return this.multipleDropdownComponent.onChange(()=>e(this.getValue())),this}setDisabled(e){return super.setDisabled(e),this.multipleDropdownComponent.setDisabled(e),this}setValue(e){let t=e.map(r=>this.values.indexOf(r)).filter(r=>r!==-1);return this.multipleDropdownComponent.setValue(t.map(r=>String(r))),this}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var tn=class extends R{static{o(this,"UrlComponent")}constructor(e){super(e,"url",w.UrlComponent)}empty(){this.setValue("")}isEmpty(){return this.getValue()===""}setPlaceholderValue(e){return this.textComponent.setPlaceholder(e),this}valueFromString(e){return e}};var Di=require("obsidian");o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Ri=ne(Di.moment),Li="YYYY-[W]WW",nn=class extends W{static{o(this,"WeekComponent")}constructor(e){super(e,"week",w.WeekComponent)}valueFromString(e){let t=Ri(e,Li);if(!t.isValid())throw new Error("Invalid week");return{weekNumber:t.isoWeek(),year:t.year()}}valueToString(e){return Ri().year(e.year).isoWeek(e.weekNumber).format(Li)}};o((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var z=class extends Ue.Setting{static{o(this,"SettingEx")}addCheckbox(e){return this.addComponentClass(Dt,e)}addCodeHighlighter(e){return this.addComponentClass(It,e)}addComponentClass(e,t){return this.addComponentSafe(r=>{let i=new e(r);return t(i),i})}addDate(e){return this.addComponentClass(Nt,e)}addDateTime(e){return this.addComponentClass(_t,e)}addEmail(e){return this.addComponentClass($t,e)}addFile(e){return this.addComponentClass(Bt,e)}addMonth(e){return this.addComponentClass(Wt,e)}addMultipleDropdown(e){return this.addComponentClass(Pe,e)}addMultipleEmail(e){return this.addComponentClass(Ut,e)}addMultipleFile(e){return this.addComponentClass(Ht,e)}addMultipleText(e){return this.addComponentClass(zt,e)}addNumber(e){return this.addComponentClass(Gt,e)}addPassword(e){return this.addComponentClass(Yt,e)}addTelephone(e){return this.addComponentClass(qt,e)}addTime(e){return this.addComponentClass(Jt,e)}addTriStateCheckbox(e){return this.addComponentClass(Xt,e)}addTypedDropdown(e){return this.addComponentClass(Zt,e)}addTypedMultipleDropdown(e){return this.addComponentClass(en,e)}addUrl(e){return this.addComponentClass(tn,e)}addWeek(e){return this.addComponentClass(nn,e)}addComponentSafe(e){return(0,Ue.requireApiVersion)("1.11.0")?this.addComponent(t=>((0,Ue.requireApiVersion)("0.16.0"),e(t))):(this.components.push(e(this.controlEl)),this)}};var rn=class extends Lt{static{o(this,"PluginSettingsTab")}display(){super.display(),this.containerEl.empty(),new z(this.containerEl).setName("Should auto refresh on file change").setDesc(createFragment(r=>{r.appendText("Whether to auto refresh the file view when the file is changed."),r.createEl("br"),r.appendText("\u26A0\uFE0F This may cause flickering or losing some UI state such as the cursor position.")})).addToggle(r=>{this.bind(r,"shouldAutoRefreshOnFileChange")}),new z(this.containerEl).setName("Auto refresh mode").setDesc(createFragment(r=>{r.appendText("How to auto refresh the view."),r.createEl("br"),r.appendText("\u26A0\uFE0F This may cause flickering or losing some UI state such as the cursor position.")})).addDropdown(r=>{r.addOptions({Off:"Off",ActiveView:"Active view",AllVisibleViews:"All visible views",AllOpenViews:"All open views"}),this.bind(r,"autoRefreshMode",{onChanged(i){e(i)}})});function e(r){t.setVisibility(r!=="Off")}o(e,"updateAutoRefreshIntervalSettingVisibility");let t=new z(this.containerEl).setName("Auto refresh interval (seconds)").setDesc("Interval in seconds to auto refresh the view(s).").addNumber(r=>{this.bind(r,"autoRefreshIntervalInSeconds").setMin(1)});e(this.plugin.settings.autoRefreshMode),new z(this.containerEl).setName("Should auto refresh markdown view in Source / Live Preview mode").setDesc(createFragment(r=>{r.appendText("Whether to refresh the markdown view in Source / Live Preview mode, if auto refresh is enabled.")})).addToggle(r=>{this.bind(r,"shouldAutoRefreshMarkdownViewInSourceMode")}),new z(this.containerEl).setName("Should use quick markdown view refresh").setDesc(createFragment(r=>{r.appendText("Whether to use quick refresh for markdown view in Source / Live Preview mode."),r.createEl("br"),r.appendText("When enabled, custom panels in the markdown view might not be refreshed."),r.createEl("br"),r.appendText("When disabled, the full markdown view refreshing is performed, but it may cause flickering or losing some UI state such as the cursor position.")})).addToggle(r=>{this.bind(r,"shouldUseQuickMarkdownViewRefresh")}),new z(this.containerEl).setName("Should load deferred views on auto refresh").setDesc("Whether to load deferred views on auto refresh").addToggle(r=>{this.bind(r,"shouldLoadDeferredViewsOnAutoRefresh")}),new z(this.containerEl).setName("Should load deferred views on start").setDesc("Whether to load deferred views on start").addToggle(r=>{this.bind(r,"shouldLoadDeferredViewsOnStart")}),new z(this.containerEl).setName("Include view types for auto refresh").setDesc(createFragment(r=>{r.appendText("View types to include for auto refresh."),r.createEl("br"),r.appendText("Insert each view type on a new line"),r.createEl("br"),r.appendText("If empty, all view types will be included."),r.createEl("br"),r.appendText("You can find the view type of a view via its context menu command "),Wn(r,"Copy view type '...' to clipboard"),r.appendText(".")})).addMultipleText(r=>{this.bind(r,"includeViewTypesForAutoRefresh"),r.setPlaceholder(`markdown
canvas`)}),new z(this.containerEl).setName("Exclude view types for auto refresh").setDesc(createFragment(r=>{r.appendText("View types to exclude for auto refresh."),r.createEl("br"),r.appendText("Insert each view type on a new line"),r.createEl("br"),r.appendText("If empty, no view types will be excluded."),r.createEl("br"),r.appendText("You can find the view type of a view via its context menu command "),Wn(r,"Copy view type '...' to clipboard"),r.appendText(".")})).addMultipleText(r=>{this.bind(r,"excludeViewTypesForAutoRefresh"),r.setPlaceholder(`file-explorer
search`)})}};var on=class extends ht{static{o(this,"Plugin")}autoRefreshIntervalId=null;itemViews=new WeakSet;async onSaveSettings(e,t,r){await super.onSaveSettings(e,t,r),this.registerAutoRefreshTimer()}async refreshAllOpenViews(){await this.refreshViews(()=>!0)}async refreshAllVisibleViews(){await this.refreshViews(this.isVisibleView.bind(this))}async refreshView(e){let t=e.leaf,r=e.containerEl.scrollTop,i=e.containerEl.scrollLeft;if(await t.loadIfDeferred(),e instanceof M.TextFileView&&e.dirty&&await e.save(),e instanceof M.MarkdownView){if(e.file&&await ti(this.app,e.file),e.getMode()==="preview"){this.settings.shouldUseQuickMarkdownViewRefresh?e.previewMode.rerender(!0):await t.rebuildView(),s();return}let a=e.editor.cm,l=a.scrollDOM.scrollTop,u=a.state.doc,d=a.state.selection;this.settings.shouldUseQuickMarkdownViewRefresh?(a.dispatch({changes:{from:0,to:u.length}}),a.dispatch({changes:{from:0,insert:u,to:0},selection:d})):(await t.rebuildView(),a=e.editor.cm),requestAnimationFrame(()=>{a.scrollDOM.scrollTop=l});return}await t.rebuildView(),s();function s(){requestAnimationFrame(()=>{e.containerEl.scrollTop=r,e.containerEl.scrollLeft=i})}o(s,"restoreScrollPosition")}createSettingsManager(){return new Ot(this)}createSettingsTab(){return new rn(this)}async onLayoutReady(){await super.onLayoutReady(),this.handleLayoutChange(),this.registerEvent(this.app.vault.on("modify",this.handleModify.bind(this))),await this.loadDeferredViews(),this.registerAutoRefreshTimer();let e=this;ri(this,M.WorkspaceLeaf.prototype,{onOpenTabHeaderMenu:o(t=>o(function(i,s){e.onOpenTabHeaderMenu(t,this,i,s)},"onOpenTabHeaderMenuPatched"),"onOpenTabHeaderMenu")})}async onloadImpl(){await super.onloadImpl(),new wt(this).register(),new yt(this).register(),new bt(this).register(),this.registerEvent(this.app.workspace.on("layout-change",this.handleLayoutChange.bind(this)))}canAutoRefreshView(e){return!(!this.settings.isViewTypeIncluded(e.getViewType())||e.leaf.isDeferred&&!this.settings.shouldLoadDeferredViewsOnAutoRefresh||e instanceof M.MarkdownView&&e.getMode()==="source"&&!this.settings.shouldAutoRefreshMarkdownViewInSourceMode)}async copyViewTypeToClipboard(e){await window.navigator.clipboard.writeText(e)}async executeKeepingFocus(e){let t=document.activeElement;try{await e()}finally{t instanceof HTMLElement&&t.focus()}}getLeaves(e){let t=[];return this.app.workspace.iterateAllLeaves(r=>{e(r)&&t.push(r)}),t}handleLayoutChange(){let e=this.app.workspace.getActiveViewOfType(M.ItemView);if(!e||this.itemViews.has(e))return;this.itemViews.add(e);let t=e.addAction("refresh-cw","Refresh view",()=>{k(()=>this.refreshView(e))});this.register(()=>{t.remove()})}handleModify(e){this.settings.shouldAutoRefreshOnFileChange&&Te(e)&&k(()=>this.refreshViews(t=>t instanceof M.FileView&&t.file===e&&this.canAutoRefreshView(t)))}isMatchingAutoRefreshMode(e){switch(this.settings.autoRefreshMode){case"ActiveView":return e===this.app.workspace.getActiveViewOfType(M.View);case"AllOpenViews":return!0;case"AllVisibleViews":return e.leaf.isVisible();case"Off":return!1;default:return!1}}isVisibleView(e){return e.leaf.isVisible()}async loadDeferredViews(){if(!this.settings.shouldLoadDeferredViewsOnStart)return;await sleep(100);let r=this.getLeaves(()=>!0).map(i=>i.loadIfDeferred());await Promise.all(r)}onOpenTabHeaderMenu(e,t,r,i){e.call(t,r,i);let s=M.Menu.forEvent(r);s.addItem(a=>{a.setTitle("Refresh view"),a.setIcon("refresh-cw"),a.setSection("pane"),a.onClick(()=>{k(()=>this.refreshView(t.view))})}),s.addItem(a=>{let l=t.view.getViewType();a.setTitle(`Copy view type '${l}' to clipboard`),a.setIcon("info"),a.setSection("pane"),a.onClick(()=>{k(()=>this.copyViewTypeToClipboard(l))})})}async refreshViews(e){let t=this.getLeaves(r=>e(r.view));await this.executeKeepingFocus(async()=>{let r=t.map(i=>this.refreshView(i.view));await Promise.all(r)})}registerAutoRefreshTimer(){this.autoRefreshIntervalId&&(clearInterval(this.autoRefreshIntervalId),this.autoRefreshIntervalId=null),this.settings.autoRefreshMode!=="Off"&&(this.autoRefreshIntervalId=window.setInterval(()=>{k(()=>this.refreshViews(t=>this.isMatchingAutoRefreshMode(t)&&this.canAutoRefreshView(t)))},this.settings.autoRefreshIntervalInSeconds*1e3),this.registerInterval(this.autoRefreshIntervalId))}};var ks=on;

/* nosourcemap */