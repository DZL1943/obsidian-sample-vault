/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => AdvancedCanvasPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian9 = require("obsidian");

// node_modules/monkey-around/mjs/index.js
function around(obj, factories) {
  const removers = Object.keys(factories).map((key) => around1(obj, key, factories[key]));
  return removers.length === 1 ? removers[0] : function() {
    removers.forEach((r) => r());
  };
}
function around1(obj, method, createWrapper) {
  const original = obj[method], hadOwn = obj.hasOwnProperty(method);
  let current = createWrapper(original);
  if (original)
    Object.setPrototypeOf(current, original);
  Object.setPrototypeOf(wrapper, current);
  obj[method] = wrapper;
  return remove;
  function wrapper(...args) {
    if (current === original && obj[method] === wrapper)
      remove();
    return current.apply(this, args);
  }
  function remove() {
    if (obj[method] === wrapper) {
      if (hadOwn)
        obj[method] = original;
      else
        delete obj[method];
    }
    if (current === original)
      return;
    current = original;
    Object.setPrototypeOf(wrapper, original || Function);
  }
}

// src/utils/patch-helper.ts
var PatchHelper = class {
  static tryPatchWorkspacePrototype(plugin, getTarget, functions) {
    return new Promise((resolve) => {
      const tryPatch = () => {
        const target = getTarget();
        if (!target)
          return null;
        const uninstaller = around(target.constructor.prototype, functions);
        plugin.register(uninstaller);
        return target;
      };
      const result = tryPatch();
      if (result) {
        resolve(result);
        return;
      }
      const listener = plugin.app.workspace.on("layout-change", () => {
        const result2 = tryPatch();
        if (result2) {
          plugin.app.workspace.offref(listener);
          resolve(result2);
        }
      });
      plugin.registerEvent(listener);
    });
  }
  static patchObjectPrototype(plugin, target, functions) {
    const uninstaller = around(target.constructor.prototype, functions);
    plugin.register(uninstaller);
  }
  static patchObjectInstance(plugin, target, functions) {
    const uninstaller = around(target, functions);
    plugin.register(uninstaller);
  }
};

// src/core/events.ts
var PLUGIN_EVENT_PREFIX = "advanced-canvas";
var CanvasEvent = {
  CanvasChanged: `${PLUGIN_EVENT_PREFIX}:canvas-changed`,
  ViewportChanged: {
    Before: `${PLUGIN_EVENT_PREFIX}:viewport-changed:before`,
    After: `${PLUGIN_EVENT_PREFIX}:viewport-changed:after`
  },
  NodeMoved: `${PLUGIN_EVENT_PREFIX}:node-moved`,
  DoubleClick: `${PLUGIN_EVENT_PREFIX}:double-click`,
  DraggingStateChanged: `${PLUGIN_EVENT_PREFIX}:dragging-state-changed`,
  NodeCreated: `${PLUGIN_EVENT_PREFIX}:node-created`,
  EdgeCreated: `${PLUGIN_EVENT_PREFIX}:edge-created`,
  NodeAdded: `${PLUGIN_EVENT_PREFIX}:node-added`,
  EdgeAdded: `${PLUGIN_EVENT_PREFIX}:edge-added`,
  NodeRemoved: `${PLUGIN_EVENT_PREFIX}:node-removed`,
  EdgeRemoved: `${PLUGIN_EVENT_PREFIX}:edge-removed`,
  NodeChanged: `${PLUGIN_EVENT_PREFIX}:node-changed`,
  EdgeChanged: `${PLUGIN_EVENT_PREFIX}:edge-changed`,
  NodeBBoxRequested: `${PLUGIN_EVENT_PREFIX}:node-bbox-requested`,
  EdgeCenterRequested: `${PLUGIN_EVENT_PREFIX}:edge-center-requested`,
  ContainingNodesRequested: `${PLUGIN_EVENT_PREFIX}:containing-nodes-requested`,
  SelectionChanged: `${PLUGIN_EVENT_PREFIX}:selection-changed`,
  ZoomToBbox: {
    Before: `${PLUGIN_EVENT_PREFIX}:zoom-to-bbox:before`,
    After: `${PLUGIN_EVENT_PREFIX}:zoom-to-bbox:after`
  },
  PopupMenuCreated: `${PLUGIN_EVENT_PREFIX}:popup-menu-created`,
  NodeInteraction: `${PLUGIN_EVENT_PREFIX}:node-interaction`,
  Undo: `${PLUGIN_EVENT_PREFIX}:undo`,
  Redo: `${PLUGIN_EVENT_PREFIX}:redo`,
  ReadonlyChanged: `${PLUGIN_EVENT_PREFIX}:readonly-changed`,
  DataRequested: `${PLUGIN_EVENT_PREFIX}:data-requested`,
  LoadData: `${PLUGIN_EVENT_PREFIX}:load-data`,
  CanvasSaved: {
    Before: `${PLUGIN_EVENT_PREFIX}:canvas-saved:before`,
    After: `${PLUGIN_EVENT_PREFIX}:canvas-saved:after`
  }
};

// node_modules/tiny-jsonc/dist/index.js
var stringOrCommentRe = /("(?:\\?[^])*?")|(\/\/.*)|(\/\*[^]*?\*\/)/g;
var stringOrTrailingCommaRe = /("(?:\\?[^])*?")|(,\s*)(?=]|})/g;
var JSONC = {
  parse: (text) => {
    text = String(text);
    try {
      return JSON.parse(text);
    } catch (e) {
      return JSON.parse(text.replace(stringOrCommentRe, "$1").replace(stringOrTrailingCommaRe, "$1"));
    }
  }
};
var dist_default = JSONC;

// src/core/canvas-patcher.ts
var CanvasPatcher = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.applyPatches();
  }
  async applyPatches() {
    var _a, _b, _c;
    const that = this;
    const canvasView = (_c = (_b = (_a = this.plugin.app.workspace.getLeavesOfType("canvas")) == null ? void 0 : _a.first()) == null ? void 0 : _b.view) != null ? _c : await new Promise((resolve) => {
      const uninstall = around(this.plugin.app.internalPlugins.plugins.canvas.views, {
        canvas: (next) => function(...args) {
          const result = next.call(this, ...args);
          resolve(result);
          uninstall();
          return result;
        }
      });
      this.plugin.register(uninstall);
    });
    PatchHelper.patchObjectPrototype(this.plugin, canvasView, {
      getViewData: (_next) => function(..._args) {
        var _a2;
        const canvasData = this.canvas.getData();
        canvasData.metadata = (_a2 = this.canvas.metadata) != null ? _a2 : {};
        return JSON.stringify(canvasData, null, 2);
      },
      setViewData: (next) => function(json, ...args) {
        let validJson = json;
        let parsedJson;
        try {
          parsedJson = JSON.parse(json);
        } catch (e) {
          that.plugin.createFileSnapshot(this.file.path, json);
          parsedJson = dist_default.parse(json);
          validJson = JSON.stringify(parsedJson, null, 2);
        }
        const result = next.call(this, validJson, ...args);
        try {
          this.canvas.metadata = parsedJson.metadata;
        } catch (_e) {
          this.canvas.metadata = {};
        }
        that.triggerWorkspaceEvent(CanvasEvent.CanvasChanged, this.canvas);
        return result;
      }
    });
    PatchHelper.patchObjectPrototype(this.plugin, canvasView.canvas, {
      markViewportChanged: (next) => function(...args) {
        that.triggerWorkspaceEvent(CanvasEvent.ViewportChanged.Before, this);
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.ViewportChanged.After, this);
        return result;
      },
      markMoved: (next) => function(node) {
        const result = next.call(this, node);
        that.triggerWorkspaceEvent(CanvasEvent.NodeMoved, this, node);
        return result;
      },
      onDoubleClick: (next) => function(event) {
        const preventDefault = { value: false };
        that.triggerWorkspaceEvent(CanvasEvent.DoubleClick, this, event, preventDefault);
        if (!preventDefault.value)
          next.call(this, event);
      },
      setDragging: (next) => function(dragging) {
        const result = next.call(this, dragging);
        that.triggerWorkspaceEvent(CanvasEvent.DraggingStateChanged, this, dragging);
        return result;
      },
      getContainingNodes: (next) => function(bbox) {
        const result = next.call(this, bbox);
        that.triggerWorkspaceEvent(CanvasEvent.ContainingNodesRequested, this, bbox, result);
        return result;
      },
      updateSelection: (next) => function(update) {
        const oldSelection = new Set(this.selection);
        const result = next.call(this, update);
        that.triggerWorkspaceEvent(CanvasEvent.SelectionChanged, this, oldSelection, (update2) => next.call(this, update2));
        return result;
      },
      createTextNode: (next) => function(...args) {
        const node = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.NodeCreated, this, node);
        return node;
      },
      createFileNode: (next) => function(...args) {
        const node = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.NodeCreated, this, node);
        return node;
      },
      createFileNodes: (next) => function(...args) {
        const nodes = next.call(this, ...args);
        nodes.forEach((node) => that.triggerWorkspaceEvent(CanvasEvent.NodeCreated, this, node));
        return nodes;
      },
      createGroupNode: (next) => function(...args) {
        const node = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.NodeCreated, this, node);
        return node;
      },
      createLinkNode: (next) => function(...args) {
        const node = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.NodeCreated, this, node);
        return node;
      },
      addNode: (next) => function(node) {
        that.patchNode(node);
        return next.call(this, node);
      },
      addEdge: (next) => function(edge) {
        that.patchEdge(edge);
        if (!this.viewportChanged)
          that.triggerWorkspaceEvent(CanvasEvent.EdgeCreated, this, edge);
        return next.call(this, edge);
      },
      removeNode: (next) => function(node) {
        const result = next.call(this, node);
        that.triggerWorkspaceEvent(CanvasEvent.NodeRemoved, this, node);
        return result;
      },
      removeEdge: (next) => function(edge) {
        const result = next.call(this, edge);
        that.triggerWorkspaceEvent(CanvasEvent.EdgeRemoved, this, edge);
        return result;
      },
      zoomToBbox: (next) => function(bbox) {
        that.triggerWorkspaceEvent(CanvasEvent.ZoomToBbox.Before, this, bbox);
        const result = next.call(this, bbox);
        that.triggerWorkspaceEvent(CanvasEvent.ZoomToBbox.After, this, bbox);
        return result;
      },
      setReadonly: (next) => function(readonly) {
        const result = next.call(this, readonly);
        that.triggerWorkspaceEvent(CanvasEvent.ReadonlyChanged, this, readonly);
        return result;
      },
      undo: (next) => function(...args) {
        const result = next.call(this, ...args);
        this.importData(this.getData(), true);
        that.triggerWorkspaceEvent(CanvasEvent.Undo, this);
        return result;
      },
      redo: (next) => function(...args) {
        const result = next.call(this, ...args);
        this.importData(this.getData(), true);
        that.triggerWorkspaceEvent(CanvasEvent.Redo, this);
        return result;
      },
      /*setData: (next: any) => function (...args: any) {
        //
        const result = next.call(this, ...args)
        //
        return result
      },*/
      getData: (next) => function(...args) {
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.DataRequested, this, result);
        return result;
      },
      importData: (next) => function(data, clearCanvas, silent) {
        const targetFilePath = this.view.file.path;
        const setData = (data2) => {
          if (!this.view.file || this.view.file.path !== targetFilePath)
            return;
          this.importData(data2, true, true);
          that.emitEventsForUnknownDataChanges(this);
        };
        if (!silent)
          that.triggerWorkspaceEvent(CanvasEvent.LoadData, this, data, setData);
        const result = next.call(this, data, clearCanvas);
        that.emitEventsForUnknownDataChanges(this);
        return result;
      },
      requestSave: (next) => function(...args) {
        that.triggerWorkspaceEvent(CanvasEvent.CanvasSaved.Before, this);
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.CanvasSaved.After, this);
        return result;
      }
    });
    PatchHelper.patchObjectPrototype(this.plugin, canvasView.canvas.menu, {
      render: (next) => function(...args) {
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.PopupMenuCreated, this.canvas);
        next.call(this);
        return result;
      }
    });
    PatchHelper.patchObjectPrototype(this.plugin, canvasView.canvas.nodeInteractionLayer, {
      setTarget: (next) => function(node) {
        const result = next.call(this, node);
        that.triggerWorkspaceEvent(CanvasEvent.NodeInteraction, this.canvas, node);
        return result;
      }
    });
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      if (leaf.view.getViewType() !== "canvas")
        return;
      const canvasView2 = leaf.view;
      canvasView2.leaf.rebuildView();
    });
  }
  patchNode(node) {
    const that = this;
    PatchHelper.patchObjectInstance(this.plugin, node, {
      setData: (next) => function(data, addHistory) {
        const result = next.call(this, data);
        if (node.initialized && !node.isDirty) {
          node.isDirty = true;
          that.triggerWorkspaceEvent(CanvasEvent.NodeChanged, this.canvas, node);
          delete node.isDirty;
        }
        this.canvas.data = this.canvas.getData();
        this.canvas.view.requestSave();
        if (addHistory)
          this.canvas.pushHistory(this.canvas.getData());
        return result;
      },
      getBBox: (next) => function(...args) {
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.NodeBBoxRequested, this.canvas, node, result);
        return result;
      }
    });
    this.runAfterInitialized(node, () => {
      this.triggerWorkspaceEvent(CanvasEvent.NodeAdded, node.canvas, node);
      this.triggerWorkspaceEvent(CanvasEvent.NodeChanged, node.canvas, node);
    });
  }
  patchEdge(edge) {
    const that = this;
    PatchHelper.patchObjectInstance(this.plugin, edge, {
      setData: (next) => function(data, addHistory) {
        const result = next.call(this, data);
        if (edge.initialized && !edge.isDirty) {
          edge.isDirty = true;
          that.triggerWorkspaceEvent(CanvasEvent.EdgeChanged, this.canvas, edge);
          delete edge.isDirty;
        }
        this.canvas.data = this.canvas.getData();
        this.canvas.view.requestSave();
        if (addHistory)
          this.canvas.pushHistory(this.canvas.getData());
        return result;
      },
      render: (next) => function(...args) {
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.EdgeChanged, this.canvas, edge);
        return result;
      },
      getCenter: (next) => function(...args) {
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.EdgeCenterRequested, this.canvas, edge, result);
        return result;
      }
    });
    this.runAfterInitialized(edge, () => {
      this.triggerWorkspaceEvent(CanvasEvent.EdgeAdded, edge.canvas, edge);
    });
  }
  runAfterInitialized(canvasElement, onReady) {
    if (canvasElement.initialized) {
      onReady();
      return;
    }
    const that = this;
    const uninstall = around(canvasElement, {
      initialize: (next) => function(...args) {
        const result = next.call(this, ...args);
        onReady();
        uninstall();
        return result;
      }
    });
    that.plugin.register(uninstall);
  }
  emitEventsForUnknownDataChanges(canvas) {
    canvas.nodes.forEach((node) => this.runAfterInitialized(node, () => {
      this.triggerWorkspaceEvent(CanvasEvent.NodeChanged, node.canvas, node);
    }));
    canvas.edges.forEach((edge) => this.runAfterInitialized(edge, () => {
      this.triggerWorkspaceEvent(CanvasEvent.EdgeChanged, edge.canvas, edge);
    }));
  }
  triggerWorkspaceEvent(event, ...args) {
    this.plugin.app.workspace.trigger(event, ...args);
  }
};

// src/utils/icons-helper.ts
var import_obsidian = require("obsidian");
var CUSTOM_ICONS = {
  "shape-pill": `<rect rx="31.25" height="62.5" width="93.75" y="18.75" x="3.125" stroke-width="8.333" stroke="currentColor" fill="transparent"/>`,
  "shape-parallelogram": `<rect transform="skewX(-20)" rx="5" height="50" width="70" y="25" x="35" stroke-width="8.333" stroke="currentColor" fill="transparent"/>`,
  "shape-predefined-process": `
    <g stroke-width="2" stroke="currentColor" fill="none" transform="matrix(4.166667,0,0,4.166667,0,0)">
      <path d="M 4.999687 3 L 19.000312 3 C 20.104688 3 21 3.895312 21 4.999687 L 21 19.000312 C 21 20.104688 20.104688 21 19.000312 21 L 4.999687 21 C 3.895312 21 3 20.104688 3 19.000312 L 3 4.999687 C 3 3.895312 3.895312 3 4.999687 3 Z M 4.999687 3 "/>
      <path d="M 7 3 L 7 21 "/>
      <path d="M 17 3 L 17 21 "/>
    </g>
  `,
  "shape-document": `<path transform="translate(0, 5)" stroke="currentColor" fill="none" stroke-width="8.333" d="M83.75 25C85.82 25 87.5 26.68 87.5 28.75L87.5 64.375Q68.75 54.25 50 64.375 31.25 74.5 12.5 64.375L12.5 30.625 12.5 28.75C12.5 26.68 14.18 25 16.25 25Z"/>`,
  "shape-database": `
    <g transform="translate(20, 20)" stroke-width="8.333" stroke="currentColor" fill="none">
      <path d="M 1 51 L 1 11 C 1 5.48 14.43 1 31 1 C 47.57 1 61 5.48 61 11 L 61 51 C 61 56.52 47.57 61 31 61 C 14.43 61 1 56.52 1 51 Z"/>
      <path d="M 1 11 C 1 16.52 14.43 21 31 21 C 47.57 21 61 16.52 61 11"/>
    </g>
  `,
  "border-solid": `<path stroke="currentColor" fill="none" stroke-width="8.333" d="M91.6667 45.8333v4.1667c0 2.0833-2.0833 4.1667-4.1667 4.1667H12.5c-2.0833 0-4.1667-2.0833-4.1667-4.1667v-4.1667"/>`,
  "border-dashed": `<path stroke="currentColor" fill="none" stroke-width="8.333" stroke-dasharray="13.7" d="M91.6667 45.8333v4.1667c0 2.0833-2.0833 4.1667-4.1667 4.1667H12.5c-2.0833 0-4.1667-2.0833-4.1667-4.1667v-4.1667"/>`,
  "border-dotted": `<path stroke="currentColor" fill="none" stroke-width="8.333" stroke-dasharray="8.7" d="M91.6667 45.8333v4.1667c0 2.0833-2.0833 4.1667-4.1667 4.1667H12.5c-2.0833 0-4.1667-2.0833-4.1667-4.1667v-4.1667"/>`,
  "path-solid": `<path stroke="currentColor" fill="none" stroke-width="8.5" d="M37.5 79.1667h35.4167a14.5833 14.5833 90 000-29.1667h-45.8333a14.5833 14.5833 90 010-29.1667H62.5"/>`,
  "path-dotted": `<path stroke="currentColor" fill="none" stroke-width="8.5" stroke-dasharray="8.8" d="M37.5 79.1667h35.4167a14.5833 14.5833 90 000-29.1667h-45.8333a14.5833 14.5833 90 010-29.1667H62.5"/>`,
  "path-short-dashed": `<path stroke="currentColor" fill="none" stroke-width="8.5" stroke-dasharray="15" d="M37.5 79.1667h35.4167a14.5833 14.5833 90 000-29.1667h-45.8333a14.5833 14.5833 90 010-29.1667H62.5"/>`,
  "path-long-dashed": `<path stroke="currentColor" fill="none" stroke-width="8.5" stroke-dasharray="23" d="M37.5 79.1667h35.4167a14.5833 14.5833 90 000-29.1667h-45.8333a14.5833 14.5833 90 010-29.1667H62.5"/>`,
  "arrow-triangle": `<path stroke="currentColor" fill="currentColor" d="M 15 10 L 85 50 L 15 90 Z"/>`,
  "arrow-triangle-outline": `<path stroke="currentColor" stroke-width="8.5" fill="none" d="M 15 10 L 85 50 L 15 90 Z"/>`,
  "arrow-thin-triangle": `<path stroke="currentColor" stroke-width="8.5" fill="none" d="M 15 10 L 85 50 L 15 90"/>`,
  "arrow-halved-triangle": `<path stroke="currentColor" fill="currentColor" d="M 15 50 L 85 50 L 15 90 Z"/>`,
  "arrow-diamond": `<path stroke="currentColor" fill="currentColor" d="M 50 0 L 100 50 L 50 100 L 0 50 Z"/>`,
  "arrow-diamond-outline": `<path stroke="currentColor" stroke-width="8.5" fill="none" d="M 50 0 L 100 50 L 50 100 L 0 50 Z"/>`,
  "arrow-circle": `<circle stroke="currentColor" fill="currentColor" cx="50" cy="50" r="45"/>`,
  "arrow-circle-outline": `<circle stroke="currentColor" stroke-width="8.5" fill="none" cx="50" cy="50" r="45"/>`,
  "pathfinding-method-bezier": `<path stroke="currentColor" fill="none" stroke-width="8.5" d="M37.5 79.1667h35.4167a14.5833 14.5833 90 000-29.1667h-45.8333a14.5833 14.5833 90 010-29.1667H62.5"/>`,
  "pathfinding-method-square": `<path stroke="currentColor" fill="none" stroke-width="8.5" d="M72.9167 79.1667 72.9167 50 27.0833 50 27.0833 20.8333"/>`
};
var IconsHelper = class {
  static addIcons() {
    for (const [id, svg] of Object.entries(CUSTOM_ICONS)) {
      (0, import_obsidian.addIcon)(id, svg);
    }
  }
};

// src/utils/debug-helper.ts
var DebugHelper = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeAdded,
      (_canvas, _node) => console.count("\u{1F7E2} NodeAdded")
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeChanged,
      (_canvas, _node) => console.count("\u{1F7E1} NodeChanged")
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeAdded,
      (_canvas, _edge) => console.count("\u{1F7E2} EdgeAdded")
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeChanged,
      (_canvas, _edge) => console.count("\u{1F7E1} EdgeChanged")
    ));
  }
};

// src/settings.ts
var import_obsidian2 = require("obsidian");

// src/canvas-extensions/advanced-styles/style-config.ts
var BUILTIN_NODE_STYLE_ATTRIBUTES = [
  {
    datasetKey: "textAlign",
    label: "Text Alignment",
    nodeTypes: ["text"],
    options: [
      {
        icon: "align-left",
        label: "Left (default)",
        value: null
      },
      {
        icon: "align-center",
        label: "Center",
        value: "center"
      },
      {
        icon: "align-right",
        label: "Right",
        value: "right"
      }
    ]
  },
  {
    datasetKey: "shape",
    label: "Shape",
    nodeTypes: ["text"],
    options: [
      {
        icon: "rectangle-horizontal",
        label: "Round Rectangle (default)",
        value: null
      },
      {
        icon: "shape-pill",
        label: "Pill",
        value: "pill"
      },
      {
        icon: "diamond",
        label: "Diamond",
        value: "diamond"
      },
      {
        icon: "shape-parallelogram",
        label: "Parallelogram",
        value: "parallelogram"
      },
      {
        icon: "circle",
        label: "Circle",
        value: "circle"
      },
      {
        icon: "shape-predefined-process",
        label: "Predefined Process",
        value: "predefined-process"
      },
      {
        icon: "shape-document",
        label: "Document",
        value: "document"
      },
      {
        icon: "shape-database",
        label: "Database",
        value: "database"
      }
    ]
  },
  {
    datasetKey: "border",
    label: "Border",
    options: [
      {
        icon: "border-solid",
        label: "Solid (default)",
        value: null
      },
      {
        icon: "border-dashed",
        label: "Dashed",
        value: "dashed"
      },
      {
        icon: "border-dotted",
        label: "Dotted",
        value: "dotted"
      },
      {
        icon: "eye-off",
        label: "Invisible",
        value: "invisible"
      }
    ]
  }
];
var BUILTIN_EDGE_STYLE_ATTRIBUTES = [
  {
    datasetKey: "path",
    label: "Path Style",
    options: [
      {
        icon: "path-solid",
        label: "Solid (default)",
        value: null
      },
      {
        icon: "path-dotted",
        label: "Dotted",
        value: "dotted"
      },
      {
        icon: "path-short-dashed",
        label: "Short Dashed",
        value: "short-dashed"
      },
      {
        icon: "path-long-dashed",
        label: "Long Dashed",
        value: "long-dashed"
      }
    ]
  },
  {
    datasetKey: "arrow",
    label: "Arrow Style",
    options: [
      {
        icon: "arrow-triangle",
        label: "Triangle (default)",
        value: null
      },
      {
        icon: "arrow-triangle-outline",
        label: "Triangle Outline",
        value: "triangle-outline"
      },
      {
        icon: "arrow-thin-triangle",
        label: "Thin Triangle",
        value: "thin-triangle"
      },
      {
        icon: "arrow-halved-triangle",
        label: "Halved Triangle",
        value: "halved-triangle"
      },
      {
        icon: "arrow-diamond",
        label: "Diamond",
        value: "diamond"
      },
      {
        icon: "arrow-diamond-outline",
        label: "Diamond Outline",
        value: "diamond-outline"
      },
      {
        icon: "arrow-circle",
        label: "Circle",
        value: "circle"
      },
      {
        icon: "arrow-circle-outline",
        label: "Circle Outline",
        value: "circle-outline"
      }
    ]
  },
  {
    datasetKey: "pathfindingMethod",
    label: "Pathfinding Method",
    options: [
      {
        icon: "pathfinding-method-bezier",
        label: "Bezier (default)",
        value: null
      },
      {
        icon: "slash",
        label: "Direct",
        value: "direct"
      },
      {
        icon: "pathfinding-method-square",
        label: "Square",
        value: "square"
      },
      {
        icon: "map",
        label: "A*",
        value: "a-star"
      }
    ]
  }
];

// src/settings.ts
var NODE_TYPES_ON_DOUBLE_CLICK = {
  "text": "Text",
  "file": "File"
};
var DEFAULT_SETTINGS = {
  nodeTypeOnDoubleClick: Object.keys(NODE_TYPES_ON_DOUBLE_CLICK).first(),
  alignDoubleClickedNodeToGrid: true,
  defaultTextNodeWidth: 260,
  defaultTextNodeHeight: 60,
  defaultFileNodeWidth: 400,
  defaultFileNodeHeight: 400,
  performanceOptimizationEnabled: false,
  nodeStylingFeatureEnabled: true,
  customNodeStyleAttributes: [],
  defaultTextNodeStyleAttributes: {},
  edgesStylingFeatureEnabled: true,
  customEdgeStyleAttributes: [],
  defaultEdgeStyleAttributes: {},
  edgeStyleDirectRotateArrow: false,
  edgeStylePathfinderGridResolution: 10,
  edgeStylePathfinderPathLiveUpdate: true,
  edgeStylePathfinderPathRounded: true,
  commandsFeatureEnabled: true,
  zoomToClonedNode: true,
  cloneNodeMargin: 20,
  expandNodeStepSize: 20,
  betterReadonlyEnabled: true,
  disableNodePopup: false,
  disableZoom: false,
  disablePan: false,
  collapsibleGroupsFeatureEnabled: true,
  collapsedGroupPreviewOnDrag: true,
  presentationFeatureEnabled: true,
  showSetStartNodeInPopup: false,
  defaultSlideSize: "1200x675",
  wrapInSlidePadding: 20,
  useArrowKeysToChangeSlides: true,
  usePgUpPgDownKeysToChangeSlides: true,
  zoomToSlideWithoutPadding: true,
  slideTransitionAnimationDuration: 0.5,
  slideTransitionAnimationIntensity: 1.25,
  canvasEncapsulationEnabled: true,
  portalsFeatureEnabled: true,
  maintainClosedPortalSize: true,
  showEdgesIntoDisabledPortals: true
};
var _SettingsManager = class _SettingsManager {
  constructor(plugin) {
    this.plugin = plugin;
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.plugin.loadData());
    this.plugin.app.workspace.trigger(_SettingsManager.SETTINGS_CHANGED_EVENT);
  }
  async saveSettings() {
    await this.plugin.saveData(this.settings);
  }
  getSetting(key) {
    return this.settings[key];
  }
  async setSetting(data) {
    this.settings = Object.assign(this.settings, data);
    await this.saveSettings();
    this.plugin.app.workspace.trigger(_SettingsManager.SETTINGS_CHANGED_EVENT);
  }
  addSettingsTab() {
    this.settingsTab = new AdvancedCanvasPluginSettingTab(this.plugin, this);
    this.plugin.addSettingTab(this.settingsTab);
  }
};
_SettingsManager.SETTINGS_CHANGED_EVENT = "advanced-canvas:settings-changed";
var SettingsManager = _SettingsManager;
var AdvancedCanvasPluginSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(plugin, settingsManager) {
    super(plugin.app, plugin);
    this.settingsManager = settingsManager;
  }
  display() {
    let { containerEl } = this;
    containerEl.empty();
    new import_obsidian2.Setting(containerEl).setHeading().setClass("ac-settings-heading").setName("General");
    new import_obsidian2.Setting(containerEl).setName("Node type on double click").setDesc("The type of node that will be created when double clicking on the canvas.").addDropdown(
      (dropdown) => dropdown.addOptions(NODE_TYPES_ON_DOUBLE_CLICK).setValue(this.settingsManager.getSetting("nodeTypeOnDoubleClick")).onChange(async (value) => await this.settingsManager.setSetting({ nodeTypeOnDoubleClick: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Align node, created by double click, to grid").setDesc("When enabled, a node created by double clicking will be aligned to the grid.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("alignDoubleClickedNodeToGrid")).onChange(async (value) => await this.settingsManager.setSetting({ alignDoubleClickedNodeToGrid: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Default text node width").setDesc("The default width of a text node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("defaultTextNodeWidth").toString()).onChange(async (value) => await this.settingsManager.setSetting({ defaultTextNodeWidth: Math.max(1, parseInt(value)) }))
    );
    new import_obsidian2.Setting(containerEl).setName("Default text node height").setDesc("The default height of a text node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("defaultTextNodeHeight").toString()).onChange(async (value) => await this.settingsManager.setSetting({ defaultTextNodeHeight: Math.max(1, parseInt(value)) }))
    );
    new import_obsidian2.Setting(containerEl).setName("Default file node width").setDesc("The default width of a file node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("defaultFileNodeWidth").toString()).onChange(async (value) => await this.settingsManager.setSetting({ defaultFileNodeWidth: Math.max(1, parseInt(value)) }))
    );
    new import_obsidian2.Setting(containerEl).setName("Default file node height").setDesc("The default height of a file node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("defaultFileNodeHeight").toString()).onChange(async (value) => await this.settingsManager.setSetting({ defaultFileNodeHeight: Math.max(1, parseInt(value)) }))
    );
    this.createFeatureHeading(
      containerEl,
      "Performance optimization",
      "Optimize the performance of the canvas (Side effect is some amount of blurriness).",
      "performanceOptimizationEnabled"
    );
    this.createFeatureHeading(
      containerEl,
      "Node styling",
      "Style your nodes with different shapes and borders.",
      "nodeStylingFeatureEnabled"
    );
    new import_obsidian2.Setting(containerEl).setName("Custom node style settings").setDesc("Add custom style settings for nodes. (Go to GitHub for more information)").addButton(
      (button) => button.setButtonText("Open Tutorial").onClick(() => window.open("https://github.com/Developer-Mike/obsidian-advanced-canvas/blob/main/README.md#custom-styles"))
    );
    const allNodeStyleAttributes = [...BUILTIN_NODE_STYLE_ATTRIBUTES, ...this.settingsManager.getSetting("customNodeStyleAttributes")].filter((setting) => {
      var _a;
      return setting.nodeTypes === void 0 || ((_a = setting.nodeTypes) == null ? void 0 : _a.includes("text"));
    });
    this.createDefaultStylesSection(containerEl, "Default text node style attributes", "defaultTextNodeStyleAttributes", allNodeStyleAttributes);
    this.createFeatureHeading(
      containerEl,
      "Edges styling",
      "Style your edges with different path styles.",
      "edgesStylingFeatureEnabled"
    );
    new import_obsidian2.Setting(containerEl).setName("Custom edge style settings").setDesc("Add custom style settings for edges. (Go to GitHub for more information)").addButton(
      (button) => button.setButtonText("Open Tutorial").onClick(() => window.open("https://github.com/Developer-Mike/obsidian-advanced-canvas/blob/main/README.md#custom-styles"))
    );
    this.createDefaultStylesSection(containerEl, "Default edge style attributes", "defaultEdgeStyleAttributes", [...BUILTIN_EDGE_STYLE_ATTRIBUTES, ...this.settingsManager.getSetting("customEdgeStyleAttributes")]);
    new import_obsidian2.Setting(containerEl).setName('Rotate arrow if pathfinding method is "Direct"').setDesc('When enabled, the arrow will be rotated to the direction of the edge if the pathfinding method is set to "Direct".').addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("edgeStyleDirectRotateArrow")).onChange(async (value) => await this.settingsManager.setSetting({ edgeStyleDirectRotateArrow: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("A* grid resolution").setDesc("The resolution of the grid when using the A* path style. The lower the value, the more precise the path will be. But it will also take longer to calculate.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("edgeStylePathfinderGridResolution").toString()).onChange(async (value) => await this.settingsManager.setSetting({ edgeStylePathfinderGridResolution: Math.max(5, parseInt(value)) }))
    );
    new import_obsidian2.Setting(containerEl).setName("Live update A* path").setDesc("When enabled, the A* path style will be updated live while dragging the edge.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("edgeStylePathfinderPathLiveUpdate")).onChange(async (value) => await this.settingsManager.setSetting({ edgeStylePathfinderPathLiveUpdate: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("A* rounded path").setDesc("When enabled, the A* path style will be rounded.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("edgeStylePathfinderPathRounded")).onChange(async (value) => await this.settingsManager.setSetting({ edgeStylePathfinderPathRounded: value }))
    );
    this.createFeatureHeading(
      containerEl,
      "Extended commands",
      "Add more commands to the canvas.",
      "commandsFeatureEnabled"
    );
    new import_obsidian2.Setting(containerEl).setName("Zoom to cloned node").setDesc("When enabled, the canvas will zoom to the cloned node.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("zoomToClonedNode")).onChange(async (value) => await this.settingsManager.setSetting({ zoomToClonedNode: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Clone node margin").setDesc("The margin between the cloned node and the source node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("cloneNodeMargin").toString()).onChange(async (value) => await this.settingsManager.setSetting({ cloneNodeMargin: parseInt(value) }))
    );
    new import_obsidian2.Setting(containerEl).setName("Expand node step size").setDesc("The step size for expanding the node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("expandNodeStepSize").toString()).onChange(async (value) => await this.settingsManager.setSetting({ expandNodeStepSize: parseInt(value) }))
    );
    this.createFeatureHeading(
      containerEl,
      "Better readonly",
      "Improve the readonly mode.",
      "betterReadonlyEnabled"
    );
    this.createFeatureHeading(
      containerEl,
      "Collapsible groups",
      "Group nodes can be collapsed and expanded to keep the canvas organized.",
      "collapsibleGroupsFeatureEnabled"
    );
    new import_obsidian2.Setting(containerEl).setName("Collapsed group preview on drag").setDesc("When enabled, a group that is collapsed show its border while dragging a node.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("collapsedGroupPreviewOnDrag")).onChange(async (value) => await this.settingsManager.setSetting({ collapsedGroupPreviewOnDrag: value }))
    );
    this.createFeatureHeading(
      containerEl,
      "Presentations",
      "Create a presentation from your canvas.",
      "presentationFeatureEnabled"
    );
    new import_obsidian2.Setting(containerEl).setName('Show "Set Start Node" in node popup').setDesc("If turned off, you can still set the start node using the corresponding command.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("showSetStartNodeInPopup")).onChange(async (value) => await this.settingsManager.setSetting({ showSetStartNodeInPopup: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Default slide ratio").setDesc("The default ratio of the slide. For example, 16:9 is 1200x675 and 3:2 is 1350x900.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("defaultSlideSize")).onChange(async (value) => await this.settingsManager.setSetting({ defaultSlideSize: value.replace(" ", "") }))
    );
    new import_obsidian2.Setting(containerEl).setName("Wrap in slide padding").setDesc("The padding of the slide when wrapping the canvas in a slide.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("wrapInSlidePadding").toString()).onChange(async (value) => await this.settingsManager.setSetting({ wrapInSlidePadding: parseInt(value) }))
    );
    new import_obsidian2.Setting(containerEl).setName("Use arrow keys to change slides").setDesc("When enabled, you can use the arrow keys to change slides in presentation mode.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("useArrowKeysToChangeSlides")).onChange(async (value) => await this.settingsManager.setSetting({ useArrowKeysToChangeSlides: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Use PgUp/PgDown keys to change slides").setDesc("When enabled, you can use the PgUp/PgDown keys to change slides in presentation mode (Makes the presentation mode compatible with most presentation remotes).").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("usePgUpPgDownKeysToChangeSlides")).onChange(async (value) => await this.settingsManager.setSetting({ usePgUpPgDownKeysToChangeSlides: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Zoom to slide without padding").setDesc("When enabled, the canvas will zoom to the slide without padding.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("zoomToSlideWithoutPadding")).onChange(async (value) => await this.settingsManager.setSetting({ zoomToSlideWithoutPadding: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Slide transition animation duration").setDesc("The duration of the slide transition animation in seconds. Set to 0 to disable the animation.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("slideTransitionAnimationDuration").toString()).onChange(async (value) => await this.settingsManager.setSetting({ slideTransitionAnimationDuration: parseFloat(value) }))
    );
    new import_obsidian2.Setting(containerEl).setName("Slide transition animation intensity").setDesc("The intensity of the slide transition animation. The higher the value, the more the canvas will zoom out before zooming in on the next slide.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("slideTransitionAnimationIntensity").toString()).onChange(async (value) => await this.settingsManager.setSetting({ slideTransitionAnimationIntensity: parseFloat(value) }))
    );
    this.createFeatureHeading(
      containerEl,
      "Canvas encapsulation",
      "Encapsulate a selection of nodes and edges into a new canvas.",
      "canvasEncapsulationEnabled"
    );
    this.createFeatureHeading(
      containerEl,
      "Portals",
      "Create portals to other canvases.",
      "portalsFeatureEnabled"
    );
    new import_obsidian2.Setting(containerEl).setName("Maintain closed portal size").setDesc("When enabled, closing a portal will change the size of the portal to the original, closed size.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("maintainClosedPortalSize")).onChange(async (value) => await this.settingsManager.setSetting({ maintainClosedPortalSize: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Show edges into disabled portals").setDesc("When enabled, edges into disabled portals will be shown by an edge to the portal node.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("showEdgesIntoDisabledPortals")).onChange(async (value) => await this.settingsManager.setSetting({ showEdgesIntoDisabledPortals: value }))
    );
    const kofiButton = document.createElement("a");
    kofiButton.classList.add("kofi-button");
    kofiButton.href = "https://ko-fi.com/X8X27IA08";
    kofiButton.target = "_blank";
    const kofiImage = document.createElement("img");
    kofiImage.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABNcAAAGVCAMAAADqnefWAAAA3lBMVEUAAAD/////////////////////////////////////////////////////////////////9fX/7Ozv7+//4uH/2dn/2djf39//zc3/ycj/w8P/wMDPz8//ubj/t7f/r6//qqq/v7//o6P/nZz/m5v/lpb/kZCvr6//ion/h4f/hob/hoX/hIP/gH//fXz/fHv/eXifn5//dXT/cXH/bm7/bm3/a2v/amn/aWj/aGf/ZmX/ZGT/Y2L/YWH/YGCPj4//X19/f39vb29fX19PT08/Pz8vLy8fHx8PDw8AAABHqlbKAAAAEHRSTlMAECAwQFBgcICQoLDA0ODwVOCoyAAALtpJREFUeNrs3Vtvm8oaxnGwMcaYw6uiyKpEpI4i1VIutkTUi0pRZGMMZr7/F9rZK90rTnMwzAFm8PO7X6lW7fw7wxxwAAAAAAAAAAAAAAAAAAAAAAAAAAAAwByu5/kBKLDwPG/uAMCYZotgHRMolkbRKvC9mQMAw5ot1wmBVkkULD3XAYAhLFZomgDhui0wdgPQa75KCQaWrJeeAwBauD4eqI0mCtA2AOVmAYZqI1svMScFUGgWEhggWWHYBqCGuyIwRRouHACQhRloZ0gbgBU87OswULrC6QQATEEnJ1li3y4ABmuTE2IVAaA3DNZMl/gYtAH04WIfrgXSFXa1AXQ2xzKoJUKUDaAbn8AaER60AXQQENgEZQO4COemrIOyASBr0xPhORsAsjY5WEEAQNYmJw2wnw0AWZuaxHcA4G9LAqtFOBIPgH1rk4PJKABOGUxOgj0fAK9cZG0a1hiyAfxfRDANKe7UBcDpqckJMWQDeDYnmBA8ZQNwHBe3407MCkM2uHq4HndyEuxlgyvnEUxP4ABcM1z7PUkR5qJwxXB+aqJSLB/A1cKO3OlaOgDXCYsGE4atbHCdZgQTFuPCSbhGuHRt2lJs+IDrg+Ha5OG+SVDK9bwgWEXP6EwaResg8DznIgzXADvZwBiut1xFCV2QRMFi5ozLJZi+0AGQ4i6CKKXuktD/sm2m3uPByqquWw7C6hdlWW5ZTr1gWRQGNPPDhAQkq7kzkoQEZMWRg1ptfSy3OekSI2wgZLFK6IVFafOpv80BwzRtmmrH6EsIGwzF9cOUZCVL1xna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";
    kofiButton.appendChild(kofiImage);
    containerEl.appendChild(kofiButton);
  }
  createFeatureHeading(containerEl, label, description, settingsKey) {
    return new import_obsidian2.Setting(containerEl).setHeading().setClass("ac-settings-heading").setName(label).setDesc(description).addToggle(
      (toggle) => toggle.setTooltip("Requires a reload to take effect.").setValue(this.settingsManager.getSetting(settingsKey)).onChange(async (value) => {
        await this.settingsManager.setSetting({ [settingsKey]: value });
        new import_obsidian2.Notice("Reload obsidian to apply the changes.");
      })
    );
  }
  createDefaultStylesSection(containerEl, label, settingsKey, allStylableAttributes) {
    const defaultNodeStylesEl = document.createElement("details");
    defaultNodeStylesEl.classList.add("setting-item");
    const defaultNodeStylesSummaryEl = document.createElement("summary");
    defaultNodeStylesSummaryEl.textContent = label;
    defaultNodeStylesEl.appendChild(defaultNodeStylesSummaryEl);
    for (const stylableAttribute of allStylableAttributes) {
      new import_obsidian2.Setting(defaultNodeStylesEl).setName(stylableAttribute.label).addDropdown(
        (dropdown) => {
          var _a;
          return dropdown.addOptions(Object.fromEntries(stylableAttribute.options.map((option) => [option.value, option.label]))).setValue((_a = this.settingsManager.getSetting(settingsKey)[stylableAttribute.datasetKey]) != null ? _a : "null").onChange(async (value) => {
            const newValue = this.settingsManager.getSetting(settingsKey);
            if (value === "null")
              delete newValue[stylableAttribute.datasetKey];
            else
              newValue[stylableAttribute.datasetKey] = value;
            await this.settingsManager.setSetting({
              [settingsKey]: newValue
            });
          });
        }
      );
    }
    containerEl.appendChild(defaultNodeStylesEl);
  }
};

// src/windows-manager.ts
var WindowsManager = class {
  constructor(plugin) {
    this.windows = [window];
    this.plugin = plugin;
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      "window-open",
      (_win, window2) => this.windows.push(window2)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      "window-close",
      (_win, window2) => this.windows = this.windows.filter((w) => w !== window2)
    ));
  }
};

// src/utils/canvas-helper.ts
var import_obsidian3 = require("obsidian");

// src/utils/bbox-helper.ts
var BBoxHelper = class {
  static combineBBoxes(bboxes) {
    let minX = Infinity;
    let minY = Infinity;
    let maxX = -Infinity;
    let maxY = -Infinity;
    for (let bbox of bboxes) {
      minX = Math.min(minX, bbox.minX);
      minY = Math.min(minY, bbox.minY);
      maxX = Math.max(maxX, bbox.maxX);
      maxY = Math.max(maxY, bbox.maxY);
    }
    return { minX, minY, maxX, maxY };
  }
  static scaleBBox(bbox, scale) {
    let diffX = (scale - 1) * (bbox.maxX - bbox.minX);
    let diffY = (scale - 1) * (bbox.maxY - bbox.minY);
    return {
      minX: bbox.minX - diffX / 2,
      maxX: bbox.maxX + diffX / 2,
      minY: bbox.minY - diffY / 2,
      maxY: bbox.maxY + diffY / 2
    };
  }
  static insideBBox(position, bbox, canTouchEdge) {
    var _a, _b, _c, _d;
    const providedBBox = {
      minX: (_a = position.minX) != null ? _a : position.x,
      minY: (_b = position.minY) != null ? _b : position.y,
      maxX: (_c = position.maxX) != null ? _c : position.x,
      maxY: (_d = position.maxY) != null ? _d : position.y
    };
    return canTouchEdge ? providedBBox.minX >= bbox.minX && providedBBox.maxX <= bbox.maxX && providedBBox.minY >= bbox.minY && providedBBox.maxY <= bbox.maxY : providedBBox.minX > bbox.minX && providedBBox.maxX < bbox.maxX && providedBBox.minY > bbox.minY && providedBBox.maxY < bbox.maxY;
  }
  static enlargeBBox(bbox, padding) {
    return {
      minX: bbox.minX - padding,
      minY: bbox.minY - padding,
      maxX: bbox.maxX + padding,
      maxY: bbox.maxY + padding
    };
  }
  static moveInDirection(position, side, distance) {
    switch (side) {
      case "top":
        return { x: position.x, y: position.y - distance };
      case "right":
        return { x: position.x + distance, y: position.y };
      case "bottom":
        return { x: position.x, y: position.y + distance };
      case "left":
        return { x: position.x - distance, y: position.y };
    }
  }
  static getCenterOfBBoxSide(bbox, side) {
    switch (side) {
      case "top":
        return { x: (bbox.minX + bbox.maxX) / 2, y: bbox.minY };
      case "right":
        return { x: bbox.maxX, y: (bbox.minY + bbox.maxY) / 2 };
      case "bottom":
        return { x: (bbox.minX + bbox.maxX) / 2, y: bbox.maxY };
      case "left":
        return { x: bbox.minX, y: (bbox.minY + bbox.maxY) / 2 };
    }
  }
  static getSideVector(side) {
    switch (side) {
      case "top":
        return { x: 0, y: 1 };
      case "right":
        return { x: 1, y: 0 };
      case "bottom":
        return { x: 0, y: -1 };
      case "left":
        return { x: -1, y: 0 };
      default:
        return { x: 0, y: 0 };
    }
  }
  static isHorizontal(side) {
    return side === "left" || side === "right";
  }
  static direction(side) {
    return side === "right" || side === "bottom" ? 1 : -1;
  }
};

// src/utils/canvas-helper.ts
var CanvasHelper = class {
  static canvasCommand(plugin, check, run) {
    return (checking) => {
      const canvas = plugin.getCurrentCanvas();
      if (checking)
        return canvas !== null && check(canvas);
      if (canvas)
        run(canvas);
      return true;
    };
  }
  static createQuickSettingsButton(menuOption) {
    const quickSetting = document.createElement("div");
    if (menuOption.id)
      quickSetting.id = menuOption.id;
    quickSetting.classList.add("canvas-control-item");
    (0, import_obsidian3.setIcon)(quickSetting, menuOption.icon);
    (0, import_obsidian3.setTooltip)(quickSetting, menuOption.label, { placement: "left" });
    quickSetting.addEventListener("click", () => {
      var _a;
      return (_a = menuOption.callback) == null ? void 0 : _a.call(menuOption);
    });
    return quickSetting;
  }
  static addQuickSettingsButton(controlGroup, element) {
    var _a;
    if (element.id)
      (_a = controlGroup.querySelector(`#${element.id}`)) == null ? void 0 : _a.remove();
    controlGroup.appendChild(element);
  }
  static createCardMenuOption(canvas, menuOption, previewNodeSize, onPlaced) {
    const menuOptionElement = document.createElement("div");
    if (menuOption.id)
      menuOptionElement.id = menuOption.id;
    menuOptionElement.classList.add("canvas-card-menu-button");
    menuOptionElement.classList.add("mod-draggable");
    (0, import_obsidian3.setIcon)(menuOptionElement, menuOption.icon);
    (0, import_obsidian3.setTooltip)(menuOptionElement, menuOption.label, { placement: "top" });
    menuOptionElement.addEventListener("click", (_e) => {
      onPlaced(canvas, this.getCenterCoordinates(canvas, previewNodeSize()));
    });
    menuOptionElement.addEventListener("pointerdown", (e) => {
      canvas.dragTempNode(e, previewNodeSize(), (pos) => {
        canvas.deselectAll();
        onPlaced(canvas, pos);
      });
    });
    return menuOptionElement;
  }
  static addCardMenuOption(canvas, element) {
    var _a;
    if (element.id)
      (_a = canvas == null ? void 0 : canvas.cardMenuEl.querySelector(`#${element.id}`)) == null ? void 0 : _a.remove();
    canvas == null ? void 0 : canvas.cardMenuEl.appendChild(element);
  }
  static createPopupMenuOption(menuOption) {
    const menuOptionElement = document.createElement("button");
    if (menuOption.id)
      menuOptionElement.id = menuOption.id;
    menuOptionElement.classList.add("clickable-icon");
    (0, import_obsidian3.setIcon)(menuOptionElement, menuOption.icon);
    (0, import_obsidian3.setTooltip)(menuOptionElement, menuOption.label, { placement: "top" });
    menuOptionElement.addEventListener("click", () => {
      var _a;
      return (_a = menuOption.callback) == null ? void 0 : _a.call(menuOption);
    });
    return menuOptionElement;
  }
  static createExpandablePopupMenuOption(menuOption, subMenuOptions) {
    const menuOptionElement = this.createPopupMenuOption({
      ...menuOption,
      callback: () => {
        var _a, _b, _c;
        const submenuId = `${menuOption.id}-submenu`;
        if (menuOptionElement.classList.contains("is-active")) {
          menuOptionElement.classList.remove("is-active");
          (_b = (_a = menuOptionElement.parentElement) == null ? void 0 : _a.querySelector(`#${submenuId}`)) == null ? void 0 : _b.remove();
          return;
        }
        menuOptionElement.classList.add("is-active");
        const submenu = document.createElement("div");
        submenu.id = submenuId;
        submenu.classList.add("canvas-submenu");
        for (const subMenuOption of subMenuOptions) {
          const subMenuOptionElement = this.createPopupMenuOption(subMenuOption);
          submenu.appendChild(subMenuOptionElement);
        }
        (_c = menuOptionElement.parentElement) == null ? void 0 : _c.appendChild(submenu);
      }
    });
    return menuOptionElement;
  }
  static addPopupMenuOption(canvas, element, index = -1) {
    var _a, _b;
    const popupMenuEl = (_a = canvas == null ? void 0 : canvas.menu) == null ? void 0 : _a.menuEl;
    if (!popupMenuEl)
      return;
    if (element.id)
      (_b = popupMenuEl.querySelector(`#${element.id}`)) == null ? void 0 : _b.remove();
    const sisterElement = index >= 0 ? popupMenuEl.children[index] : popupMenuEl.children[popupMenuEl.children.length + index];
    popupMenuEl.insertAfter(element, sisterElement);
  }
  static getCenterCoordinates(canvas, nodeSize) {
    const viewBounds = canvas.getViewportBBox();
    return {
      x: (viewBounds.minX + viewBounds.maxX) / 2 - nodeSize.width / 2,
      y: (viewBounds.minY + viewBounds.maxY) / 2 - nodeSize.height / 2
    };
  }
  static getBBox(canvasNodes) {
    let minX = Infinity;
    let minY = Infinity;
    let maxX = -Infinity;
    let maxY = -Infinity;
    for (const node of canvasNodes) {
      const nodeData = node.getData ? node.getData() : node;
      minX = Math.min(minX, nodeData.x);
      minY = Math.min(minY, nodeData.y);
      maxX = Math.max(maxX, nodeData.x + nodeData.width);
      maxY = Math.max(maxY, nodeData.y + nodeData.height);
    }
    return { minX, minY, maxX, maxY };
  }
  static zoomToBBox(canvas, bbox) {
    const PADDING_CORRECTION_FACTOR = 1 / 1.1;
    const zoomedBBox = BBoxHelper.scaleBBox(bbox, PADDING_CORRECTION_FACTOR);
    canvas.zoomToBbox(zoomedBBox);
    const scaleFactor = Math.min(
      canvas.canvasRect.width / (bbox.maxX - bbox.minX),
      canvas.canvasRect.height / (bbox.maxY - bbox.minY)
    );
    canvas.tZoom = Math.log2(scaleFactor);
  }
  static createStyleDropdownMenu(canvas, stylableAttributes, currentStyleAttributes, setStyleAttribute) {
    var _a, _b;
    const STYLE_MENU_ID = "style-menu";
    const STYLE_MENU_DROPDOWN_ID = "style-menu-dropdown";
    const STYLE_MENU_DROPDOWN_SUBMENU_ID = "style-menu-dropdown-submenu";
    const popupMenuElement = (_a = canvas == null ? void 0 : canvas.menu) == null ? void 0 : _a.menuEl;
    if (!popupMenuElement)
      return;
    (_b = popupMenuElement.querySelector(`#${STYLE_MENU_ID}`)) == null ? void 0 : _b.remove();
    const styleMenuButtonElement = document.createElement("button");
    styleMenuButtonElement.id = STYLE_MENU_ID;
    styleMenuButtonElement.classList.add("clickable-icon");
    (0, import_obsidian3.setIcon)(styleMenuButtonElement, "paintbrush");
    (0, import_obsidian3.setTooltip)(styleMenuButtonElement, "Style", { placement: "top" });
    popupMenuElement.appendChild(styleMenuButtonElement);
    styleMenuButtonElement.addEventListener("click", () => {
      var _a2, _b2, _c;
      const isOpen = styleMenuButtonElement.classList.toggle("has-active-menu");
      if (!isOpen) {
        (_a2 = popupMenuElement.querySelector(`#${STYLE_MENU_DROPDOWN_ID}`)) == null ? void 0 : _a2.remove();
        (_b2 = popupMenuElement.querySelector(`#${STYLE_MENU_DROPDOWN_SUBMENU_ID}`)) == null ? void 0 : _b2.remove();
        return;
      }
      const styleMenuDropdownElement = document.createElement("div");
      styleMenuDropdownElement.id = STYLE_MENU_DROPDOWN_ID;
      styleMenuDropdownElement.classList.add("menu");
      styleMenuDropdownElement.style.position = "absolute";
      styleMenuDropdownElement.style.maxHeight = "initial";
      styleMenuDropdownElement.style.top = `${popupMenuElement.getBoundingClientRect().height}px`;
      const canvasWrapperCenterX = canvas.wrapperEl.getBoundingClientRect().left + canvas.wrapperEl.getBoundingClientRect().width / 2;
      const leftPosition = styleMenuButtonElement.getBoundingClientRect().left - popupMenuElement.getBoundingClientRect().left;
      const rightPosition = popupMenuElement.getBoundingClientRect().right - styleMenuButtonElement.getBoundingClientRect().right;
      if (popupMenuElement.getBoundingClientRect().left + leftPosition < canvasWrapperCenterX)
        styleMenuDropdownElement.style.left = `${leftPosition}px`;
      else
        styleMenuDropdownElement.style.right = `${rightPosition}px`;
      for (const stylableAttribute of stylableAttributes) {
        const stylableAttributeElement = document.createElement("div");
        stylableAttributeElement.classList.add("menu-item");
        stylableAttributeElement.classList.add("tappable");
        const iconElement = document.createElement("div");
        iconElement.classList.add("menu-item-icon");
        const selectedStyle = (_c = stylableAttribute.options.find((option) => currentStyleAttributes[stylableAttribute.datasetKey] === option.value)) != null ? _c : stylableAttribute.options.find((value) => value.value === null);
        (0, import_obsidian3.setIcon)(iconElement, selectedStyle.icon);
        stylableAttributeElement.appendChild(iconElement);
        const labelElement = document.createElement("div");
        labelElement.classList.add("menu-item-title");
        labelElement.textContent = stylableAttribute.label;
        stylableAttributeElement.appendChild(labelElement);
        const expandIconElement = document.createElement("div");
        expandIconElement.classList.add("menu-item-icon");
        (0, import_obsidian3.setIcon)(expandIconElement, "chevron-right");
        stylableAttributeElement.appendChild(expandIconElement);
        styleMenuDropdownElement.appendChild(stylableAttributeElement);
        stylableAttributeElement.addEventListener("pointerenter", () => {
          stylableAttributeElement.classList.add("selected");
        });
        stylableAttributeElement.addEventListener("pointerleave", () => {
          stylableAttributeElement.classList.remove("selected");
        });
        stylableAttributeElement.addEventListener("click", () => {
          var _a3;
          (_a3 = popupMenuElement.querySelector(`#${STYLE_MENU_DROPDOWN_SUBMENU_ID}`)) == null ? void 0 : _a3.remove();
          const styleMenuDropdownSubmenuElement = document.createElement("div");
          styleMenuDropdownSubmenuElement.id = STYLE_MENU_DROPDOWN_SUBMENU_ID;
          styleMenuDropdownSubmenuElement.classList.add("menu");
          styleMenuDropdownSubmenuElement.style.position = "absolute";
          styleMenuDropdownSubmenuElement.style.maxHeight = "initial";
          const topOffset = parseFloat(window.getComputedStyle(styleMenuDropdownElement).getPropertyValue("padding-top")) + (styleMenuDropdownElement.offsetHeight - styleMenuDropdownElement.clientHeight) / 2;
          styleMenuDropdownSubmenuElement.style.top = `${stylableAttributeElement.getBoundingClientRect().top - topOffset - popupMenuElement.getBoundingClientRect().top}px`;
          const leftPosition2 = styleMenuDropdownElement.getBoundingClientRect().right - popupMenuElement.getBoundingClientRect().left;
          const rightPosition2 = popupMenuElement.getBoundingClientRect().right - styleMenuDropdownElement.getBoundingClientRect().left;
          if (popupMenuElement.getBoundingClientRect().left + leftPosition2 < canvasWrapperCenterX)
            styleMenuDropdownSubmenuElement.style.left = `${leftPosition2}px`;
          else
            styleMenuDropdownSubmenuElement.style.right = `${rightPosition2}px`;
          for (const value of stylableAttribute.options) {
            const styleMenuDropdownSubmenuOptionElement = document.createElement("div");
            styleMenuDropdownSubmenuOptionElement.classList.add("menu-item");
            styleMenuDropdownSubmenuOptionElement.classList.add("tappable");
            const submenuIconElement = document.createElement("div");
            submenuIconElement.classList.add("menu-item-icon");
            (0, import_obsidian3.setIcon)(submenuIconElement, value.icon);
            styleMenuDropdownSubmenuOptionElement.appendChild(submenuIconElement);
            const submenuLabelElement = document.createElement("div");
            submenuLabelElement.classList.add("menu-item-title");
            submenuLabelElement.textContent = value.label;
            styleMenuDropdownSubmenuOptionElement.appendChild(submenuLabelElement);
            if (selectedStyle === value) {
              styleMenuDropdownSubmenuOptionElement.classList.add("mod-selected");
              const selectedIconElement = document.createElement("div");
              selectedIconElement.classList.add("menu-item-icon");
              selectedIconElement.classList.add("mod-selected");
              (0, import_obsidian3.setIcon)(selectedIconElement, "check");
              styleMenuDropdownSubmenuOptionElement.appendChild(selectedIconElement);
            }
            styleMenuDropdownSubmenuElement.appendChild(styleMenuDropdownSubmenuOptionElement);
            styleMenuDropdownSubmenuOptionElement.addEventListener("pointerenter", () => {
              styleMenuDropdownSubmenuOptionElement.classList.add("selected");
            });
            styleMenuDropdownSubmenuOptionElement.addEventListener("pointerleave", () => {
              styleMenuDropdownSubmenuOptionElement.classList.remove("selected");
            });
            styleMenuDropdownSubmenuOptionElement.addEventListener("click", () => {
              setStyleAttribute(stylableAttribute, value.value);
              currentStyleAttributes[stylableAttribute.datasetKey] = value.value;
              styleMenuButtonElement.dispatchEvent(new Event("click"));
            });
          }
          popupMenuElement.appendChild(styleMenuDropdownSubmenuElement);
        });
      }
      popupMenuElement.appendChild(styleMenuDropdownElement);
    });
  }
};
CanvasHelper.GRID_SIZE = 20;

// src/core/canvas-extension.ts
var CanvasExtension = class {
  constructor(plugin) {
    this.plugin = plugin;
    const isEnabled = this.isEnabled();
    if (!(isEnabled === true || this.plugin.settings.getSetting(isEnabled)))
      return;
    this.init();
  }
};

// src/canvas-extensions/group-canvas-extension.ts
var GROUP_NODE_SIZE = { width: 300, height: 300 };
var GroupCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => {
        CanvasHelper.addCardMenuOption(
          canvas,
          CanvasHelper.createCardMenuOption(
            canvas,
            {
              id: "create-group",
              label: "Drag to add group",
              icon: "group"
            },
            () => GROUP_NODE_SIZE,
            (canvas2, pos) => {
              canvas2.createGroupNode({
                pos,
                size: GROUP_NODE_SIZE
              });
            }
          )
        );
      }
    ));
  }
};

// src/canvas-extensions/presentation-canvas-extension.ts
var import_obsidian4 = require("obsidian");
var START_SLIDE_NAME = "Start Slide";
var DEFAULT_SLIDE_NAME = "New Slide";
var PresentationCanvasExtension = class extends CanvasExtension {
  constructor() {
    super(...arguments);
    this.savedViewport = null;
    this.isPresentationMode = false;
    this.visitedNodes = [];
    this.fullscreenModalObserver = null;
  }
  isEnabled() {
    return "presentationFeatureEnabled";
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      "canvas:selection-menu",
      (menu, canvas) => {
        menu.addItem(
          (item) => item.setTitle("Wrap in slide").setIcon("gallery-vertical").onClick(() => this.addSlide(
            canvas,
            void 0,
            BBoxHelper.enlargeBBox(BBoxHelper.combineBBoxes(
              [...canvas.selection.values()].map((element) => element.getBBox())
            ), this.plugin.settings.getSetting("wrapInSlidePadding"))
          ))
        );
      }
    ));
    this.plugin.addCommand({
      id: "create-new-slide",
      name: "Create new slide",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (canvas) => !canvas.readonly && !this.isPresentationMode,
        (canvas) => this.addSlide(canvas)
      )
    });
    this.plugin.addCommand({
      id: "set-start-node",
      name: "Set start node",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (canvas) => !canvas.readonly && !this.isPresentationMode && canvas.getSelectionData().nodes.length === 1,
        (canvas) => this.setStartNode(canvas, canvas.nodes.get(canvas.getSelectionData().nodes[0].id))
      )
    });
    this.plugin.addCommand({
      id: "start-presentation",
      name: "Start presentation",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (_canvas) => !this.isPresentationMode,
        (canvas) => this.startPresentation(canvas)
      )
    });
    this.plugin.addCommand({
      id: "continue-presentation",
      name: "Continue presentation",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (_canvas) => !this.isPresentationMode,
        (canvas) => this.startPresentation(canvas, true)
      )
    });
    this.plugin.addCommand({
      id: "end-presentation",
      name: "End presentation",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (_canvas) => this.isPresentationMode,
        (canvas) => this.endPresentation(canvas)
      )
    });
    this.plugin.addCommand({
      id: "previous-node",
      name: "Previous node",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (_canvas) => this.isPresentationMode,
        (canvas) => this.previousNode(canvas)
      )
    });
    this.plugin.addCommand({
      id: "next-node",
      name: "Next node",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (_canvas) => this.isPresentationMode,
        (canvas) => this.nextNode(canvas)
      )
    });
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => this.onCanvasChanged(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas) => this.onPopupMenuCreated(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeMoved,
      (canvas, node) => this.onNodeMoved(canvas, node)
    ));
  }
  onCanvasChanged(canvas) {
    CanvasHelper.addCardMenuOption(
      canvas,
      CanvasHelper.createCardMenuOption(
        canvas,
        {
          id: "new-slide",
          label: "Drag to add slide",
          icon: "gallery-vertical"
        },
        () => this.getDefaultSlideSize(),
        (canvas2, pos) => this.addSlide(canvas2, pos)
      )
    );
  }
  onPopupMenuCreated(canvas) {
    if (!this.plugin.settings.getSetting("showSetStartNodeInPopup"))
      return;
    const selectedNodesData = canvas.getSelectionData().nodes;
    if (canvas.readonly || selectedNodesData.length !== 1 || canvas.selection.size > 1)
      return;
    const selectedNode = canvas.nodes.get(selectedNodesData[0].id);
    if (!selectedNode)
      return;
    CanvasHelper.addPopupMenuOption(
      canvas,
      CanvasHelper.createPopupMenuOption({
        id: "start-node",
        label: "Set as start slide",
        icon: "play",
        callback: () => this.setStartNode(canvas, selectedNode)
      })
    );
  }
  onNodeMoved(_canvas, node) {
    const nodeData = node.getData();
    if (!nodeData.sideRatio)
      return;
    const nodeBBox = node.getBBox();
    const nodeSize = {
      width: nodeBBox.maxX - nodeBBox.minX,
      height: nodeBBox.maxY - nodeBBox.minY
    };
    const nodeAspectRatio = nodeSize.width / nodeSize.height;
    if (nodeAspectRatio < nodeData.sideRatio)
      nodeSize.width = nodeSize.height * nodeData.sideRatio;
    else
      nodeSize.height = nodeSize.width / nodeData.sideRatio;
    node.setData({
      ...nodeData,
      width: nodeSize.width,
      height: nodeSize.height
    });
  }
  getStartNode(canvas) {
    for (const [_, node] of canvas.nodes) {
      if (node.getData().isStartNode)
        return node;
    }
    return void 0;
  }
  setStartNode(canvas, node) {
    if (!node)
      return;
    const startNode = this.getStartNode(canvas);
    if (startNode)
      startNode.setData({ ...startNode.getData(), isStartNode: false });
    if (node !== startNode)
      node.setData({ ...node.getData(), isStartNode: true }, true);
  }
  getDefaultSlideSize() {
    const slideSizeString = this.plugin.settings.getSetting("defaultSlideSize");
    const slideSizeArray = slideSizeString.split("x").map((value) => parseInt(value));
    return { width: slideSizeArray[0], height: slideSizeArray[1] };
  }
  getSlideAspectRatio() {
    const slideSize = this.getDefaultSlideSize();
    return slideSize.width / slideSize.height;
  }
  addSlide(canvas, pos, bbox) {
    const isStartNode = this.getStartNode(canvas) == null;
    const slideSize = this.getDefaultSlideSize();
    const slideAspectRatio = this.getSlideAspectRatio();
    if (bbox) {
      const bboxWidth = bbox.maxX - bbox.minX;
      const bboxHeight = bbox.maxY - bbox.minY;
      if (bboxWidth / bboxHeight > slideAspectRatio) {
        slideSize.width = bboxWidth;
        slideSize.height = bboxWidth / slideAspectRatio;
      } else {
        slideSize.height = bboxHeight;
        slideSize.width = bboxHeight * slideAspectRatio;
      }
      pos = {
        x: bbox.minX,
        y: bbox.minY
      };
    }
    if (!pos)
      pos = CanvasHelper.getCenterCoordinates(canvas, this.getDefaultSlideSize());
    const groupNode = canvas.createGroupNode({
      pos,
      size: slideSize,
      label: isStartNode ? START_SLIDE_NAME : DEFAULT_SLIDE_NAME,
      focus: false
    });
    groupNode.setData({
      ...groupNode.getData(),
      sideRatio: slideAspectRatio,
      isStartNode: isStartNode ? true : void 0
    });
  }
  async animateNodeTransition(canvas, fromNode, toNode) {
    const useCustomZoomFunction = this.plugin.settings.getSetting("zoomToSlideWithoutPadding");
    const animationDurationMs = this.plugin.settings.getSetting("slideTransitionAnimationDuration") * 1e3;
    if (animationDurationMs > 0 && fromNode) {
      const animationIntensity = this.plugin.settings.getSetting("slideTransitionAnimationIntensity");
      const currentNodeBBoxEnlarged = BBoxHelper.scaleBBox(fromNode.getBBox(), animationIntensity);
      if (useCustomZoomFunction)
        CanvasHelper.zoomToBBox(canvas, currentNodeBBoxEnlarged);
      else
        canvas.zoomToBbox(currentNodeBBoxEnlarged);
      await sleep(animationDurationMs / 2);
      const nextNodeBBoxEnlarged = BBoxHelper.scaleBBox(toNode.getBBox(), animationIntensity);
      if (useCustomZoomFunction)
        CanvasHelper.zoomToBBox(canvas, nextNodeBBoxEnlarged);
      else
        canvas.zoomToBbox(nextNodeBBoxEnlarged);
      await sleep(animationDurationMs / 2);
    }
    let nodeBBox = toNode.getBBox();
    if (useCustomZoomFunction)
      CanvasHelper.zoomToBBox(canvas, nodeBBox);
    else
      canvas.zoomToBbox(nodeBBox);
  }
  async startPresentation(canvas, tryContinue = false) {
    if (!tryContinue || this.visitedNodes.length === 0) {
      const startNode = this.getStartNode(canvas);
      if (!startNode) {
        new import_obsidian4.Notice("No start node found. Please mark a node as a start node trough the popup menu.");
        return;
      }
      this.visitedNodes = [startNode];
    }
    this.savedViewport = {
      x: canvas.tx,
      y: canvas.ty,
      zoom: canvas.tZoom
    };
    canvas.wrapperEl.focus();
    canvas.wrapperEl.requestFullscreen();
    canvas.wrapperEl.classList.add("presentation-mode");
    canvas.setReadonly(true);
    canvas.wrapperEl.onkeydown = (e) => {
      if (this.plugin.settings.getSetting("useArrowKeysToChangeSlides")) {
        if (e.key === "ArrowRight")
          this.nextNode(canvas);
        else if (e.key === "ArrowLeft")
          this.previousNode(canvas);
      }
      if (this.plugin.settings.getSetting("usePgUpPgDownKeysToChangeSlides")) {
        if (e.key === "PageDown")
          this.nextNode(canvas);
        else if (e.key === "PageUp")
          this.previousNode(canvas);
      }
    };
    this.fullscreenModalObserver = new MutationObserver((mutationRecords) => {
      mutationRecords.forEach((mutationRecord) => {
        mutationRecord.addedNodes.forEach((node) => {
          var _a;
          document.body.removeChild(node);
          (_a = document.fullscreenElement) == null ? void 0 : _a.appendChild(node);
        });
      });
      const inputField = document.querySelector(".prompt-input");
      if (inputField)
        inputField.focus();
    });
    this.fullscreenModalObserver.observe(document.body, { childList: true });
    canvas.wrapperEl.onfullscreenchange = (_e) => {
      if (document.fullscreenElement)
        return;
      this.endPresentation(canvas);
    };
    this.isPresentationMode = true;
    await sleep(500);
    this.animateNodeTransition(canvas, void 0, this.visitedNodes.last());
  }
  endPresentation(canvas) {
    var _a;
    (_a = this.fullscreenModalObserver) == null ? void 0 : _a.disconnect();
    this.fullscreenModalObserver = null;
    canvas.wrapperEl.onkeydown = null;
    canvas.wrapperEl.onfullscreenchange = null;
    canvas.setReadonly(false);
    canvas.wrapperEl.classList.remove("presentation-mode");
    if (document.fullscreenElement)
      document.exitFullscreen();
    canvas.setViewport(this.savedViewport.x, this.savedViewport.y, this.savedViewport.zoom);
    this.isPresentationMode = false;
  }
  nextNode(canvas) {
    var _a;
    const fromNode = this.visitedNodes.last();
    if (!fromNode)
      return;
    const outgoingEdges = canvas.getEdgesForNode(fromNode).filter((edge) => edge.from.node === fromNode);
    let toNode = (_a = outgoingEdges.first()) == null ? void 0 : _a.to.node;
    if (outgoingEdges.length > 1) {
      const sortedEdges = outgoingEdges.sort((a, b) => {
        if (!a.label)
          return 1;
        if (!b.label)
          return -1;
        return a.label.localeCompare(b.label);
      });
      const traversedEdgesCount = this.visitedNodes.filter((visitedNode) => visitedNode == fromNode).length - 1;
      const nextEdge = sortedEdges[traversedEdgesCount];
      toNode = nextEdge.to.node;
    }
    if (toNode) {
      this.visitedNodes.push(toNode);
      this.animateNodeTransition(canvas, fromNode, toNode);
    } else {
      this.animateNodeTransition(canvas, fromNode, fromNode);
    }
  }
  previousNode(canvas) {
    const fromNode = this.visitedNodes.pop();
    if (!fromNode)
      return;
    let toNode = this.visitedNodes.last();
    if (!toNode) {
      toNode = fromNode;
      this.visitedNodes.push(fromNode);
    }
    this.animateNodeTransition(canvas, fromNode, toNode);
  }
};

// src/canvas-extensions/better-readonly-canvas-extension.ts
var BetterReadonlyCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return "betterReadonlyEnabled";
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas, _node) => this.updatePopupMenu(canvas)
    ));
    let movingToBBox = false;
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.ViewportChanged.Before,
      (canvas) => {
        var _a, _b, _c, _d, _e, _f;
        if (movingToBBox) {
          movingToBBox = false;
          this.updateLockedZoom(canvas);
          this.updateLockedPan(canvas);
          return;
        }
        if (!canvas.readonly)
          return;
        if (this.plugin.settings.getSetting("disableZoom")) {
          canvas.zoom = (_a = canvas.lockedZoom) != null ? _a : canvas.zoom;
          canvas.tZoom = (_b = canvas.lockedZoom) != null ? _b : canvas.tZoom;
        }
        if (this.plugin.settings.getSetting("disablePan")) {
          canvas.x = (_c = canvas.lockedX) != null ? _c : canvas.x;
          canvas.tx = (_d = canvas.lockedX) != null ? _d : canvas.tx;
          canvas.y = (_e = canvas.lockedY) != null ? _e : canvas.y;
          canvas.ty = (_f = canvas.lockedY) != null ? _f : canvas.ty;
        }
      }
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.ZoomToBbox.Before,
      () => movingToBBox = true
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.ReadonlyChanged,
      (canvas, _readonly) => {
        this.updatePopupMenu(canvas);
        this.updateLockedZoom(canvas);
        this.updateLockedPan(canvas);
      }
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => this.addQuickSettings(canvas)
    ));
  }
  addQuickSettings(canvas) {
    var _a;
    const settingsContainer = (_a = canvas.quickSettingsButton) == null ? void 0 : _a.parentElement;
    if (!settingsContainer)
      return;
    CanvasHelper.addQuickSettingsButton(
      settingsContainer,
      this.createToggle({
        id: "disable-node-popup",
        label: "Disable node popup",
        icon: "arrow-up-right-from-circle",
        callback: () => this.updatePopupMenu(canvas)
      }, "disableNodePopup")
    );
    CanvasHelper.addQuickSettingsButton(
      settingsContainer,
      this.createToggle({
        id: "disable-zoom",
        label: "Disable zoom",
        icon: "zoom-in",
        callback: () => this.updateLockedZoom(canvas)
      }, "disableZoom")
    );
    CanvasHelper.addQuickSettingsButton(
      settingsContainer,
      this.createToggle({
        id: "disable-pan",
        label: "Disable pan",
        icon: "move",
        callback: () => this.updateLockedPan(canvas)
      }, "disablePan")
    );
  }
  createToggle(menuOption, settingKey) {
    const toggle = CanvasHelper.createQuickSettingsButton({
      ...menuOption,
      callback: () => (async () => {
        var _a;
        const newValue = !this.plugin.settings.getSetting(settingKey);
        await this.plugin.settings.setSetting({ [settingKey]: newValue });
        toggle.dataset.toggled = this.plugin.settings.getSetting(settingKey).toString();
        (_a = menuOption.callback) == null ? void 0 : _a.call(this);
      })()
    });
    toggle.classList.add("show-while-readonly");
    toggle.dataset.toggled = this.plugin.settings.getSetting(settingKey).toString();
    return toggle;
  }
  updatePopupMenu(canvas) {
    const hidden = canvas.readonly && this.plugin.settings.getSetting("disableNodePopup");
    canvas.menu.menuEl.style.visibility = hidden ? "hidden" : "visible";
  }
  updateLockedZoom(canvas) {
    canvas.lockedZoom = canvas.tZoom;
  }
  updateLockedPan(canvas) {
    canvas.lockedX = canvas.tx;
    canvas.lockedY = canvas.ty;
  }
};

// src/utils/modal-helper.ts
var import_obsidian5 = require("obsidian");

// src/utils/path-helper.ts
var PathHelper = class {
  static extension(path) {
    return path.includes(".") ? path.split(".").pop() : void 0;
  }
};

// src/utils/modal-helper.ts
var FileNameModal = class extends import_obsidian5.SuggestModal {
  constructor(app, parentPath, fileExtension) {
    super(app);
    this.parentPath = parentPath;
    this.fileExtension = fileExtension;
  }
  getSuggestions(query) {
    const queryWithoutExtension = query.replace(new RegExp(`\\.${this.fileExtension}$`), "");
    if (queryWithoutExtension === "")
      return [];
    const queryWithExtension = queryWithoutExtension + "." + this.fileExtension;
    const suggestions = [`${this.parentPath}/${queryWithExtension}`, queryWithExtension].filter((s) => this.app.vault.getAbstractFileByPath(s) === null);
    return suggestions;
  }
  renderSuggestion(text, el) {
    el.setText(text);
  }
  onChooseSuggestion(_text, _evt) {
  }
  awaitInput() {
    return new Promise((resolve, _reject) => {
      this.onChooseSuggestion = (text) => {
        resolve(text);
      };
      this.open();
    });
  }
};
var FileSelectModal = class extends import_obsidian5.SuggestModal {
  constructor(app, extensionsRegex, suggestNewFile = false) {
    super(app);
    this.files = this.app.vault.getFiles().map((file) => file.path).filter((path) => {
      var _a;
      return (_a = PathHelper.extension(path)) == null ? void 0 : _a.match(extensionsRegex != null ? extensionsRegex : /.*/);
    });
    this.suggestNewFile = suggestNewFile;
    this.setPlaceholder("Type to search...");
    this.setInstructions([{
      command: "\u2191\u2193",
      purpose: "to navigate"
    }, {
      command: "\u21B5",
      purpose: "to open"
    }, {
      command: "shift \u21B5",
      purpose: "to create"
    }, {
      command: "esc",
      purpose: "to dismiss"
    }]);
    this.scope.register(["Shift"], "Enter", (e) => {
      this.onChooseSuggestion(this.inputEl.value, e);
      this.close();
    });
  }
  getSuggestions(query) {
    const suggestions = this.files.filter((path) => path.toLowerCase().includes(query.toLowerCase()));
    if (suggestions.length === 0 && this.suggestNewFile)
      suggestions.push(query);
    return suggestions;
  }
  renderSuggestion(path, el) {
    const simplifiedPath = path.replace(/\.md$/, "");
    el.setText(simplifiedPath);
  }
  onChooseSuggestion(_path, _evt) {
  }
  awaitInput() {
    return new Promise((resolve, _reject) => {
      this.onChooseSuggestion = (path, _evt) => {
        const file = this.app.vault.getAbstractFileByPath(path);
        if (file instanceof import_obsidian5.TFile)
          return resolve(file);
        if (!this.suggestNewFile)
          return;
        if (PathHelper.extension(path) === void 0)
          path += ".md";
        const newFile = this.app.vault.create(path, "");
        resolve(newFile);
      };
      this.open();
    });
  }
};

// src/canvas-extensions/encapsulate-canvas-extension.ts
var ENCAPSULATED_FILE_NODE_SIZE = { width: 300, height: 300 };
var EncapsulateCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return "canvasEncapsulationEnabled";
  }
  init() {
    this.plugin.addCommand({
      id: "encapsulate-selection",
      name: "Encapsulate selection",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (canvas) => !canvas.readonly && canvas.selection.size > 0,
        (canvas) => this.encapsulateSelection(canvas)
      )
    });
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      "canvas:selection-menu",
      (menu, canvas) => {
        menu.addItem(
          (item) => item.setTitle("Encapsulate").setIcon("file-plus").onClick(() => this.encapsulateSelection(canvas))
        );
      }
    ));
  }
  async encapsulateSelection(canvas) {
    var _a;
    const selection = canvas.getSelectionData();
    const sourceFileFolder = (_a = canvas.view.file.parent) == null ? void 0 : _a.path;
    if (!sourceFileFolder)
      return;
    const targetFilePath = await new FileNameModal(
      this.plugin.app,
      sourceFileFolder,
      "canvas"
    ).awaitInput();
    const newFileData = { nodes: selection.nodes, edges: selection.edges };
    const file = await this.plugin.app.vault.create(targetFilePath, JSON.stringify(newFileData, null, 2));
    for (const nodeData of selection.nodes) {
      const node = canvas.nodes.get(nodeData.id);
      if (node)
        canvas.removeNode(node);
    }
    canvas.createFileNode({
      pos: {
        x: selection.center.x - ENCAPSULATED_FILE_NODE_SIZE.width / 2,
        y: selection.center.y - ENCAPSULATED_FILE_NODE_SIZE.height / 2
      },
      size: ENCAPSULATED_FILE_NODE_SIZE,
      file
    });
  }
};

// src/canvas-extensions/commands-canvas-extension.ts
var DIRECTIONS = ["up", "down", "left", "right"];
var CommandsCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return "commandsFeatureEnabled";
  }
  init() {
    this.plugin.addCommand({
      id: "create-text-node",
      name: "Create text node",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (canvas) => !canvas.readonly,
        (canvas) => this.createTextNode(canvas)
      )
    });
    this.plugin.addCommand({
      id: "create-file-node",
      name: "Create file node",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (canvas) => !canvas.readonly,
        (canvas) => this.createFileNode(canvas)
      )
    });
    this.plugin.addCommand({
      id: "select-all-edges",
      name: "Select all edges",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (_canvas) => true,
        (canvas) => canvas.updateSelection(
          () => canvas.selection = new Set(canvas.edges.values())
        )
      )
    });
    this.plugin.addCommand({
      id: "zoom-to-selection",
      name: "Zoom to selection",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (canvas) => canvas.selection.size > 0,
        (canvas) => canvas.zoomToSelection()
      )
    });
    for (const direction of DIRECTIONS) {
      this.plugin.addCommand({
        id: `clone-node-${direction}`,
        name: `Clone node ${direction}`,
        checkCallback: CanvasHelper.canvasCommand(
          this.plugin,
          (canvas) => {
            var _a;
            return !canvas.readonly && canvas.selection.size === 1 && ((_a = canvas.selection.values().next().value) == null ? void 0 : _a.getData().type) === "text";
          },
          (canvas) => this.cloneNode(canvas, direction)
        )
      });
      this.plugin.addCommand({
        id: `expand-node-${direction}`,
        name: `Expand node ${direction}`,
        checkCallback: CanvasHelper.canvasCommand(
          this.plugin,
          (canvas) => !canvas.readonly && canvas.selection.size === 1,
          (canvas) => this.expandNode(canvas, direction)
        )
      });
    }
  }
  createTextNode(canvas) {
    const size = canvas.config.defaultTextNodeDimensions;
    const pos = CanvasHelper.getCenterCoordinates(canvas, size);
    canvas.createTextNode({ pos, size });
  }
  async createFileNode(canvas) {
    const size = canvas.config.defaultFileNodeDimensions;
    const pos = CanvasHelper.getCenterCoordinates(canvas, size);
    const file = await new FileSelectModal(this.plugin.app, void 0, true).awaitInput();
    canvas.createFileNode({ pos, size, file });
  }
  cloneNode(canvas, cloneDirection) {
    const sourceNode = canvas.selection.values().next().value;
    if (!sourceNode)
      return;
    const sourceNodeData = sourceNode.getData();
    const nodeMargin = this.plugin.settings.getSetting("cloneNodeMargin");
    const offset = {
      x: (sourceNode.width + nodeMargin) * (cloneDirection === "left" ? -1 : cloneDirection === "right" ? 1 : 0),
      y: (sourceNode.height + nodeMargin) * (cloneDirection === "up" ? -1 : cloneDirection === "down" ? 1 : 0)
    };
    const clonedNode = canvas.createTextNode({
      pos: {
        x: sourceNode.x + offset.x,
        y: sourceNode.y + offset.y
      },
      size: {
        width: sourceNode.width,
        height: sourceNode.height
      }
    });
    clonedNode.setData({
      ...clonedNode.getData(),
      color: sourceNodeData.color,
      shape: sourceNodeData.shape
    });
    if (this.plugin.settings.getSetting("zoomToClonedNode"))
      canvas.zoomToBbox(clonedNode.getBBox());
  }
  expandNode(canvas, expandDirection) {
    const node = canvas.selection.values().next().value;
    if (!node)
      return;
    const expandNodeStepSize = this.plugin.settings.getSetting("expandNodeStepSize");
    const expand = {
      x: expandDirection === "left" ? -1 : expandDirection === "right" ? 1 : 0,
      y: expandDirection === "up" ? -1 : expandDirection === "down" ? 1 : 0
    };
    node.setData({
      ...node.getData(),
      width: node.width + expand.x * expandNodeStepSize,
      height: node.height + expand.y * expandNodeStepSize
    });
  }
};

// src/canvas-extensions/portals-canvas-extension.ts
var import_obsidian6 = require("obsidian");
var PORTAL_PADDING = 50;
var MIN_OPEN_PORTAL_SIZE = { width: 200, height: 200 };
var PortalsCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return "portalsFeatureEnabled";
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas) => this.updatePopupMenu(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeRemoved,
      (canvas, node) => this.onNodeRemoved(canvas, node)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeMoved,
      (canvas, node) => this.onNodeMoved(canvas, node)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DraggingStateChanged,
      (canvas, startedDragging) => this.onDraggingStateChanged(canvas, startedDragging)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.ContainingNodesRequested,
      (canvas, bbox, nodes) => this.onContainingNodesRequested(canvas, bbox, nodes)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.SelectionChanged,
      (canvas, oldSelection, updateSelection) => this.onSelectionChanged(canvas, oldSelection, updateSelection)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DataRequested,
      (canvas, data) => this.removePortalCanvasData(canvas, data)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.LoadData,
      (canvas, data, setData) => {
        this.getCanvasDataWithPortals(canvas, data).then((newData) => {
          if (newData.nodes.length === data.nodes.length && newData.edges.length === data.edges.length)
            return;
          setData(newData);
        });
      }
    ));
  }
  updatePopupMenu(canvas) {
    if (canvas.readonly)
      return;
    const selectedFileNodes = canvas.getSelectionData().nodes.map((nodeData) => {
      var _a;
      const node = canvas.nodes.get(nodeData.id);
      if (!node)
        return null;
      if (nodeData.type !== "file")
        return null;
      if (((_a = node.file) == null ? void 0 : _a.extension) === "canvas")
        return node;
      if (nodeData.portalToFile)
        this.setPortalOpen(canvas, node, false);
      return null;
    }).filter((node) => node !== null);
    if (selectedFileNodes.length !== 1)
      return;
    const portalNode = selectedFileNodes[0];
    const portalNodeData = portalNode.getData();
    if (portalNodeData.portalToFile && portalNodeData.file !== portalNodeData.portalToFile) {
      this.setPortalOpen(canvas, portalNode, true);
    }
    CanvasHelper.addPopupMenuOption(
      canvas,
      CanvasHelper.createPopupMenuOption({
        id: "toggle-portal",
        label: portalNodeData.portalToFile ? "Close portal" : "Open portal",
        icon: portalNodeData.portalToFile ? "door-open" : "door-closed",
        callback: () => {
          this.setPortalOpen(canvas, portalNode, portalNodeData.portalToFile === void 0);
          this.updatePopupMenu(canvas);
        }
      })
    );
  }
  setPortalOpen(canvas, portalNode, open) {
    const portalNodeData = portalNode.getData();
    portalNode.setData({
      ...portalNodeData,
      portalToFile: open ? portalNodeData.file : void 0
    });
    canvas.setData(canvas.getData());
  }
  onNodeRemoved(canvas, node) {
    var _a, _b, _c, _d;
    const nodeData = node.getData();
    if (nodeData.type !== "file" || !nodeData.portalToFile)
      return;
    Object.keys((_b = (_a = nodeData.portalIdMaps) == null ? void 0 : _a.nodeIdMap) != null ? _b : {}).map((refNodeId) => canvas.nodes.get(refNodeId)).filter((node2) => node2 !== void 0).forEach((node2) => canvas.removeNode(node2));
    Object.keys((_d = (_c = nodeData.portalIdMaps) == null ? void 0 : _c.edgeIdMap) != null ? _d : {}).map((refEdgeId) => canvas.edges.get(refEdgeId)).filter((edge) => edge !== void 0).forEach((edge) => canvas.removeEdge(edge));
  }
  onContainingNodesRequested(_canvas, _bbox, nodes) {
    nodes.splice(0, nodes.length, ...nodes.filter((node) => node.getData().portalId === void 0));
  }
  onSelectionChanged(canvas, oldSelection, updateSelection) {
    updateSelection(() => {
      const updatedSelection = Array.from(canvas.selection).filter((node) => node.getData().portalId === void 0);
      canvas.selection = new Set(updatedSelection);
    });
    const previouslySelectedPortalNodesIds = Array.from(oldSelection).filter((node) => node.getData().portalToFile !== void 0).flatMap((node) => {
      const portalNodeData = node.getData();
      const nestedPortalsIds = this.getNestedPortalsIds(canvas, portalNodeData.id);
      return [portalNodeData.id, ...nestedPortalsIds];
    });
    for (const node of canvas.nodes.values()) {
      const nodeData = node.getData();
      if (nodeData.portalId === void 0 || !previouslySelectedPortalNodesIds.includes(nodeData.portalId))
        continue;
      node.updateZIndex();
    }
  }
  getNestedPortalsIds(canvas, portalId) {
    const nestedPortalsIds = [];
    for (const node of canvas.nodes.values()) {
      const nodeData = node.getData();
      if (nodeData.portalId === portalId) {
        nestedPortalsIds.push(nodeData.id);
        nestedPortalsIds.push(...this.getNestedPortalsIds(canvas, nodeData.id));
      }
    }
    return nestedPortalsIds;
  }
  onDraggingStateChanged(canvas, startedDragging) {
    var _a;
    if (!canvas.getSelectionData().nodes.some((node) => node.type === "file" && node.portalToFile))
      return;
    if (startedDragging) {
      const objectSnappingEnabled = canvas.options.snapToObjects;
      this.restoreObjectSnappingState = () => canvas.toggleObjectSnapping(objectSnappingEnabled);
      if (objectSnappingEnabled)
        canvas.toggleObjectSnapping(false);
    } else
      (_a = this.restoreObjectSnappingState) == null ? void 0 : _a.call(this);
  }
  onNodeMoved(canvas, node) {
    const nodeData = node.getData();
    if (nodeData.type !== "file" || !nodeData.portalToFile)
      return;
    this.onOpenPortalMoved(canvas, node);
  }
  onOpenPortalMoved(canvas, portalNode) {
    var _a;
    let portalNodeData = portalNode.getData();
    const nestedNodesIdMap = (_a = portalNode.getData().portalIdMaps) == null ? void 0 : _a.nodeIdMap;
    if (!nestedNodesIdMap)
      return;
    const nestedNodes = Object.keys(nestedNodesIdMap).map((refNodeId) => canvas.nodes.get(refNodeId)).filter((node) => node !== void 0);
    const sourceBBox = CanvasHelper.getBBox(nestedNodes);
    const targetSize = this.getPortalSize(sourceBBox);
    if (portalNodeData.width !== targetSize.width || portalNodeData.height !== targetSize.height) {
      portalNode.setData({
        ...portalNodeData,
        width: targetSize.width,
        height: targetSize.height
      });
      return;
    }
    const portalOffset = {
      x: portalNodeData.x - sourceBBox.minX + PORTAL_PADDING,
      y: portalNodeData.y - sourceBBox.minY + PORTAL_PADDING
    };
    for (const nestedNode of nestedNodes) {
      const nestedNodeData = nestedNode.getData();
      nestedNode.setData({
        ...nestedNodeData,
        x: nestedNodeData.x + portalOffset.x,
        y: nestedNodeData.y + portalOffset.y
      });
    }
  }
  removePortalCanvasData(_canvas, data) {
    var _a, _b;
    data.edges = data.edges.filter((edgeData) => {
      var _a2, _b2;
      if (edgeData.portalId !== void 0)
        return false;
      const fromNodeData = data.nodes.find((nodeData) => nodeData.id === edgeData.fromNode);
      const toNodeData = data.nodes.find((nodeData) => nodeData.id === edgeData.toNode);
      if (!fromNodeData || !toNodeData)
        return true;
      if (fromNodeData.portalId === void 0 && toNodeData.portalId === void 0) {
        return true;
      } else if (fromNodeData.portalId !== void 0 && toNodeData.portalId !== void 0) {
        return false;
      } else {
        const fromPortalNodeData = fromNodeData.portalId !== void 0 ? fromNodeData : toNodeData;
        const notFromPortalNodeData = fromNodeData.portalId !== void 0 ? toNodeData : fromNodeData;
        notFromPortalNodeData.edgesToNodeFromPortal = (_a2 = notFromPortalNodeData.edgesToNodeFromPortal) != null ? _a2 : {};
        notFromPortalNodeData.edgesToNodeFromPortal[fromPortalNodeData.portalId] = (_b2 = notFromPortalNodeData.edgesToNodeFromPortal[fromPortalNodeData.portalId]) != null ? _b2 : [];
        notFromPortalNodeData.edgesToNodeFromPortal[fromPortalNodeData.portalId].push(edgeData);
        return false;
      }
    });
    data.nodes = data.nodes.filter((nodeData) => nodeData.portalId === void 0);
    for (const portalNodeData of data.nodes) {
      if (portalNodeData.type !== "file")
        continue;
      if (this.plugin.settings.getSetting("maintainClosedPortalSize")) {
        portalNodeData.width = (_a = portalNodeData.closedPortalWidth) != null ? _a : portalNodeData.width;
        portalNodeData.height = (_b = portalNodeData.closedPortalHeight) != null ? _b : portalNodeData.height;
      }
      delete portalNodeData.closedPortalWidth;
      delete portalNodeData.closedPortalHeight;
      delete portalNodeData.portalIdMaps;
    }
  }
  async getCanvasDataWithPortals(canvas, dataRef) {
    const data = JSON.parse(JSON.stringify(dataRef));
    const addedData = await Promise.all(data.nodes.map((nodeData) => this.tryOpenPortal(canvas, nodeData)));
    for (const newData of addedData) {
      data.nodes.push(...newData.nodes);
      data.edges.push(...newData.edges);
    }
    for (const originNodeData of data.nodes) {
      if (originNodeData.edgesToNodeFromPortal === void 0)
        continue;
      for (const [relativePortalId, edges] of Object.entries(originNodeData.edgesToNodeFromPortal)) {
        const idPrefix = originNodeData.portalId ? `${originNodeData.portalId}-` : "";
        const portalId = `${idPrefix}${relativePortalId}`;
        const targetPortalData = data.nodes.find((nodeData) => nodeData.id === portalId);
        if (!targetPortalData) {
          delete originNodeData.edgesToNodeFromPortal[portalId];
          continue;
        }
        if (targetPortalData.portalToFile) {
          data.edges.push(...edges.map((edge) => ({
            ...edge,
            portalId: originNodeData.portalId,
            fromNode: `${idPrefix}${edge.fromNode}`,
            toNode: `${idPrefix}${edge.toNode}`
          })));
          delete originNodeData.edgesToNodeFromPortal[portalId];
        } else if (this.plugin.settings.getSetting("showEdgesIntoDisabledPortals")) {
          data.edges.push(...edges.map((edge) => {
            const fromNodeId = `${idPrefix}${edge.fromNode}`;
            const fromNode = data.nodes.find((nodeData) => nodeData.id === fromNodeId);
            const toNodeId = `${idPrefix}${edge.toNode}`;
            return {
              ...edge,
              fromNode: fromNode ? fromNodeId : portalId,
              toNode: fromNode ? portalId : toNodeId,
              portalId
              // Mark it as temporary
            };
          }));
        }
      }
      if (Object.keys(originNodeData.edgesToNodeFromPortal).length === 0)
        delete originNodeData.edgesToNodeFromPortal;
    }
    return data;
  }
  async tryOpenPortal(canvas, portalNodeData) {
    var _a, _b;
    const addedData = { nodes: [], edges: [] };
    if (portalNodeData.type !== "file" || !portalNodeData.portalToFile)
      return addedData;
    portalNodeData.portalToFile = portalNodeData.file;
    if (portalNodeData.portalToFile === canvas.view.file.path) {
      portalNodeData.portalToFile = void 0;
      return addedData;
    }
    const portalFile = this.plugin.app.vault.getAbstractFileByPath(portalNodeData.file);
    if (!(portalFile instanceof import_obsidian6.TFile) || portalFile.extension !== "canvas") {
      portalNodeData.portalToFile = void 0;
      return addedData;
    }
    const portalFileData = JSON.parse(await this.plugin.app.vault.cachedRead(portalFile));
    if (!portalFileData) {
      portalNodeData.portalToFile = void 0;
      return addedData;
    }
    portalNodeData.portalIdMaps = {
      nodeIdMap: {},
      edgeIdMap: {}
    };
    const sourceMinCoordinates = CanvasHelper.getBBox(portalFileData.nodes);
    const portalOffset = {
      x: portalNodeData.x - sourceMinCoordinates.minX + PORTAL_PADDING,
      y: portalNodeData.y - sourceMinCoordinates.minY + PORTAL_PADDING
    };
    for (const nodeDataFromPortal of portalFileData.nodes) {
      const refNodeId = `${portalNodeData.id}-${nodeDataFromPortal.id}`;
      portalNodeData.portalIdMaps.nodeIdMap[refNodeId] = nodeDataFromPortal.id;
      const addedNode = {
        ...nodeDataFromPortal,
        id: refNodeId,
        x: nodeDataFromPortal.x + portalOffset.x,
        y: nodeDataFromPortal.y + portalOffset.y,
        portalId: portalNodeData.id
      };
      addedData.nodes.push(addedNode);
      const nestedNodes = await this.tryOpenPortal(canvas, addedNode);
      addedData.nodes.push(...nestedNodes.nodes);
      addedData.edges.push(...nestedNodes.edges);
    }
    for (const edgeDataFromPortal of portalFileData.edges) {
      const refEdgeId = `${portalNodeData.id}-${edgeDataFromPortal.id}`;
      portalNodeData.portalIdMaps.edgeIdMap[refEdgeId] = edgeDataFromPortal.id;
      const fromRefNode = (_a = Object.entries(portalNodeData.portalIdMaps.nodeIdMap).find(([_refNodeId, nodeId]) => nodeId === edgeDataFromPortal.fromNode)) == null ? void 0 : _a[0];
      const toRefNode = (_b = Object.entries(portalNodeData.portalIdMaps.nodeIdMap).find(([_refNodeId, nodeId]) => nodeId === edgeDataFromPortal.toNode)) == null ? void 0 : _b[0];
      addedData.edges.push({
        ...edgeDataFromPortal,
        id: refEdgeId,
        fromNode: fromRefNode,
        toNode: toRefNode,
        portalId: portalNodeData.id
      });
    }
    const nestedNodesBBox = CanvasHelper.getBBox(addedData.nodes);
    const targetSize = this.getPortalSize(nestedNodesBBox);
    portalNodeData.closedPortalWidth = portalNodeData.width;
    portalNodeData.closedPortalHeight = portalNodeData.height;
    portalNodeData.width = targetSize.width;
    portalNodeData.height = targetSize.height;
    return addedData;
  }
  getPortalSize(sourceBBox) {
    const sourceSize = {
      width: sourceBBox.maxX - sourceBBox.minX,
      height: sourceBBox.maxY - sourceBBox.minY
    };
    const targetSize = {
      width: Math.max(sourceSize.width + PORTAL_PADDING * 2, MIN_OPEN_PORTAL_SIZE.width),
      height: Math.max(sourceSize.height + PORTAL_PADDING * 2, MIN_OPEN_PORTAL_SIZE.height)
    };
    if (!Number.isFinite(targetSize.width))
      targetSize.width = MIN_OPEN_PORTAL_SIZE.width;
    if (!Number.isFinite(targetSize.height))
      targetSize.height = MIN_OPEN_PORTAL_SIZE.height;
    return targetSize;
  }
};

// src/canvas-extensions/better-default-settings-canvas-extension.ts
var BetterDefaultSettingsCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.modifyCanvasSettings(this.plugin.getCurrentCanvas());
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      SettingsManager.SETTINGS_CHANGED_EVENT,
      () => this.modifyCanvasSettings(this.plugin.getCurrentCanvas())
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => this.modifyCanvasSettings(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DoubleClick,
      (canvas, event, preventDefault) => this.onDoubleClick(canvas, event, preventDefault)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeCreated,
      (canvas, node) => this.applyDefaultNodeStyles(canvas, node)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeCreated,
      (canvas, edge) => this.applyDefaultEdgeStyles(canvas, edge)
    ));
  }
  modifyCanvasSettings(canvas) {
    if (!canvas)
      return;
    canvas.config.defaultTextNodeDimensions = {
      width: this.plugin.settings.getSetting("defaultTextNodeWidth"),
      height: this.plugin.settings.getSetting("defaultTextNodeHeight")
    };
    canvas.config.defaultFileNodeDimensions = {
      width: this.plugin.settings.getSetting("defaultFileNodeWidth"),
      height: this.plugin.settings.getSetting("defaultFileNodeHeight")
    };
  }
  async onDoubleClick(canvas, event, preventDefault) {
    if (event.defaultPrevented || event.target !== canvas.wrapperEl || canvas.isDragging || canvas.readonly)
      return;
    preventDefault.value = true;
    let pos = canvas.posFromEvt(event);
    switch (this.plugin.settings.getSetting("nodeTypeOnDoubleClick")) {
      case "file":
        const file = await new FileSelectModal(this.plugin.app, void 0, true).awaitInput();
        if (this.plugin.settings.getSetting("alignDoubleClickedNodeToGrid"))
          pos = {
            x: Math.round((pos.x - canvas.config.defaultFileNodeDimensions.width / 2) / CanvasHelper.GRID_SIZE) * CanvasHelper.GRID_SIZE + canvas.config.defaultFileNodeDimensions.width / 2,
            y: Math.round((pos.y - canvas.config.defaultFileNodeDimensions.height / 2) / CanvasHelper.GRID_SIZE) * CanvasHelper.GRID_SIZE + canvas.config.defaultFileNodeDimensions.height / 2
          };
        canvas.createFileNode({
          pos,
          position: "center",
          file
        });
        break;
      default:
        if (this.plugin.settings.getSetting("alignDoubleClickedNodeToGrid"))
          pos = {
            x: Math.round((pos.x - canvas.config.defaultTextNodeDimensions.width / 2) / CanvasHelper.GRID_SIZE) * CanvasHelper.GRID_SIZE + canvas.config.defaultTextNodeDimensions.width / 2,
            y: Math.round((pos.y - canvas.config.defaultTextNodeDimensions.height / 2) / CanvasHelper.GRID_SIZE) * CanvasHelper.GRID_SIZE + canvas.config.defaultTextNodeDimensions.height / 2
          };
        canvas.createTextNode({
          pos,
          position: "center"
        });
        break;
    }
  }
  applyDefaultNodeStyles(_canvas, node) {
    const nodeData = node.getData();
    if (nodeData.type !== "text")
      return;
    node.setData({
      ...nodeData,
      styleAttributes: {
        ...nodeData.styleAttributes,
        ...this.plugin.settings.getSetting("defaultTextNodeStyleAttributes")
      }
    });
  }
  applyDefaultEdgeStyles(_canvas, edge) {
    const edgeData = edge.getData();
    edge.setData({
      ...edgeData,
      styleAttributes: {
        ...edgeData.styleAttributes,
        ...this.plugin.settings.getSetting("defaultEdgeStyleAttributes")
      }
    });
  }
};

// src/canvas-extensions/color-palette-canvas-extension.ts
var DEFAULT_COLORS_COUNT = 6;
var CUSTOM_COLORS_MOD_STYLES_ID = "mod-custom-colors";
var ColorPaletteCanvasExtension = class extends CanvasExtension {
  constructor() {
    super(...arguments);
    this.observer = null;
  }
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      "window-open",
      (_win, _window) => this.updateCustomColorModStyleClasses()
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      "css-change",
      () => this.updateCustomColorModStyleClasses()
    ));
    this.updateCustomColorModStyleClasses();
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas) => this.patchColorSelection(canvas)
    ));
    this.plugin.register(() => {
      var _a;
      return (_a = this.observer) == null ? void 0 : _a.disconnect();
    });
  }
  updateCustomColorModStyleClasses() {
    var _a;
    const customCss = this.getCustomColors().map((colorId) => `
      .mod-canvas-color-${colorId} {
        --canvas-color: var(--canvas-color-${colorId});
      }
    `).join("");
    for (const win of this.plugin.windowsManager.windows) {
      const doc = win.document;
      (_a = doc.getElementById(CUSTOM_COLORS_MOD_STYLES_ID)) == null ? void 0 : _a.remove();
      const customColorModStyle = doc.createElement("style");
      customColorModStyle.id = CUSTOM_COLORS_MOD_STYLES_ID;
      doc.head.appendChild(customColorModStyle);
      customColorModStyle.textContent = customCss;
    }
  }
  patchColorSelection(canvas) {
    if (this.observer)
      this.observer.disconnect();
    this.observer = new MutationObserver((mutations) => {
      const colorMenuOpened = mutations.some(
        (mutation) => Object.values(mutation.addedNodes).some(
          (node) => node instanceof HTMLElement && node.classList.contains("canvas-submenu") && Object.values(node.childNodes).some(
            (node2) => node2 instanceof HTMLElement && node2.classList.contains("canvas-color-picker-item")
          )
        )
      );
      if (!colorMenuOpened)
        return;
      const submenu = canvas.menu.menuEl.querySelector(".canvas-submenu");
      if (!submenu)
        return;
      const currentNodeColor = canvas.getSelectionData().nodes.map((node) => node.color).last();
      for (const colorId of this.getCustomColors()) {
        const customColorMenuItem = this.createColorMenuItem(canvas, colorId);
        if (currentNodeColor === colorId)
          customColorMenuItem.classList.add("is-active");
        submenu.insertBefore(customColorMenuItem, submenu.lastChild);
      }
    });
    this.observer.observe(canvas.menu.menuEl, { childList: true });
  }
  createColorMenuItem(canvas, colorId) {
    const menuItem = document.createElement("div");
    menuItem.classList.add("canvas-color-picker-item");
    menuItem.classList.add(`mod-canvas-color-${colorId}`);
    menuItem.addEventListener("click", () => {
      menuItem.classList.add("is-active");
      for (const item of canvas.selection) {
        item.setColor(colorId);
      }
      canvas.requestSave();
    });
    return menuItem;
  }
  getCustomColors() {
    const colors = [];
    while (true) {
      const colorId = (DEFAULT_COLORS_COUNT + colors.length + 1).toString();
      if (!getComputedStyle(document.body).getPropertyValue(`--canvas-color-${colorId}`))
        break;
      colors.push(colorId);
    }
    return colors;
  }
};

// src/canvas-extensions/collapsible-groups-canvas-extension.ts
var import_obsidian7 = require("obsidian");
var COLLAPSE_BUTTON_ID = "group-collapse-button";
var CollapsibleGroupsCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return "collapsibleGroupsFeatureEnabled";
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeChanged,
      (canvas, node) => this.onNodeChanged(canvas, node)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeBBoxRequested,
      (canvas, node, bbox) => this.onNodeBBoxRequested(canvas, node, bbox)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DataRequested,
      (_canvas, data) => this.expandCollapsedNodes(data)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.LoadData,
      (_canvas, data, _setData) => this.collapseNodes(data)
    ));
  }
  onNodeChanged(canvas, groupNode) {
    var _a, _b;
    const groupNodeData = groupNode.getData();
    if (groupNodeData.type !== "group")
      return;
    (_a = groupNode.nodeEl) == null ? void 0 : _a.querySelectorAll(`#${COLLAPSE_BUTTON_ID}`).forEach((el) => el.remove());
    const collapseButton = document.createElement("span");
    collapseButton.id = COLLAPSE_BUTTON_ID;
    (0, import_obsidian7.setIcon)(collapseButton, groupNodeData.isCollapsed ? "plus-circle" : "minus-circle");
    collapseButton.onclick = () => {
      this.setCollapsed(canvas, groupNode, groupNode.getData().isCollapsed ? void 0 : true);
    };
    (_b = groupNode.labelEl) == null ? void 0 : _b.insertAdjacentElement("afterend", collapseButton);
  }
  setCollapsed(canvas, groupNode, collapsed) {
    groupNode.setData({ ...groupNode.getData(), isCollapsed: collapsed });
    canvas.setData(canvas.getData());
  }
  onNodeBBoxRequested(_canvas, node, bbox) {
    var _a, _b;
    const nodeData = node.getData();
    if (nodeData.type !== "group" || !nodeData.isCollapsed)
      return;
    bbox.maxX = bbox.minX + ((_b = (_a = node.nodeEl) == null ? void 0 : _a.getBoundingClientRect().width) != null ? _b : 0);
    bbox.maxY = bbox.minY;
  }
  expandCollapsedNodes(data) {
    data.nodes = data.nodes.flatMap((groupNodeData) => {
      const collapsedData = groupNodeData.collapsedData;
      if (collapsedData === void 0)
        return [groupNodeData];
      groupNodeData.collapsedData = void 0;
      data.edges.push(...collapsedData.edges);
      return [groupNodeData, ...collapsedData.nodes.map((nodeData) => ({
        ...nodeData,
        // Restore the relative position of the node to the group
        x: nodeData.x + groupNodeData.x,
        y: nodeData.y + groupNodeData.y
      }))];
    });
  }
  collapseNodes(data) {
    data.nodes.forEach((groupNodeData) => {
      if (!groupNodeData.isCollapsed)
        return;
      const groupNodeBBox = CanvasHelper.getBBox([groupNodeData]);
      const containedNodesData = data.nodes.filter(
        (nodeData) => nodeData.id !== groupNodeData.id && BBoxHelper.insideBBox(CanvasHelper.getBBox([nodeData]), groupNodeBBox, false)
      );
      const containedEdgesData = data.edges.filter((edgeData) => {
        return containedNodesData.some((nodeData) => nodeData.id === edgeData.fromNode) || containedNodesData.some((nodeData) => nodeData.id === edgeData.toNode);
      });
      data.nodes = data.nodes.filter((nodeData) => !containedNodesData.includes(nodeData));
      data.edges = data.edges.filter((edgeData) => !containedEdgesData.includes(edgeData));
      groupNodeData.collapsedData = {
        nodes: containedNodesData.map((nodeData) => ({
          ...nodeData,
          // Store the relative position of the node to the group
          x: nodeData.x - groupNodeData.x,
          y: nodeData.y - groupNodeData.y
        })),
        edges: containedEdgesData
      };
    });
  }
};

// src/canvas-extensions/properties-canvas-extension.ts
var import_obsidian8 = require("obsidian");
var PropertiesCanvasExtension = class extends CanvasExtension {
  constructor() {
    super(...arguments);
    this.previousCssclasses = [];
  }
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => this.onCanvasChanged(canvas)
    ));
  }
  onCanvasChanged(canvas) {
    var _a;
    this.updateCssClasses(canvas);
    const settingsContainer = (_a = canvas.quickSettingsButton) == null ? void 0 : _a.parentElement;
    if (!settingsContainer)
      return;
    CanvasHelper.addQuickSettingsButton(
      settingsContainer,
      CanvasHelper.createQuickSettingsButton({
        id: "properties",
        label: "Properties",
        icon: "settings-2",
        callback: () => this.openPropertiesDialog(canvas)
      })
    );
  }
  updateCssClasses(canvas) {
    var _a, _b;
    this.previousCssclasses.forEach((cssclass) => {
      canvas.wrapperEl.classList.remove(cssclass);
    });
    this.previousCssclasses = ((_b = (_a = canvas.metadata) == null ? void 0 : _a.properties) == null ? void 0 : _b.cssclasses) || [];
    this.previousCssclasses.forEach((cssclass) => {
      canvas.wrapperEl.classList.add(cssclass);
    });
  }
  async openPropertiesDialog(canvas) {
    await new PropertiesModal(this.plugin.app, canvas).awaitDialog();
    this.updateCssClasses(canvas);
  }
};
var PropertiesModal = class extends import_obsidian8.Modal {
  constructor(app, canvas) {
    super(app);
    this.canvas = canvas;
  }
  onOpen() {
    new import_obsidian8.Setting(this.contentEl).setHeading().setName("Properties");
    new import_obsidian8.Setting(this.contentEl).setClass("properties-field").setName("cssclasses").setTooltip("Add classes to the canvas wrapper element. Separate multiple classes with spaces.").addText(
      (text) => {
        var _a, _b;
        return text.setValue((_b = (_a = this.canvas.metadata.properties) == null ? void 0 : _a.cssclasses) == null ? void 0 : _b.join(" ")).onChange((value) => {
          var _a2, _b2;
          this.canvas.metadata.properties = (_b2 = (_a2 = this.canvas.metadata) == null ? void 0 : _a2.properties) != null ? _b2 : {};
          this.canvas.metadata.properties.cssclasses = value.split(" ");
        });
      }
    );
  }
  onClose() {
  }
  awaitDialog() {
    return new Promise((resolve) => {
      this.onClose = () => {
        this.contentEl.empty();
        resolve();
      };
      this.open();
    });
  }
};

// src/canvas-extensions/advanced-styles/node-styles.ts
var NodeStylesExtension = class extends CanvasExtension {
  isEnabled() {
    return "nodeStylingFeatureEnabled";
  }
  init() {
    this.allNodeStyles = [...BUILTIN_NODE_STYLE_ATTRIBUTES, ...this.plugin.settings.getSetting("customNodeStyleAttributes")];
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      SettingsManager.SETTINGS_CHANGED_EVENT,
      () => this.allNodeStyles = [...BUILTIN_NODE_STYLE_ATTRIBUTES, ...this.plugin.settings.getSetting("customNodeStyleAttributes")]
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas) => this.onPopupMenuCreated(canvas)
    ));
  }
  onPopupMenuCreated(canvas) {
    var _a;
    const selectionNodeData = canvas.getSelectionData().nodes;
    if (canvas.readonly || selectionNodeData.length === 0 || selectionNodeData.length !== canvas.selection.size)
      return;
    const selectedNodeTypes = new Set(selectionNodeData.map((node) => node.type));
    const availableNodeStyles = this.allNodeStyles.filter((style) => !style.nodeTypes || style.nodeTypes.some((type) => selectedNodeTypes.has(type)));
    CanvasHelper.createStyleDropdownMenu(
      canvas,
      availableNodeStyles,
      (_a = selectionNodeData[0].styleAttributes) != null ? _a : {},
      (attribute, value) => this.setStyleAttributeForSelection(canvas, attribute, value)
    );
  }
  setStyleAttributeForSelection(canvas, attribute, value) {
    const selectionNodeData = canvas.getSelectionData().nodes;
    for (const nodeData of selectionNodeData) {
      const node = canvas.nodes.get(nodeData.id);
      if (!node)
        continue;
      if (attribute.nodeTypes && !attribute.nodeTypes.includes(nodeData.type))
        continue;
      node.setData({
        ...nodeData,
        styleAttributes: {
          ...nodeData.styleAttributes,
          [attribute.datasetKey]: value
        }
      });
    }
    canvas.pushHistory(canvas.getData());
  }
};

// src/canvas-extensions/advanced-styles/edge-pathfinding-methods/edge-pathfinding-method.ts
var EdgePathfindingMethod = class {
};

// src/utils/svg-path-helper.ts
var SvgPathHelper = class {
  static pathArrayToSvgPath(positions, rounded = false) {
    const tension = 0.2;
    let newPositions = [...positions];
    if (rounded && positions.length > 2) {
      newPositions = [positions[0]];
      for (let i = 1; i < positions.length - 2; i++) {
        const p1 = positions[i];
        const p2 = positions[i + 1];
        const p3 = positions[i + 2];
        const t1 = (1 - tension) / 2;
        const t2 = 1 - t1;
        const x = t2 * t2 * t2 * p1.x + 3 * t2 * t2 * t1 * p2.x + 3 * t2 * t1 * t1 * p3.x + t1 * t1 * t1 * p2.x;
        const y = t2 * t2 * t2 * p1.y + 3 * t2 * t2 * t1 * p2.y + 3 * t2 * t1 * t1 * p3.y + t1 * t1 * t1 * p2.y;
        newPositions.push({ x, y });
      }
      const lastPoint = positions[positions.length - 1];
      newPositions.push(lastPoint);
    }
    for (let i = 0; i < newPositions.length - 2; i++) {
      const p1 = newPositions[i];
      const p2 = newPositions[i + 1];
      const p3 = newPositions[i + 2];
      const currentDirection = {
        x: p2.x - p1.x,
        y: p2.y - p1.y
      };
      const nextDirection = {
        x: p3.x - p2.x,
        y: p3.y - p2.y
      };
      if (currentDirection.x !== nextDirection.x && currentDirection.y !== nextDirection.y)
        continue;
      newPositions.splice(i + 1, 1);
      i--;
    }
    return newPositions.map(
      (position, index) => `${index === 0 ? "M" : "L"} ${position.x} ${position.y}`
    ).join(" ");
  }
};

// src/canvas-extensions/advanced-styles/edge-pathfinding-methods/pathfinding-direct.ts
var EdgePathfindingDirect = class extends EdgePathfindingMethod {
  getPath(_plugin, _canvas, fromPos, _fromBBoxSidePos, _fromSide, toPos, _toBBoxSidePos, _toSide, _isDragging) {
    return {
      svgPath: SvgPathHelper.pathArrayToSvgPath([fromPos, toPos], false),
      center: {
        x: (fromPos.x + toPos.x) / 2,
        y: (fromPos.y + toPos.y) / 2
      },
      rotateArrows: true
    };
  }
};

// src/canvas-extensions/advanced-styles/edge-pathfinding-methods/pathfinding-square.ts
var EdgePathfindingSquare = class extends EdgePathfindingMethod {
  getPath(_plugin, _canvas, fromPos, fromBBoxSidePos, fromSide, toPos, toBBoxSidePos, toSide, _isDragging) {
    let pathArray = [];
    let center = { x: 0, y: 0 };
    if (fromSide === toSide) {
      const direction = BBoxHelper.direction(fromSide);
      if (BBoxHelper.isHorizontal(fromSide)) {
        pathArray = [
          fromPos,
          { x: Math.max(fromBBoxSidePos.x, toBBoxSidePos.x) + direction * CanvasHelper.GRID_SIZE, y: fromBBoxSidePos.y },
          { x: Math.max(fromBBoxSidePos.x, toBBoxSidePos.x) + direction * CanvasHelper.GRID_SIZE, y: toBBoxSidePos.y },
          toPos
        ];
      } else {
        pathArray = [
          fromPos,
          { x: fromBBoxSidePos.x, y: Math.max(fromBBoxSidePos.y, toBBoxSidePos.y) + direction * CanvasHelper.GRID_SIZE },
          { x: toBBoxSidePos.x, y: Math.max(fromBBoxSidePos.y, toBBoxSidePos.y) + direction * CanvasHelper.GRID_SIZE },
          toPos
        ];
      }
      center = {
        x: (pathArray[1].x + pathArray[2].x) / 2,
        y: (pathArray[1].y + pathArray[2].y) / 2
      };
    } else if (BBoxHelper.isHorizontal(fromSide) === BBoxHelper.isHorizontal(toSide)) {
      if (BBoxHelper.isHorizontal(fromSide)) {
        pathArray = [
          fromPos,
          { x: fromBBoxSidePos.x + (toBBoxSidePos.x - fromBBoxSidePos.x) / 2, y: fromBBoxSidePos.y },
          { x: fromBBoxSidePos.x + (toBBoxSidePos.x - fromBBoxSidePos.x) / 2, y: toBBoxSidePos.y },
          toPos
        ];
      } else {
        pathArray = [
          fromPos,
          { x: fromBBoxSidePos.x, y: fromBBoxSidePos.y + (toBBoxSidePos.y - fromBBoxSidePos.y) / 2 },
          { x: toBBoxSidePos.x, y: fromBBoxSidePos.y + (toBBoxSidePos.y - fromBBoxSidePos.y) / 2 },
          toPos
        ];
      }
      center = {
        x: (fromBBoxSidePos.x + toBBoxSidePos.x) / 2,
        y: (fromBBoxSidePos.y + toBBoxSidePos.y) / 2
      };
    } else {
      if (BBoxHelper.isHorizontal(fromSide)) {
        pathArray = [
          fromPos,
          { x: toBBoxSidePos.x, y: fromBBoxSidePos.y },
          toPos
        ];
      } else {
        pathArray = [
          fromPos,
          { x: fromBBoxSidePos.x, y: toBBoxSidePos.y },
          toPos
        ];
      }
      center = {
        x: pathArray[1].x,
        y: pathArray[1].y
      };
    }
    return {
      svgPath: SvgPathHelper.pathArrayToSvgPath(pathArray, false),
      center,
      rotateArrows: false
    };
  }
};

// src/canvas-extensions/advanced-styles/edge-pathfinding-methods/pathfinding-a-star.ts
var DIRECTIONS2 = [
  { dx: 1, dy: 0 },
  { dx: -1, dy: 0 },
  { dx: 0, dy: 1 },
  { dx: 0, dy: -1 },
  { dx: 1, dy: 1 },
  { dx: -1, dy: 1 },
  { dx: 1, dy: -1 },
  { dx: -1, dy: -1 }
];
var DIAGONAL_COST = Math.sqrt(2);
var Node = class {
  constructor(x, y) {
    this.x = x;
    this.y = y;
    this.gCost = 0;
    this.hCost = 0;
    this.fCost = 0;
    this.parent = null;
  }
  // Only check for x and y, not gCost, hCost, fCost, or parent
  inList(nodes) {
    return nodes.some((n) => n.x === this.x && n.y === this.y);
  }
};
var EdgePathfindingAStar = class extends EdgePathfindingMethod {
  getPath(plugin, canvas, fromPos, _fromBBoxSidePos, fromSide, toPos, _toBBoxSidePos, toSide, isDragging) {
    if (isDragging && !plugin.settings.getSetting("edgeStylePathfinderPathLiveUpdate"))
      return null;
    const nodeBBoxes = [...canvas.nodes.values()].filter((node) => {
      const nodeData = node.getData();
      const isGroup = nodeData.type === "group";
      const isOpenPortal = nodeData.portalToFile !== void 0;
      return !isGroup && !isOpenPortal;
    }).map((node) => node.getBBox());
    const fromPosWithMargin = BBoxHelper.moveInDirection(fromPos, fromSide, 10);
    const toPosWithMargin = BBoxHelper.moveInDirection(toPos, toSide, 10);
    const gridResolution = plugin.settings.getSetting("edgeStylePathfinderGridResolution");
    const pathArray = this.aStarAlgorithm(fromPosWithMargin, fromSide, toPosWithMargin, toSide, nodeBBoxes, gridResolution);
    if (!pathArray)
      return null;
    pathArray.splice(0, 0, fromPos);
    pathArray.splice(pathArray.length, 0, toPos);
    const roundedPath = plugin.settings.getSetting("edgeStylePathfinderPathRounded");
    const svgPath = SvgPathHelper.pathArrayToSvgPath(pathArray, roundedPath);
    return {
      svgPath,
      center: pathArray[Math.floor(pathArray.length / 2)],
      rotateArrows: false
    };
  }
  aStarAlgorithm(fromPos, fromSide, toPos, toSide, obstacles, gridResolution) {
    const start = new Node(
      Math.floor(fromPos.x / gridResolution) * gridResolution,
      Math.floor(fromPos.y / gridResolution) * gridResolution
    );
    if (fromSide === "right" && fromPos.x !== start.x)
      start.x += gridResolution;
    if (fromSide === "bottom" && fromPos.y !== start.y)
      start.y += gridResolution;
    const end = new Node(
      Math.floor(toPos.x / gridResolution) * gridResolution,
      Math.floor(toPos.y / gridResolution) * gridResolution
    );
    if (toSide === "right" && toPos.x !== end.x)
      end.x += gridResolution;
    if (toSide === "bottom" && toPos.y !== end.y)
      end.y += gridResolution;
    if (this.isInsideObstacle(start, obstacles) || this.isInsideObstacle(end, obstacles))
      return null;
    const openSet = [start];
    const closedSet = [];
    while (openSet.length > 0) {
      let current = null;
      let lowestFCost = Infinity;
      for (const node of openSet) {
        if (node.fCost < lowestFCost) {
          current = node;
          lowestFCost = node.fCost;
        }
      }
      if (!current)
        return null;
      openSet.splice(openSet.indexOf(current), 1);
      closedSet.push(current);
      if (current.x === end.x && current.y === end.y) {
        return [fromPos, ...this.reconstructPath(current), toPos].map((node) => ({ x: node.x, y: node.y }));
      }
      if (!(current.x === start.x && current.y === start.y) && this.isTouchingObstacle(current, obstacles))
        continue;
      for (const neighbor of this.getPossibleNeighbors(current, obstacles, gridResolution)) {
        if (neighbor.inList(closedSet))
          continue;
        const tentativeGCost = current.gCost + this.getMovementCost({
          dx: neighbor.x - current.x,
          dy: neighbor.y - current.y
        });
        if (!neighbor.inList(openSet) || tentativeGCost < neighbor.gCost) {
          neighbor.parent = current;
          neighbor.gCost = tentativeGCost;
          neighbor.hCost = this.heuristic(neighbor, end);
          neighbor.fCost = neighbor.gCost + neighbor.hCost;
          openSet.push(neighbor);
        }
      }
    }
    return null;
  }
  // Manhattan distance
  heuristic(node, end) {
    return Math.abs(node.x - end.x) + Math.abs(node.y - end.y);
  }
  // Define a function to check if a position isn't inside any obstacle
  isTouchingObstacle(node, obstacles) {
    return obstacles.some((obstacle) => BBoxHelper.insideBBox(node, obstacle, true));
  }
  isInsideObstacle(node, obstacles) {
    return obstacles.some((obstacle) => BBoxHelper.insideBBox(node, obstacle, false));
  }
  // Define a function to calculate movement cost based on direction
  getMovementCost(direction) {
    return direction.dx !== 0 && direction.dy !== 0 ? DIAGONAL_COST : 1;
  }
  getPossibleNeighbors(node, obstacles, gridResolution) {
    const neighbors = [];
    for (const direction of DIRECTIONS2) {
      const neighbor = new Node(
        node.x + direction.dx * gridResolution,
        node.y + direction.dy * gridResolution
      );
      neighbor.gCost = node.gCost + this.getMovementCost(direction);
      if (this.isInsideObstacle(neighbor, obstacles))
        continue;
      neighbors.push(neighbor);
    }
    return neighbors;
  }
  reconstructPath(node) {
    const path = [];
    while (node) {
      path.push(node);
      node = node.parent;
    }
    return path.reverse();
  }
};

// src/canvas-extensions/advanced-styles/edge-styles.ts
var EDGE_PATHFINDING_METHODS = {
  "direct": EdgePathfindingDirect,
  "square": EdgePathfindingSquare,
  "a-star": EdgePathfindingAStar
};
var EdgeStylesExtension = class extends CanvasExtension {
  isEnabled() {
    return "edgesStylingFeatureEnabled";
  }
  init() {
    this.allEdgeStyleAttributes = [...BUILTIN_EDGE_STYLE_ATTRIBUTES, ...this.plugin.settings.getSetting("customEdgeStyleAttributes")];
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      SettingsManager.SETTINGS_CHANGED_EVENT,
      () => this.allEdgeStyleAttributes = [...BUILTIN_EDGE_STYLE_ATTRIBUTES, ...this.plugin.settings.getSetting("customEdgeStyleAttributes")]
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas) => this.onPopupMenuCreated(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeChanged,
      (canvas, edge) => this.onEdgeChanged(canvas, edge)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeCenterRequested,
      (canvas, edge, center) => this.onEdgeCenterRequested(canvas, edge, center)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeAdded,
      (canvas, _node) => this.updateAllEdges(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeMoved,
      (canvas, _node) => this.updateAllEdges(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeRemoved,
      (canvas, _node) => this.updateAllEdges(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DraggingStateChanged,
      (canvas, isDragging) => {
        if (isDragging)
          return;
        this.updateAllEdges(canvas);
      }
    ));
  }
  onPopupMenuCreated(canvas) {
    var _a;
    const selectedEdges = [...canvas.selection].filter((item) => item.path !== void 0);
    if (canvas.readonly || selectedEdges.length === 0 || selectedEdges.length !== canvas.selection.size)
      return;
    CanvasHelper.createStyleDropdownMenu(
      canvas,
      this.allEdgeStyleAttributes,
      (_a = selectedEdges[0].getData().styleAttributes) != null ? _a : {},
      (attribute, value) => this.setStyleAttributeForSelection(canvas, attribute, value)
    );
  }
  setStyleAttributeForSelection(canvas, attribute, value) {
    const selectedEdges = [...canvas.selection].filter((item) => item.path !== void 0);
    for (const edge of selectedEdges) {
      const edgeData = edge.getData();
      edge.setData({
        ...edgeData,
        styleAttributes: {
          ...edgeData.styleAttributes,
          [attribute.datasetKey]: value
        }
      });
    }
    canvas.pushHistory(canvas.getData());
  }
  updateAllEdges(canvas) {
    for (const edge of canvas.edges.values()) {
      this.onEdgeChanged(canvas, edge);
    }
  }
  onEdgeChanged(canvas, edge) {
    var _a, _b, _c, _d, _e, _f, _g;
    const edgeData = edge.getData();
    if (!edge.bezier)
      return;
    edge.center = void 0;
    edge.updatePath();
    const pathfindingMethod = (_a = edgeData.styleAttributes) == null ? void 0 : _a.pathfindingMethod;
    if (pathfindingMethod) {
      const fromBBoxSidePos = BBoxHelper.getCenterOfBBoxSide(edge.from.node.getBBox(), edge.from.side);
      const fromPos = edge.from.end === "none" ? fromBBoxSidePos : edge.bezier.from;
      const toBBoxSidePos = BBoxHelper.getCenterOfBBoxSide(edge.to.node.getBBox(), edge.to.side);
      const toPos = edge.to.end === "none" ? toBBoxSidePos : edge.bezier.to;
      const path = new EDGE_PATHFINDING_METHODS[pathfindingMethod]().getPath(this.plugin, canvas, fromPos, fromBBoxSidePos, edge.from.side, toPos, toBBoxSidePos, edge.to.side, canvas.isDragging);
      if (!path)
        return;
      edge.center = path.center;
      edge.path.interaction.setAttr("d", path == null ? void 0 : path.svgPath);
      edge.path.display.setAttr("d", path == null ? void 0 : path.svgPath);
    }
    (_b = edge.labelElement) == null ? void 0 : _b.render();
    const arrowPolygonPoints = this.getArrowPolygonPoints((_c = edgeData.styleAttributes) == null ? void 0 : _c.arrow);
    if ((_d = edge.fromLineEnd) == null ? void 0 : _d.el)
      (_e = edge.fromLineEnd.el.querySelector("polygon")) == null ? void 0 : _e.setAttribute("points", arrowPolygonPoints);
    if ((_f = edge.toLineEnd) == null ? void 0 : _f.el)
      (_g = edge.toLineEnd.el.querySelector("polygon")) == null ? void 0 : _g.setAttribute("points", arrowPolygonPoints);
    if (this.plugin.settings.getSetting("edgeStyleDirectRotateArrow")) {
      this.rotateArrows(edge, pathfindingMethod);
    }
  }
  onEdgeCenterRequested(_canvas, edge, center) {
    var _a, _b, _c, _d;
    center.x = (_b = (_a = edge.center) == null ? void 0 : _a.x) != null ? _b : center.x;
    center.y = (_d = (_c = edge.center) == null ? void 0 : _c.y) != null ? _d : center.y;
  }
  getArrowPolygonPoints(arrowStyle) {
    if (arrowStyle === "halved-triangle")
      return `-2,0 7.5,12 -2,12`;
    else if (arrowStyle === "thin-triangle")
      return `0,0 7,10 0,0 0,10 0,0 -7,10`;
    else if (arrowStyle === "diamond" || arrowStyle === "diamond-outline")
      return `0,0 5,10 0,20 -5,10`;
    else if (arrowStyle === "circle" || arrowStyle === "circle-outline")
      return `0 0, 4.95 1.8, 7.5 6.45, 6.6 11.7, 2.7 15, -2.7 15, -6.6 11.7, -7.5 6.45, -4.95 1.8`;
    else
      return `0,0 6.5,10.4 -6.5,10.4`;
  }
  rotateArrows(edge, pathRouteType) {
    var _a, _b, _c, _d;
    if (pathRouteType !== "direct") {
      if ((_a = edge.fromLineEnd) == null ? void 0 : _a.el)
        edge.fromLineEnd.el.style.translate = "";
      if ((_b = edge.toLineEnd) == null ? void 0 : _b.el)
        edge.toLineEnd.el.style.translate = "";
      return;
    }
    const setArrowRotation = (element, side, rotation) => {
      element.style.transform = element.style.transform.replace(/rotate\([-\d]+(deg|rad)\)/g, `rotate(${rotation}rad)`);
      const offset = BBoxHelper.getSideVector(side);
      element.style.translate = `${offset.x * 7}px ${offset.y * -7}px`;
    };
    const edgeRotation = Math.atan2(edge.bezier.to.y - edge.bezier.from.y, edge.bezier.to.x - edge.bezier.from.x) - Math.PI / 2;
    if ((_c = edge.fromLineEnd) == null ? void 0 : _c.el)
      setArrowRotation(edge.fromLineEnd.el, edge.from.side, edgeRotation);
    if ((_d = edge.toLineEnd) == null ? void 0 : _d.el)
      setArrowRotation(edge.toLineEnd.el, edge.to.side, edgeRotation - Math.PI);
  }
};

// src/canvas-extensions/dataset-exposers/node-exposer.ts
function getExposedNodeData(settings) {
  const exposedData = [];
  if (settings.getSetting("nodeStylingFeatureEnabled"))
    exposedData.push("styleAttributes");
  if (settings.getSetting("collapsibleGroupsFeatureEnabled"))
    exposedData.push("isCollapsed");
  if (settings.getSetting("presentationFeatureEnabled"))
    exposedData.push("isStartNode");
  if (settings.getSetting("portalsFeatureEnabled"))
    exposedData.push("portalToFile", "portalId");
  return exposedData;
}
var NodeExposerExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeChanged,
      (_canvas, node) => {
        const nodeData = node == null ? void 0 : node.getData();
        if (!nodeData)
          return;
        for (const exposedDataKey of getExposedNodeData(this.plugin.settings)) {
          const datasetPairs = nodeData[exposedDataKey] instanceof Object ? Object.entries(nodeData[exposedDataKey]) : [[exposedDataKey, nodeData[exposedDataKey]]];
          for (const [key, value] of datasetPairs) {
            if (!value)
              delete node.nodeEl.dataset[key];
            else
              node.nodeEl.dataset[key] = value;
          }
        }
      }
    ));
  }
};

// src/canvas-extensions/dataset-exposers/node-interaction-exposer.ts
var TARGET_NODE_DATASET_PREFIX = "target";
var NodeInteractionExposerExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeInteraction,
      (canvas, node) => {
        const nodeData = node == null ? void 0 : node.getData();
        if (!nodeData)
          return;
        const interactionEl = canvas.nodeInteractionLayer.interactionEl;
        if (!interactionEl)
          return;
        for (const exposedDataKey of getExposedNodeData(this.plugin.settings)) {
          const datasetPairs = nodeData[exposedDataKey] instanceof Object ? Object.entries(nodeData[exposedDataKey]) : [[exposedDataKey, nodeData[exposedDataKey]]];
          for (const [key, value] of datasetPairs) {
            const modifiedKey = TARGET_NODE_DATASET_PREFIX + key.toString().charAt(0).toUpperCase() + key.toString().slice(1);
            if (!value)
              delete interactionEl.dataset[modifiedKey];
            else
              interactionEl.dataset[modifiedKey] = value;
          }
        }
      }
    ));
  }
};

// src/canvas-extensions/dataset-exposers/edge-exposer.ts
function getExposedEdgeData(settings) {
  const exposedData = [];
  if (settings.getSetting("edgesStylingFeatureEnabled"))
    exposedData.push("styleAttributes");
  return exposedData;
}
var EdgeExposerExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeChanged,
      (_canvas, edge) => {
        var _a, _b, _c, _d;
        const edgeData = edge == null ? void 0 : edge.getData();
        if (!edgeData)
          return;
        for (const exposedDataKey of getExposedEdgeData(this.plugin.settings)) {
          const datasetPairs = edgeData[exposedDataKey] instanceof Object ? Object.entries(edgeData[exposedDataKey]) : [[exposedDataKey, edgeData[exposedDataKey]]];
          for (const [key, value] of datasetPairs) {
            if (!value) {
              delete edge.path.display.dataset[key];
              if ((_a = edge.fromLineEnd) == null ? void 0 : _a.el)
                delete edge.fromLineEnd.el.dataset[key];
              if ((_b = edge.toLineEnd) == null ? void 0 : _b.el)
                delete edge.toLineEnd.el.dataset[key];
            } else {
              edge.path.display.dataset[key] = value;
              if ((_c = edge.fromLineEnd) == null ? void 0 : _c.el)
                edge.fromLineEnd.el.dataset[key] = value;
              if ((_d = edge.toLineEnd) == null ? void 0 : _d.el)
                edge.toLineEnd.el.dataset[key] = value;
            }
          }
        }
      }
    ));
  }
};

// src/canvas-extensions/dataset-exposers/canvas-wrapper-exposer.ts
var EXPOSED_SETTINGS = [
  "performanceOptimizationEnabled",
  "collapsibleGroupsFeatureEnabled",
  "collapsedGroupPreviewOnDrag"
];
var CanvasWrapperExposerExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      SettingsManager.SETTINGS_CHANGED_EVENT,
      () => this.updateExposedSettings(this.plugin.getCurrentCanvas())
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => this.updateExposedSettings(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DraggingStateChanged,
      (canvas, dragging) => {
        if (dragging)
          canvas.wrapperEl.dataset.isDragging = "true";
        else
          delete canvas.wrapperEl.dataset.isDragging;
      }
    ));
  }
  updateExposedSettings(canvas) {
    if (!canvas)
      return;
    for (const setting of EXPOSED_SETTINGS) {
      canvas.wrapperEl.dataset[setting] = this.plugin.settings.getSetting(setting).toString();
    }
  }
};

// src/utils/migration-helper.ts
var MigrationHelper = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  async migrate() {
    this.migrateNodeAndEdgeStyles();
  }
  migrateNodeAndEdgeStyles() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => {
        for (const node of canvas.nodes.values()) {
          const nodeData = node.getData();
          const newStyleAttributes = {};
          if (nodeData.isSticker)
            newStyleAttributes["border"] = "invisible";
          if (nodeData.borderStyle)
            newStyleAttributes["border"] = nodeData.borderStyle;
          if (nodeData.shape) {
            newStyleAttributes.textAlign = "center";
            newStyleAttributes.shape = nodeData.shape;
            if ((newStyleAttributes == null ? void 0 : newStyleAttributes.shape) === "centered-rectangle")
              delete newStyleAttributes.shape;
            if ((newStyleAttributes == null ? void 0 : newStyleAttributes.shape) === "oval")
              newStyleAttributes.shape = "pill";
          }
          delete nodeData.isSticker;
          delete nodeData.borderStyle;
          delete nodeData.shape;
          node.setData({
            ...nodeData,
            styleAttributes: {
              ...nodeData.styleAttributes,
              ...newStyleAttributes
            }
          });
        }
        for (const edge of canvas.edges.values()) {
          const edgeData = edge.getData();
          const newStyleAttributes = {};
          if (edgeData.edgeStyle)
            newStyleAttributes.edge = edgeData.edgeStyle;
          if (edgeData.edgePathRoute)
            newStyleAttributes.pathfindingMethod = edgeData.edgePathRoute;
          delete edgeData.edgeStyle;
          delete edgeData.edgePathRoute;
        }
      }
    ));
  }
};

// src/main.ts
var CANVAS_EXTENSIONS = [
  // Dataset Exposers
  CanvasWrapperExposerExtension,
  NodeExposerExtension,
  EdgeExposerExtension,
  NodeInteractionExposerExtension,
  // Advanced Styles
  NodeStylesExtension,
  EdgeStylesExtension,
  // Basic Extensions
  BetterDefaultSettingsCanvasExtension,
  CommandsCanvasExtension,
  PropertiesCanvasExtension,
  BetterReadonlyCanvasExtension,
  GroupCanvasExtension,
  // More Advanced Extensions
  CollapsibleGroupsCanvasExtension,
  EncapsulateCanvasExtension,
  ColorPaletteCanvasExtension,
  PresentationCanvasExtension,
  PortalsCanvasExtension
];
var AdvancedCanvasPlugin = class extends import_obsidian9.Plugin {
  async onload() {
    this.migrationHelper = new MigrationHelper(this);
    await this.migrationHelper.migrate();
    IconsHelper.addIcons();
    this.settings = new SettingsManager(this);
    await this.settings.loadSettings();
    this.settings.addSettingsTab();
    this.windowsManager = new WindowsManager(this);
    this.canvasPatcher = new CanvasPatcher(this);
    this.canvasExtensions = CANVAS_EXTENSIONS.map((Extension) => new Extension(this));
  }
  onunload() {
  }
  getCurrentCanvasView() {
    const canvasView = this.app.workspace.getActiveViewOfType(import_obsidian9.ItemView);
    if ((canvasView == null ? void 0 : canvasView.getViewType()) !== "canvas")
      return null;
    return canvasView;
  }
  getCurrentCanvas() {
    var _a;
    return ((_a = this.getCurrentCanvasView()) == null ? void 0 : _a.canvas) || null;
  }
  createFileSnapshot(path, content) {
    var _a;
    const fileRecoveryPlugin = (_a = this.app.internalPlugins.plugins["file-recovery"]) == null ? void 0 : _a.instance;
    if (!fileRecoveryPlugin)
      return;
    fileRecoveryPlugin.forceAdd(path, content);
  }
  // this.app.plugins.plugins["advanced-canvas"].enableDebugMode()
  enableDebugMode() {
    if (this.debugHelper)
      return;
    this.debugHelper = new DebugHelper(this);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAibm9kZV9tb2R1bGVzL21vbmtleS1hcm91bmQvbWpzL2luZGV4LmpzIiwgInNyYy91dGlscy9wYXRjaC1oZWxwZXIudHMiLCAic3JjL2NvcmUvZXZlbnRzLnRzIiwgIm5vZGVfbW9kdWxlcy90aW55LWpzb25jL2Rpc3QvaW5kZXguanMiLCAic3JjL2NvcmUvY2FudmFzLXBhdGNoZXIudHMiLCAic3JjL3V0aWxzL2ljb25zLWhlbHBlci50cyIsICJzcmMvdXRpbHMvZGVidWctaGVscGVyLnRzIiwgInNyYy9zZXR0aW5ncy50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvYWR2YW5jZWQtc3R5bGVzL3N0eWxlLWNvbmZpZy50cyIsICJzcmMvd2luZG93cy1tYW5hZ2VyLnRzIiwgInNyYy91dGlscy9jYW52YXMtaGVscGVyLnRzIiwgInNyYy91dGlscy9iYm94LWhlbHBlci50cyIsICJzcmMvY29yZS9jYW52YXMtZXh0ZW5zaW9uLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9ncm91cC1jYW52YXMtZXh0ZW5zaW9uLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9wcmVzZW50YXRpb24tY2FudmFzLWV4dGVuc2lvbi50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvYmV0dGVyLXJlYWRvbmx5LWNhbnZhcy1leHRlbnNpb24udHMiLCAic3JjL3V0aWxzL21vZGFsLWhlbHBlci50cyIsICJzcmMvdXRpbHMvcGF0aC1oZWxwZXIudHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2VuY2Fwc3VsYXRlLWNhbnZhcy1leHRlbnNpb24udHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2NvbW1hbmRzLWNhbnZhcy1leHRlbnNpb24udHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL3BvcnRhbHMtY2FudmFzLWV4dGVuc2lvbi50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvYmV0dGVyLWRlZmF1bHQtc2V0dGluZ3MtY2FudmFzLWV4dGVuc2lvbi50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvY29sb3ItcGFsZXR0ZS1jYW52YXMtZXh0ZW5zaW9uLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9jb2xsYXBzaWJsZS1ncm91cHMtY2FudmFzLWV4dGVuc2lvbi50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvcHJvcGVydGllcy1jYW52YXMtZXh0ZW5zaW9uLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9hZHZhbmNlZC1zdHlsZXMvbm9kZS1zdHlsZXMudHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2FkdmFuY2VkLXN0eWxlcy9lZGdlLXBhdGhmaW5kaW5nLW1ldGhvZHMvZWRnZS1wYXRoZmluZGluZy1tZXRob2QudHMiLCAic3JjL3V0aWxzL3N2Zy1wYXRoLWhlbHBlci50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvYWR2YW5jZWQtc3R5bGVzL2VkZ2UtcGF0aGZpbmRpbmctbWV0aG9kcy9wYXRoZmluZGluZy1kaXJlY3QudHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2FkdmFuY2VkLXN0eWxlcy9lZGdlLXBhdGhmaW5kaW5nLW1ldGhvZHMvcGF0aGZpbmRpbmctc3F1YXJlLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9hZHZhbmNlZC1zdHlsZXMvZWRnZS1wYXRoZmluZGluZy1tZXRob2RzL3BhdGhmaW5kaW5nLWEtc3Rhci50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvYWR2YW5jZWQtc3R5bGVzL2VkZ2Utc3R5bGVzLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9kYXRhc2V0LWV4cG9zZXJzL25vZGUtZXhwb3Nlci50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvZGF0YXNldC1leHBvc2Vycy9ub2RlLWludGVyYWN0aW9uLWV4cG9zZXIudHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2RhdGFzZXQtZXhwb3NlcnMvZWRnZS1leHBvc2VyLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9kYXRhc2V0LWV4cG9zZXJzL2NhbnZhcy13cmFwcGVyLWV4cG9zZXIudHMiLCAic3JjL3V0aWxzL21pZ3JhdGlvbi1oZWxwZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEl0ZW1WaWV3LCBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbidcclxuaW1wb3J0IENhbnZhc1BhdGNoZXIgZnJvbSAnLi9jb3JlL2NhbnZhcy1wYXRjaGVyJ1xyXG5pbXBvcnQgeyBDYW52YXMsIENhbnZhc1ZpZXcgfSBmcm9tICcuL0B0eXBlcy9DYW52YXMnXHJcblxyXG4vLyBVdGlsc1xyXG5pbXBvcnQgSWNvbnNIZWxwZXIgZnJvbSAnLi91dGlscy9pY29ucy1oZWxwZXInXHJcbmltcG9ydCBEZWJ1Z0hlbHBlciBmcm9tICcuL3V0aWxzL2RlYnVnLWhlbHBlcidcclxuXHJcbi8vIE1hbmFnZXJzXHJcbmltcG9ydCBTZXR0aW5nc01hbmFnZXIgZnJvbSAnLi9zZXR0aW5ncydcclxuaW1wb3J0IFdpbmRvd3NNYW5hZ2VyIGZyb20gJy4vd2luZG93cy1tYW5hZ2VyJ1xyXG5cclxuLy8gQ2FudmFzIEV4dGVuc2lvbnNcclxuaW1wb3J0IENhbnZhc0V4dGVuc2lvbiBmcm9tICcuL2NvcmUvY2FudmFzLWV4dGVuc2lvbidcclxuaW1wb3J0IEdyb3VwQ2FudmFzRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvZ3JvdXAtY2FudmFzLWV4dGVuc2lvbidcclxuaW1wb3J0IFByZXNlbnRhdGlvbkNhbnZhc0V4dGVuc2lvbiBmcm9tICcuL2NhbnZhcy1leHRlbnNpb25zL3ByZXNlbnRhdGlvbi1jYW52YXMtZXh0ZW5zaW9uJ1xyXG5pbXBvcnQgQmV0dGVyUmVhZG9ubHlDYW52YXNFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9iZXR0ZXItcmVhZG9ubHktY2FudmFzLWV4dGVuc2lvbidcclxuaW1wb3J0IEVuY2Fwc3VsYXRlQ2FudmFzRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvZW5jYXBzdWxhdGUtY2FudmFzLWV4dGVuc2lvbidcclxuaW1wb3J0IENvbW1hbmRzQ2FudmFzRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvY29tbWFuZHMtY2FudmFzLWV4dGVuc2lvbidcclxuaW1wb3J0IFBvcnRhbHNDYW52YXNFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9wb3J0YWxzLWNhbnZhcy1leHRlbnNpb24nXHJcbmltcG9ydCBCZXR0ZXJEZWZhdWx0U2V0dGluZ3NDYW52YXNFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9iZXR0ZXItZGVmYXVsdC1zZXR0aW5ncy1jYW52YXMtZXh0ZW5zaW9uJ1xyXG5pbXBvcnQgQ29sb3JQYWxldHRlQ2FudmFzRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvY29sb3ItcGFsZXR0ZS1jYW52YXMtZXh0ZW5zaW9uJ1xyXG5pbXBvcnQgQ29sbGFwc2libGVHcm91cHNDYW52YXNFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9jb2xsYXBzaWJsZS1ncm91cHMtY2FudmFzLWV4dGVuc2lvbidcclxuaW1wb3J0IFByb3BlcnRpZXNDYW52YXNFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9wcm9wZXJ0aWVzLWNhbnZhcy1leHRlbnNpb24nXHJcblxyXG4vLyBBZHZhbmNlZCBTdHlsZXNcclxuaW1wb3J0IE5vZGVTdHlsZXNFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9hZHZhbmNlZC1zdHlsZXMvbm9kZS1zdHlsZXMnXHJcbmltcG9ydCBFZGdlU3R5bGVzRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvYWR2YW5jZWQtc3R5bGVzL2VkZ2Utc3R5bGVzJ1xyXG5cclxuLy8gRGF0YXNldCBFeHBvc2Vyc1xyXG5pbXBvcnQgTm9kZUludGVyYWN0aW9uRXhwb3NlckV4dGVuc2lvbiBmcm9tICcuL2NhbnZhcy1leHRlbnNpb25zL2RhdGFzZXQtZXhwb3NlcnMvbm9kZS1pbnRlcmFjdGlvbi1leHBvc2VyJ1xyXG5pbXBvcnQgTm9kZUV4cG9zZXJFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9kYXRhc2V0LWV4cG9zZXJzL25vZGUtZXhwb3NlcidcclxuaW1wb3J0IEVkZ2VFeHBvc2VyRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvZGF0YXNldC1leHBvc2Vycy9lZGdlLWV4cG9zZXInXHJcbmltcG9ydCBDYW52YXNXcmFwcGVyRXhwb3NlckV4dGVuc2lvbiBmcm9tICcuL2NhbnZhcy1leHRlbnNpb25zL2RhdGFzZXQtZXhwb3NlcnMvY2FudmFzLXdyYXBwZXItZXhwb3NlcidcclxuaW1wb3J0IE1pZ3JhdGlvbkhlbHBlciBmcm9tICcuL3V0aWxzL21pZ3JhdGlvbi1oZWxwZXInXHJcblxyXG5jb25zdCBDQU5WQVNfRVhURU5TSU9OUzogdHlwZW9mIENhbnZhc0V4dGVuc2lvbltdID0gW1xyXG4gIC8vIERhdGFzZXQgRXhwb3NlcnNcclxuICBDYW52YXNXcmFwcGVyRXhwb3NlckV4dGVuc2lvbixcclxuICBOb2RlRXhwb3NlckV4dGVuc2lvbixcclxuICBFZGdlRXhwb3NlckV4dGVuc2lvbixcclxuICBOb2RlSW50ZXJhY3Rpb25FeHBvc2VyRXh0ZW5zaW9uLFxyXG5cclxuICAvLyBBZHZhbmNlZCBTdHlsZXNcclxuICBOb2RlU3R5bGVzRXh0ZW5zaW9uLFxyXG4gIEVkZ2VTdHlsZXNFeHRlbnNpb24sXHJcblxyXG4gIC8vIEJhc2ljIEV4dGVuc2lvbnNcclxuICBCZXR0ZXJEZWZhdWx0U2V0dGluZ3NDYW52YXNFeHRlbnNpb24sXHJcbiAgQ29tbWFuZHNDYW52YXNFeHRlbnNpb24sXHJcbiAgUHJvcGVydGllc0NhbnZhc0V4dGVuc2lvbixcclxuICBCZXR0ZXJSZWFkb25seUNhbnZhc0V4dGVuc2lvbixcclxuICBHcm91cENhbnZhc0V4dGVuc2lvbixcclxuXHJcbiAgLy8gTW9yZSBBZHZhbmNlZCBFeHRlbnNpb25zXHJcbiAgQ29sbGFwc2libGVHcm91cHNDYW52YXNFeHRlbnNpb24sXHJcbiAgRW5jYXBzdWxhdGVDYW52YXNFeHRlbnNpb24sXHJcbiAgQ29sb3JQYWxldHRlQ2FudmFzRXh0ZW5zaW9uLFxyXG4gIFByZXNlbnRhdGlvbkNhbnZhc0V4dGVuc2lvbixcclxuICBQb3J0YWxzQ2FudmFzRXh0ZW5zaW9uXHJcbl1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFkdmFuY2VkQ2FudmFzUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuICBtaWdyYXRpb25IZWxwZXI6IE1pZ3JhdGlvbkhlbHBlclxyXG4gIGRlYnVnSGVscGVyOiBEZWJ1Z0hlbHBlclxyXG5cclxuICBzZXR0aW5nczogU2V0dGluZ3NNYW5hZ2VyXHJcbiAgd2luZG93c01hbmFnZXI6IFdpbmRvd3NNYW5hZ2VyXHJcblxyXG4gIGNhbnZhc1BhdGNoZXI6IENhbnZhc1BhdGNoZXJcclxuICBjYW52YXNFeHRlbnNpb25zOiBDYW52YXNFeHRlbnNpb25bXVxyXG5cclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcbiAgICB0aGlzLm1pZ3JhdGlvbkhlbHBlciA9IG5ldyBNaWdyYXRpb25IZWxwZXIodGhpcylcclxuICAgIGF3YWl0IHRoaXMubWlncmF0aW9uSGVscGVyLm1pZ3JhdGUoKVxyXG5cclxuICAgIEljb25zSGVscGVyLmFkZEljb25zKClcclxuICAgIFxyXG4gICAgdGhpcy5zZXR0aW5ncyA9IG5ldyBTZXR0aW5nc01hbmFnZXIodGhpcylcclxuICAgIGF3YWl0IHRoaXMuc2V0dGluZ3MubG9hZFNldHRpbmdzKClcclxuICAgIHRoaXMuc2V0dGluZ3MuYWRkU2V0dGluZ3NUYWIoKVxyXG5cclxuICAgIHRoaXMud2luZG93c01hbmFnZXIgPSBuZXcgV2luZG93c01hbmFnZXIodGhpcylcclxuXHJcbiAgICB0aGlzLmNhbnZhc1BhdGNoZXIgPSBuZXcgQ2FudmFzUGF0Y2hlcih0aGlzKVxyXG4gICAgdGhpcy5jYW52YXNFeHRlbnNpb25zID0gQ0FOVkFTX0VYVEVOU0lPTlMubWFwKChFeHRlbnNpb246IGFueSkgPT4gbmV3IEV4dGVuc2lvbih0aGlzKSlcclxuXHR9XHJcblxyXG4gIG9udW5sb2FkKCkge31cclxuXHJcbiAgZ2V0Q3VycmVudENhbnZhc1ZpZXcoKTogQ2FudmFzVmlldyB8IG51bGwge1xyXG4gICAgY29uc3QgY2FudmFzVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKEl0ZW1WaWV3KVxyXG4gICAgaWYgKGNhbnZhc1ZpZXc/LmdldFZpZXdUeXBlKCkgIT09ICdjYW52YXMnKSByZXR1cm4gbnVsbFxyXG4gICAgcmV0dXJuIGNhbnZhc1ZpZXcgYXMgQ2FudmFzVmlld1xyXG4gIH1cclxuXHJcbiAgZ2V0Q3VycmVudENhbnZhcygpOiBDYW52YXMgfCBudWxsIHtcclxuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRDYW52YXNWaWV3KCk/LmNhbnZhcyB8fCBudWxsXHJcbiAgfVxyXG5cclxuICBjcmVhdGVGaWxlU25hcHNob3QocGF0aDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGZpbGVSZWNvdmVyeVBsdWdpbiA9IHRoaXMuYXBwLmludGVybmFsUGx1Z2lucy5wbHVnaW5zWydmaWxlLXJlY292ZXJ5J10/Lmluc3RhbmNlXHJcbiAgICBpZiAoIWZpbGVSZWNvdmVyeVBsdWdpbikgcmV0dXJuXHJcblxyXG4gICAgZmlsZVJlY292ZXJ5UGx1Z2luLmZvcmNlQWRkKHBhdGgsIGNvbnRlbnQpXHJcbiAgfVxyXG5cclxuICAvLyB0aGlzLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJhZHZhbmNlZC1jYW52YXNcIl0uZW5hYmxlRGVidWdNb2RlKClcclxuICBlbmFibGVEZWJ1Z01vZGUoKSB7XHJcbiAgICBpZiAodGhpcy5kZWJ1Z0hlbHBlcikgcmV0dXJuXHJcbiAgICB0aGlzLmRlYnVnSGVscGVyID0gbmV3IERlYnVnSGVscGVyKHRoaXMpXHJcbiAgfVxyXG59IiwgImV4cG9ydCBmdW5jdGlvbiBhcm91bmQob2JqLCBmYWN0b3JpZXMpIHtcclxuICAgIGNvbnN0IHJlbW92ZXJzID0gT2JqZWN0LmtleXMoZmFjdG9yaWVzKS5tYXAoa2V5ID0+IGFyb3VuZDEob2JqLCBrZXksIGZhY3Rvcmllc1trZXldKSk7XHJcbiAgICByZXR1cm4gcmVtb3ZlcnMubGVuZ3RoID09PSAxID8gcmVtb3ZlcnNbMF0gOiBmdW5jdGlvbiAoKSB7IHJlbW92ZXJzLmZvckVhY2gociA9PiByKCkpOyB9O1xyXG59XHJcbmZ1bmN0aW9uIGFyb3VuZDEob2JqLCBtZXRob2QsIGNyZWF0ZVdyYXBwZXIpIHtcclxuICAgIGNvbnN0IG9yaWdpbmFsID0gb2JqW21ldGhvZF0sIGhhZE93biA9IG9iai5oYXNPd25Qcm9wZXJ0eShtZXRob2QpO1xyXG4gICAgbGV0IGN1cnJlbnQgPSBjcmVhdGVXcmFwcGVyKG9yaWdpbmFsKTtcclxuICAgIC8vIExldCBvdXIgd3JhcHBlciBpbmhlcml0IHN0YXRpYyBwcm9wcyBmcm9tIHRoZSB3cmFwcGluZyBtZXRob2QsXHJcbiAgICAvLyBhbmQgdGhlIHdyYXBwaW5nIG1ldGhvZCwgcHJvcHMgZnJvbSB0aGUgb3JpZ2luYWwgbWV0aG9kXHJcbiAgICBpZiAob3JpZ2luYWwpXHJcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGN1cnJlbnQsIG9yaWdpbmFsKTtcclxuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih3cmFwcGVyLCBjdXJyZW50KTtcclxuICAgIG9ialttZXRob2RdID0gd3JhcHBlcjtcclxuICAgIC8vIFJldHVybiBhIGNhbGxiYWNrIHRvIGFsbG93IHNhZmUgcmVtb3ZhbFxyXG4gICAgcmV0dXJuIHJlbW92ZTtcclxuICAgIGZ1bmN0aW9uIHdyYXBwZXIoLi4uYXJncykge1xyXG4gICAgICAgIC8vIElmIHdlIGhhdmUgYmVlbiBkZWFjdGl2YXRlZCBhbmQgYXJlIG5vIGxvbmdlciB3cmFwcGVkLCByZW1vdmUgb3Vyc2VsdmVzXHJcbiAgICAgICAgaWYgKGN1cnJlbnQgPT09IG9yaWdpbmFsICYmIG9ialttZXRob2RdID09PSB3cmFwcGVyKVxyXG4gICAgICAgICAgICByZW1vdmUoKTtcclxuICAgICAgICByZXR1cm4gY3VycmVudC5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlbW92ZSgpIHtcclxuICAgICAgICAvLyBJZiBubyBvdGhlciBwYXRjaGVzLCBqdXN0IGRvIGEgZGlyZWN0IHJlbW92YWxcclxuICAgICAgICBpZiAob2JqW21ldGhvZF0gPT09IHdyYXBwZXIpIHtcclxuICAgICAgICAgICAgaWYgKGhhZE93bilcclxuICAgICAgICAgICAgICAgIG9ialttZXRob2RdID0gb3JpZ2luYWw7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmpbbWV0aG9kXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGN1cnJlbnQgPT09IG9yaWdpbmFsKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgLy8gRWxzZSBwYXNzIGZ1dHVyZSBjYWxscyB0aHJvdWdoLCBhbmQgcmVtb3ZlIHdyYXBwZXIgZnJvbSB0aGUgcHJvdG90eXBlIGNoYWluXHJcbiAgICAgICAgY3VycmVudCA9IG9yaWdpbmFsO1xyXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih3cmFwcGVyLCBvcmlnaW5hbCB8fCBGdW5jdGlvbik7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGRlZHVwZShrZXksIG9sZEZuLCBuZXdGbikge1xyXG4gICAgY2hlY2tba2V5XSA9IGtleTtcclxuICAgIHJldHVybiBjaGVjaztcclxuICAgIGZ1bmN0aW9uIGNoZWNrKC4uLmFyZ3MpIHtcclxuICAgICAgICByZXR1cm4gKG9sZEZuW2tleV0gPT09IGtleSA/IG9sZEZuIDogbmV3Rm4pLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBhZnRlcihwcm9taXNlLCBjYikge1xyXG4gICAgcmV0dXJuIHByb21pc2UudGhlbihjYiwgY2IpO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemUoYXN5bmNGdW5jdGlvbikge1xyXG4gICAgbGV0IGxhc3RSdW4gPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIGZ1bmN0aW9uIHdyYXBwZXIoLi4uYXJncykge1xyXG4gICAgICAgIHJldHVybiBsYXN0UnVuID0gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XHJcbiAgICAgICAgICAgIGFmdGVyKGxhc3RSdW4sICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGFzeW5jRnVuY3Rpb24uYXBwbHkodGhpcywgYXJncykudGhlbihyZXMsIHJlaik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgd3JhcHBlci5hZnRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbGFzdFJ1biA9IG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4geyBhZnRlcihsYXN0UnVuLCByZXMpOyB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gd3JhcHBlcjtcclxufVxyXG4iLCAiaW1wb3J0IHsgYXJvdW5kIH0gZnJvbSBcIm1vbmtleS1hcm91bmRcIlxyXG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tIFwib2JzaWRpYW5cIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF0Y2hIZWxwZXIge1xyXG4gIHN0YXRpYyB0cnlQYXRjaFdvcmtzcGFjZVByb3RvdHlwZTxUPihwbHVnaW46IFBsdWdpbiwgZ2V0VGFyZ2V0OiAoKSA9PiBUfHVuZGVmaW5lZCwgZnVuY3Rpb25zOiB7IFtrZXk6IHN0cmluZ106IChuZXh0OiBhbnkpID0+ICguLi5hcmdzOiBhbnkpID0+IGFueSB9KTogUHJvbWlzZTxUPiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgY29uc3QgdHJ5UGF0Y2ggPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZ2V0VGFyZ2V0KClcclxuICAgICAgICBpZiAoIXRhcmdldCkgcmV0dXJuIG51bGxcclxuXHJcbiAgICAgICAgY29uc3QgdW5pbnN0YWxsZXIgPSBhcm91bmQodGFyZ2V0LmNvbnN0cnVjdG9yLnByb3RvdHlwZSwgZnVuY3Rpb25zKVxyXG4gICAgICAgIHBsdWdpbi5yZWdpc3Rlcih1bmluc3RhbGxlcilcclxuXHJcbiAgICAgICAgcmV0dXJuIHRhcmdldFxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSB0cnlQYXRjaCgpXHJcbiAgICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgICByZXNvbHZlKHJlc3VsdClcclxuICAgICAgICByZXR1cm5cclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgbGlzdGVuZXIgPSBwbHVnaW4uYXBwLndvcmtzcGFjZS5vbignbGF5b3V0LWNoYW5nZScsICgpID0+IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSB0cnlQYXRjaCgpXHJcblxyXG4gICAgICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgICAgIHBsdWdpbi5hcHAud29ya3NwYWNlLm9mZnJlZihsaXN0ZW5lcilcclxuICAgICAgICAgIHJlc29sdmUocmVzdWx0KVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICAgIHBsdWdpbi5yZWdpc3RlckV2ZW50KGxpc3RlbmVyKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHN0YXRpYyBwYXRjaE9iamVjdFByb3RvdHlwZTxUPihwbHVnaW46IFBsdWdpbiwgdGFyZ2V0OiBULCBmdW5jdGlvbnM6IHsgW2tleTogc3RyaW5nXTogKG5leHQ6IGFueSkgPT4gKC4uLmFyZ3M6IGFueSkgPT4gYW55IH0pOiB2b2lkIHtcclxuICAgIGNvbnN0IHVuaW5zdGFsbGVyID0gYXJvdW5kKCh0YXJnZXQgYXMgYW55KS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIGZ1bmN0aW9ucylcclxuICAgIHBsdWdpbi5yZWdpc3Rlcih1bmluc3RhbGxlcilcclxuICB9XHJcblxyXG4gIHN0YXRpYyBwYXRjaE9iamVjdEluc3RhbmNlPFQ+KHBsdWdpbjogUGx1Z2luLCB0YXJnZXQ6IFQsIGZ1bmN0aW9uczogeyBba2V5OiBzdHJpbmddOiAobmV4dDogYW55KSA9PiAoLi4uYXJnczogYW55KSA9PiBhbnkgfSk6IHZvaWQge1xyXG4gICAgY29uc3QgdW5pbnN0YWxsZXIgPSBhcm91bmQodGFyZ2V0IGFzIGFueSwgZnVuY3Rpb25zKVxyXG4gICAgcGx1Z2luLnJlZ2lzdGVyKHVuaW5zdGFsbGVyKVxyXG4gIH1cclxufSIsICJjb25zdCBQTFVHSU5fRVZFTlRfUFJFRklYID0gJ2FkdmFuY2VkLWNhbnZhcydcclxuXHJcbmV4cG9ydCBjb25zdCBDYW52YXNFdmVudCA9IHtcclxuICBDYW52YXNDaGFuZ2VkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpjYW52YXMtY2hhbmdlZGAsXHJcbiAgVmlld3BvcnRDaGFuZ2VkOiB7XHJcbiAgICBCZWZvcmU6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OnZpZXdwb3J0LWNoYW5nZWQ6YmVmb3JlYCxcclxuICAgIEFmdGVyOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTp2aWV3cG9ydC1jaGFuZ2VkOmFmdGVyYFxyXG4gIH0sXHJcbiAgTm9kZU1vdmVkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpub2RlLW1vdmVkYCxcclxuICBEb3VibGVDbGljazogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06ZG91YmxlLWNsaWNrYCxcclxuICBEcmFnZ2luZ1N0YXRlQ2hhbmdlZDogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06ZHJhZ2dpbmctc3RhdGUtY2hhbmdlZGAsXHJcbiAgTm9kZUNyZWF0ZWQ6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9Om5vZGUtY3JlYXRlZGAsXHJcbiAgRWRnZUNyZWF0ZWQ6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OmVkZ2UtY3JlYXRlZGAsXHJcbiAgTm9kZUFkZGVkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpub2RlLWFkZGVkYCxcclxuICBFZGdlQWRkZWQ6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OmVkZ2UtYWRkZWRgLFxyXG4gIE5vZGVSZW1vdmVkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpub2RlLXJlbW92ZWRgLFxyXG4gIEVkZ2VSZW1vdmVkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTplZGdlLXJlbW92ZWRgLFxyXG4gIE5vZGVDaGFuZ2VkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpub2RlLWNoYW5nZWRgLFxyXG4gIEVkZ2VDaGFuZ2VkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTplZGdlLWNoYW5nZWRgLFxyXG4gIE5vZGVCQm94UmVxdWVzdGVkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpub2RlLWJib3gtcmVxdWVzdGVkYCxcclxuICBFZGdlQ2VudGVyUmVxdWVzdGVkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTplZGdlLWNlbnRlci1yZXF1ZXN0ZWRgLFxyXG4gIENvbnRhaW5pbmdOb2Rlc1JlcXVlc3RlZDogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06Y29udGFpbmluZy1ub2Rlcy1yZXF1ZXN0ZWRgLFxyXG4gIFNlbGVjdGlvbkNoYW5nZWQ6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OnNlbGVjdGlvbi1jaGFuZ2VkYCxcclxuICBab29tVG9CYm94OiB7XHJcbiAgICBCZWZvcmU6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9Onpvb20tdG8tYmJveDpiZWZvcmVgLFxyXG4gICAgQWZ0ZXI6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9Onpvb20tdG8tYmJveDphZnRlcmBcclxuICB9LFxyXG4gIFBvcHVwTWVudUNyZWF0ZWQ6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OnBvcHVwLW1lbnUtY3JlYXRlZGAsXHJcbiAgTm9kZUludGVyYWN0aW9uOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpub2RlLWludGVyYWN0aW9uYCxcclxuICBVbmRvOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTp1bmRvYCxcclxuICBSZWRvOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpyZWRvYCxcclxuICBSZWFkb25seUNoYW5nZWQ6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OnJlYWRvbmx5LWNoYW5nZWRgLFxyXG4gIERhdGFSZXF1ZXN0ZWQ6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OmRhdGEtcmVxdWVzdGVkYCxcclxuICBMb2FkRGF0YTogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06bG9hZC1kYXRhYCxcclxuICBDYW52YXNTYXZlZDoge1xyXG4gICAgQmVmb3JlOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpjYW52YXMtc2F2ZWQ6YmVmb3JlYCxcclxuICAgIEFmdGVyOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpjYW52YXMtc2F2ZWQ6YWZ0ZXJgXHJcbiAgfVxyXG59IiwgIi8qIEhFTFBFUlMgKi9cclxuY29uc3Qgc3RyaW5nT3JDb21tZW50UmUgPSAvKFwiKD86XFxcXD9bXl0pKj9cIil8KFxcL1xcLy4qKXwoXFwvXFwqW15dKj9cXCpcXC8pL2c7XHJcbmNvbnN0IHN0cmluZ09yVHJhaWxpbmdDb21tYVJlID0gLyhcIig/OlxcXFw/W15dKSo/XCIpfCgsXFxzKikoPz1dfH0pL2c7XHJcbi8qIE1BSU4gKi9cclxuY29uc3QgSlNPTkMgPSB7XHJcbiAgICBwYXJzZTogKHRleHQpID0+IHtcclxuICAgICAgICB0ZXh0ID0gU3RyaW5nKHRleHQpOyAvLyBUbyBiZSBleHRyYSBzYWZlXHJcbiAgICAgICAgdHJ5IHsgLy8gRmFzdCBwYXRoIGZvciB2YWxpZCBKU09OXHJcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCB7IC8vIFNsb3cgcGF0aCBmb3IgSlNPTkMgYW5kIGludmFsaWQgaW5wdXRzXHJcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHRleHQucmVwbGFjZShzdHJpbmdPckNvbW1lbnRSZSwgJyQxJykucmVwbGFjZShzdHJpbmdPclRyYWlsaW5nQ29tbWFSZSwgJyQxJykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuLyogRVhQT1JUICovXHJcbmV4cG9ydCBkZWZhdWx0IEpTT05DO1xyXG4iLCAiaW1wb3J0IEFkdmFuY2VkQ2FudmFzUGx1Z2luIGZyb20gXCJzcmMvbWFpblwiXHJcbmltcG9ydCB7IEJCb3gsIENhbnZhcywgQ2FudmFzRGF0YSwgQ2FudmFzRWRnZSwgQ2FudmFzRWRnZURhdGEsIENhbnZhc0VsZW1lbnQsIENhbnZhc05vZGUsIENhbnZhc05vZGVEYXRhLCBDYW52YXNWaWV3IH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IFBhdGNoSGVscGVyIGZyb20gXCJzcmMvdXRpbHMvcGF0Y2gtaGVscGVyXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwiLi9ldmVudHNcIlxyXG5pbXBvcnQgeyBXb3Jrc3BhY2VMZWFmIH0gZnJvbSBcIm9ic2lkaWFuXCJcclxuaW1wb3J0IHsgYXJvdW5kIH0gZnJvbSBcIm1vbmtleS1hcm91bmRcIlxyXG5pbXBvcnQgSlNPTkMgZnJvbSBcInRpbnktanNvbmNcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FudmFzUGF0Y2hlciB7XHJcbiAgcGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpblxyXG5cclxuICBjb25zdHJ1Y3RvcihwbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luKSB7XHJcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpblxyXG4gICAgdGhpcy5hcHBseVBhdGNoZXMoKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBhcHBseVBhdGNoZXMoKSB7XHJcbiAgICBjb25zdCB0aGF0ID0gdGhpc1xyXG5cclxuICAgIC8vIEdldCB0aGUgY3VycmVudCBjYW52YXMgdmlldyBvciB3YWl0IGZvciBpdCB0byBiZSBjcmVhdGVkXHJcbiAgICBjb25zdCBjYW52YXNWaWV3ID0gKFxyXG4gICAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnY2FudmFzJyk/LmZpcnN0KCk/LnZpZXcgPz9cclxuICAgICAgYXdhaXQgbmV3IFByb21pc2U8Q2FudmFzVmlldz4oKHJlc29sdmUpID0+IHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgY29uc3QgdW5pbnN0YWxsID0gYXJvdW5kKHRoaXMucGx1Z2luLmFwcC5pbnRlcm5hbFBsdWdpbnMucGx1Z2lucy5jYW52YXMudmlld3MsIHtcclxuICAgICAgICAgIGNhbnZhczogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueSkge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuXHJcbiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KVxyXG4gICAgICAgICAgICB1bmluc3RhbGwoKSAvLyBVbmluc3RhbGwgdGhlIHBhdGNoXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLnBsdWdpbi5yZWdpc3Rlcih1bmluc3RhbGwpXHJcbiAgICAgIH0pXHJcbiAgICApIGFzIENhbnZhc1ZpZXdcclxuICAgIFxyXG4gICAgLy8gUGF0Y2ggY2FudmFzIHZpZXdcclxuICAgIFBhdGNoSGVscGVyLnBhdGNoT2JqZWN0UHJvdG90eXBlKHRoaXMucGx1Z2luLCBjYW52YXNWaWV3LCB7XHJcbiAgICAgIGdldFZpZXdEYXRhOiAoX25leHQ6IGFueSkgPT4gZnVuY3Rpb24gKC4uLl9hcmdzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBjYW52YXNEYXRhID0gdGhpcy5jYW52YXMuZ2V0RGF0YSgpXHJcbiAgICAgICAgY2FudmFzRGF0YS5tZXRhZGF0YSA9IHRoaXMuY2FudmFzLm1ldGFkYXRhID8/IHt9XHJcblxyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShjYW52YXNEYXRhLCBudWxsLCAyKVxyXG4gICAgICB9LFxyXG4gICAgICBzZXRWaWV3RGF0YTogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKGpzb246IHN0cmluZywgLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgbGV0IHZhbGlkSnNvbiA9IGpzb25cclxuICAgICAgICBsZXQgcGFyc2VkSnNvblxyXG5cclxuICAgICAgICAvLyBDaGVjayBmb3IgU3ludGF4RXJyb3JcclxuICAgICAgICB0cnkgeyBwYXJzZWRKc29uID0gSlNPTi5wYXJzZShqc29uKSB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIC8vIEludmFsaWQgSlNPTlxyXG4gICAgICAgICAgdGhhdC5wbHVnaW4uY3JlYXRlRmlsZVNuYXBzaG90KHRoaXMuZmlsZS5wYXRoLCBqc29uKVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBUcnkgdG8gcGFyc2UgaXQgd2l0aCB0cmFpbGluZyBjb21tYXNcclxuICAgICAgICAgIHBhcnNlZEpzb24gPSBKU09OQy5wYXJzZShqc29uKVxyXG4gICAgICAgICAgdmFsaWRKc29uID0gSlNPTi5zdHJpbmdpZnkocGFyc2VkSnNvbiwgbnVsbCwgMilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCB2YWxpZEpzb24sIC4uLmFyZ3MpXHJcblxyXG4gICAgICAgIHRyeSB7IHRoaXMuY2FudmFzLm1ldGFkYXRhID0gcGFyc2VkSnNvbi5tZXRhZGF0YSB9XHJcbiAgICAgICAgY2F0Y2ggKF9lKSB7IHRoaXMuY2FudmFzLm1ldGFkYXRhID0ge30gfVxyXG5cclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5DYW52YXNDaGFuZ2VkLCB0aGlzLmNhbnZhcylcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIC8vIFBhdGNoIGNhbnZhc1xyXG4gICAgUGF0Y2hIZWxwZXIucGF0Y2hPYmplY3RQcm90b3R5cGUodGhpcy5wbHVnaW4sIGNhbnZhc1ZpZXcuY2FudmFzLCB7XHJcbiAgICAgIG1hcmtWaWV3cG9ydENoYW5nZWQ6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5WaWV3cG9ydENoYW5nZWQuQmVmb3JlLCB0aGlzKVxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCAuLi5hcmdzKVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LlZpZXdwb3J0Q2hhbmdlZC5BZnRlciwgdGhpcylcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH0sXHJcbiAgICAgIG1hcmtNb3ZlZDogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKG5vZGU6IENhbnZhc05vZGUpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgbm9kZSlcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5Ob2RlTW92ZWQsIHRoaXMsIG5vZGUpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LFxyXG4gICAgICBvbkRvdWJsZUNsaWNrOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoZXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgICBjb25zdCBwcmV2ZW50RGVmYXVsdCA9IHsgdmFsdWU6IGZhbHNlIH1cclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5Eb3VibGVDbGljaywgdGhpcywgZXZlbnQsIHByZXZlbnREZWZhdWx0KVxyXG4gICAgICAgIGlmICghcHJldmVudERlZmF1bHQudmFsdWUpIG5leHQuY2FsbCh0aGlzLCBldmVudClcclxuICAgICAgfSxcclxuICAgICAgc2V0RHJhZ2dpbmc6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uIChkcmFnZ2luZzogYm9vbGVhbikge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCBkcmFnZ2luZylcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5EcmFnZ2luZ1N0YXRlQ2hhbmdlZCwgdGhpcywgZHJhZ2dpbmcpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LFxyXG4gICAgICBnZXRDb250YWluaW5nTm9kZXM6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uIChiYm94OiBCQm94KSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIGJib3gpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuQ29udGFpbmluZ05vZGVzUmVxdWVzdGVkLCB0aGlzLCBiYm94LCByZXN1bHQpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LFxyXG4gICAgICB1cGRhdGVTZWxlY3Rpb246IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICh1cGRhdGU6ICgpID0+IHZvaWQpIHtcclxuICAgICAgICBjb25zdCBvbGRTZWxlY3Rpb24gPSBuZXcgU2V0KHRoaXMuc2VsZWN0aW9uKVxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCB1cGRhdGUpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuU2VsZWN0aW9uQ2hhbmdlZCwgdGhpcywgb2xkU2VsZWN0aW9uLCAoKHVwZGF0ZTogKCkgPT4gdm9pZCkgPT4gbmV4dC5jYWxsKHRoaXMsIHVwZGF0ZSkpKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgY3JlYXRlVGV4dE5vZGU6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBub2RlID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuTm9kZUNyZWF0ZWQsIHRoaXMsIG5vZGUpXHJcbiAgICAgICAgcmV0dXJuIG5vZGVcclxuICAgICAgfSxcclxuICAgICAgY3JlYXRlRmlsZU5vZGU6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBub2RlID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuTm9kZUNyZWF0ZWQsIHRoaXMsIG5vZGUpXHJcbiAgICAgICAgcmV0dXJuIG5vZGVcclxuICAgICAgfSxcclxuICAgICAgY3JlYXRlRmlsZU5vZGVzOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgY29uc3Qgbm9kZXMgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuICAgICAgICBub2Rlcy5mb3JFYWNoKChub2RlOiBDYW52YXNOb2RlKSA9PiB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5Ob2RlQ3JlYXRlZCwgdGhpcywgbm9kZSkpXHJcbiAgICAgICAgcmV0dXJuIG5vZGVzXHJcbiAgICAgIH0sXHJcbiAgICAgIGNyZWF0ZUdyb3VwTm9kZTogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IG5vZGUgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5Ob2RlQ3JlYXRlZCwgdGhpcywgbm9kZSlcclxuICAgICAgICByZXR1cm4gbm9kZVxyXG4gICAgICB9LFxyXG4gICAgICBjcmVhdGVMaW5rTm9kZTogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IG5vZGUgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5Ob2RlQ3JlYXRlZCwgdGhpcywgbm9kZSlcclxuICAgICAgICByZXR1cm4gbm9kZVxyXG4gICAgICB9LFxyXG4gICAgICBhZGROb2RlOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAobm9kZTogQ2FudmFzTm9kZSkge1xyXG4gICAgICAgIHRoYXQucGF0Y2hOb2RlKG5vZGUpXHJcbiAgICAgICAgcmV0dXJuIG5leHQuY2FsbCh0aGlzLCBub2RlKVxyXG4gICAgICB9LFxyXG4gICAgICBhZGRFZGdlOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoZWRnZTogQ2FudmFzRWRnZSkge1xyXG4gICAgICAgIHRoYXQucGF0Y2hFZGdlKGVkZ2UpXHJcbiAgICAgICAgaWYgKCF0aGlzLnZpZXdwb3J0Q2hhbmdlZCkgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuRWRnZUNyZWF0ZWQsIHRoaXMsIGVkZ2UpXHJcbiAgICAgICAgcmV0dXJuIG5leHQuY2FsbCh0aGlzLCBlZGdlKVxyXG4gICAgICB9LFxyXG4gICAgICByZW1vdmVOb2RlOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAobm9kZTogQ2FudmFzTm9kZSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCBub2RlKVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Lk5vZGVSZW1vdmVkLCB0aGlzLCBub2RlKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgcmVtb3ZlRWRnZTogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKGVkZ2U6IENhbnZhc0VkZ2UpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgZWRnZSlcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5FZGdlUmVtb3ZlZCwgdGhpcywgZWRnZSlcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH0sXHJcbiAgICAgIHpvb21Ub0Jib3g6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uIChiYm94OiBCQm94KSB7XHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuWm9vbVRvQmJveC5CZWZvcmUsIHRoaXMsIGJib3gpXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIGJib3gpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuWm9vbVRvQmJveC5BZnRlciwgdGhpcywgYmJveClcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH0sXHJcbiAgICAgIHNldFJlYWRvbmx5OiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAocmVhZG9ubHk6IGJvb2xlYW4pIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgcmVhZG9ubHkpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuUmVhZG9ubHlDaGFuZ2VkLCB0aGlzLCByZWFkb25seSlcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH0sXHJcbiAgICAgIHVuZG86IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuICAgICAgICB0aGlzLmltcG9ydERhdGEodGhpcy5nZXREYXRhKCksIHRydWUpIC8vIEZvcmNlIHVwZGF0ZSB0aGUgY2FudmFzIGRhdGFcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5VbmRvLCB0aGlzKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgcmVkbzogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCAuLi5hcmdzKVxyXG4gICAgICAgIHRoaXMuaW1wb3J0RGF0YSh0aGlzLmdldERhdGEoKSwgdHJ1ZSkgLy8gRm9yY2UgdXBkYXRlIHRoZSBjYW52YXMgZGF0YVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LlJlZG8sIHRoaXMpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LFxyXG4gICAgICAvKnNldERhdGE6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICAvL1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCAuLi5hcmdzKVxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LCovXHJcbiAgICAgIGdldERhdGE6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5EYXRhUmVxdWVzdGVkLCB0aGlzLCByZXN1bHQpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LFxyXG4gICAgICBpbXBvcnREYXRhOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoZGF0YTogQ2FudmFzRGF0YSwgY2xlYXJDYW52YXM/OiBib29sZWFuLCBzaWxlbnQ/OiBib29sZWFuKSB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0RmlsZVBhdGggPSB0aGlzLnZpZXcuZmlsZS5wYXRoXHJcbiAgICAgICAgY29uc3Qgc2V0RGF0YSA9IChkYXRhOiBDYW52YXNEYXRhKSA9PiB7XHJcbiAgICAgICAgICAvLyBTa2lwIGlmIHRoZSBjYW52YXMgZ290IHVubG9hZGVkIG9yIHRoZSBmaWxlIGNoYW5nZWRcclxuICAgICAgICAgIGlmICghdGhpcy52aWV3LmZpbGUgfHwgdGhpcy52aWV3LmZpbGUucGF0aCAhPT0gdGFyZ2V0RmlsZVBhdGgpIHJldHVyblxyXG5cclxuICAgICAgICAgIHRoaXMuaW1wb3J0RGF0YShkYXRhLCB0cnVlLCB0cnVlKVxyXG4gICAgICAgICAgdGhhdC5lbWl0RXZlbnRzRm9yVW5rbm93bkRhdGFDaGFuZ2VzKHRoaXMpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXNpbGVudCkgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuTG9hZERhdGEsIHRoaXMsIGRhdGEsIHNldERhdGEpXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIGRhdGEsIGNsZWFyQ2FudmFzKVxyXG4gICAgICAgIHRoYXQuZW1pdEV2ZW50c0ZvclVua25vd25EYXRhQ2hhbmdlcyh0aGlzKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgcmVxdWVzdFNhdmU6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5DYW52YXNTYXZlZC5CZWZvcmUsIHRoaXMpXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuQ2FudmFzU2F2ZWQuQWZ0ZXIsIHRoaXMpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIC8vIFBhdGNoIGNhbnZhcyBwb3B1cCBtZW51XHJcbiAgICBQYXRjaEhlbHBlci5wYXRjaE9iamVjdFByb3RvdHlwZSh0aGlzLnBsdWdpbiwgY2FudmFzVmlldy5jYW52YXMubWVudSwge1xyXG4gICAgICByZW5kZXI6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5Qb3B1cE1lbnVDcmVhdGVkLCB0aGlzLmNhbnZhcylcclxuICAgICAgICBuZXh0LmNhbGwodGhpcykgLy8gUmUtQ2VudGVyIHRoZSBwb3B1cCBtZW51XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIC8vIFBhdGNoIGludGVyYWN0aW9uIGxheWVyXHJcbiAgICBQYXRjaEhlbHBlci5wYXRjaE9iamVjdFByb3RvdHlwZSh0aGlzLnBsdWdpbiwgY2FudmFzVmlldy5jYW52YXMubm9kZUludGVyYWN0aW9uTGF5ZXIsIHtcclxuICAgICAgc2V0VGFyZ2V0OiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAobm9kZTogQ2FudmFzTm9kZSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCBub2RlKVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Lk5vZGVJbnRlcmFjdGlvbiwgdGhpcy5jYW52YXMsIG5vZGUpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIC8vIENhbnZhcyBpcyBub3cgcGF0Y2hlZCAtIHVwZGF0ZSBhbGwgb3BlbiBjYW52YXMgdmlld3NcclxuICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZjogV29ya3NwYWNlTGVhZikgPT4ge1xyXG4gICAgICBpZiAobGVhZi52aWV3LmdldFZpZXdUeXBlKCkgIT09ICdjYW52YXMnKSByZXR1cm5cclxuXHJcbiAgICAgIGNvbnN0IGNhbnZhc1ZpZXcgPSBsZWFmLnZpZXcgYXMgQ2FudmFzVmlld1xyXG4gICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgIGNhbnZhc1ZpZXcubGVhZi5yZWJ1aWxkVmlldygpXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBwYXRjaE5vZGUobm9kZTogQ2FudmFzTm9kZSkge1xyXG4gICAgY29uc3QgdGhhdCA9IHRoaXNcclxuXHJcbiAgICBQYXRjaEhlbHBlci5wYXRjaE9iamVjdEluc3RhbmNlKHRoaXMucGx1Z2luLCBub2RlLCB7XHJcbiAgICAgIHNldERhdGE6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uIChkYXRhOiBDYW52YXNOb2RlRGF0YSwgYWRkSGlzdG9yeT86IGJvb2xlYW4pIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgZGF0YSlcclxuXHJcbiAgICAgICAgaWYgKG5vZGUuaW5pdGlhbGl6ZWQgJiYgIW5vZGUuaXNEaXJ0eSkge1xyXG4gICAgICAgICAgbm9kZS5pc0RpcnR5ID0gdHJ1ZVxyXG4gICAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuTm9kZUNoYW5nZWQsIHRoaXMuY2FudmFzLCBub2RlKVxyXG4gICAgICAgICAgZGVsZXRlIG5vZGUuaXNEaXJ0eVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2F2ZSB0aGUgZGF0YSB0byB0aGUgZmlsZVxyXG4gICAgICAgIHRoaXMuY2FudmFzLmRhdGEgPSB0aGlzLmNhbnZhcy5nZXREYXRhKClcclxuICAgICAgICB0aGlzLmNhbnZhcy52aWV3LnJlcXVlc3RTYXZlKClcclxuXHJcbiAgICAgICAgLy8gQWRkIHRvIHRoZSB1bmRvIHN0YWNrXHJcbiAgICAgICAgaWYgKGFkZEhpc3RvcnkpIHRoaXMuY2FudmFzLnB1c2hIaXN0b3J5KHRoaXMuY2FudmFzLmdldERhdGEoKSlcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LFxyXG4gICAgICBnZXRCQm94OiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuTm9kZUJCb3hSZXF1ZXN0ZWQsIHRoaXMuY2FudmFzLCBub2RlLCByZXN1bHQpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICB0aGlzLnJ1bkFmdGVySW5pdGlhbGl6ZWQobm9kZSwgKCkgPT4ge1xyXG4gICAgICB0aGlzLnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5Ob2RlQWRkZWQsIG5vZGUuY2FudmFzLCBub2RlKVxyXG4gICAgICB0aGlzLnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5Ob2RlQ2hhbmdlZCwgbm9kZS5jYW52YXMsIG5vZGUpXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBwYXRjaEVkZ2UoZWRnZTogQ2FudmFzRWRnZSkge1xyXG4gICAgY29uc3QgdGhhdCA9IHRoaXNcclxuXHJcbiAgICBQYXRjaEhlbHBlci5wYXRjaE9iamVjdEluc3RhbmNlKHRoaXMucGx1Z2luLCBlZGdlLCB7XHJcbiAgICAgIHNldERhdGE6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uIChkYXRhOiBDYW52YXNFZGdlRGF0YSwgYWRkSGlzdG9yeT86IGJvb2xlYW4pIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgZGF0YSlcclxuXHJcbiAgICAgICAgaWYgKGVkZ2UuaW5pdGlhbGl6ZWQgJiYgIWVkZ2UuaXNEaXJ0eSkge1xyXG4gICAgICAgICAgZWRnZS5pc0RpcnR5ID0gdHJ1ZVxyXG4gICAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuRWRnZUNoYW5nZWQsIHRoaXMuY2FudmFzLCBlZGdlKVxyXG4gICAgICAgICAgZGVsZXRlIGVkZ2UuaXNEaXJ0eVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2F2ZSB0aGUgZGF0YSB0byB0aGUgZmlsZVxyXG4gICAgICAgIHRoaXMuY2FudmFzLmRhdGEgPSB0aGlzLmNhbnZhcy5nZXREYXRhKClcclxuICAgICAgICB0aGlzLmNhbnZhcy52aWV3LnJlcXVlc3RTYXZlKClcclxuXHJcbiAgICAgICAgLy8gQWRkIHRvIHRoZSB1bmRvIHN0YWNrXHJcbiAgICAgICAgaWYgKGFkZEhpc3RvcnkpIHRoaXMuY2FudmFzLnB1c2hIaXN0b3J5KHRoaXMuY2FudmFzLmdldERhdGEoKSlcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LFxyXG4gICAgICByZW5kZXI6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5FZGdlQ2hhbmdlZCwgdGhpcy5jYW52YXMsIGVkZ2UpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LFxyXG4gICAgICBnZXRDZW50ZXI6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5FZGdlQ2VudGVyUmVxdWVzdGVkLCB0aGlzLmNhbnZhcywgZWRnZSwgcmVzdWx0KVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIFxyXG4gICAgdGhpcy5ydW5BZnRlckluaXRpYWxpemVkKGVkZ2UsICgpID0+IHtcclxuICAgICAgdGhpcy50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuRWRnZUFkZGVkLCBlZGdlLmNhbnZhcywgZWRnZSlcclxuICAgIH0pXHJcbiAgfVxyXG4gIFxyXG4gIHByaXZhdGUgcnVuQWZ0ZXJJbml0aWFsaXplZChjYW52YXNFbGVtZW50OiBDYW52YXNFbGVtZW50LCBvblJlYWR5OiAoKSA9PiB2b2lkKSB7XHJcbiAgICBpZiAoY2FudmFzRWxlbWVudC5pbml0aWFsaXplZCkge1xyXG4gICAgICBvblJlYWR5KClcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdGhhdCA9IHRoaXNcclxuXHJcbiAgICAvLyBQYXRjaCBDYW52YXNFbGVtZW50IG9iamVjdFxyXG4gICAgY29uc3QgdW5pbnN0YWxsID0gYXJvdW5kKGNhbnZhc0VsZW1lbnQsIHtcclxuICAgICAgaW5pdGlhbGl6ZTogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCAuLi5hcmdzKVxyXG5cclxuICAgICAgICBvblJlYWR5KClcclxuICAgICAgICB1bmluc3RhbGwoKSAvLyBVbmluc3RhbGwgdGhlIHBhdGNoXHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGF0LnBsdWdpbi5yZWdpc3Rlcih1bmluc3RhbGwpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGVtaXRFdmVudHNGb3JVbmtub3duRGF0YUNoYW5nZXMoY2FudmFzOiBDYW52YXMpIHtcclxuICAgIC8vIElmIG5vZGUgZGF0YSBjaGFuZ2VkXHJcbiAgICBjYW52YXMubm9kZXMuZm9yRWFjaCgobm9kZTogQ2FudmFzTm9kZSkgPT4gdGhpcy5ydW5BZnRlckluaXRpYWxpemVkKG5vZGUsICgpID0+IHtcclxuICAgICAgdGhpcy50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuTm9kZUNoYW5nZWQsIG5vZGUuY2FudmFzLCBub2RlKVxyXG4gICAgfSkpXHJcblxyXG4gICAgLy8gSWYgZWRnZSBkYXRhIGNoYW5nZWRcclxuICAgIGNhbnZhcy5lZGdlcy5mb3JFYWNoKChlZGdlOiBDYW52YXNFZGdlKSA9PiB0aGlzLnJ1bkFmdGVySW5pdGlhbGl6ZWQoZWRnZSwgKCkgPT4ge1xyXG4gICAgICB0aGlzLnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5FZGdlQ2hhbmdlZCwgZWRnZS5jYW52YXMsIGVkZ2UpXHJcbiAgICB9KSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdHJpZ2dlcldvcmtzcGFjZUV2ZW50KGV2ZW50OiBzdHJpbmcsIC4uLmFyZ3M6IGFueSkge1xyXG4gICAgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS50cmlnZ2VyKGV2ZW50LCAuLi5hcmdzKVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBhZGRJY29uIH0gZnJvbSBcIm9ic2lkaWFuXCJcclxuXHJcbmNvbnN0IENVU1RPTV9JQ09OUyA9IHtcclxuICAnc2hhcGUtcGlsbCc6IGA8cmVjdCByeD1cIjMxLjI1XCIgaGVpZ2h0PVwiNjIuNVwiIHdpZHRoPVwiOTMuNzVcIiB5PVwiMTguNzVcIiB4PVwiMy4xMjVcIiBzdHJva2Utd2lkdGg9XCI4LjMzM1wiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJ0cmFuc3BhcmVudFwiLz5gLFxyXG4gICdzaGFwZS1wYXJhbGxlbG9ncmFtJzogYDxyZWN0IHRyYW5zZm9ybT1cInNrZXdYKC0yMClcIiByeD1cIjVcIiBoZWlnaHQ9XCI1MFwiIHdpZHRoPVwiNzBcIiB5PVwiMjVcIiB4PVwiMzVcIiBzdHJva2Utd2lkdGg9XCI4LjMzM1wiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJ0cmFuc3BhcmVudFwiLz5gLFxyXG4gICdzaGFwZS1wcmVkZWZpbmVkLXByb2Nlc3MnOiBgXHJcbiAgICA8ZyBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIiB0cmFuc2Zvcm09XCJtYXRyaXgoNC4xNjY2NjcsMCwwLDQuMTY2NjY3LDAsMClcIj5cclxuICAgICAgPHBhdGggZD1cIk0gNC45OTk2ODcgMyBMIDE5LjAwMDMxMiAzIEMgMjAuMTA0Njg4IDMgMjEgMy44OTUzMTIgMjEgNC45OTk2ODcgTCAyMSAxOS4wMDAzMTIgQyAyMSAyMC4xMDQ2ODggMjAuMTA0Njg4IDIxIDE5LjAwMDMxMiAyMSBMIDQuOTk5Njg3IDIxIEMgMy44OTUzMTIgMjEgMyAyMC4xMDQ2ODggMyAxOS4wMDAzMTIgTCAzIDQuOTk5Njg3IEMgMyAzLjg5NTMxMiAzLjg5NTMxMiAzIDQuOTk5Njg3IDMgWiBNIDQuOTk5Njg3IDMgXCIvPlxyXG4gICAgICA8cGF0aCBkPVwiTSA3IDMgTCA3IDIxIFwiLz5cclxuICAgICAgPHBhdGggZD1cIk0gMTcgMyBMIDE3IDIxIFwiLz5cclxuICAgIDwvZz5cclxuICBgLFxyXG4gICdzaGFwZS1kb2N1bWVudCc6IGA8cGF0aCB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMCwgNSlcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjguMzMzXCIgZD1cIk04My43NSAyNUM4NS44MiAyNSA4Ny41IDI2LjY4IDg3LjUgMjguNzVMODcuNSA2NC4zNzVRNjguNzUgNTQuMjUgNTAgNjQuMzc1IDMxLjI1IDc0LjUgMTIuNSA2NC4zNzVMMTIuNSAzMC42MjUgMTIuNSAyOC43NUMxMi41IDI2LjY4IDE0LjE4IDI1IDE2LjI1IDI1WlwiLz5gLFxyXG4gICdzaGFwZS1kYXRhYmFzZSc6IGBcclxuICAgIDxnIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgyMCwgMjApXCIgc3Ryb2tlLXdpZHRoPVwiOC4zMzNcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwibm9uZVwiPlxyXG4gICAgICA8cGF0aCBkPVwiTSAxIDUxIEwgMSAxMSBDIDEgNS40OCAxNC40MyAxIDMxIDEgQyA0Ny41NyAxIDYxIDUuNDggNjEgMTEgTCA2MSA1MSBDIDYxIDU2LjUyIDQ3LjU3IDYxIDMxIDYxIEMgMTQuNDMgNjEgMSA1Ni41MiAxIDUxIFpcIi8+XHJcbiAgICAgIDxwYXRoIGQ9XCJNIDEgMTEgQyAxIDE2LjUyIDE0LjQzIDIxIDMxIDIxIEMgNDcuNTcgMjEgNjEgMTYuNTIgNjEgMTFcIi8+XHJcbiAgICA8L2c+XHJcbiAgYCxcclxuICBcclxuICAnYm9yZGVyLXNvbGlkJzogYDxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiOC4zMzNcIiBkPVwiTTkxLjY2NjcgNDUuODMzM3Y0LjE2NjdjMCAyLjA4MzMtMi4wODMzIDQuMTY2Ny00LjE2NjcgNC4xNjY3SDEyLjVjLTIuMDgzMyAwLTQuMTY2Ny0yLjA4MzMtNC4xNjY3LTQuMTY2N3YtNC4xNjY3XCIvPmAsXHJcbiAgJ2JvcmRlci1kYXNoZWQnOiBgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCI4LjMzM1wiIHN0cm9rZS1kYXNoYXJyYXk9XCIxMy43XCIgZD1cIk05MS42NjY3IDQ1LjgzMzN2NC4xNjY3YzAgMi4wODMzLTIuMDgzMyA0LjE2NjctNC4xNjY3IDQuMTY2N0gxMi41Yy0yLjA4MzMgMC00LjE2NjctMi4wODMzLTQuMTY2Ny00LjE2Njd2LTQuMTY2N1wiLz5gLFxyXG4gICdib3JkZXItZG90dGVkJzogYDxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiOC4zMzNcIiBzdHJva2UtZGFzaGFycmF5PVwiOC43XCIgZD1cIk05MS42NjY3IDQ1LjgzMzN2NC4xNjY3YzAgMi4wODMzLTIuMDgzMyA0LjE2NjctNC4xNjY3IDQuMTY2N0gxMi41Yy0yLjA4MzMgMC00LjE2NjctMi4wODMzLTQuMTY2Ny00LjE2Njd2LTQuMTY2N1wiLz5gLFxyXG5cclxuICAncGF0aC1zb2xpZCc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjguNVwiIGQ9XCJNMzcuNSA3OS4xNjY3aDM1LjQxNjdhMTQuNTgzMyAxNC41ODMzIDkwIDAwMC0yOS4xNjY3aC00NS44MzMzYTE0LjU4MzMgMTQuNTgzMyA5MCAwMTAtMjkuMTY2N0g2Mi41XCIvPmAsXHJcbiAgJ3BhdGgtZG90dGVkJzogYDxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiOC41XCIgc3Ryb2tlLWRhc2hhcnJheT1cIjguOFwiIGQ9XCJNMzcuNSA3OS4xNjY3aDM1LjQxNjdhMTQuNTgzMyAxNC41ODMzIDkwIDAwMC0yOS4xNjY3aC00NS44MzMzYTE0LjU4MzMgMTQuNTgzMyA5MCAwMTAtMjkuMTY2N0g2Mi41XCIvPmAsXHJcbiAgJ3BhdGgtc2hvcnQtZGFzaGVkJzogYDxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiOC41XCIgc3Ryb2tlLWRhc2hhcnJheT1cIjE1XCIgZD1cIk0zNy41IDc5LjE2NjdoMzUuNDE2N2ExNC41ODMzIDE0LjU4MzMgOTAgMDAwLTI5LjE2NjdoLTQ1LjgzMzNhMTQuNTgzMyAxNC41ODMzIDkwIDAxMC0yOS4xNjY3SDYyLjVcIi8+YCxcclxuICAncGF0aC1sb25nLWRhc2hlZCc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjguNVwiIHN0cm9rZS1kYXNoYXJyYXk9XCIyM1wiIGQ9XCJNMzcuNSA3OS4xNjY3aDM1LjQxNjdhMTQuNTgzMyAxNC41ODMzIDkwIDAwMC0yOS4xNjY3aC00NS44MzMzYTE0LjU4MzMgMTQuNTgzMyA5MCAwMTAtMjkuMTY2N0g2Mi41XCIvPmAsXHJcblxyXG4gICdhcnJvdy10cmlhbmdsZSc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgZD1cIk0gMTUgMTAgTCA4NSA1MCBMIDE1IDkwIFpcIi8+YCxcclxuICAnYXJyb3ctdHJpYW5nbGUtb3V0bGluZSc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCI4LjVcIiBmaWxsPVwibm9uZVwiIGQ9XCJNIDE1IDEwIEwgODUgNTAgTCAxNSA5MCBaXCIvPmAsXHJcbiAgJ2Fycm93LXRoaW4tdHJpYW5nbGUnOiBgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiOC41XCIgZmlsbD1cIm5vbmVcIiBkPVwiTSAxNSAxMCBMIDg1IDUwIEwgMTUgOTBcIi8+YCxcclxuICAnYXJyb3ctaGFsdmVkLXRyaWFuZ2xlJzogYDxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBkPVwiTSAxNSA1MCBMIDg1IDUwIEwgMTUgOTAgWlwiLz5gLFxyXG4gICdhcnJvdy1kaWFtb25kJzogYDxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBkPVwiTSA1MCAwIEwgMTAwIDUwIEwgNTAgMTAwIEwgMCA1MCBaXCIvPmAsXHJcbiAgJ2Fycm93LWRpYW1vbmQtb3V0bGluZSc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCI4LjVcIiBmaWxsPVwibm9uZVwiIGQ9XCJNIDUwIDAgTCAxMDAgNTAgTCA1MCAxMDAgTCAwIDUwIFpcIi8+YCxcclxuICAnYXJyb3ctY2lyY2xlJzogYDxjaXJjbGUgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIGN4PVwiNTBcIiBjeT1cIjUwXCIgcj1cIjQ1XCIvPmAsXHJcbiAgJ2Fycm93LWNpcmNsZS1vdXRsaW5lJzogYDxjaXJjbGUgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiOC41XCIgZmlsbD1cIm5vbmVcIiBjeD1cIjUwXCIgY3k9XCI1MFwiIHI9XCI0NVwiLz5gLFxyXG5cclxuICAncGF0aGZpbmRpbmctbWV0aG9kLWJlemllcic6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjguNVwiIGQ9XCJNMzcuNSA3OS4xNjY3aDM1LjQxNjdhMTQuNTgzMyAxNC41ODMzIDkwIDAwMC0yOS4xNjY3aC00NS44MzMzYTE0LjU4MzMgMTQuNTgzMyA5MCAwMTAtMjkuMTY2N0g2Mi41XCIvPmAsXHJcbiAgJ3BhdGhmaW5kaW5nLW1ldGhvZC1zcXVhcmUnOiBgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCI4LjVcIiBkPVwiTTcyLjkxNjcgNzkuMTY2NyA3Mi45MTY3IDUwIDI3LjA4MzMgNTAgMjcuMDgzMyAyMC44MzMzXCIvPmAsXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEljb25zSGVscGVyIHtcclxuICBzdGF0aWMgYWRkSWNvbnMoKSB7XHJcbiAgICBmb3IgKGNvbnN0IFtpZCwgc3ZnXSBvZiBPYmplY3QuZW50cmllcyhDVVNUT01fSUNPTlMpKSB7XHJcbiAgICAgIGFkZEljb24oaWQsIHN2ZylcclxuICAgIH1cclxuICB9XHJcbn0iLCAiaW1wb3J0IEFkdmFuY2VkQ2FudmFzUGx1Z2luIGZyb20gXCJzcmMvbWFpblwiXHJcbmltcG9ydCB7IENhbnZhc0V2ZW50IH0gZnJvbSBcIi4uL2NvcmUvZXZlbnRzXCJcclxuaW1wb3J0IHsgQ2FudmFzLCBDYW52YXNOb2RlIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERlYnVnSGVscGVyIHtcclxuICBwbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luXHJcblxyXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogQWR2YW5jZWRDYW52YXNQbHVnaW4pIHtcclxuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Ob2RlQWRkZWQsXHJcbiAgICAgIChfY2FudmFzOiBDYW52YXMsIF9ub2RlOiBDYW52YXNOb2RlKSA9PiBjb25zb2xlLmNvdW50KCdcdUQ4M0RcdURGRTIgTm9kZUFkZGVkJylcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Ob2RlQ2hhbmdlZCxcclxuICAgICAgKF9jYW52YXM6IENhbnZhcywgX25vZGU6IENhbnZhc05vZGUpID0+IGNvbnNvbGUuY291bnQoJ1x1RDgzRFx1REZFMSBOb2RlQ2hhbmdlZCcpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuRWRnZUFkZGVkLFxyXG4gICAgICAoX2NhbnZhczogQ2FudmFzLCBfZWRnZTogQ2FudmFzTm9kZSkgPT4gY29uc29sZS5jb3VudCgnXHVEODNEXHVERkUyIEVkZ2VBZGRlZCcpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuRWRnZUNoYW5nZWQsXHJcbiAgICAgIChfY2FudmFzOiBDYW52YXMsIF9lZGdlOiBDYW52YXNOb2RlKSA9PiBjb25zb2xlLmNvdW50KCdcdUQ4M0RcdURGRTEgRWRnZUNoYW5nZWQnKVxyXG4gICAgKSlcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgTm90aWNlLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCJcclxuaW1wb3J0IEFkdmFuY2VkQ2FudmFzUGx1Z2luIGZyb20gXCIuL21haW5cIlxyXG5pbXBvcnQgeyBCVUlMVElOX0VER0VfU1RZTEVfQVRUUklCVVRFUywgQlVJTFRJTl9OT0RFX1NUWUxFX0FUVFJJQlVURVMsIFN0eWxlQXR0cmlidXRlIH0gZnJvbSBcIi4vY2FudmFzLWV4dGVuc2lvbnMvYWR2YW5jZWQtc3R5bGVzL3N0eWxlLWNvbmZpZ1wiXHJcblxyXG5jb25zdCBOT0RFX1RZUEVTX09OX0RPVUJMRV9DTElDSyA9IHtcclxuICAndGV4dCc6ICdUZXh0JyxcclxuICAnZmlsZSc6ICdGaWxlJ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFkdmFuY2VkQ2FudmFzUGx1Z2luU2V0dGluZ3Mge1xyXG4gIG5vZGVUeXBlT25Eb3VibGVDbGljazogc3RyaW5nXHJcbiAgYWxpZ25Eb3VibGVDbGlja2VkTm9kZVRvR3JpZDogYm9vbGVhblxyXG4gIGRlZmF1bHRUZXh0Tm9kZVdpZHRoOiBudW1iZXJcclxuICBkZWZhdWx0VGV4dE5vZGVIZWlnaHQ6IG51bWJlclxyXG4gIGRlZmF1bHRGaWxlTm9kZVdpZHRoOiBudW1iZXJcclxuICBkZWZhdWx0RmlsZU5vZGVIZWlnaHQ6IG51bWJlclxyXG5cclxuICBwZXJmb3JtYW5jZU9wdGltaXphdGlvbkVuYWJsZWQ6IGJvb2xlYW5cclxuXHJcbiAgbm9kZVN0eWxpbmdGZWF0dXJlRW5hYmxlZDogYm9vbGVhblxyXG4gIGN1c3RvbU5vZGVTdHlsZUF0dHJpYnV0ZXM6IFN0eWxlQXR0cmlidXRlW11cclxuICBkZWZhdWx0VGV4dE5vZGVTdHlsZUF0dHJpYnV0ZXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH1cclxuXHJcbiAgZWRnZXNTdHlsaW5nRmVhdHVyZUVuYWJsZWQ6IGJvb2xlYW5cclxuICBjdXN0b21FZGdlU3R5bGVBdHRyaWJ1dGVzOiBTdHlsZUF0dHJpYnV0ZVtdXHJcbiAgZGVmYXVsdEVkZ2VTdHlsZUF0dHJpYnV0ZXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH1cclxuICBlZGdlU3R5bGVEaXJlY3RSb3RhdGVBcnJvdzogYm9vbGVhblxyXG4gIGVkZ2VTdHlsZVBhdGhmaW5kZXJHcmlkUmVzb2x1dGlvbjogbnVtYmVyXHJcbiAgZWRnZVN0eWxlUGF0aGZpbmRlclBhdGhMaXZlVXBkYXRlOiBib29sZWFuXHJcbiAgZWRnZVN0eWxlUGF0aGZpbmRlclBhdGhSb3VuZGVkOiBib29sZWFuXHJcblxyXG4gIGNvbW1hbmRzRmVhdHVyZUVuYWJsZWQ6IGJvb2xlYW5cclxuICB6b29tVG9DbG9uZWROb2RlOiBib29sZWFuXHJcbiAgY2xvbmVOb2RlTWFyZ2luOiBudW1iZXJcclxuICBleHBhbmROb2RlU3RlcFNpemU6IG51bWJlclxyXG5cclxuICBiZXR0ZXJSZWFkb25seUVuYWJsZWQ6IGJvb2xlYW5cclxuICBkaXNhYmxlTm9kZVBvcHVwOiBib29sZWFuXHJcbiAgZGlzYWJsZVpvb206IGJvb2xlYW5cclxuICBkaXNhYmxlUGFuOiBib29sZWFuXHJcblxyXG4gIGNvbGxhcHNpYmxlR3JvdXBzRmVhdHVyZUVuYWJsZWQ6IGJvb2xlYW5cclxuICBjb2xsYXBzZWRHcm91cFByZXZpZXdPbkRyYWc6IGJvb2xlYW5cclxuXHJcbiAgcHJlc2VudGF0aW9uRmVhdHVyZUVuYWJsZWQ6IGJvb2xlYW5cclxuICBzaG93U2V0U3RhcnROb2RlSW5Qb3B1cDogYm9vbGVhblxyXG4gIGRlZmF1bHRTbGlkZVNpemU6IHN0cmluZ1xyXG4gIHdyYXBJblNsaWRlUGFkZGluZzogbnVtYmVyXHJcbiAgdXNlQXJyb3dLZXlzVG9DaGFuZ2VTbGlkZXM6IGJvb2xlYW5cclxuICB1c2VQZ1VwUGdEb3duS2V5c1RvQ2hhbmdlU2xpZGVzOiBib29sZWFuXHJcbiAgem9vbVRvU2xpZGVXaXRob3V0UGFkZGluZzogYm9vbGVhblxyXG4gIHNsaWRlVHJhbnNpdGlvbkFuaW1hdGlvbkR1cmF0aW9uOiBudW1iZXJcclxuICBzbGlkZVRyYW5zaXRpb25BbmltYXRpb25JbnRlbnNpdHk6IG51bWJlclxyXG5cclxuICBjYW52YXNFbmNhcHN1bGF0aW9uRW5hYmxlZDogYm9vbGVhblxyXG5cclxuICBwb3J0YWxzRmVhdHVyZUVuYWJsZWQ6IGJvb2xlYW5cclxuICBtYWludGFpbkNsb3NlZFBvcnRhbFNpemU6IGJvb2xlYW5cclxuICBzaG93RWRnZXNJbnRvRGlzYWJsZWRQb3J0YWxzOiBib29sZWFuXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBQYXJ0aWFsPEFkdmFuY2VkQ2FudmFzUGx1Z2luU2V0dGluZ3M+ID0ge1xyXG4gIG5vZGVUeXBlT25Eb3VibGVDbGljazogT2JqZWN0LmtleXMoTk9ERV9UWVBFU19PTl9ET1VCTEVfQ0xJQ0spLmZpcnN0KCksXHJcbiAgYWxpZ25Eb3VibGVDbGlja2VkTm9kZVRvR3JpZDogdHJ1ZSxcclxuICBkZWZhdWx0VGV4dE5vZGVXaWR0aDogMjYwLFxyXG4gIGRlZmF1bHRUZXh0Tm9kZUhlaWdodDogNjAsXHJcbiAgZGVmYXVsdEZpbGVOb2RlV2lkdGg6IDQwMCxcclxuICBkZWZhdWx0RmlsZU5vZGVIZWlnaHQ6IDQwMCxcclxuXHJcbiAgcGVyZm9ybWFuY2VPcHRpbWl6YXRpb25FbmFibGVkOiBmYWxzZSxcclxuXHJcbiAgbm9kZVN0eWxpbmdGZWF0dXJlRW5hYmxlZDogdHJ1ZSxcclxuICBjdXN0b21Ob2RlU3R5bGVBdHRyaWJ1dGVzOiBbXSxcclxuICBkZWZhdWx0VGV4dE5vZGVTdHlsZUF0dHJpYnV0ZXM6IHt9LFxyXG5cclxuICBlZGdlc1N0eWxpbmdGZWF0dXJlRW5hYmxlZDogdHJ1ZSxcclxuICBjdXN0b21FZGdlU3R5bGVBdHRyaWJ1dGVzOiBbXSxcclxuICBkZWZhdWx0RWRnZVN0eWxlQXR0cmlidXRlczoge30sXHJcbiAgZWRnZVN0eWxlRGlyZWN0Um90YXRlQXJyb3c6IGZhbHNlLFxyXG4gIGVkZ2VTdHlsZVBhdGhmaW5kZXJHcmlkUmVzb2x1dGlvbjogMTAsXHJcbiAgZWRnZVN0eWxlUGF0aGZpbmRlclBhdGhMaXZlVXBkYXRlOiB0cnVlLFxyXG4gIGVkZ2VTdHlsZVBhdGhmaW5kZXJQYXRoUm91bmRlZDogdHJ1ZSxcclxuXHJcbiAgY29tbWFuZHNGZWF0dXJlRW5hYmxlZDogdHJ1ZSxcclxuICB6b29tVG9DbG9uZWROb2RlOiB0cnVlLFxyXG4gIGNsb25lTm9kZU1hcmdpbjogMjAsXHJcbiAgZXhwYW5kTm9kZVN0ZXBTaXplOiAyMCxcclxuXHJcbiAgYmV0dGVyUmVhZG9ubHlFbmFibGVkOiB0cnVlLFxyXG4gIGRpc2FibGVOb2RlUG9wdXA6IGZhbHNlLFxyXG4gIGRpc2FibGVab29tOiBmYWxzZSxcclxuICBkaXNhYmxlUGFuOiBmYWxzZSxcclxuXHJcbiAgY29sbGFwc2libGVHcm91cHNGZWF0dXJlRW5hYmxlZDogdHJ1ZSxcclxuICBjb2xsYXBzZWRHcm91cFByZXZpZXdPbkRyYWc6IHRydWUsXHJcblxyXG4gIHByZXNlbnRhdGlvbkZlYXR1cmVFbmFibGVkOiB0cnVlLFxyXG4gIHNob3dTZXRTdGFydE5vZGVJblBvcHVwOiBmYWxzZSxcclxuICBkZWZhdWx0U2xpZGVTaXplOiAnMTIwMHg2NzUnLFxyXG4gIHdyYXBJblNsaWRlUGFkZGluZzogMjAsXHJcbiAgdXNlQXJyb3dLZXlzVG9DaGFuZ2VTbGlkZXM6IHRydWUsXHJcbiAgdXNlUGdVcFBnRG93bktleXNUb0NoYW5nZVNsaWRlczogdHJ1ZSxcclxuICB6b29tVG9TbGlkZVdpdGhvdXRQYWRkaW5nOiB0cnVlLFxyXG4gIHNsaWRlVHJhbnNpdGlvbkFuaW1hdGlvbkR1cmF0aW9uOiAwLjUsXHJcbiAgc2xpZGVUcmFuc2l0aW9uQW5pbWF0aW9uSW50ZW5zaXR5OiAxLjI1LFxyXG5cclxuICBjYW52YXNFbmNhcHN1bGF0aW9uRW5hYmxlZDogdHJ1ZSxcclxuXHJcbiAgcG9ydGFsc0ZlYXR1cmVFbmFibGVkOiB0cnVlLFxyXG4gIG1haW50YWluQ2xvc2VkUG9ydGFsU2l6ZTogdHJ1ZSxcclxuICBzaG93RWRnZXNJbnRvRGlzYWJsZWRQb3J0YWxzOiB0cnVlXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNldHRpbmdzTWFuYWdlciB7XHJcbiAgc3RhdGljIFNFVFRJTkdTX0NIQU5HRURfRVZFTlQgPSAnYWR2YW5jZWQtY2FudmFzOnNldHRpbmdzLWNoYW5nZWQnXHJcblxyXG4gIHByaXZhdGUgcGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpblxyXG4gIHByaXZhdGUgc2V0dGluZ3M6IEFkdmFuY2VkQ2FudmFzUGx1Z2luU2V0dGluZ3NcclxuICBwcml2YXRlIHNldHRpbmdzVGFiOiBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdUYWJcclxuXHJcbiAgY29uc3RydWN0b3IocGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpbikge1xyXG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW5cclxuICB9XHJcblxyXG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLnBsdWdpbi5sb2FkRGF0YSgpKVxyXG4gICAgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS50cmlnZ2VyKFNldHRpbmdzTWFuYWdlci5TRVRUSU5HU19DSEFOR0VEX0VWRU5UKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG4gICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5zZXR0aW5ncylcclxuICB9XHJcblxyXG4gIGdldFNldHRpbmc8VCBleHRlbmRzIGtleW9mIEFkdmFuY2VkQ2FudmFzUGx1Z2luU2V0dGluZ3M+KGtleTogVCk6IEFkdmFuY2VkQ2FudmFzUGx1Z2luU2V0dGluZ3NbVF0ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2V0dGluZ3Nba2V5XVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2V0U2V0dGluZyhkYXRhOiBQYXJ0aWFsPEFkdmFuY2VkQ2FudmFzUGx1Z2luU2V0dGluZ3M+KSB7XHJcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih0aGlzLnNldHRpbmdzLCBkYXRhKVxyXG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKVxyXG4gICAgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS50cmlnZ2VyKFNldHRpbmdzTWFuYWdlci5TRVRUSU5HU19DSEFOR0VEX0VWRU5UKVxyXG4gIH1cclxuXHJcbiAgYWRkU2V0dGluZ3NUYWIoKSB7XHJcbiAgICB0aGlzLnNldHRpbmdzVGFiID0gbmV3IEFkdmFuY2VkQ2FudmFzUGx1Z2luU2V0dGluZ1RhYih0aGlzLnBsdWdpbiwgdGhpcylcclxuICAgIHRoaXMucGx1Z2luLmFkZFNldHRpbmdUYWIodGhpcy5zZXR0aW5nc1RhYilcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuICBzZXR0aW5nc01hbmFnZXI6IFNldHRpbmdzTWFuYWdlclxyXG5cclxuICBjb25zdHJ1Y3RvcihwbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luLCBzZXR0aW5nc01hbmFnZXI6IFNldHRpbmdzTWFuYWdlcikge1xyXG4gICAgc3VwZXIocGx1Z2luLmFwcCwgcGx1Z2luKVxyXG4gICAgdGhpcy5zZXR0aW5nc01hbmFnZXIgPSBzZXR0aW5nc01hbmFnZXJcclxuICB9XHJcblxyXG4gIGRpc3BsYXkoKTogdm9pZCB7XHJcbiAgICBsZXQgeyBjb250YWluZXJFbCB9ID0gdGhpc1xyXG4gICAgY29udGFpbmVyRWwuZW1wdHkoKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0SGVhZGluZygpXHJcbiAgICAgIC5zZXRDbGFzcygnYWMtc2V0dGluZ3MtaGVhZGluZycpXHJcbiAgICAgIC5zZXROYW1lKFwiR2VuZXJhbFwiKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIk5vZGUgdHlwZSBvbiBkb3VibGUgY2xpY2tcIilcclxuICAgICAgLnNldERlc2MoXCJUaGUgdHlwZSBvZiBub2RlIHRoYXQgd2lsbCBiZSBjcmVhdGVkIHdoZW4gZG91YmxlIGNsaWNraW5nIG9uIHRoZSBjYW52YXMuXCIpXHJcbiAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+XHJcbiAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgIC5hZGRPcHRpb25zKE5PREVfVFlQRVNfT05fRE9VQkxFX0NMSUNLKVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ25vZGVUeXBlT25Eb3VibGVDbGljaycpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IG5vZGVUeXBlT25Eb3VibGVDbGljazogdmFsdWUgfSkpXHJcbiAgICAgICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIkFsaWduIG5vZGUsIGNyZWF0ZWQgYnkgZG91YmxlIGNsaWNrLCB0byBncmlkXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiV2hlbiBlbmFibGVkLCBhIG5vZGUgY3JlYXRlZCBieSBkb3VibGUgY2xpY2tpbmcgd2lsbCBiZSBhbGlnbmVkIHRvIHRoZSBncmlkLlwiKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnYWxpZ25Eb3VibGVDbGlja2VkTm9kZVRvR3JpZCcpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IGFsaWduRG91YmxlQ2xpY2tlZE5vZGVUb0dyaWQ6IHZhbHVlIH0pKVxyXG4gICAgICApXHJcbiAgICBcclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIkRlZmF1bHQgdGV4dCBub2RlIHdpZHRoXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiVGhlIGRlZmF1bHQgd2lkdGggb2YgYSB0ZXh0IG5vZGUuXCIpXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG4gICAgICAgIHRleHRcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdkZWZhdWx0VGV4dE5vZGVXaWR0aCcpLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgZGVmYXVsdFRleHROb2RlV2lkdGg6IE1hdGgubWF4KDEsIHBhcnNlSW50KHZhbHVlKSkgfSkpXHJcbiAgICAgIClcclxuICAgIFxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiRGVmYXVsdCB0ZXh0IG5vZGUgaGVpZ2h0XCIpXHJcbiAgICAgIC5zZXREZXNjKFwiVGhlIGRlZmF1bHQgaGVpZ2h0IG9mIGEgdGV4dCBub2RlLlwiKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnZGVmYXVsdFRleHROb2RlSGVpZ2h0JykudG9TdHJpbmcoKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBkZWZhdWx0VGV4dE5vZGVIZWlnaHQ6IE1hdGgubWF4KDEsIHBhcnNlSW50KHZhbHVlKSkgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJEZWZhdWx0IGZpbGUgbm9kZSB3aWR0aFwiKVxyXG4gICAgICAuc2V0RGVzYyhcIlRoZSBkZWZhdWx0IHdpZHRoIG9mIGEgZmlsZSBub2RlLlwiKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnZGVmYXVsdEZpbGVOb2RlV2lkdGgnKS50b1N0cmluZygpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IGRlZmF1bHRGaWxlTm9kZVdpZHRoOiBNYXRoLm1heCgxLCBwYXJzZUludCh2YWx1ZSkpIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiRGVmYXVsdCBmaWxlIG5vZGUgaGVpZ2h0XCIpXHJcbiAgICAgIC5zZXREZXNjKFwiVGhlIGRlZmF1bHQgaGVpZ2h0IG9mIGEgZmlsZSBub2RlLlwiKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnZGVmYXVsdEZpbGVOb2RlSGVpZ2h0JykudG9TdHJpbmcoKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBkZWZhdWx0RmlsZU5vZGVIZWlnaHQ6IE1hdGgubWF4KDEsIHBhcnNlSW50KHZhbHVlKSkgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICB0aGlzLmNyZWF0ZUZlYXR1cmVIZWFkaW5nKFxyXG4gICAgICBjb250YWluZXJFbCxcclxuICAgICAgXCJQZXJmb3JtYW5jZSBvcHRpbWl6YXRpb25cIixcclxuICAgICAgXCJPcHRpbWl6ZSB0aGUgcGVyZm9ybWFuY2Ugb2YgdGhlIGNhbnZhcyAoU2lkZSBlZmZlY3QgaXMgc29tZSBhbW91bnQgb2YgYmx1cnJpbmVzcykuXCIsXHJcbiAgICAgICdwZXJmb3JtYW5jZU9wdGltaXphdGlvbkVuYWJsZWQnXHJcbiAgICApXHJcblxyXG4gICAgdGhpcy5jcmVhdGVGZWF0dXJlSGVhZGluZyhcclxuICAgICAgY29udGFpbmVyRWwsXHJcbiAgICAgIFwiTm9kZSBzdHlsaW5nXCIsXHJcbiAgICAgIFwiU3R5bGUgeW91ciBub2RlcyB3aXRoIGRpZmZlcmVudCBzaGFwZXMgYW5kIGJvcmRlcnMuXCIsXHJcbiAgICAgICdub2RlU3R5bGluZ0ZlYXR1cmVFbmFibGVkJ1xyXG4gICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIkN1c3RvbSBub2RlIHN0eWxlIHNldHRpbmdzXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiQWRkIGN1c3RvbSBzdHlsZSBzZXR0aW5ncyBmb3Igbm9kZXMuIChHbyB0byBHaXRIdWIgZm9yIG1vcmUgaW5mb3JtYXRpb24pXCIpXHJcbiAgICAgIC5hZGRCdXR0b24oKGJ1dHRvbikgPT5cclxuICAgICAgICBidXR0b25cclxuICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiT3BlbiBUdXRvcmlhbFwiKVxyXG4gICAgICAgICAgLm9uQ2xpY2soKCkgPT4gd2luZG93Lm9wZW4oXCJodHRwczovL2dpdGh1Yi5jb20vRGV2ZWxvcGVyLU1pa2Uvb2JzaWRpYW4tYWR2YW5jZWQtY2FudmFzL2Jsb2IvbWFpbi9SRUFETUUubWQjY3VzdG9tLXN0eWxlc1wiKSlcclxuICAgICAgKVxyXG5cclxuICAgIGNvbnN0IGFsbE5vZGVTdHlsZUF0dHJpYnV0ZXMgPSBbIC4uLkJVSUxUSU5fTk9ERV9TVFlMRV9BVFRSSUJVVEVTLCAuLi50aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdjdXN0b21Ob2RlU3R5bGVBdHRyaWJ1dGVzJykgXVxyXG4gICAgICAuZmlsdGVyKChzZXR0aW5nKSA9PiBzZXR0aW5nLm5vZGVUeXBlcyA9PT0gdW5kZWZpbmVkIHx8IHNldHRpbmcubm9kZVR5cGVzPy5pbmNsdWRlcygndGV4dCcpKVxyXG4gICAgdGhpcy5jcmVhdGVEZWZhdWx0U3R5bGVzU2VjdGlvbihjb250YWluZXJFbCwgJ0RlZmF1bHQgdGV4dCBub2RlIHN0eWxlIGF0dHJpYnV0ZXMnLCAnZGVmYXVsdFRleHROb2RlU3R5bGVBdHRyaWJ1dGVzJywgYWxsTm9kZVN0eWxlQXR0cmlidXRlcylcclxuXHJcbiAgICB0aGlzLmNyZWF0ZUZlYXR1cmVIZWFkaW5nKFxyXG4gICAgICBjb250YWluZXJFbCxcclxuICAgICAgXCJFZGdlcyBzdHlsaW5nXCIsXHJcbiAgICAgIFwiU3R5bGUgeW91ciBlZGdlcyB3aXRoIGRpZmZlcmVudCBwYXRoIHN0eWxlcy5cIixcclxuICAgICAgJ2VkZ2VzU3R5bGluZ0ZlYXR1cmVFbmFibGVkJ1xyXG4gICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIkN1c3RvbSBlZGdlIHN0eWxlIHNldHRpbmdzXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiQWRkIGN1c3RvbSBzdHlsZSBzZXR0aW5ncyBmb3IgZWRnZXMuIChHbyB0byBHaXRIdWIgZm9yIG1vcmUgaW5mb3JtYXRpb24pXCIpXHJcbiAgICAgIC5hZGRCdXR0b24oKGJ1dHRvbikgPT5cclxuICAgICAgICBidXR0b25cclxuICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiT3BlbiBUdXRvcmlhbFwiKVxyXG4gICAgICAgICAgLm9uQ2xpY2soKCkgPT4gd2luZG93Lm9wZW4oXCJodHRwczovL2dpdGh1Yi5jb20vRGV2ZWxvcGVyLU1pa2Uvb2JzaWRpYW4tYWR2YW5jZWQtY2FudmFzL2Jsb2IvbWFpbi9SRUFETUUubWQjY3VzdG9tLXN0eWxlc1wiKSlcclxuICAgICAgKVxyXG5cclxuICAgIHRoaXMuY3JlYXRlRGVmYXVsdFN0eWxlc1NlY3Rpb24oY29udGFpbmVyRWwsICdEZWZhdWx0IGVkZ2Ugc3R5bGUgYXR0cmlidXRlcycsICdkZWZhdWx0RWRnZVN0eWxlQXR0cmlidXRlcycsIFsgLi4uQlVJTFRJTl9FREdFX1NUWUxFX0FUVFJJQlVURVMsIC4uLnRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ2N1c3RvbUVkZ2VTdHlsZUF0dHJpYnV0ZXMnKSBdKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIlJvdGF0ZSBhcnJvdyBpZiBwYXRoZmluZGluZyBtZXRob2QgaXMgXFxcIkRpcmVjdFxcXCJcIilcclxuICAgICAgLnNldERlc2MoXCJXaGVuIGVuYWJsZWQsIHRoZSBhcnJvdyB3aWxsIGJlIHJvdGF0ZWQgdG8gdGhlIGRpcmVjdGlvbiBvZiB0aGUgZWRnZSBpZiB0aGUgcGF0aGZpbmRpbmcgbWV0aG9kIGlzIHNldCB0byBcXFwiRGlyZWN0XFxcIi5cIilcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ2VkZ2VTdHlsZURpcmVjdFJvdGF0ZUFycm93JykpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgZWRnZVN0eWxlRGlyZWN0Um90YXRlQXJyb3c6IHZhbHVlIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiQSogZ3JpZCByZXNvbHV0aW9uXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiVGhlIHJlc29sdXRpb24gb2YgdGhlIGdyaWQgd2hlbiB1c2luZyB0aGUgQSogcGF0aCBzdHlsZS4gVGhlIGxvd2VyIHRoZSB2YWx1ZSwgdGhlIG1vcmUgcHJlY2lzZSB0aGUgcGF0aCB3aWxsIGJlLiBCdXQgaXQgd2lsbCBhbHNvIHRha2UgbG9uZ2VyIHRvIGNhbGN1bGF0ZS5cIilcclxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ2VkZ2VTdHlsZVBhdGhmaW5kZXJHcmlkUmVzb2x1dGlvbicpLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgZWRnZVN0eWxlUGF0aGZpbmRlckdyaWRSZXNvbHV0aW9uOiBNYXRoLm1heCg1LCBwYXJzZUludCh2YWx1ZSkpIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiTGl2ZSB1cGRhdGUgQSogcGF0aFwiKVxyXG4gICAgICAuc2V0RGVzYyhcIldoZW4gZW5hYmxlZCwgdGhlIEEqIHBhdGggc3R5bGUgd2lsbCBiZSB1cGRhdGVkIGxpdmUgd2hpbGUgZHJhZ2dpbmcgdGhlIGVkZ2UuXCIpXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICB0b2dnbGVcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdlZGdlU3R5bGVQYXRoZmluZGVyUGF0aExpdmVVcGRhdGUnKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBlZGdlU3R5bGVQYXRoZmluZGVyUGF0aExpdmVVcGRhdGU6IHZhbHVlIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiQSogcm91bmRlZCBwYXRoXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiV2hlbiBlbmFibGVkLCB0aGUgQSogcGF0aCBzdHlsZSB3aWxsIGJlIHJvdW5kZWQuXCIpXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICB0b2dnbGVcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdlZGdlU3R5bGVQYXRoZmluZGVyUGF0aFJvdW5kZWQnKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBlZGdlU3R5bGVQYXRoZmluZGVyUGF0aFJvdW5kZWQ6IHZhbHVlIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgdGhpcy5jcmVhdGVGZWF0dXJlSGVhZGluZyhcclxuICAgICAgY29udGFpbmVyRWwsXHJcbiAgICAgIFwiRXh0ZW5kZWQgY29tbWFuZHNcIixcclxuICAgICAgXCJBZGQgbW9yZSBjb21tYW5kcyB0byB0aGUgY2FudmFzLlwiLFxyXG4gICAgICAnY29tbWFuZHNGZWF0dXJlRW5hYmxlZCdcclxuICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJab29tIHRvIGNsb25lZCBub2RlXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiV2hlbiBlbmFibGVkLCB0aGUgY2FudmFzIHdpbGwgem9vbSB0byB0aGUgY2xvbmVkIG5vZGUuXCIpXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICB0b2dnbGVcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCd6b29tVG9DbG9uZWROb2RlJykpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgem9vbVRvQ2xvbmVkTm9kZTogdmFsdWUgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJDbG9uZSBub2RlIG1hcmdpblwiKVxyXG4gICAgICAuc2V0RGVzYyhcIlRoZSBtYXJnaW4gYmV0d2VlbiB0aGUgY2xvbmVkIG5vZGUgYW5kIHRoZSBzb3VyY2Ugbm9kZS5cIilcclxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ2Nsb25lTm9kZU1hcmdpbicpLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgY2xvbmVOb2RlTWFyZ2luOiBwYXJzZUludCh2YWx1ZSkgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJFeHBhbmQgbm9kZSBzdGVwIHNpemVcIilcclxuICAgICAgLnNldERlc2MoXCJUaGUgc3RlcCBzaXplIGZvciBleHBhbmRpbmcgdGhlIG5vZGUuXCIpXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG4gICAgICAgIHRleHRcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdleHBhbmROb2RlU3RlcFNpemUnKS50b1N0cmluZygpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IGV4cGFuZE5vZGVTdGVwU2l6ZTogcGFyc2VJbnQodmFsdWUpIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgdGhpcy5jcmVhdGVGZWF0dXJlSGVhZGluZyhcclxuICAgICAgY29udGFpbmVyRWwsXHJcbiAgICAgIFwiQmV0dGVyIHJlYWRvbmx5XCIsXHJcbiAgICAgIFwiSW1wcm92ZSB0aGUgcmVhZG9ubHkgbW9kZS5cIixcclxuICAgICAgJ2JldHRlclJlYWRvbmx5RW5hYmxlZCdcclxuICAgIClcclxuXHJcbiAgICB0aGlzLmNyZWF0ZUZlYXR1cmVIZWFkaW5nKFxyXG4gICAgICBjb250YWluZXJFbCxcclxuICAgICAgXCJDb2xsYXBzaWJsZSBncm91cHNcIixcclxuICAgICAgXCJHcm91cCBub2RlcyBjYW4gYmUgY29sbGFwc2VkIGFuZCBleHBhbmRlZCB0byBrZWVwIHRoZSBjYW52YXMgb3JnYW5pemVkLlwiLFxyXG4gICAgICAnY29sbGFwc2libGVHcm91cHNGZWF0dXJlRW5hYmxlZCdcclxuICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJDb2xsYXBzZWQgZ3JvdXAgcHJldmlldyBvbiBkcmFnXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiV2hlbiBlbmFibGVkLCBhIGdyb3VwIHRoYXQgaXMgY29sbGFwc2VkIHNob3cgaXRzIGJvcmRlciB3aGlsZSBkcmFnZ2luZyBhIG5vZGUuXCIpXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICB0b2dnbGVcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdjb2xsYXBzZWRHcm91cFByZXZpZXdPbkRyYWcnKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBjb2xsYXBzZWRHcm91cFByZXZpZXdPbkRyYWc6IHZhbHVlIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgdGhpcy5jcmVhdGVGZWF0dXJlSGVhZGluZyhcclxuICAgICAgY29udGFpbmVyRWwsXHJcbiAgICAgIFwiUHJlc2VudGF0aW9uc1wiLFxyXG4gICAgICBcIkNyZWF0ZSBhIHByZXNlbnRhdGlvbiBmcm9tIHlvdXIgY2FudmFzLlwiLFxyXG4gICAgICAncHJlc2VudGF0aW9uRmVhdHVyZUVuYWJsZWQnXHJcbiAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAuc2V0TmFtZShcIlNob3cgXFxcIlNldCBTdGFydCBOb2RlXFxcIiBpbiBub2RlIHBvcHVwXCIpXHJcbiAgICAuc2V0RGVzYyhcIklmIHR1cm5lZCBvZmYsIHlvdSBjYW4gc3RpbGwgc2V0IHRoZSBzdGFydCBub2RlIHVzaW5nIHRoZSBjb3JyZXNwb25kaW5nIGNvbW1hbmQuXCIpXHJcbiAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgIHRvZ2dsZVxyXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdzaG93U2V0U3RhcnROb2RlSW5Qb3B1cCcpKVxyXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBzaG93U2V0U3RhcnROb2RlSW5Qb3B1cDogdmFsdWUgfSkpXHJcbiAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiRGVmYXVsdCBzbGlkZSByYXRpb1wiKVxyXG4gICAgICAuc2V0RGVzYyhcIlRoZSBkZWZhdWx0IHJhdGlvIG9mIHRoZSBzbGlkZS4gRm9yIGV4YW1wbGUsIDE2OjkgaXMgMTIwMHg2NzUgYW5kIDM6MiBpcyAxMzUweDkwMC5cIilcclxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ2RlZmF1bHRTbGlkZVNpemUnKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBkZWZhdWx0U2xpZGVTaXplOiB2YWx1ZS5yZXBsYWNlKCcgJywgJycpIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiV3JhcCBpbiBzbGlkZSBwYWRkaW5nXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiVGhlIHBhZGRpbmcgb2YgdGhlIHNsaWRlIHdoZW4gd3JhcHBpbmcgdGhlIGNhbnZhcyBpbiBhIHNsaWRlLlwiKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnd3JhcEluU2xpZGVQYWRkaW5nJykudG9TdHJpbmcoKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyB3cmFwSW5TbGlkZVBhZGRpbmc6IHBhcnNlSW50KHZhbHVlKSB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIlVzZSBhcnJvdyBrZXlzIHRvIGNoYW5nZSBzbGlkZXNcIilcclxuICAgICAgLnNldERlc2MoXCJXaGVuIGVuYWJsZWQsIHlvdSBjYW4gdXNlIHRoZSBhcnJvdyBrZXlzIHRvIGNoYW5nZSBzbGlkZXMgaW4gcHJlc2VudGF0aW9uIG1vZGUuXCIpXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICB0b2dnbGVcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCd1c2VBcnJvd0tleXNUb0NoYW5nZVNsaWRlcycpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IHVzZUFycm93S2V5c1RvQ2hhbmdlU2xpZGVzOiB2YWx1ZSB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIlVzZSBQZ1VwL1BnRG93biBrZXlzIHRvIGNoYW5nZSBzbGlkZXNcIilcclxuICAgICAgLnNldERlc2MoXCJXaGVuIGVuYWJsZWQsIHlvdSBjYW4gdXNlIHRoZSBQZ1VwL1BnRG93biBrZXlzIHRvIGNoYW5nZSBzbGlkZXMgaW4gcHJlc2VudGF0aW9uIG1vZGUgKE1ha2VzIHRoZSBwcmVzZW50YXRpb24gbW9kZSBjb21wYXRpYmxlIHdpdGggbW9zdCBwcmVzZW50YXRpb24gcmVtb3RlcykuXCIpXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICB0b2dnbGVcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCd1c2VQZ1VwUGdEb3duS2V5c1RvQ2hhbmdlU2xpZGVzJykpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgdXNlUGdVcFBnRG93bktleXNUb0NoYW5nZVNsaWRlczogdmFsdWUgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJab29tIHRvIHNsaWRlIHdpdGhvdXQgcGFkZGluZ1wiKVxyXG4gICAgICAuc2V0RGVzYyhcIldoZW4gZW5hYmxlZCwgdGhlIGNhbnZhcyB3aWxsIHpvb20gdG8gdGhlIHNsaWRlIHdpdGhvdXQgcGFkZGluZy5cIilcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ3pvb21Ub1NsaWRlV2l0aG91dFBhZGRpbmcnKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyB6b29tVG9TbGlkZVdpdGhvdXRQYWRkaW5nOiB2YWx1ZSB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIlNsaWRlIHRyYW5zaXRpb24gYW5pbWF0aW9uIGR1cmF0aW9uXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiVGhlIGR1cmF0aW9uIG9mIHRoZSBzbGlkZSB0cmFuc2l0aW9uIGFuaW1hdGlvbiBpbiBzZWNvbmRzLiBTZXQgdG8gMCB0byBkaXNhYmxlIHRoZSBhbmltYXRpb24uXCIpXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG4gICAgICAgIHRleHRcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdzbGlkZVRyYW5zaXRpb25BbmltYXRpb25EdXJhdGlvbicpLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgc2xpZGVUcmFuc2l0aW9uQW5pbWF0aW9uRHVyYXRpb246IHBhcnNlRmxvYXQodmFsdWUpIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiU2xpZGUgdHJhbnNpdGlvbiBhbmltYXRpb24gaW50ZW5zaXR5XCIpXHJcbiAgICAgIC5zZXREZXNjKFwiVGhlIGludGVuc2l0eSBvZiB0aGUgc2xpZGUgdHJhbnNpdGlvbiBhbmltYXRpb24uIFRoZSBoaWdoZXIgdGhlIHZhbHVlLCB0aGUgbW9yZSB0aGUgY2FudmFzIHdpbGwgem9vbSBvdXQgYmVmb3JlIHpvb21pbmcgaW4gb24gdGhlIG5leHQgc2xpZGUuXCIpXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG4gICAgICAgIHRleHRcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdzbGlkZVRyYW5zaXRpb25BbmltYXRpb25JbnRlbnNpdHknKS50b1N0cmluZygpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IHNsaWRlVHJhbnNpdGlvbkFuaW1hdGlvbkludGVuc2l0eTogcGFyc2VGbG9hdCh2YWx1ZSkgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICB0aGlzLmNyZWF0ZUZlYXR1cmVIZWFkaW5nKFxyXG4gICAgICBjb250YWluZXJFbCxcclxuICAgICAgXCJDYW52YXMgZW5jYXBzdWxhdGlvblwiLFxyXG4gICAgICBcIkVuY2Fwc3VsYXRlIGEgc2VsZWN0aW9uIG9mIG5vZGVzIGFuZCBlZGdlcyBpbnRvIGEgbmV3IGNhbnZhcy5cIixcclxuICAgICAgJ2NhbnZhc0VuY2Fwc3VsYXRpb25FbmFibGVkJ1xyXG4gICAgKVxyXG5cclxuICAgIHRoaXMuY3JlYXRlRmVhdHVyZUhlYWRpbmcoXHJcbiAgICAgIGNvbnRhaW5lckVsLFxyXG4gICAgICBcIlBvcnRhbHNcIixcclxuICAgICAgXCJDcmVhdGUgcG9ydGFscyB0byBvdGhlciBjYW52YXNlcy5cIixcclxuICAgICAgJ3BvcnRhbHNGZWF0dXJlRW5hYmxlZCdcclxuICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJNYWludGFpbiBjbG9zZWQgcG9ydGFsIHNpemVcIilcclxuICAgICAgLnNldERlc2MoXCJXaGVuIGVuYWJsZWQsIGNsb3NpbmcgYSBwb3J0YWwgd2lsbCBjaGFuZ2UgdGhlIHNpemUgb2YgdGhlIHBvcnRhbCB0byB0aGUgb3JpZ2luYWwsIGNsb3NlZCBzaXplLlwiKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnbWFpbnRhaW5DbG9zZWRQb3J0YWxTaXplJykpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgbWFpbnRhaW5DbG9zZWRQb3J0YWxTaXplOiB2YWx1ZSB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIlNob3cgZWRnZXMgaW50byBkaXNhYmxlZCBwb3J0YWxzXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiV2hlbiBlbmFibGVkLCBlZGdlcyBpbnRvIGRpc2FibGVkIHBvcnRhbHMgd2lsbCBiZSBzaG93biBieSBhbiBlZGdlIHRvIHRoZSBwb3J0YWwgbm9kZS5cIilcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ3Nob3dFZGdlc0ludG9EaXNhYmxlZFBvcnRhbHMnKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBzaG93RWRnZXNJbnRvRGlzYWJsZWRQb3J0YWxzOiB2YWx1ZSB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIGNvbnN0IGtvZmlCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcclxuICAgIGtvZmlCdXR0b24uY2xhc3NMaXN0LmFkZCgna29maS1idXR0b24nKVxyXG4gICAga29maUJ1dHRvbi5ocmVmID0gJ2h0dHBzOi8va28tZmkuY29tL1g4WDI3SUEwOCdcclxuICAgIGtvZmlCdXR0b24udGFyZ2V0ID0gJ19ibGFuaydcclxuXHJcbiAgICBjb25zdCBrb2ZpSW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxyXG4gICAga29maUltYWdlLnNyYyA9ICdkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQk5jQUFBR1ZDQU1BQUFEcW5lZldBQUFBM2xCTVZFVUFBQUQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLzlmWC83T3p2NysvLzR1SC8yZG4vMmRqZjM5Ly96YzMveWNqL3c4UC93TURQejgvL3Viai90N2YvcjYvL3FxcS92Ny8vbzZQL25aei9tNXYvbHBiL2taQ3ZyNi8vaW9uL2g0Zi9ob2IvaG9YL2hJUC9nSC8vZlh6L2ZIdi9lWGlmbjUvL2RYVC9jWEgvYm03L2JtMy9hMnYvYW1uL2FXai9hR2YvWm1YL1pHVC9ZMkwvWVdIL1lHQ1BqNC8vWDE5L2YzOXZiMjlmWDE5UFQwOC9Qejh2THk4Zkh4OFBEdzhBQUFCSHFsYktBQUFBRUhSU1RsTUFFQ0F3UUZCZ2NJQ1FvTERBME9Ed1ZPQ295QUFBTHRwSlJFRlVlTnJzM1Z0dm04b2F4bkd3TWNhWXc2dWl5S3BFcEk0aTFWSXV0a1RVaTBwUlpHTU1acjcvRjlyWks5MHJUbk13ekFGbThQTzdYNmxXN2Z3N3d4eHdBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBd0J5dTUva0JLTER3UEcvdUFNQ1lab3RnSFJNb2xrYlJLdkM5bVFNQXc1b3Qxd21CVmtrVUxEM1hBWUFoTEZab21nRGh1aTB3ZGdQUWE3NUtDUWFXckplZUF3QmF1RDRlcUkwbUN0QTJBT1ZtQVlacUkxc3ZNU2NGVUdnV0VoZ2dXV0hZQnFDR3V5SXdSUm91SEFDUWhSbG9aMGdiZ0JVODdPc3dVTHJDNlFRQVRFRW5KMWxpM3k0QUJtdVRFMklWQWFBM0ROWk1sL2dZdEFIMDRXSWZyZ1hTRlhhMUFYUTJ4ektvSlVLVURhQWJuOEFhRVI2MEFYUVFFTmdFWlFPNENPZW1ySU95QVNCcjB4UGhPUnNBc2pZNVdFRUFRTlltSncyd253MEFXWnVheEhjQTRHOUxBcXRGT0JJUGdIMXJrNFBKS0FCT0dVeE9najBmQUs5Y1pHMGExaGl5QWZ4ZlJEQU5LZTdVQmNEcHFja0pNV1FEZURZbm1CQThaUU53SEJlMzQwN01Da00ydUhxNEhuZHlFdXhsZ3l2bkVVeFA0QUJjTTF6N1BVa1I1cUp3eFhCK2FxSlNMQi9BMWNLTzNPbGFPZ0RYQ1lzR0U0YXRiSENkWmdRVEZ1UENTYmhHdUhSdDJsSnMrSURyZytIYTVPRytTVkRLOWJ3Z1dFWFA2RXdhUmVzZzhEem5JZ3pYQUR2WndCaXV0MXhGQ1YyUVJNRmk1b3pMSlppKzBBR1E0aTZDS0tYdWt0RC9zbTJtM3VQQnlxcXVXdzdDNmhkbFdXNVpUcjFnV1JRR05QUERoQVFrcTdremtvUUVaTVdSZzFwdGZTeTNPZWtTSTJ3Z1pMRks2SVZGYWZPcHY4MEJ3elJ0bW1ySDZFc0lHd3pGOWNPVVpDVkwxeG5hbXZyS1NsUk50K2F3emVnVENCc01aSEVoYWtKdjdaNTV5eUNNb3BqK0ZiK3NvODVIM2VUQlRod0dhaHQ5REdFRC9XYXJoQlNLUE1lWisyRkVYMGpXZ2VlT2MrSzk1RENZOWxoazlCN0NCcm90MXFSYW5GSVg4Y29iL29LaWlzT3dQa2did2daNitRbU5LUTBYZzA1RHM0YkQ4STRGbmJ2R3NIbCtFRVpSU2kraWFCMHNQVXYvVjR6bkJnbU5MbDNOaHB1RzFoeEcwVlk1eVpNUG0rY3Rnbjk1M3N3WndId1p4cDg5amxuaTZLdHl5NVRNRUhsRHJJWmlFanF1cGlBbElzR2lMY01vcFhmaWRiQnd0YTdJSlplbUxIaFo2b1Jtb0c4bHZpT0crdGh4R0ZOYmJraUJzSC9UZ3VqU2lSbDN4RzBHYVloYmdSWHhJakpMNUdsL1hVdk9ZV3pWaHVTRk91SVNMV2ZLbi9LWXZmTnpldHlRekxOMk5aOE54WnJCMSt3cG0rOTBOUTlUNm16dE84ck1RdW9uRFZBMlNRc3pYd2VRTHAyK0l1b0lHOWU2c0tac0M2Y1RQNUtJaTN6VlVMWWh1V3N5VmVRNi9hVFVXWWJEVXgxWVVyWjBydXNKY2hyT0hGbnVpc1NrdUQ5emFvTTFvZGVxemFrakROY01VMllrSlhIMXJZc0Y3bmo3RENMcys1ak9relhoMTZvdHFCc00xNHpURmlRbDByZ3VsaTRkY2ZPWXp1Qm00RUhNelg4dmVxaGgyUUI3UEF4VTV5UmpkV0VpS0NXZU80SUNraFhoOVZ1VG1vTUtySXV1cVROYzR0R1ArWk5SWCt2WGZPV0ltTVVrTDhWRzNYNENza0xzS2w0T3hkNDFRNTBZaVV2bkFvTTFuVU8yODZCaUx2b0hIcTBKaEkwNk8zQXcwU0dUK1pvSVBHclJ1VGo1V1ZEeGxocU5YUE1mcmYwclV0czE3TWsxbDh5UUxkVDhxQ1dVMno5MWpkZVduRUhXM2dzVmIvUElPSmpxUUFxMzV5NUpwY2dWL3dWRDJJWXd0MkhGNEV5ZzluUW80NStwUzVCUjFkTHZLbXh5RXBUT05MOGlPM2FGZjhFUU5tVHRBd3VsWFN2NUp3b0NCVExHeW9OdzM5b2RDWXIwWm8wb25ZL3pDNGF3VFROcmxNNkc2RnBOb0ZER3l1T0pDemhtSkNaMFhya1JxWmZPeC9rRlE5Z21tVFdpV09WeGc1cC9qQkdvdHRrZVRzUE5SZU9aODRjWGt3N3BmTFJmc0xVRFgzQnR6QnBSb0dvLzN1ZGRPeEZvc1NtT3ZKOTJTNExDaGVzNE16OGlUV0ozdEhIRHlvR0pySVNlbVNuc0dxYWhnOXRXTGU5alI0YUszZEdtUTdqZlkzcFpvd2hkczF5L1VWdEZobHFQbFRWS2NiM0haNnc1WmZDZWo2N1pick03OGM3cWpNd1VqUGJ3T3NIYWdkVm5RaitVb0dzVHNLMTVWNDJwWWZQR3lScE9WSDFtUVRZTDBMVXAyRlMyaHkxMVI3c2hCNWQ3VEdXSHg2dlVSZGNtWVZOWkhyYkkrWkJQMnFXWWlVNW96ZUNQSmJvMkVadks3ckF0eDhrYWRyRk5iTTNnUllLdVRjYm1hSFBZVWxjd2EvTHcwdVJKUFZ6N2g0K3VUUWRyTEE3YmVxeXNVZUxBQk00WnZCR2hhMU95YSswTm15ZVlOWGxMQjg2WSs1N1FIbWJvMnBSa1IzN0dxdHNJNG5HeWhxVURyYlBRRGZ1ZmJWbXlaeGtOWm9tdVRjdTJ0ZlhrZ1Q5TzF2QytBeDJ6MEh4YlZ2WHBmUkdxWFU1RGlIVjJyU1FZMXJzaG0wVWZUREpPMWpCZ1U3d1dtdStxaG4raHJiYWszd3hkbTVxekladFY5MzM2NDJRTlQ5ak9lQ1FsSzZxV1g5WldHOUpzaWE1TlRsYnpDOXFjekJPUGt6VXNpWjZKU0Z6VzV4NEczV1ZibzJzVHRPTVhuREl5anpkTzFuQmhrWXFCTXFzRTNnR3BFYm8yUmZtSmYrMUk1Z25IeWhwRkR2eFBRb0tLaHZkMnl1a3I3Rjhrd2tQWHBpaXJMVnc3Y0FXekptL21nUGpmZlhIaVorUXZjV1psM2ZKejlhSElxSjhsdWpaTkZmOWFUc1paanBNMXJCeElEZGRZelFXMU9iMjNPYlQ4STBkR2ZZVG8ya1R0ckh2RUZvK1ZOWW9kRVB2THp3NWNYSnZSMzBwRnIxV0wwYldwS3F6Ym5odVNuQTE3bGxOZm1JZ0tEOWZZaWN1bzZLMnNWbllFRUYyYkxOYnlyMnhwU3JMaTJQSVh4NEo2d1VSVWRMaDI0SkkyOU1aUjNSSEFPYm8yV1huYmF4WWdMOXVXZFgzaXZCRTRNU01sSzF0KzVsUlFEMWdSRmR1N2x0VmNWa1huQ29VYnlqMTBiYnJ5ZHNpWktEdnljNmN5bzRIc1d0bTMxRGpYYms1OTVRMlgxdEs1RTcvZ1JKMHQwYlVKK3pwc2pGVDVlRjJzTFdrSVdTMzVNQWJYU3pwT0tQTFZrcGZUcXkyL2FFdGRCZWphK05paGJ2akg2bWVIc21BWkNTa0UvdmtUVXZLUE5CdlNMajhwdUdndWNDNXhQUzhJd2lpSzZhMDBpcUpWc1BUc0xxT2I2c2hhdjFCVi9LSURkWUt1bVdCNzRoMjBkYm5ORklldEpFV3lXdTRvcW80aGFVTTlySjNQemYxZ0hkTmxhUlFHbnFVcnE3N0dySFg5QmpZcUx3K00wTFZ4WlVmZVhWUG1zZ09wYysyR2xNZ2F1VFAyZW1iYUIrb3UrU3hwWVV6OXBGR3dzQzl1c2Jxc0NYZU5kMENkb0d1anl4cmV6K25RTTBhVi9xV0RlclFOd050VzBmTkQ1eDB2aUZJU2xJUytWVzJiU1g5cDVidTJRZGNtcE9iOU5ZV3lMeUVqQmNyUnp0Z1hhcGJQM3UxM212bnJsQ1FsSzN2ZXVyeWtYbXF1b1d1TWQ1QlJGK2phMkVvdXBDMHo2bXpUNm4zYlFjNi94a2lYUXN0K3Aza1FreUpyMzQ3TGVHUHE0OEJINnhxakx0QzFrV1V0NS9yTHR0VWJuWnAvclNGTkNvWDduUUxueFd5VmtEcVdwRzFHZlRDdURrUFhwcWprNHRxQ3Vqcm9ITEF4c1MranZJSmZsRk5ITDExemx6RnBFSm8rSWZXcGgrekUxZG1nYTFQVWNCa05vMjZ5Um1OMHFwSGVnRlZ3bGZ1ZFZvN2poYVJMRWhpOWpMQ21IZzVjblJPaGF4T1VjUUVpdHlubkdnZHNiWWR2cndZRlYvcXkxTmhQU0t2UTRJMjdLWFhIdUVJSGRHMktHSmQxeXFtVFV0dUFMZTgwMjFDdTRKMlFRV0pEMzZNd1cxRVBOZGN4RFRXeGF5MjZKb2h4ZVR2cTVLUnJ3RllJZkJ2bEZkeStyaEVsQnBadEZsSWZXNjVRVGEvTTY1cEZWK2diaG5FRnFrenlqOHBKUmluUVhta0Z0N0pyUkduZ09pWnhRK3JueEFWY1B1NkNyazBKNHdJRVQzaFhPaDdyZCt4YVNXb1YzTmF1R1RabUMxTHFoM0dGaXY0L21qcEIxOGJGdUFEQk01aWJWc1BqcjNHNlZuQ0x1MlpRMmJ5RStxcTVPaFc5a2FGclU4SDRnR0VyTldSbitLNzF5MXBEUm9vOFozenVpbnJicUY0TFBjZTVxcFYxZEcxY2pBOFl0cXhWdnc5ajhLNjl5NXAxTDZkNUVick95T1lKOVhmZzNUVlZXYkJudS9KWWQ5cFZYcXZjdDdORzE4YkQrSkJoSzlTL3dtV0VyaFg4TFV2ZlRaTXVuVkV0U2NTSmQxUVhHWjNMaTBQRFg3VlZSdThjVkM1QUJlamFlQmdmTkd3bjVWZHVETnkxdmxrN2tjSGl1VE1hTnlRUmVkZXFNZm9JS3c3MXM4OWUzNTRyT3hlSHJvMkxxVjAwdjZSUXZuSXdlTmNPdkkrQ2pCWTRJM0ZqRWxMeVRrb1NjMUkzRFNVZlhSc1A0d28xbWZnWFowZGlodTVheGZ1b3lYQWpEZG5tTVlscDlQNXJ3aFR1Ny9iUXRmRXdydEtSTGlsVnJ4c08zTFdxN3dqV2VJRXp2SGxLZ3JTTzFpNS92Z2ZxYm9hdWpVU2thNUtmZTlZcW5vZ08yN1dLVDJrVytpS2VPYThNenhyVFBraXVsQzF1TytqYWVCai9XRlcrT3RZbmRjdC9od3RKRkRCUTF5YWFOYUowNGZ5ZjRWbWprbmVRazR6aTg4MUlXK29oc3JkcjMyLy8rSzc0eC82OHYvLzErOW45L2YzdExlbkVPajVIWUx1cVZUTHoyaWhlT1J5c2E1UE4yck9WTXlBM0pXSEhBWFlNWmtYRFAzQXNxSmVWaFYyNytYSC82M0gveHVQdit6djV2TjNjUFR6dS8vYjQ4UE03NmRDaGErZnlRNnRnRWxDcm5ZZ08xYlVwWjQwb2RwMFg1cTZFL3FNWjVrcXFqSjFQVXVyNnNHUFVsMjlaMTI3dWZ1MC85ZnRlb2tBL0hwNzJuM2w2K0VIS2RldmF1YUtSM3JoWXFGMFJIYWhyMDg0YVVUcDNCaEtSQklzT2VNeHQ2dHJOejhmOUpXSUYrdkZ3K1FkL0o3WDZkNDJJbldSbm9xM1NGZEZodWpiMXJEM3puVUdzU0VKbXp3R1AxTEduYXo5ZVIycHFDL1R0L21uZnhlODdVa21rYTBTN1ZtS3p4MWVCeUVqQVVGMnIrcDY5c0U3Z0RHQkJNaGkvcUNVenJLM3AydDNUdnJ2SEhnVzZlZGgzOXFTeWJHSmRvMDB0dFhjeFZ6ekUwZCsxcThnYVVlaG9OMHRKQnJObko3UnZTZGVlcTliUDAvMDN1dWlsYXIwODNaSkNUS2hOTzZtcmVVNUtuNHpvNzlxVlpJMG9jbzErdVBiMkNuREQ5M2E1Vm5UdDluRXY0SjR1ZUtsYVg3OXZTQTNocmhGckpaNHRIVlR1OU5EZnRhdkptdjVsMFNYSkthMTVyaGs3Rm5UdDIzLzJZcDUrME5mdTkwSitraExpWGFPOEZiL0VJbGU1UXErOWExZVVOYUxZTlhYbkdsRzNUNXFSRVh3THV2YjlkUXFxZG14MSt5VHpZK1ZKZEkzeVZueE5xbFg0YjYzdXJ2WE9XbVBCbWRDUndyWW1HVloxelRXL2EzZDdLZmYwaVcrLzloSnVTWjU0MXk2RXJhWXZWUW9mc0dudVd2K3NaV1ExaldIelNJcE5YUXNkNDd2MnNKZjArSjArOG1NdjV5ZEprK29hNWNKSDlMWUtIN0RwN2xyV1hGWFdpR0xYMEVVRG03cm1tZDYxNTBHVnZEdDY2K1dSbmF3SGtpWFhOU3BFTjMxbkNoK3c2ZXphTldaTlg5Z1dKTWVpcnNXTzRWMzc5cmhYNGVFYnZmVmQ0T2VxRDV0azErZ2d1anV5VWJkWFhHUFhyak5yMnNLV2tCeUx1dWFiM3JYSHZScVBOL1JLWUE2cUoyeXlYYU5HY09XZ1ZQZUI2ZXRhLzZ3ZEo1RTFvc2pNcDJ2MmRNMHp2R3NQZTJXKzA2djcvZDZJc0VsM0xSZWNpREoxbThYMWRlMGxhMU40cFY1dm9ZbFAxeXpxMnRyc3J0M3ZGZnBCZjN4VFdNdWZKRU82YTFRS1RrVFZIZTdUMWJWcnpwcU9DOW5tSk11aXJwRnJjdGR1OTByZEVaSEFJenVOMnoza3U1YTFZdCt2UnRuQ2dhYXVHWjAxOXF4OHNXT001YVNlN3lnV2tpeWJ1clkwdUd2ZjlvcmQwVXZXbExvaGNmSmRvMExzV3UrRHNtK2xucTZabWJVTkt3OGYzOGxlMStXT2tVcHpSNjJVWk5uVXRkamdydjNhcTNhblBtdjczeVJPdW12Q3Q2a1Z5ajR4TFYzcm43VUQ2Wld4c203NUJhZHFsNU1pcWV1bzVKTTBtN3BHTTJPN2RydFg3MDRnYTFvZnNjbDNyUlM2VFMxWE51clIwYlgrV1N0SXA3eHNlRmZ0c2RpUUNySGlJMVRTaHU3YWhwWC9ZQm4xdHpTMmEwOTdEWFQ4MEJzU0o5KzFqZGdYVEhoQlZMNXJsbVZ0VzdXOHAyYTNJWG1obzQ1TEFzYnMycVk4bmY5OVp0VFQydFN1M2UxdDhVRGk1THRHTmY5WUtmUmYwVGtOWGJNc2EvbWg1VUthSWlOWi9sQm5EWXpyV2xieHZ4d3k2c2ZVcmozdHJYRkw0dVM3dGhPNkRyd1NtTDFLZDgyMnJCVU5sMURsSkNlZGpia2FtaGRsL2JkVGg2RFhuenVVakxyWXR2eWRsbEV2bnBsZHMyZTRKcmQwSU4rMWpkRENRU253NThwMXpiYXNaV1hMSmRVRlNZbVZuNkVTbUFhcTFWYU1Mam1vK0p3RE03djJ1TGZJTFFtVDd4cWRSS2FVVFBTRXFQNnVaWTBCdDBodXFwWXJjQ3BJeHVxLzdOMkJqdHkyRllWaHBIQ0NOQWlTNHlVY3dxamNoQWhxRlVGcVZLNkJ1SEVkaWVKSTRuMy9GNnBoTzdYajdzeG9lQzhwVXVML0FMdk96dWlMUkZLazFMRUd1QzNyS1Y2VHhzVWNFUmUyYk05dGVUeVUxSE1FSk9hYUMxbGoyekErc3JpdTZWaXM4ZS9WMHN2MllJdmh0V2FtcVBudTZyZ0tIN1p2c25UdDJWQlVqeENRbEd0OTBJL0kxYlhHeDJVdC9lM0taQkRjTjU5OU5LZjU0UE12di96cTY1Qyt1WWsxVDdGek9KdVIrclEvUytiYVBtY05HR3ZZWkZ3elFmOTM4d0VMUFRpdWxjT2FXVWk0azBaSUg1NUUvL1Q1bjcvK0ZveFNzY1pmUnIxSUhlTDNJSkZyKzMwTUhZWlhDRWpLTmNWWTZKSE90VkpZVXllU3ovY0k3Y0ZubjMvMURkS2xQS1dvQy9zdWRWamRGeG02OXROUVdJOFFrSkJya0hSdEJqWjByZkZibjlEU2VvclNIRXJ3dDBqYmlaTGs5ZVhiTmY1TzlWOW02TnJMb2JDZUlpQXAxMmE2TnhlRVVUTFgrS3dwU0tkT0ZLMGVKV1FvVVE3MzFkS1ZHcXp0cXd4ZEcwcnJaV1RYZ2g0cFMzTnRjOWFNcDRoTkplem1PMUdxTk83SnllMXY4SFYwMTNZL3ZQYW00bHpyRTd0V0FHdVc0dVlOY2s5VHN2b3JzMW1zY1pJOFhTdnBaWVAzUFNuTk5VUDMxMFJ5TFh2V1BqeURIdmhadENleFFvUlNkRFdzS2svWGlwczJHSWFuZTNITkpIQ056NXBURUU3UEZGYXVtL3JtUEd2d3RyRFJ2UVpyeTgrMUYwTnhQYXV1c1Z4cnZDZ1BlYTdheXY4a3dKblNaWUpjTTFoVlhOZU9NaDA2REMrcmF4ZXplYk5tUEwycHdrYWMrSzUxKzNadEtMRHEyc1ZzMXF4MWxLNmxRYjRSSjc1cnRycTJ2dXJhZmVuRXJsWFdmczluREJ1OXE3cFdYWHZmWFdHdUliRnJETmF1L3FTaVdNc2FObnBYZGEyNjlyNG4xYlZBalJyUGZMR3dsQ1gyLzh0bk84YTIwTnVxYTlXMVNLN3h2NHkyak9mUWxzdGFJVE9oUlV3ZVRKUXVWVjByb0xldUZmVGV1OG5FdFk2MlpVMTcrcVFqdzJZcFdRdXFhd1ZVWGJ1WXpaUTFOZE45SFhXQnJxRmt1ZXBhQ1czblduTU9nUUpjNjlqN1J4ZTB3UDRQV2NTcG1BRTJVMTBySVhIWCtEOGlmOWM2OWpSaU9jOWRuOWFDWDhGL2tBblZ0UktTZG8zL1ZXeXlkMjF6MWxyYUxxK1JZV3FoTkprRHVsYlk2UWFNSFhOam5rZUYzUGNwRW1ZdDJ6MnZ6elFqU21XTXNEa2MwTFVDM3cvZDhIMkQ2UXdFeUh4ZnljMVp3MFNCVFpPMXRqV21zM2FjNW4wTnNka2twcXNqdWxiZ2ZoNGJ1a2IzTjJYdTJ2YXM5UlRRTW5ZYW45VDB6bE5BZWI1MzRKS3dka1RYQ3R4L1RYdy9EL1pQY0VIM0trc3ExenFCNnlENXlyVzUxemhUTXk0N2VSSkZUNUdiRkE3cFdvSDc1WXE3eGxhbFI4N243Q1ZuamY4VTZsMkRpNW5UUHA1RVlSYUttTGZBTVYxN01oVFhUNXU1Tm9YOUJFcnNXbmFzZGJkZWpRcFgwMjRYVDZKQUYwMDI3elNPNmxxQkN6MSszTW8xUldkU1FSL1ptTUMxOUt6eDUwS3R3cXIwaVc1cFFxNDFkdklrM2V3NkJSelh0ZklXZWp4TzZOb3FJcGF3MzJ0anVaWVpheGh2NGtkamRXWXBmM1Z1VEhlTzdGcDVFNktRZG8zN0dPckNPR3dUdU5ZbFBhR0ZmNkNjNytPdGxGaFFVdFUxbm10UGg4SjZJZTRhOS9yc3dyNUJKcFpyb2F3aFRpZGEzYXh4WThZWFAzVlFYYnZvMmxFT1JuNHE3aHIzY1VxSDNlYXA2SzZOT2JCbTR2NFQxTHlEUFNhcmErZGRPOHJFd2VPTlhGTSs4UG5HMDcxNXhIYk5aVEdzUHNYZUdzbnQ4b2F0dXZZMmk0TU1zTDNHUnE1WkNwdlgxQXhJV0s0NXVpbURLSm5ZckFGdWp6ZHMxYlczV2VBWUszT2ZiK1NhOW9IemJHMFFoM3pYWEI0bkFaeWlzd2E0SGQ2d1ZkZVluOWlqb2FoK2tIZU5kMzM2d0dHNVBxNXJqckZObDJDYXdabzhiQjdGVkYxanVvWlhRMEc5aHJocm12YzQ1WEM1bWU3UFJIWE5KZDMwZ2k5T1Y4U3Z1YVhxbXBCcmgxanA4VXplTmVhU2VSUDRrZ0ppdXVZb0pBUHBsRTgwR1RzWC9mcDdkZTI4YThkNEVIMjBqV3VuNE5XZWJjQVZ4bmJONVhMWVpwL3FFVmo1c3Q4U3JhNWRjRzMvZTB1K3hDYXVqUmNVQ1h4Q2NoRmRjeFRZQk9IbVpKNmFvZytucXE2ZHY3eU9NQ1A2d3lhdWRYUStGWGpxVUJmUE5aZk4wVTFOd2pjMzdiNW1EcXByYjdNQTlyODA5elVpdU1aaXpZVmUyVHJheGV1SmtZRmtZOHA3cUhsWE13ZlZOYjVyejRaQytqR0dheHpXU0FkZTJUN1RIZkc5Z21CTHlsOXBhRTBuckV2M3A0VUNtOFlXMVRVcDEvWS9jL0FhRzdnMjBvVmM2Slh0TW5XTlpzalZwTDJEY3JRbWhSVjFFL0ZhcktxdWJlMGFuZzlGOUNPU3U2WW11cFFPdmJLN1hGMmpFV0tOYWVjcWxCY2F6R3NtNHVmYjZwcVlhN3ZlRGZ3Vm9yakcyQWJIaGU4QmtxMXIxRUtxSmZHSW5wVVp6ZXRJSnFlcWF4S3U3WDJweHhNa2RrMDU3am5pNTFpY016NXgwbXZJcEJtM2EvRnUySlowaDkvTnFyckdkbTMzTjJ3dmdMU3U5WjY3S3FLak00MFp1MFl6Wk9xU1Q4QmFnYVc1anVTYVZYV043ZHJlYjlqdUVNZTE0SE9DbHZDOXg1cWNYYU1SSXAwWWhrYThZZXRYWTh6dlZGM2p1N2J2S2RHblFEclhWTGNJZk83NnZJaFp1MFl0SlBMcGw1TTVyaldOSjlINjZ0cTYvQVhYOXJ5RzdTV1F6TFhHZWJyZUdINlZ1Y3hkOHhyODlBYkwveHZ1NzV4SU5xK3FhNnVhSXJsMk4rVGRIWkRFTldQNm1URjJzdTZwcU1uY05ackJyOXZpZGMyWnJxZHhOa1BTdWVxYWdHdTdmVXYwQ1lCSXJ0bDNUVytpOWZrbS9LdXpJSGZYYUFTN2NZdnROWHJlVS9hSnBQT3F1c1oxYmI5VEJ6K0JueUhKT3NZZzlwaS9hOVNDMjdURmtaNmE5WEsvSXZtNjZoclh0ZDFPSGJ3QUwzblhSczQzUnhmZ21tL0F6Ryt5YTlETVdUTFhrbnluNnRxMnJ1R0hJZE5lM1lHVnZHdU9zK1pnUmdHdTBhekFTakZ1Q3VNKy9TNUovN3krdWliZzJoNWZFMzNOWkUzZXRabjF4ZW1LY0kxYy9EKzNnbmd0WGUvU3hTV2ZxcTdKdUxhM0kxd2VnNVc4YTdQaW5Ndm5WUm11VVJkN0JIK0dmSXF1MXlSMXpWVFh0bmJ0N3JmaGxvcGlEU1lsYTNEOHFVWjUxNWFFUTJ5V2NVY1llWUROVk5lTzVSb2VEd0hsdkRsUkJOZG14ZnRsZWpQWEhLWjBRMndueG1MOHlLOGMyT3Jhd1Z6RFg0ZlZGY2FhbEd1T2VkZHd3bGF1T1VCNThmOVdoaEVHRWJMVnRlcGE5c3R6bjBJc2szREJxbzMxYmVTQ2JKSU5zYzJNRWZYSUg3T3JyaDNPTmZ4OXlLam40Q1R2bXUrd0p1MGo3VGRtbWF3QmZhb2hOcm9lWXRRd0ZyRFpPaCs2Vzlmd3oyRkY1YkVtNGRyY3NKL0J6RWF1V2J6dmxHaUlqY0VMSTk0djdraStwYTVmazNKdEw4dlllS3pKdXpZcTloS0hDYXdzZjgyR1d1aVczQTVkbTFPK1IrV3FhNW00aGwrR3RlVjhub0cwYTRzUmVCSXlZR1hackFGTmtoM0VHdDVRWmR3Smk0VHZ2Vk5iWGN2RnRZZnJZQ3ZpN2FtUFNuT3pCalhIdTBXeFBOWkNodGlvUVVpR01TMjVuV3NkU2JmVWZZcXljUTBQZngwdVZDaHJtQ204cVJGWlFHVTJjYTFqM1pVczZqaXVZU2JodXVwYVBxN2g3dFZ3dGxKWlEwK2hMYTNNZG9vVG1Gbk9wUlU2eEhZNmtHdUdaSnZyUHVDeXJoVU9Xd1RXb0h5Z2FwM1V1SkpHZXRlOFllL2kzeC9ITlZpU3pEZlZOV0hYeW9idEVTTFVVMEJ6aHh2U1B1cEF1V1ZjV1l4eHBPWTRyc0dSWUcwOWo0cjNxVTJRN3J2Zmhnc1Y4cTQ3K3p0N01yZ2xOYk8yaEpaM3pUY1NmNGxGSGNjMVNkaTZlaTV5Qk5mS2hVMkdOZjdsYkxYa05kV0JuUlZpRFdxK2pmY0R1WVpSN2lHMHVoYkR0VkpoWTdFbTlaMzF6c2l5T1lHZlpWeFp2Q0cyQTdtR2RpR0JUZ3JWdFRpdWxRbmJZMFRNVEhTOVpiSkcvRzVRSXlDV2Ewc2pkN0I1Y3lEWG9Ld25acE1CcW10NXV2WXBiRHRnRFlEdTNUUk4veWZabTV5MXRqVUdnYm40VjdFVmZMZlRSVDB2VGpQZU1JcStUQkhYYTkzQ1FLM1hRSFV0VzlmK0NOcytXSXVXUzdEbnRXV3d4aHhpbS9iemZ1aUVkVFVtS0FVQTFiV2NYZnNZdHNvYWd6VnFJSkVOWUMxb1RRci9ocE85WnJXNEYrNy9VSFV0YTljK3dGWlo0N0RXUXlUTFlJMTlYS1lwWXY4MVUxM0x4N1V2c25YdGQ5Z3FhNWRTcHpSWGtwVmtEUmdqRHJGTnNYWmM1R1B0a0gvN2NPMUJ2cTY5ZS9PZ3NuWXBOYk5Fa0hmdHBHSnNCVER0L1h3RHdhcHJ1YnVHdTE4cmF4ZHJsbFFYc0dYc1paaDRpTTF4Zmx5QjUyQjlVblV0ZTlmdzhKZksyb1U2bit6NnRReldFZyt4V2NaYkRKd1d1cHBCL2xYWDFyaFdBbXlsc2pZbXZId3RnN1hFUTJ3ZFhXMkJmSnF1MXlEL3FtdXJYTXNmdGtKWlV4TnZDRi9ldFJzWm5TSU5zUm02bmtaQWJFNEpCVlJkVy9kOXl4MjJRbGxyUFYzSmE4aGw1ZGVacVVoRGJFcHd2d3ZaWWIwWkJWUmRXK2xhM3JDVnlab2FHUTg5bWJnR0UybExNYi9KQU51eTVyY1dVSFV0ald0NCtLL0syaWVaaFhGTGtvMXJzSFJMWHNzOTRIcEkxOUErbG5sVTExSzVCdnlqc25ibVpvM0JXbXJYK0VOc3MrQy90WVZ3SSsxak9yUzZsczQxL0Z4WisxQzdCRXhONXVtYThuUkxvOXdTa2hPRVcraDZDZ1ZVWFV2bkduNnVyTDFQVHhUQ1dwNnV4UmxpMHlRNUl5cG42WUlTT3BwcmRrdlg4SE5sN2YwamFCQnJ1YnFHUHNZUTI1SityR3VpZmJ3ZFdsMUw2eHIrTmdqM3FqeldsUFdCckdYckdrNFJodGdjcFo0NTBMU2lEaVZVWFV2cUdyN1AvNXhRUmd6VjFyQ1dyMnRxa1I5aTY1SXI0MmhGR2lWVVhVdnJHcjQvTkd2S2VncG5MVi9YME1nUHNTbEtQTnFsYVRmRGE5VzExSzdoKytPeXBxMG5EbXNadXhaamlHM21uM1FsL3pBOW9vaXFhNmxkdzE4T3lwcHgzTmVOY25idDFpRTJKVVNsVnhESzBKcGFGRkYxTGJscitPNjM0N0dtK29WLzBIZldydDA0eE9ha25tMUhDRFd2WWhSbFZGMExjSTBQMjhGWWEwOTBRNzdGL1dYdEdocFBKR3YzT2lrTlJPcUpkclBLbzdxMmlXdjQ3ajhEdCtmRnNOWTZMM1FjY2Q2dW9RczRUSjd4ejVYZHlFbjdQVDJHVnRlMjJYdmw3dDljMWxCRXF2c1lOZTVsbXJscitHOTc5NkxyS3BLZEFiaTQyTWFZeStvaENza0lxVVU2a25PUmtqQlJFaW10eE1JWVRMMy9DODNadTNlZjJXZVBNUVYxZ2NMLzl3QjBIK1A5dTZyV3FxcEc4VDgwNStabW9oM2ZVRFVVdWZZN011eW4vOWwrckpWMXh5ZHJhTmphY3kzckZQOVRXMjVxRUhYbGZFUFZVT1NhUks3SkJ0dVdZeTA3MXkyZm9hL29pYlhubXZJbHRrcDhTaXUvTVhRN1Ribkl0ZS9JdlAvWVpxemxaWDI3ODNtNmdwNVpmYTRwWDJMcjVhZTA0bm04alJ1UmtXdXl1YmJVTHZoL29WWEt5NnErdFZ6Q05hT24xcDlycXBmWWF1RUh5ZFlNTmxVMVFLNUo1NXI1WVB1RkZwV1hkVjFYNWU4dTlUZHQyL0pSOHUwZEZ1U2E0aVcybkF1NlNmNC9iNnRxc0pWY2Mrek1OZnJGdWxpck9pNUI4bzUxQzNLTmNyVkxiQTBYMUdSeXNiYWRvencybEd2TTBseWpuKzJLdGFFYkNhd1lyRW5sbXJhcmtndDZLdGZlSDFQMGZIdkROZVRhQjFySXp6YkZXc1Z0SHF6SjVKcStxNUx2bWFvRnV5Nm5HY3FlYjNDNGhsejdRRXY1ZTNzT3g2MjRKdmVTaE5pUmE5Uk5pM1JWQXpiZWw3TjJUMjF4dUlaY2s4NDErYzJpbHNSYXdmWG9heEprU2E1TlhHSzdxS3V3WG1tYTdNYTVSY08xeUNjaHlMWHZhRGwvKzZzVnNVWWQxNkxKeVF4RHVhWjZpUzNyZFRVQWZyNXQzNEpyM3BNOVl5UUV1ZllkTGVnUC95dVVhdiszYkt4VlhJZTJKRk5NNVpycUpiWmFSdy9nbHp2QjFuOXRhTFJuRExrMnFGcGRycjN2cWJMZ1hLS2I5YWxtTHRlb1ZibkVkcDg0cmM5SVFON3czMWx3UUZIb01ZWmNlNkpjWTY3UlQzOWFmYXdSVis1K0pwTk01bHFtY29tdDVGeHBzczFJTmQ1bnRKalQzbUVNdVRac3RibEc5TzlyajdYQzlyRWFtY3cxS2xVdXNUVjhxdVpNdzdLcTVWTmRhQm5wYjZHR1hIdG14YmxHLzdUeVV5UkwrMVBOWks1UnJYQ0pMZXY1Wkgxenp1aUJ2THJ4ejFhODRUME9EeDc3QnJrMllzMjVScitzK3dDUGtxdlROem1aWnpMWEZDK3huZmtzWFZPWEJYMVhudWVldE5Mbk5FVzZEOElvaWxLYUpZNmlLQWgyUG51RFhMTTkxK2puTmNlYXdseTdYekpTWWVXNWx2VUtieFM5Y2dsOSt3MlhVZEVrSVZNQnViYU5YQnZjZXZCdnBJMzVYR3RLa21SSnJrMzh4TzcwVE5ieEJUVTBqWXRjTTU1cjYrek8rUWkyL3plNkpkUjhyclZWUnZJc3lUVzZLQndURlQwM1JINUhmY1NRYThpMXovN20xN1hHR2xWY1ZuZkpTUVZyY28xdVhGMC9mOFVOa1Q5bGZJZGNRNjc5NkErL3JqVFdxT1pTV29XaFprMnVaWGVGSnhaZCtVTE9ORTNDa0d2SXRTOSsray9kVzBMTjU5cTlVVHY5dENiWHFPQUtONjNmK0NKcW1taVBYRk9XYS9GV2NvM29UMXBqelhTdTliZExRYXBaazJ0MGtaeUlMbDg3YUdpaTFFR3VLY3UxYUR1NVJ2LzZsMDBHNm1QTlpLNTFqYlpNU3hNYVp6elhKQWRaTkNLN2MrTnVORlhBa0d2SXRVZitZWHp2bEhudDFFZ3JNOUlqK2EwTDNkMUhOTUo0cnNsbFVVa0R6QlZGNVE4WFR4M2tHbkx0c2IvNzc3ZFkrNi9sWW0xK3J0M2JhMTBXcEUrNlo5LzVNWTB5bjJ1enM2aWM4ckNWeGhvRkRMbUdYQnZ5eDMvK3h6L1NxblI4V05lMmJWM1haWm1SYnJITFBqdVNrQVZ6alNvbEhXeGZnMjJ0c1pZNnlMVWxjaTJ6STlmV1o3Q0laMVRzc0IvdFNkaEN1VWFOc2x3ekhHeHRScE1kR0hKdGlWd2o1Tm84Z3lsZzBzbGhYeDFKMUVLNUpsN0hMQVdmWmtoRDB5WHNSWEt0Uks1dFFybUdYQXVsV253RWMrMUNxaFc5c2x3ekdHeFhtbUcvbGx5citLaWM1a0t1YmNaNUJaL2JuajNpcGlUc3NzdzUvaFVYa3BHWWhodFEwUXdSVTBXKy8zNFV5U2pWdlU1S2tHdUxxUmYvM0ZLUFBSYVFzSktQeTBtOVJ1MkZUeGV1VzEvUUhQNXFjaTNUZmI4V0g5T1RxRWhqcnRVRXo5eVdQdDhwZHRpUWhJVHhVVDNwMEttZCtCVjNneFVEY1NIVGpZVGROVjlFMHlucWFFYXVMYXBiT05lT2JOaWVoTjJXdUhkSjhLcmtnc1JsTjY3UmhXWkpIYVpiVEtLdWZNU1pwTlRxSnZJbjVOcGlsajMzUHQyekp4d1NWdkV4WjlMaXJQb0tnVXZQTmVrS211ZkF0SXRJVktGNVhKNHJXMTZqZ0EwNmtSRGsya3lseEdCYlh1eXArYllMVEUvdXBNbFZkYjBpYjdrV05jMFVNZjFDRXRacWJ1ZHBsWTM3QXpZb0lBSEl0ZG5xSlQrMm82UHUyMTVKekI3a2RNcmJLczQ5VjY3TmFTNlBLYVM3UnRSbkpLbFVWbjd5a1d0THVVbk0yaVNsTzVYZmRtcVh1azh1N3dXM0xJbkw2aFhkVkIwd0EzWWs3cWE1Uy9HcWFqam9JZGVXMGt2OEtzbUpIRGJLSjNGWnY5U3Q1bWZoKzBQRjVRMVhwNjlwdnBpWjRKRzQ3RDVTckpTVWRZcWFTSlQ4WXQrUmE5TVZFb3V2VXRJREUrRFNCRVV2MGJVbHBlWkR1cHptS2x0bHFaYlJmS25IakpCNDAyS2pZL1BQajVUa1dqdTB6QWZEcmd1VlF5T1hDVWxvZ3FLWGlEVXB6WEM3bUlTeVVaUnFNZzdNaklnazNyUmc3TWcvdjZBSmpqcHpyU1VZMWkweWUwOFBUTkNKcGlnNmlXK2psSXVlVHpGdmVpNmxxMGpPaVJrUzBCVEZmZVJuUkZMZUtZak52YzVjNndnRzVYeUpza0hrTWxFSG1pUzdQa3FYakNhSmFZYnl6cjlxQzVLWFZSMmZxMjlLa2lMZmtTdGZPQkIvMC8yRjFNbXU4ajlUcnBKY2ExWjg0ZnRhMVh4QVJ0cWtCL1hMeWNNam5QNmEwMFJPVEhOVWQvN1pyU1JGOHV1ZHozQ3JNcExtTTFNY21paHZwczIzWlovZjVEUk5vcVlpVnZQSENvSWhkMjU4a0JzNmJJcUVwc3JPMTVhLzY5dnJtU2FMbVpQU0xNWHYvK0ZXOWYyRFJkM3hLZnIzVUpOM1lPWkVORlZXM1RyK1R1aEZ6M2grOC9IOGJzNExQYXJKdGN0Z1F5WU1LTG5wdzNKalg2SVAzWXlBTVovVzV1T1BURWhibDZUR2lSbDBvSTNacWNtMWN2QnZGQVkwM093aFJlbEJZdG5GRkU5MDljTzhyS3h2SFIvV3Q5ZXFJR1ZpaHhuazByYWtpdnBhY283Q3dUUTVOOXU5ZG5UWWRDbVpsWHhNaXRZckw2djYycmJ0L2NmYmRjNWxSa3FsTGpNcXBrMEpGZVVhOFFFNXdVTU5ON25wL2VTeU9ZNWtWc0RlT0NtOVBJOTlnb25vVkR0VkM4Y3RGdGdteVUzdUVZOThObzlIWnIybjd6cVgyTXphTThNYzJwSkVXWm5reXRHWk8wWERqWFY1Ukw0dDA1T0l2Vm52RXBzeEJ5WnY5VFVpalFKbC85Z0tFOUVwQ21NbnkwWStrN0FuazNhZnRqcThzcENadE1FeHNxTnNmMFhPY2FUSEJLMmhrMlVqbjhsSnlKeUVmZWNrOUxvZXhSb3FCeE9FQ2d2OTkrRkRhdUNyaTVrTFRrS1h5UXJJblAwUEszc3ZTeUxXN0JtYWErVXFYRGR1TUdBVGx2ZGNmMU51RWpoTWl1bmFaTExsQXAyNEU1dkxvcUc1VmlFYlJjSXFqZ0dicUU3L1BadW5uWFVOQUh2MjV0V1gyRTRPZXdRRE5uR3V5a2wzeGpuSElXeENHczcxTnE4bGdXdmZ6M2pDM3J6NkVsdklGckg2ZnVnSlFyVkhjTjA0eDYzdklpck9kWDVVYWVpekoxYTdtV3JIM3J6NEVsdklCcUVrS2laMTFTNGJWM3pJSFRQUlR5cXRGNXljOXBiK2pFY2JuaGlKR1lzMTlMQUpDUlJIZU1ZNVIzUHVxS0xYTjF3NzdSMWI5MFNuN2xiL3ppWTRNZ2wyRlltMGlaVnZyMmc0bHRoR25YdE53N1UwM0EyRW1oVzlIZ0Y3d05sUVQ1V0FQUnVCWGFMamZPWGRlaVZIc0kycE9OY3hYSXVQbnQwTHloRjd5TnZBQUVLSTJJMnVLQjJNT21vNDBlR09ZQnR4MVhCOWNCTHVIYWFYbTVKZXFidjEzb05SaWNkRzJUOFRqUkxTS3RiUjFGTHhKeG9VRDdLV1AxWFFWRW00SDBvRXEycWl1MjB2WlF1SUhDYkE5cHBvNm5pa1UrcHBXVFMrOHllNlY3L3I0Tnp6cDY0MFJSb0ZPNGVaY2lTZGp1emRDeSt4SGRsa05pNm0rcHFYOEhaNnRzTlcvSm4rUWk4c2Iva0hKZnN5RXZZRHF4ZGVJdmFFK3dKTGJPbU9yY2VKdERsb0hvRWZkZjFTMy9sVDNjdDI2R1kxSDNPbUtZNU1EL1BqcHE4bitiOWVlMjdzTWpHV3YrbFE4OEVob2JZSjk1bVB1TDNrY1d4NTNmTXhONXJFWXoreWQwVTVkVjlsMytLQWdDM00wQWEyaytiZ2pCMTlkM2UwZkV4N3BoZFRObnhjbjlFVU1kUElhTTlGNnIzT2h1eEhFcDlOWVBHYmpoMjlJOExZMGJpNUl1LzVxUHYxaFNvSWhlQjk0U1ZOc21jL3NQZnJubnF2MFM0NllQSTFZZGErNmMreDQycDV2dFlhLzRXTHVGL1BMOUQya1orYk94ZFQweVNwdzM1azY5Yzk5UmJxZzQrZFEwckxXdWRnVGN1Yi9obzdicXorK1pvWFZsb3U2SDZyenlVWlZzNVNqN2kyRC9SYzNJMm1DZGtpdkpqVVNqemxiWlRpSDZBYjBjSUN0bGFxMy9USjBWdWNpQjNkdS96em5zTkVYVWJUdU93aDIycGxzU056NktGOG9Pd1NXbERrc3ZWUys2WkQ5cFVUa1VLaG83L1ovTXhobXI2Z2FTSzJGQ2NrZFVKbmlhblI1M1l4SjZDbEpEdTJhaXJmOUVIelRwSWpteVdsU1dvT1dtT05mUGFVSlVjK0hOZ29MV3N5c2ZmNXFTRXRJVjN2RkZUNW0wNTl2VVB3ZEdkb0UwM0RRV2VzSld4SlhrSXFKSjdVOTFEZGo3c2ZrV2xwNERBTCtBa3BFTGw2djBteForeGd3WmFEdmxpalBWdVVjeVJKYzY4bjhWT1NNbENCTkoxczRab1gxajV6VGlRdDBQeE5PaHJjSEpoMUhJUmp6YTdobXBJZjhtUzMwS0xQUjd1WWZMSzlRS3E5MmFVa0pmYjBmcE5pMzl3eE5RaTJTYkZtMjNCTndYcDc0Q3dUcVpISDNza24yOFpub0lxR1ZPbEI3emNwRFV6ZnRaWmhLaXFpSzhqQzRack1lcnY4Z0dXZktweUNtcTBnSkh2TFVvMUp0ZmtkSGIzZnBOQXhmV1VxaWdkQzJveXNISzdKZkI4algzNndtTTdLbFBFSEh4TFM2TFR5emc3Rlk5blExZjU4ODRjNW9OMUR3SlZtaUptUWxTYWIwSmRSSW9CazA5UVBTWThrc0dsWlRmcGpTWSt1M205UzZDNTJpdVlaT3crZTZVdDZZMVB2bW1UQUpBZUhxYktQTlAyUk9mdVlWRXZEbGU0REZlY0dDUW1MOTQ3VzV5Y0haOG5UdDNKVUQ0YmRNbnBuelZhREFkNHhJUkdKNml1ejNFTXNsaWs3bVNmTFMwTmI1NTlmN01KVTY0djJKWjZ2ZGNDR3VhaXcva3dmTE5rWitvd1hSUFJjRkhoTUEvY1EwVlB4Y1Rmenlmc1RxWkFjTnhKcXY5a2RZNjB2Mmg5N2ZoeDRxemd1dFVCZDlKRnJSdk1jMlVyNXdTbW1SK0pUNEd2K0R5ZjBRQ0o5cjQxL2pFbEdlanJZdktZMndOa0ZVVW9QSktmQVYvVDhaT2o1em5wMmkxMnd5dlpWVzlCTTZicjdCRHovRUFUUmgxTVFISHlQR2VIN1FSQkdINDVCNFB0TUNjY1BJcG9qT1IwOHRtSCs3c3NIN3FsL29VZVJGeW92b1hreVRFWi8wSmIwd2Q0ZWo1Zmk3UWRHS0RRNFFGMzN6dytvdVRFMVJ5L2I0MVN6dm1qd1F2eDlFRVlKUGZFMnNQQTNQVXJicG9obXkyck1SdDgwSlVsSU43aGNZeDNQOS9mQnV6Q0t3dURkenZmeGFxemxwalJmVnIxODA4ZjlrcEdVQXdNQTFRS1NrbC92L0dVTlhjS0ZXU2pBd21LU1ZOUXZPV3JyNm9LR1lCWUtzQ3lQNUdYVjlhV3lyVlYxcGVDbUdqd0JCRmt3RS8ydXZGeGI2eXNKN1pCci9hRXFjeEt6MnF2MUFGNUFUQW9WWlZtcmRDbVZLR2lGWXJSRUFXaXNpY0lDVXZSRkFlaXpKOUFDaTJzQXl3a0pqTFBndGtrQXE4VUV5cUZtQVBBRWx0aTJCelVEQUN1NjJBQ3hCakFCYWdmYmdsSW93QnRyMm5NQnNRWWdDa1hSelVDc0FYeURZTnNTeEJyQU93VGJkaURXQUQ0ZzJMWUNzUWJ3SFlKdEd4QnJBSjhnMkxZZ1Fhd0JmSVpnc3gvYWNRSCtDdnJZN0haQ3JBRThnSjBIRmpzeUFGaUloMDN3T3FTNDJCMWdRUzZPTFZJdlJzVUFZRkVPcWdkWVdnUFluRDNtb3BpREFteU5oN21vT2pHdVB3WlloeU1CYmpJQTJCZy9JWkFYb1dBQXNDSU9obXpTMGdNRGdGWHhJZ0laSWNxZ0FGT2hNTHBxbUlJQ3JKT0REYU16SmJqUUhXQzFYSFRwenBDZ1pRMWcxWkJzU0RXQTdVR3lUUkVqMVFDczRCNVJRUkJ6OGhrQVdNSTVvRkYzVkhyRW5pa0F1L2lZamo1MXdnUVV3RUxPSGh2aUI4UUhETlVBYk9VZUVHMElOWUROY2Zjbmd1OU9lNFFhd0NiNFJ3emJ2b2tDbEQ4QnRzVHhnK2lGdXorU0V6SU5ZSnZjWFhCNnNaRmJGSVhCRHBFR3NIV2Vmd2pDYUJXanQyaWFNSGpHL3dvcmFRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFHREFud0VIRVVHTUg1dndjd0FBQUFCSlJVNUVya0pnZ2c9PSdcclxuXHJcbiAgICBrb2ZpQnV0dG9uLmFwcGVuZENoaWxkKGtvZmlJbWFnZSlcclxuICAgIGNvbnRhaW5lckVsLmFwcGVuZENoaWxkKGtvZmlCdXR0b24pXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNyZWF0ZUZlYXR1cmVIZWFkaW5nKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgbGFiZWw6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZywgc2V0dGluZ3NLZXk6IGtleW9mIEFkdmFuY2VkQ2FudmFzUGx1Z2luU2V0dGluZ3MpOiBTZXR0aW5nIHtcclxuICAgIHJldHVybiBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldEhlYWRpbmcoKVxyXG4gICAgICAuc2V0Q2xhc3MoJ2FjLXNldHRpbmdzLWhlYWRpbmcnKVxyXG4gICAgICAuc2V0TmFtZShsYWJlbClcclxuICAgICAgLnNldERlc2MoZGVzY3JpcHRpb24pXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICB0b2dnbGVcclxuICAgICAgICAgIC5zZXRUb29sdGlwKFwiUmVxdWlyZXMgYSByZWxvYWQgdG8gdGFrZSBlZmZlY3QuXCIpXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZyhzZXR0aW5nc0tleSkgYXMgYm9vbGVhbilcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IFtzZXR0aW5nc0tleV06IHZhbHVlIH0pXHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJSZWxvYWQgb2JzaWRpYW4gdG8gYXBwbHkgdGhlIGNoYW5nZXMuXCIpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICApXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNyZWF0ZURlZmF1bHRTdHlsZXNTZWN0aW9uKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgbGFiZWw6IHN0cmluZywgc2V0dGluZ3NLZXk6IGtleW9mIEFkdmFuY2VkQ2FudmFzUGx1Z2luU2V0dGluZ3MsIGFsbFN0eWxhYmxlQXR0cmlidXRlczogU3R5bGVBdHRyaWJ1dGVbXSkge1xyXG4gICAgY29uc3QgZGVmYXVsdE5vZGVTdHlsZXNFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RldGFpbHMnKVxyXG4gICAgZGVmYXVsdE5vZGVTdHlsZXNFbC5jbGFzc0xpc3QuYWRkKCdzZXR0aW5nLWl0ZW0nKVxyXG5cclxuICAgIGNvbnN0IGRlZmF1bHROb2RlU3R5bGVzU3VtbWFyeUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3VtbWFyeScpXHJcbiAgICBkZWZhdWx0Tm9kZVN0eWxlc1N1bW1hcnlFbC50ZXh0Q29udGVudCA9IGxhYmVsXHJcbiAgICBkZWZhdWx0Tm9kZVN0eWxlc0VsLmFwcGVuZENoaWxkKGRlZmF1bHROb2RlU3R5bGVzU3VtbWFyeUVsKVxyXG5cclxuICAgIGZvciAoY29uc3Qgc3R5bGFibGVBdHRyaWJ1dGUgb2YgYWxsU3R5bGFibGVBdHRyaWJ1dGVzKSB7XHJcbiAgICAgIG5ldyBTZXR0aW5nKGRlZmF1bHROb2RlU3R5bGVzRWwpXHJcbiAgICAgICAgLnNldE5hbWUoc3R5bGFibGVBdHRyaWJ1dGUubGFiZWwpXHJcbiAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT5cclxuICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgIC5hZGRPcHRpb25zKE9iamVjdC5mcm9tRW50cmllcyhzdHlsYWJsZUF0dHJpYnV0ZS5vcHRpb25zLm1hcCgob3B0aW9uKSA9PiBbb3B0aW9uLnZhbHVlLCBvcHRpb24ubGFiZWxdKSkpXHJcbiAgICAgICAgICAgIC5zZXRWYWx1ZSgodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZyhzZXR0aW5nc0tleSkgYXMgeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSlbc3R5bGFibGVBdHRyaWJ1dGUuZGF0YXNldEtleV0gPz8gJ251bGwnKVxyXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSB0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKHNldHRpbmdzS2V5KSBhcyB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9XHJcblxyXG4gICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ251bGwnKSBkZWxldGUgbmV3VmFsdWVbc3R5bGFibGVBdHRyaWJ1dGUuZGF0YXNldEtleV1cclxuICAgICAgICAgICAgICBlbHNlIG5ld1ZhbHVlW3N0eWxhYmxlQXR0cmlidXRlLmRhdGFzZXRLZXldID0gdmFsdWVcclxuXHJcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7XHJcbiAgICAgICAgICAgICAgICBbc2V0dGluZ3NLZXldOiBuZXdWYWx1ZVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnRhaW5lckVsLmFwcGVuZENoaWxkKGRlZmF1bHROb2RlU3R5bGVzRWwpXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IENhbnZhc05vZGVUeXBlIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3R5bGVBdHRyaWJ1dGVPcHRpb24ge1xyXG4gIGljb246IHN0cmluZ1xyXG4gIGxhYmVsOiBzdHJpbmdcclxuICB2YWx1ZTogc3RyaW5nIHwgbnVsbCAvLyBUaGUgZWxlbWVudCB3aXRoIHRoZSBudWxsIHZhbHVlIGlzIHRoZSBkZWZhdWx0XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3R5bGVBdHRyaWJ1dGUge1xyXG4gIGRhdGFzZXRLZXk6IHN0cmluZ1xyXG4gIGxhYmVsOiBzdHJpbmdcclxuICBub2RlVHlwZXM/OiBDYW52YXNOb2RlVHlwZVtdXHJcbiAgb3B0aW9uczogU3R5bGVBdHRyaWJ1dGVPcHRpb25bXVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgQlVJTFRJTl9OT0RFX1NUWUxFX0FUVFJJQlVURVMgPSBbXHJcbiAge1xyXG4gICAgZGF0YXNldEtleTogJ3RleHRBbGlnbicsXHJcbiAgICBsYWJlbDogJ1RleHQgQWxpZ25tZW50JyxcclxuICAgIG5vZGVUeXBlczogWyd0ZXh0J10sXHJcbiAgICBvcHRpb25zOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnYWxpZ24tbGVmdCcsXHJcbiAgICAgICAgbGFiZWw6ICdMZWZ0IChkZWZhdWx0KScsXHJcbiAgICAgICAgdmFsdWU6IG51bGxcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdhbGlnbi1jZW50ZXInLFxyXG4gICAgICAgIGxhYmVsOiAnQ2VudGVyJyxcclxuICAgICAgICB2YWx1ZTogJ2NlbnRlcidcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdhbGlnbi1yaWdodCcsXHJcbiAgICAgICAgbGFiZWw6ICdSaWdodCcsXHJcbiAgICAgICAgdmFsdWU6ICdyaWdodCdcclxuICAgICAgfVxyXG4gICAgXVxyXG4gIH0sXHJcbiAge1xyXG4gICAgZGF0YXNldEtleTogJ3NoYXBlJyxcclxuICAgIGxhYmVsOiAnU2hhcGUnLFxyXG4gICAgbm9kZVR5cGVzOiBbJ3RleHQnXSxcclxuICAgIG9wdGlvbnM6IFtcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdyZWN0YW5nbGUtaG9yaXpvbnRhbCcsXHJcbiAgICAgICAgbGFiZWw6ICdSb3VuZCBSZWN0YW5nbGUgKGRlZmF1bHQpJyxcclxuICAgICAgICB2YWx1ZTogbnVsbFxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ3NoYXBlLXBpbGwnLFxyXG4gICAgICAgIGxhYmVsOiAnUGlsbCcsXHJcbiAgICAgICAgdmFsdWU6ICdwaWxsJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ2RpYW1vbmQnLFxyXG4gICAgICAgIGxhYmVsOiAnRGlhbW9uZCcsXHJcbiAgICAgICAgdmFsdWU6ICdkaWFtb25kJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ3NoYXBlLXBhcmFsbGVsb2dyYW0nLFxyXG4gICAgICAgIGxhYmVsOiAnUGFyYWxsZWxvZ3JhbScsXHJcbiAgICAgICAgdmFsdWU6ICdwYXJhbGxlbG9ncmFtJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ2NpcmNsZScsXHJcbiAgICAgICAgbGFiZWw6ICdDaXJjbGUnLFxyXG4gICAgICAgIHZhbHVlOiAnY2lyY2xlJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ3NoYXBlLXByZWRlZmluZWQtcHJvY2VzcycsXHJcbiAgICAgICAgbGFiZWw6ICdQcmVkZWZpbmVkIFByb2Nlc3MnLFxyXG4gICAgICAgIHZhbHVlOiAncHJlZGVmaW5lZC1wcm9jZXNzJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ3NoYXBlLWRvY3VtZW50JyxcclxuICAgICAgICBsYWJlbDogJ0RvY3VtZW50JyxcclxuICAgICAgICB2YWx1ZTogJ2RvY3VtZW50J1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ3NoYXBlLWRhdGFiYXNlJyxcclxuICAgICAgICBsYWJlbDogJ0RhdGFiYXNlJyxcclxuICAgICAgICB2YWx1ZTogJ2RhdGFiYXNlJ1xyXG4gICAgICB9XHJcbiAgICBdXHJcbiAgfSxcclxuICB7XHJcbiAgICBkYXRhc2V0S2V5OiAnYm9yZGVyJyxcclxuICAgIGxhYmVsOiAnQm9yZGVyJyxcclxuICAgIG9wdGlvbnM6IFtcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdib3JkZXItc29saWQnLFxyXG4gICAgICAgIGxhYmVsOiAnU29saWQgKGRlZmF1bHQpJyxcclxuICAgICAgICB2YWx1ZTogbnVsbFxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ2JvcmRlci1kYXNoZWQnLFxyXG4gICAgICAgIGxhYmVsOiAnRGFzaGVkJyxcclxuICAgICAgICB2YWx1ZTogJ2Rhc2hlZCdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdib3JkZXItZG90dGVkJyxcclxuICAgICAgICBsYWJlbDogJ0RvdHRlZCcsXHJcbiAgICAgICAgdmFsdWU6ICdkb3R0ZWQnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnZXllLW9mZicsXHJcbiAgICAgICAgbGFiZWw6ICdJbnZpc2libGUnLFxyXG4gICAgICAgIHZhbHVlOiAnaW52aXNpYmxlJ1xyXG4gICAgICB9XHJcbiAgICBdXHJcbiAgfVxyXG5dIGFzIFN0eWxlQXR0cmlidXRlW11cclxuXHJcbmV4cG9ydCBjb25zdCBCVUlMVElOX0VER0VfU1RZTEVfQVRUUklCVVRFUyA9IFtcclxuICB7XHJcbiAgICBkYXRhc2V0S2V5OiAncGF0aCcsXHJcbiAgICBsYWJlbDogJ1BhdGggU3R5bGUnLFxyXG4gICAgb3B0aW9uczogW1xyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ3BhdGgtc29saWQnLFxyXG4gICAgICAgIGxhYmVsOiAnU29saWQgKGRlZmF1bHQpJyxcclxuICAgICAgICB2YWx1ZTogbnVsbFxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ3BhdGgtZG90dGVkJyxcclxuICAgICAgICBsYWJlbDogJ0RvdHRlZCcsXHJcbiAgICAgICAgdmFsdWU6ICdkb3R0ZWQnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAncGF0aC1zaG9ydC1kYXNoZWQnLFxyXG4gICAgICAgIGxhYmVsOiAnU2hvcnQgRGFzaGVkJyxcclxuICAgICAgICB2YWx1ZTogJ3Nob3J0LWRhc2hlZCdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdwYXRoLWxvbmctZGFzaGVkJyxcclxuICAgICAgICBsYWJlbDogJ0xvbmcgRGFzaGVkJyxcclxuICAgICAgICB2YWx1ZTogJ2xvbmctZGFzaGVkJ1xyXG4gICAgICB9XHJcbiAgICBdXHJcbiAgfSxcclxuICB7XHJcbiAgICBkYXRhc2V0S2V5OiAnYXJyb3cnLFxyXG4gICAgbGFiZWw6ICdBcnJvdyBTdHlsZScsXHJcbiAgICBvcHRpb25zOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnYXJyb3ctdHJpYW5nbGUnLFxyXG4gICAgICAgIGxhYmVsOiAnVHJpYW5nbGUgKGRlZmF1bHQpJyxcclxuICAgICAgICB2YWx1ZTogbnVsbFxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ2Fycm93LXRyaWFuZ2xlLW91dGxpbmUnLFxyXG4gICAgICAgIGxhYmVsOiAnVHJpYW5nbGUgT3V0bGluZScsXHJcbiAgICAgICAgdmFsdWU6ICd0cmlhbmdsZS1vdXRsaW5lJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ2Fycm93LXRoaW4tdHJpYW5nbGUnLFxyXG4gICAgICAgIGxhYmVsOiAnVGhpbiBUcmlhbmdsZScsXHJcbiAgICAgICAgdmFsdWU6ICd0aGluLXRyaWFuZ2xlJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ2Fycm93LWhhbHZlZC10cmlhbmdsZScsXHJcbiAgICAgICAgbGFiZWw6ICdIYWx2ZWQgVHJpYW5nbGUnLFxyXG4gICAgICAgIHZhbHVlOiAnaGFsdmVkLXRyaWFuZ2xlJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ2Fycm93LWRpYW1vbmQnLFxyXG4gICAgICAgIGxhYmVsOiAnRGlhbW9uZCcsXHJcbiAgICAgICAgdmFsdWU6ICdkaWFtb25kJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ2Fycm93LWRpYW1vbmQtb3V0bGluZScsXHJcbiAgICAgICAgbGFiZWw6ICdEaWFtb25kIE91dGxpbmUnLFxyXG4gICAgICAgIHZhbHVlOiAnZGlhbW9uZC1vdXRsaW5lJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ2Fycm93LWNpcmNsZScsXHJcbiAgICAgICAgbGFiZWw6ICdDaXJjbGUnLFxyXG4gICAgICAgIHZhbHVlOiAnY2lyY2xlJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ2Fycm93LWNpcmNsZS1vdXRsaW5lJyxcclxuICAgICAgICBsYWJlbDogJ0NpcmNsZSBPdXRsaW5lJyxcclxuICAgICAgICB2YWx1ZTogJ2NpcmNsZS1vdXRsaW5lJ1xyXG4gICAgICB9XHJcbiAgICBdXHJcbiAgfSxcclxuICB7XHJcbiAgICBkYXRhc2V0S2V5OiAncGF0aGZpbmRpbmdNZXRob2QnLFxyXG4gICAgbGFiZWw6ICdQYXRoZmluZGluZyBNZXRob2QnLFxyXG4gICAgb3B0aW9uczogW1xyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ3BhdGhmaW5kaW5nLW1ldGhvZC1iZXppZXInLFxyXG4gICAgICAgIGxhYmVsOiAnQmV6aWVyIChkZWZhdWx0KScsXHJcbiAgICAgICAgdmFsdWU6IG51bGxcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdzbGFzaCcsXHJcbiAgICAgICAgbGFiZWw6ICdEaXJlY3QnLFxyXG4gICAgICAgIHZhbHVlOiAnZGlyZWN0J1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ3BhdGhmaW5kaW5nLW1ldGhvZC1zcXVhcmUnLFxyXG4gICAgICAgIGxhYmVsOiAnU3F1YXJlJyxcclxuICAgICAgICB2YWx1ZTogJ3NxdWFyZSdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdtYXAnLFxyXG4gICAgICAgIGxhYmVsOiAnQSonLFxyXG4gICAgICAgIHZhbHVlOiAnYS1zdGFyJ1xyXG4gICAgICB9XHJcbiAgICBdXHJcbiAgfVxyXG5dIGFzIFN0eWxlQXR0cmlidXRlW10iLCAiaW1wb3J0IHsgV29ya3NwYWNlV2luZG93IH0gZnJvbSBcIm9ic2lkaWFuXCJcclxuaW1wb3J0IEFkdmFuY2VkQ2FudmFzUGx1Z2luIGZyb20gXCIuL21haW5cIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2luZG93c01hbmFnZXIge1xyXG4gIHBsdWdpbjogQWR2YW5jZWRDYW52YXNQbHVnaW5cclxuICB3aW5kb3dzOiBXaW5kb3dbXSA9IFt3aW5kb3ddXHJcblxyXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogQWR2YW5jZWRDYW52YXNQbHVnaW4pIHtcclxuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKCd3aW5kb3ctb3BlbicsIFxyXG4gICAgICAoX3dpbjogV29ya3NwYWNlV2luZG93LCB3aW5kb3c6IFdpbmRvdykgPT4gdGhpcy53aW5kb3dzLnB1c2god2luZG93KVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oJ3dpbmRvdy1jbG9zZScsIFxyXG4gICAgICAoX3dpbjogV29ya3NwYWNlV2luZG93LCB3aW5kb3c6IFdpbmRvdykgPT4gdGhpcy53aW5kb3dzID0gdGhpcy53aW5kb3dzLmZpbHRlcigodykgPT4gdyAhPT0gd2luZG93KVxyXG4gICAgKSlcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgc2V0SWNvbiwgc2V0VG9vbHRpcCB9IGZyb20gXCJvYnNpZGlhblwiXHJcbmltcG9ydCB7IEJCb3gsIENhbnZhcywgQ2FudmFzTm9kZSwgQ2FudmFzTm9kZURhdGEsIFBvc2l0aW9uLCBTaXplIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IHsgU3R5bGVBdHRyaWJ1dGUgfSBmcm9tIFwic3JjL2NhbnZhcy1leHRlbnNpb25zL2FkdmFuY2VkLXN0eWxlcy9zdHlsZS1jb25maWdcIlxyXG5pbXBvcnQgQWR2YW5jZWRDYW52YXNQbHVnaW4gZnJvbSBcInNyYy9tYWluXCJcclxuaW1wb3J0IEJCb3hIZWxwZXIgZnJvbSBcIi4vYmJveC1oZWxwZXJcIlxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBNZW51T3B0aW9uIHtcclxuICBpZD86IHN0cmluZ1xyXG4gIGxhYmVsOiBzdHJpbmdcclxuICBpY29uOiBzdHJpbmdcclxuICBjYWxsYmFjaz86ICgpID0+IHZvaWRcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FudmFzSGVscGVyIHtcclxuICBzdGF0aWMgcmVhZG9ubHkgR1JJRF9TSVpFID0gMjBcclxuXHJcbiAgc3RhdGljIGNhbnZhc0NvbW1hbmQocGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpbiwgY2hlY2s6IChjYW52YXM6IENhbnZhcykgPT4gYm9vbGVhbiwgcnVuOiAoY2FudmFzOiBDYW52YXMpID0+IHZvaWQpOiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIChjaGVja2luZzogYm9vbGVhbikgPT4ge1xyXG4gICAgICBjb25zdCBjYW52YXMgPSBwbHVnaW4uZ2V0Q3VycmVudENhbnZhcygpXHJcbiAgICAgIGlmIChjaGVja2luZykgcmV0dXJuIGNhbnZhcyAhPT0gbnVsbCAmJiBjaGVjayhjYW52YXMpXHJcblxyXG4gICAgICBpZiAoY2FudmFzKSBydW4oY2FudmFzKVxyXG5cclxuICAgICAgcmV0dXJuIHRydWVcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBjcmVhdGVRdWlja1NldHRpbmdzQnV0dG9uKG1lbnVPcHRpb246IE1lbnVPcHRpb24pOiBIVE1MRWxlbWVudCB7XHJcbiAgICBjb25zdCBxdWlja1NldHRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgaWYgKG1lbnVPcHRpb24uaWQpIHF1aWNrU2V0dGluZy5pZCA9IG1lbnVPcHRpb24uaWRcclxuICAgIHF1aWNrU2V0dGluZy5jbGFzc0xpc3QuYWRkKCdjYW52YXMtY29udHJvbC1pdGVtJylcclxuICAgIHNldEljb24ocXVpY2tTZXR0aW5nLCBtZW51T3B0aW9uLmljb24pXHJcbiAgICBzZXRUb29sdGlwKHF1aWNrU2V0dGluZywgbWVudU9wdGlvbi5sYWJlbCwgeyBwbGFjZW1lbnQ6ICdsZWZ0JyB9KVxyXG4gICAgcXVpY2tTZXR0aW5nLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gbWVudU9wdGlvbi5jYWxsYmFjaz8uKCkpXHJcblxyXG4gICAgcmV0dXJuIHF1aWNrU2V0dGluZ1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFkZFF1aWNrU2V0dGluZ3NCdXR0b24oY29udHJvbEdyb3VwOiBIVE1MRWxlbWVudCwgZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgIGlmIChlbGVtZW50LmlkKSBjb250cm9sR3JvdXAucXVlcnlTZWxlY3RvcihgIyR7ZWxlbWVudC5pZH1gKT8ucmVtb3ZlKClcclxuICAgIGNvbnRyb2xHcm91cC5hcHBlbmRDaGlsZChlbGVtZW50KVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNyZWF0ZUNhcmRNZW51T3B0aW9uKGNhbnZhczogQ2FudmFzLCBtZW51T3B0aW9uOiBNZW51T3B0aW9uLCBwcmV2aWV3Tm9kZVNpemU6ICgpID0+IFNpemUsIG9uUGxhY2VkOiAoY2FudmFzOiBDYW52YXMsIHBvczogUG9zaXRpb24pID0+IHZvaWQpOiBIVE1MRWxlbWVudCB7XHJcbiAgICBjb25zdCBtZW51T3B0aW9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICBpZiAobWVudU9wdGlvbi5pZCkgbWVudU9wdGlvbkVsZW1lbnQuaWQgPSBtZW51T3B0aW9uLmlkXHJcbiAgICBtZW51T3B0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjYW52YXMtY2FyZC1tZW51LWJ1dHRvbicpXHJcbiAgICBtZW51T3B0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtb2QtZHJhZ2dhYmxlJylcclxuICAgIHNldEljb24obWVudU9wdGlvbkVsZW1lbnQsIG1lbnVPcHRpb24uaWNvbilcclxuICAgIHNldFRvb2x0aXAobWVudU9wdGlvbkVsZW1lbnQsIG1lbnVPcHRpb24ubGFiZWwsIHsgcGxhY2VtZW50OiAndG9wJyB9KVxyXG5cclxuICAgIG1lbnVPcHRpb25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKF9lKSA9PiB7XHJcbiAgICAgIG9uUGxhY2VkKGNhbnZhcywgdGhpcy5nZXRDZW50ZXJDb29yZGluYXRlcyhjYW52YXMsIHByZXZpZXdOb2RlU2l6ZSgpKSlcclxuICAgIH0pXHJcblxyXG4gICAgbWVudU9wdGlvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCAoZSkgPT4ge1xyXG4gICAgICBjYW52YXMuZHJhZ1RlbXBOb2RlKGUsIHByZXZpZXdOb2RlU2l6ZSgpLCAocG9zOiBQb3NpdGlvbikgPT4ge1xyXG4gICAgICAgIGNhbnZhcy5kZXNlbGVjdEFsbCgpXHJcbiAgICAgICAgb25QbGFjZWQoY2FudmFzLCBwb3MpXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxuICAgIHJldHVybiBtZW51T3B0aW9uRWxlbWVudFxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFkZENhcmRNZW51T3B0aW9uKGNhbnZhczogQ2FudmFzLCBlbGVtZW50OiBIVE1MRWxlbWVudCkge1xyXG4gICAgaWYgKGVsZW1lbnQuaWQpIGNhbnZhcz8uY2FyZE1lbnVFbC5xdWVyeVNlbGVjdG9yKGAjJHtlbGVtZW50LmlkfWApPy5yZW1vdmUoKVxyXG4gICAgY2FudmFzPy5jYXJkTWVudUVsLmFwcGVuZENoaWxkKGVsZW1lbnQpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY3JlYXRlUG9wdXBNZW51T3B0aW9uKG1lbnVPcHRpb246IE1lbnVPcHRpb24pOiBIVE1MRWxlbWVudCB7XHJcbiAgICBjb25zdCBtZW51T3B0aW9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXHJcbiAgICBpZiAobWVudU9wdGlvbi5pZCkgbWVudU9wdGlvbkVsZW1lbnQuaWQgPSBtZW51T3B0aW9uLmlkXHJcbiAgICBtZW51T3B0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjbGlja2FibGUtaWNvbicpXHJcbiAgICBzZXRJY29uKG1lbnVPcHRpb25FbGVtZW50LCBtZW51T3B0aW9uLmljb24pXHJcbiAgICBzZXRUb29sdGlwKG1lbnVPcHRpb25FbGVtZW50LCBtZW51T3B0aW9uLmxhYmVsLCB7IHBsYWNlbWVudDogJ3RvcCcgfSlcclxuICAgIG1lbnVPcHRpb25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gbWVudU9wdGlvbi5jYWxsYmFjaz8uKCkpXHJcblxyXG4gICAgcmV0dXJuIG1lbnVPcHRpb25FbGVtZW50XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY3JlYXRlRXhwYW5kYWJsZVBvcHVwTWVudU9wdGlvbihtZW51T3B0aW9uOiBNZW51T3B0aW9uLCBzdWJNZW51T3B0aW9uczogTWVudU9wdGlvbltdKTogSFRNTEVsZW1lbnQge1xyXG4gICAgY29uc3QgbWVudU9wdGlvbkVsZW1lbnQgPSB0aGlzLmNyZWF0ZVBvcHVwTWVudU9wdGlvbih7XHJcbiAgICAgIC4uLm1lbnVPcHRpb24sXHJcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc3VibWVudUlkID0gYCR7bWVudU9wdGlvbi5pZH0tc3VibWVudWBcclxuXHJcbiAgICAgICAgaWYgKG1lbnVPcHRpb25FbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnaXMtYWN0aXZlJykpIHtcclxuICAgICAgICAgIG1lbnVPcHRpb25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpXHJcbiAgICAgICAgICBtZW51T3B0aW9uRWxlbWVudC5wYXJlbnRFbGVtZW50Py5xdWVyeVNlbGVjdG9yKGAjJHtzdWJtZW51SWR9YCk/LnJlbW92ZSgpXHJcbiAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG1lbnVPcHRpb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpXHJcblxyXG4gICAgICAgIC8vIEFkZCBwb3B1cCBtZW51XHJcbiAgICAgICAgY29uc3Qgc3VibWVudSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgc3VibWVudS5pZCA9IHN1Ym1lbnVJZFxyXG4gICAgICAgIHN1Ym1lbnUuY2xhc3NMaXN0LmFkZCgnY2FudmFzLXN1Ym1lbnUnKVxyXG4gICAgICBcclxuICAgICAgICAvLyBBZGQgbmVzdGVkIG9wdGlvbnNcclxuICAgICAgICBmb3IgKGNvbnN0IHN1Yk1lbnVPcHRpb24gb2Ygc3ViTWVudU9wdGlvbnMpIHtcclxuICAgICAgICAgIGNvbnN0IHN1Yk1lbnVPcHRpb25FbGVtZW50ID0gdGhpcy5jcmVhdGVQb3B1cE1lbnVPcHRpb24oc3ViTWVudU9wdGlvbilcclxuICAgICAgICAgIHN1Ym1lbnUuYXBwZW5kQ2hpbGQoc3ViTWVudU9wdGlvbkVsZW1lbnQpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtZW51T3B0aW9uRWxlbWVudC5wYXJlbnRFbGVtZW50Py5hcHBlbmRDaGlsZChzdWJtZW51KVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIHJldHVybiBtZW51T3B0aW9uRWxlbWVudFxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFkZFBvcHVwTWVudU9wdGlvbihjYW52YXM6IENhbnZhcywgZWxlbWVudDogSFRNTEVsZW1lbnQsIGluZGV4OiBudW1iZXIgPSAtMSkge1xyXG4gICAgY29uc3QgcG9wdXBNZW51RWwgPSBjYW52YXM/Lm1lbnU/Lm1lbnVFbFxyXG4gICAgaWYgKCFwb3B1cE1lbnVFbCkgcmV0dXJuXHJcblxyXG4gICAgaWYgKGVsZW1lbnQuaWQpIHBvcHVwTWVudUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2VsZW1lbnQuaWR9YCk/LnJlbW92ZSgpXHJcblxyXG4gICAgY29uc3Qgc2lzdGVyRWxlbWVudCA9IGluZGV4ID49IDAgPyBwb3B1cE1lbnVFbC5jaGlsZHJlbltpbmRleF0gOiBwb3B1cE1lbnVFbC5jaGlsZHJlbltwb3B1cE1lbnVFbC5jaGlsZHJlbi5sZW5ndGggKyBpbmRleF1cclxuICAgIHBvcHVwTWVudUVsLmluc2VydEFmdGVyKGVsZW1lbnQsIHNpc3RlckVsZW1lbnQpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0Q2VudGVyQ29vcmRpbmF0ZXMoY2FudmFzOiBDYW52YXMsIG5vZGVTaXplOiBTaXplKTogUG9zaXRpb24ge1xyXG4gICAgY29uc3Qgdmlld0JvdW5kcyA9IGNhbnZhcy5nZXRWaWV3cG9ydEJCb3goKVxyXG5cclxuICAgIHJldHVybiB7IFxyXG4gICAgICB4OiAodmlld0JvdW5kcy5taW5YICsgdmlld0JvdW5kcy5tYXhYKSAvIDIgLSBub2RlU2l6ZS53aWR0aCAvIDIsXHJcbiAgICAgIHk6ICh2aWV3Qm91bmRzLm1pblkgKyB2aWV3Qm91bmRzLm1heFkpIC8gMiAtIG5vZGVTaXplLmhlaWdodCAvIDIsXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0QkJveChjYW52YXNOb2RlczogKENhbnZhc05vZGUgfCBDYW52YXNOb2RlRGF0YSlbXSkge1xyXG4gICAgbGV0IG1pblggPSBJbmZpbml0eVxyXG4gICAgbGV0IG1pblkgPSBJbmZpbml0eVxyXG4gICAgbGV0IG1heFggPSAtSW5maW5pdHlcclxuICAgIGxldCBtYXhZID0gLUluZmluaXR5XHJcblxyXG4gICAgZm9yIChjb25zdCBub2RlIG9mIGNhbnZhc05vZGVzKSB7XHJcbiAgICAgIGNvbnN0IG5vZGVEYXRhID0gbm9kZS5nZXREYXRhID8gbm9kZS5nZXREYXRhKCkgOiBub2RlXHJcblxyXG4gICAgICBtaW5YID0gTWF0aC5taW4obWluWCwgbm9kZURhdGEueClcclxuICAgICAgbWluWSA9IE1hdGgubWluKG1pblksIG5vZGVEYXRhLnkpXHJcbiAgICAgIG1heFggPSBNYXRoLm1heChtYXhYLCBub2RlRGF0YS54ICsgbm9kZURhdGEud2lkdGgpXHJcbiAgICAgIG1heFkgPSBNYXRoLm1heChtYXhZLCBub2RlRGF0YS55ICsgbm9kZURhdGEuaGVpZ2h0KVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IG1pblgsIG1pblksIG1heFgsIG1heFkgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIHpvb21Ub0JCb3goY2FudmFzOiBDYW52YXMsIGJib3g6IEJCb3gpIHtcclxuICAgIGNvbnN0IFBBRERJTkdfQ09SUkVDVElPTl9GQUNUT1IgPSAxIC8gMS4xXHJcbiAgICBjb25zdCB6b29tZWRCQm94ID0gQkJveEhlbHBlci5zY2FsZUJCb3goYmJveCwgUEFERElOR19DT1JSRUNUSU9OX0ZBQ1RPUilcclxuXHJcbiAgICBjYW52YXMuem9vbVRvQmJveCh6b29tZWRCQm94KVxyXG4gICAgXHJcbiAgICAvLyBDYWxjdWxhdGUgem9vbSBmYWN0b3Igd2l0aG91dCBjbGFtcFxyXG4gICAgY29uc3Qgc2NhbGVGYWN0b3IgPSBNYXRoLm1pbihcclxuICAgICAgY2FudmFzLmNhbnZhc1JlY3Qud2lkdGggLyAoYmJveC5tYXhYIC0gYmJveC5taW5YKSxcclxuICAgICAgY2FudmFzLmNhbnZhc1JlY3QuaGVpZ2h0IC8gKGJib3gubWF4WSAtIGJib3gubWluWSlcclxuICAgIClcclxuXHJcbiAgICBjYW52YXMudFpvb20gPSBNYXRoLmxvZzIoc2NhbGVGYWN0b3IpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY3JlYXRlU3R5bGVEcm9wZG93bk1lbnUoY2FudmFzOiBDYW52YXMsIHN0eWxhYmxlQXR0cmlidXRlczogU3R5bGVBdHRyaWJ1dGVbXSwgY3VycmVudFN0eWxlQXR0cmlidXRlczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBudWxsIH0sIHNldFN0eWxlQXR0cmlidXRlOiAoYXR0cmlidXRlOiBTdHlsZUF0dHJpYnV0ZSwgdmFsdWU6IHN0cmluZyB8IG51bGwpID0+IHZvaWQpIHtcclxuICAgIGNvbnN0IFNUWUxFX01FTlVfSUQgPSAnc3R5bGUtbWVudSdcclxuICAgIGNvbnN0IFNUWUxFX01FTlVfRFJPUERPV05fSUQgPSAnc3R5bGUtbWVudS1kcm9wZG93bidcclxuICAgIGNvbnN0IFNUWUxFX01FTlVfRFJPUERPV05fU1VCTUVOVV9JRCA9ICdzdHlsZS1tZW51LWRyb3Bkb3duLXN1Ym1lbnUnXHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgcG9wdXAgbWVudSBleGlzdHNcclxuICAgIGNvbnN0IHBvcHVwTWVudUVsZW1lbnQgPSBjYW52YXM/Lm1lbnU/Lm1lbnVFbFxyXG4gICAgaWYgKCFwb3B1cE1lbnVFbGVtZW50KSByZXR1cm5cclxuICAgIFxyXG4gICAgLy8gUmVtb3ZlIHByZXZpb3VzIHN0eWxlIG1lbnVcclxuICAgIHBvcHVwTWVudUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7U1RZTEVfTUVOVV9JRH1gKT8ucmVtb3ZlKClcclxuXHJcbiAgICBjb25zdCBzdHlsZU1lbnVCdXR0b25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcclxuICAgIHN0eWxlTWVudUJ1dHRvbkVsZW1lbnQuaWQgPSBTVFlMRV9NRU5VX0lEXHJcbiAgICBzdHlsZU1lbnVCdXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2NsaWNrYWJsZS1pY29uJylcclxuXHJcbiAgICBzZXRJY29uKHN0eWxlTWVudUJ1dHRvbkVsZW1lbnQsICdwYWludGJydXNoJylcclxuICAgIHNldFRvb2x0aXAoc3R5bGVNZW51QnV0dG9uRWxlbWVudCwgJ1N0eWxlJywgeyBwbGFjZW1lbnQ6ICd0b3AnIH0pXHJcbiAgICBcclxuICAgIC8vIEFkZCBzdHlsZSBtZW51IHRvIHBvcHVwIG1lbnVcclxuICAgIHBvcHVwTWVudUVsZW1lbnQuYXBwZW5kQ2hpbGQoc3R5bGVNZW51QnV0dG9uRWxlbWVudClcclxuXHJcbiAgICAvLyBBZGQgY2xpY2sgZXZlbnRcclxuICAgIHN0eWxlTWVudUJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGlzT3BlbiA9IHN0eWxlTWVudUJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnaGFzLWFjdGl2ZS1tZW51JylcclxuICAgICAgaWYgKCFpc09wZW4pIHtcclxuICAgICAgICBwb3B1cE1lbnVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke1NUWUxFX01FTlVfRFJPUERPV05fSUR9YCk/LnJlbW92ZSgpXHJcbiAgICAgICAgcG9wdXBNZW51RWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtTVFlMRV9NRU5VX0RST1BET1dOX1NVQk1FTlVfSUR9YCk/LnJlbW92ZSgpXHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHN0eWxlTWVudURyb3Bkb3duRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgIHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5pZCA9IFNUWUxFX01FTlVfRFJPUERPV05fSURcclxuICAgICAgc3R5bGVNZW51RHJvcGRvd25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21lbnUnKVxyXG5cclxuICAgICAgLy8gUG9zaXRpb24gY29ycmVjdGx5XHJcbiAgICAgIHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSdcclxuICAgICAgc3R5bGVNZW51RHJvcGRvd25FbGVtZW50LnN0eWxlLm1heEhlaWdodCA9ICdpbml0aWFsJ1xyXG5cclxuICAgICAgc3R5bGVNZW51RHJvcGRvd25FbGVtZW50LnN0eWxlLnRvcCA9IGAke3BvcHVwTWVudUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0fXB4YFxyXG5cclxuICAgICAgY29uc3QgY2FudmFzV3JhcHBlckNlbnRlclggPSBjYW52YXMud3JhcHBlckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgKyBjYW52YXMud3JhcHBlckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIC8gMlxyXG5cclxuICAgICAgY29uc3QgbGVmdFBvc2l0aW9uID0gc3R5bGVNZW51QnV0dG9uRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IC0gcG9wdXBNZW51RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0XHJcbiAgICAgIGNvbnN0IHJpZ2h0UG9zaXRpb24gPSBwb3B1cE1lbnVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0IC0gc3R5bGVNZW51QnV0dG9uRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodFxyXG5cclxuICAgICAgLy8gU3dhcCBzaWRlcyBpZiBpdCBpcyB0b28gY2xvc2UgdG8gdGhlIGVkZ2VcclxuICAgICAgaWYgKHBvcHVwTWVudUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCArIGxlZnRQb3NpdGlvbiA8IGNhbnZhc1dyYXBwZXJDZW50ZXJYKVxyXG4gICAgICAgIHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7bGVmdFBvc2l0aW9ufXB4YFxyXG4gICAgICBlbHNlIHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5zdHlsZS5yaWdodCA9IGAke3JpZ2h0UG9zaXRpb259cHhgXHJcblxyXG4gICAgICAvLyBBZGQgc3R5bGUgb3B0aW9uc1xyXG4gICAgICBmb3IgKGNvbnN0IHN0eWxhYmxlQXR0cmlidXRlIG9mIHN0eWxhYmxlQXR0cmlidXRlcykge1xyXG4gICAgICAgIGNvbnN0IHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgc3R5bGFibGVBdHRyaWJ1dGVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21lbnUtaXRlbScpXHJcbiAgICAgICAgc3R5bGFibGVBdHRyaWJ1dGVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3RhcHBhYmxlJylcclxuXHJcbiAgICAgICAgLy8gQWRkIGljb25cclxuICAgICAgICBjb25zdCBpY29uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgaWNvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbWVudS1pdGVtLWljb24nKVxyXG5cclxuICAgICAgICBjb25zdCBzZWxlY3RlZFN0eWxlID0gc3R5bGFibGVBdHRyaWJ1dGUub3B0aW9uc1xyXG4gICAgICAgICAgLmZpbmQob3B0aW9uID0+IGN1cnJlbnRTdHlsZUF0dHJpYnV0ZXNbc3R5bGFibGVBdHRyaWJ1dGUuZGF0YXNldEtleV0gPT09IG9wdGlvbi52YWx1ZSkgPz9cclxuICAgICAgICAgIHN0eWxhYmxlQXR0cmlidXRlLm9wdGlvbnMuZmluZCh2YWx1ZSA9PiB2YWx1ZS52YWx1ZSA9PT0gbnVsbCkhIVxyXG4gICAgICAgIHNldEljb24oaWNvbkVsZW1lbnQsIHNlbGVjdGVkU3R5bGUuaWNvbilcclxuXHJcbiAgICAgICAgc3R5bGFibGVBdHRyaWJ1dGVFbGVtZW50LmFwcGVuZENoaWxkKGljb25FbGVtZW50KVxyXG5cclxuICAgICAgICAvLyBBZGQgbGFiZWxcclxuICAgICAgICBjb25zdCBsYWJlbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgIGxhYmVsRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtZW51LWl0ZW0tdGl0bGUnKVxyXG4gICAgICAgIGxhYmVsRWxlbWVudC50ZXh0Q29udGVudCA9IHN0eWxhYmxlQXR0cmlidXRlLmxhYmVsXHJcbiAgICAgICAgc3R5bGFibGVBdHRyaWJ1dGVFbGVtZW50LmFwcGVuZENoaWxkKGxhYmVsRWxlbWVudClcclxuXHJcbiAgICAgICAgLy8gQWRkIGV4cGFuZCBpY29uXHJcbiAgICAgICAgY29uc3QgZXhwYW5kSWNvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgIGV4cGFuZEljb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21lbnUtaXRlbS1pY29uJylcclxuICAgICAgICBzZXRJY29uKGV4cGFuZEljb25FbGVtZW50LCAnY2hldnJvbi1yaWdodCcpXHJcbiAgICAgICAgc3R5bGFibGVBdHRyaWJ1dGVFbGVtZW50LmFwcGVuZENoaWxkKGV4cGFuZEljb25FbGVtZW50KVxyXG5cclxuICAgICAgICAvLyBBcHBlbmQgdG8gZHJvcGRvd25cclxuICAgICAgICBzdHlsZU1lbnVEcm9wZG93bkVsZW1lbnQuYXBwZW5kQ2hpbGQoc3R5bGFibGVBdHRyaWJ1dGVFbGVtZW50KVxyXG5cclxuICAgICAgICAvLyBBZGQgaG92ZXIgZWZmZWN0XHJcbiAgICAgICAgc3R5bGFibGVBdHRyaWJ1dGVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJlbnRlcicsICgpID0+IHtcclxuICAgICAgICAgIHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgc3R5bGFibGVBdHRyaWJ1dGVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJsZWF2ZScsICgpID0+IHtcclxuICAgICAgICAgIHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLy8gQWRkIGNsaWNrIGV2ZW50XHJcbiAgICAgICAgc3R5bGFibGVBdHRyaWJ1dGVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgLy8gUmVtb3ZlIHByZXZpb3VzIHN1Ym1lbnVcclxuICAgICAgICAgIHBvcHVwTWVudUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7U1RZTEVfTUVOVV9EUk9QRE9XTl9TVUJNRU5VX0lEfWApPy5yZW1vdmUoKVxyXG5cclxuICAgICAgICAgIGNvbnN0IHN0eWxlTWVudURyb3Bkb3duU3VibWVudUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51RWxlbWVudC5pZCA9IFNUWUxFX01FTlVfRFJPUERPV05fU1VCTUVOVV9JRFxyXG4gICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtZW51JylcclxuICAgICAgXHJcbiAgICAgICAgICAvLyBQb3NpdGlvbiBjb3JyZWN0bHlcclxuICAgICAgICAgIHN0eWxlTWVudURyb3Bkb3duU3VibWVudUVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnXHJcbiAgICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVFbGVtZW50LnN0eWxlLm1heEhlaWdodCA9ICdpbml0aWFsJ1xyXG5cclxuICAgICAgICAgIGNvbnN0IHRvcE9mZnNldCA9IHBhcnNlRmxvYXQod2luZG93LmdldENvbXB1dGVkU3R5bGUoc3R5bGVNZW51RHJvcGRvd25FbGVtZW50KS5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLXRvcCcpKSArIChzdHlsZU1lbnVEcm9wZG93bkVsZW1lbnQub2Zmc2V0SGVpZ2h0IC0gc3R5bGVNZW51RHJvcGRvd25FbGVtZW50LmNsaWVudEhlaWdodCkgLyAyXHJcbiAgICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVFbGVtZW50LnN0eWxlLnRvcCA9IGAke3N0eWxhYmxlQXR0cmlidXRlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSB0b3BPZmZzZXQgLSBwb3B1cE1lbnVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcH1weGBcclxuXHJcbiAgICAgICAgICAvLyBTd2FwIHNpZGVzIGlmIGl0IGlzIHRvbyBjbG9zZSB0byB0aGUgZWRnZVxyXG4gICAgICAgICAgY29uc3QgbGVmdFBvc2l0aW9uID0gc3R5bGVNZW51RHJvcGRvd25FbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0IC0gcG9wdXBNZW51RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0XHJcbiAgICAgICAgICBjb25zdCByaWdodFBvc2l0aW9uID0gcG9wdXBNZW51RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodCAtIHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0XHJcblxyXG4gICAgICAgICAgLy8gU3dhcCBzaWRlcyBpZiBpdCBpcyB0b28gY2xvc2UgdG8gdGhlIGVkZ2VcclxuICAgICAgICAgIGlmIChwb3B1cE1lbnVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgKyBsZWZ0UG9zaXRpb24gPCBjYW52YXNXcmFwcGVyQ2VudGVyWClcclxuICAgICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51RWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7bGVmdFBvc2l0aW9ufXB4YFxyXG4gICAgICAgICAgZWxzZSBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVFbGVtZW50LnN0eWxlLnJpZ2h0ID0gYCR7cmlnaHRQb3NpdGlvbn1weGBcclxuXHJcbiAgICAgICAgICAvLyBBZGQgc3R5bGUgb3B0aW9uc1xyXG4gICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBzdHlsYWJsZUF0dHJpYnV0ZS5vcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0eWxlTWVudURyb3Bkb3duU3VibWVudU9wdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21lbnUtaXRlbScpXHJcbiAgICAgICAgICAgIHN0eWxlTWVudURyb3Bkb3duU3VibWVudU9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndGFwcGFibGUnKVxyXG5cclxuICAgICAgICAgICAgLy8gQWRkIGljb25cclxuICAgICAgICAgICAgY29uc3Qgc3VibWVudUljb25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICAgICAgc3VibWVudUljb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21lbnUtaXRlbS1pY29uJylcclxuICAgICAgICAgICAgc2V0SWNvbihzdWJtZW51SWNvbkVsZW1lbnQsIHZhbHVlLmljb24pXHJcbiAgICAgICAgICAgIHN0eWxlTWVudURyb3Bkb3duU3VibWVudU9wdGlvbkVsZW1lbnQuYXBwZW5kQ2hpbGQoc3VibWVudUljb25FbGVtZW50KVxyXG5cclxuICAgICAgICAgICAgLy8gQWRkIGxhYmVsXHJcbiAgICAgICAgICAgIGNvbnN0IHN1Ym1lbnVMYWJlbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgICAgICBzdWJtZW51TGFiZWxFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21lbnUtaXRlbS10aXRsZScpXHJcbiAgICAgICAgICAgIHN1Ym1lbnVMYWJlbEVsZW1lbnQudGV4dENvbnRlbnQgPSB2YWx1ZS5sYWJlbFxyXG4gICAgICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50LmFwcGVuZENoaWxkKHN1Ym1lbnVMYWJlbEVsZW1lbnQpXHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgc2VsZWN0ZWQgaWNvblxyXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRTdHlsZSA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21vZC1zZWxlY3RlZCcpXHJcblxyXG4gICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSWNvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgICAgICAgIHNlbGVjdGVkSWNvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbWVudS1pdGVtLWljb24nKVxyXG4gICAgICAgICAgICAgIHNlbGVjdGVkSWNvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbW9kLXNlbGVjdGVkJylcclxuXHJcbiAgICAgICAgICAgICAgc2V0SWNvbihzZWxlY3RlZEljb25FbGVtZW50LCAnY2hlY2snKVxyXG4gICAgICAgICAgICAgIHN0eWxlTWVudURyb3Bkb3duU3VibWVudU9wdGlvbkVsZW1lbnQuYXBwZW5kQ2hpbGQoc2VsZWN0ZWRJY29uRWxlbWVudClcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQWRkIHRvIGRyb3Bkb3duIHN1Ym1lbnVcclxuICAgICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51RWxlbWVudC5hcHBlbmRDaGlsZChzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50KVxyXG5cclxuICAgICAgICAgICAgLy8gQWRkIGhvdmVyIGVmZmVjdFxyXG4gICAgICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJlbnRlcicsICgpID0+IHtcclxuICAgICAgICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJylcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIHN0eWxlTWVudURyb3Bkb3duU3VibWVudU9wdGlvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmxlYXZlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgIHN0eWxlTWVudURyb3Bkb3duU3VibWVudU9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgLy8gQWRkIGNsaWNrIGV2ZW50XHJcbiAgICAgICAgICAgIHN0eWxlTWVudURyb3Bkb3duU3VibWVudU9wdGlvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgLy8gU2V0IHN0eWxlIGF0dHJpYnV0ZVxyXG4gICAgICAgICAgICAgIHNldFN0eWxlQXR0cmlidXRlKHN0eWxhYmxlQXR0cmlidXRlLCB2YWx1ZS52YWx1ZSlcclxuXHJcbiAgICAgICAgICAgICAgLy8gS2VlcCBjb3JyZWN0IHJlZmVyZW5jZVxyXG4gICAgICAgICAgICAgIGN1cnJlbnRTdHlsZUF0dHJpYnV0ZXNbc3R5bGFibGVBdHRyaWJ1dGUuZGF0YXNldEtleV0gPSB2YWx1ZS52YWx1ZVxyXG5cclxuICAgICAgICAgICAgICAvLyBDbG9zZSBtZW51XHJcbiAgICAgICAgICAgICAgc3R5bGVNZW51QnV0dG9uRWxlbWVudC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnY2xpY2snKSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBBcHBlbmQgdG8gYm9keVxyXG4gICAgICAgICAgcG9wdXBNZW51RWxlbWVudC5hcHBlbmRDaGlsZChzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVFbGVtZW50KVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEFwcGVuZCB0byBib2R5XHJcbiAgICAgIHBvcHVwTWVudUVsZW1lbnQuYXBwZW5kQ2hpbGQoc3R5bGVNZW51RHJvcGRvd25FbGVtZW50KVxyXG4gICAgfSlcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgQkJveCwgQ2FudmFzTm9kZURhdGEsIFBvc2l0aW9uLCBTaWRlIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJCb3hIZWxwZXIge1xyXG4gIHN0YXRpYyBjb21iaW5lQkJveGVzKGJib3hlczogQkJveFtdKTogQkJveCB7XHJcbiAgICBsZXQgbWluWCA9IEluZmluaXR5XHJcbiAgICBsZXQgbWluWSA9IEluZmluaXR5XHJcbiAgICBsZXQgbWF4WCA9IC1JbmZpbml0eVxyXG4gICAgbGV0IG1heFkgPSAtSW5maW5pdHlcclxuXHJcbiAgICBmb3IgKGxldCBiYm94IG9mIGJib3hlcykge1xyXG4gICAgICBtaW5YID0gTWF0aC5taW4obWluWCwgYmJveC5taW5YKVxyXG4gICAgICBtaW5ZID0gTWF0aC5taW4obWluWSwgYmJveC5taW5ZKVxyXG4gICAgICBtYXhYID0gTWF0aC5tYXgobWF4WCwgYmJveC5tYXhYKVxyXG4gICAgICBtYXhZID0gTWF0aC5tYXgobWF4WSwgYmJveC5tYXhZKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IG1pblgsIG1pblksIG1heFgsIG1heFkgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNjYWxlQkJveChiYm94OiBCQm94LCBzY2FsZTogbnVtYmVyKTogQkJveCB7XHJcbiAgICBsZXQgZGlmZlggPSAoc2NhbGUgLSAxKSAqIChiYm94Lm1heFggLSBiYm94Lm1pblgpXHJcbiAgICBsZXQgZGlmZlkgPSAoc2NhbGUgLSAxKSAqIChiYm94Lm1heFkgLSBiYm94Lm1pblkpXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbWluWDogYmJveC5taW5YIC0gZGlmZlggLyAyLFxyXG4gICAgICBtYXhYOiBiYm94Lm1heFggKyBkaWZmWCAvIDIsXHJcbiAgICAgIG1pblk6IGJib3gubWluWSAtIGRpZmZZIC8gMixcclxuICAgICAgbWF4WTogYmJveC5tYXhZICsgZGlmZlkgLyAyXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaW5zaWRlQkJveChwb3NpdGlvbjogUG9zaXRpb258QkJveCwgYmJveDogQkJveCwgY2FuVG91Y2hFZGdlOiBCb29sZWFuKTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCBwcm92aWRlZEJCb3ggPSB7XHJcbiAgICAgIG1pblg6IChwb3NpdGlvbiBhcyBCQm94KS5taW5YID8/IChwb3NpdGlvbiBhcyBQb3NpdGlvbikueCxcclxuICAgICAgbWluWTogKHBvc2l0aW9uIGFzIEJCb3gpLm1pblkgPz8gKHBvc2l0aW9uIGFzIFBvc2l0aW9uKS55LFxyXG4gICAgICBtYXhYOiAocG9zaXRpb24gYXMgQkJveCkubWF4WCA/PyAocG9zaXRpb24gYXMgUG9zaXRpb24pLngsXHJcbiAgICAgIG1heFk6IChwb3NpdGlvbiBhcyBCQm94KS5tYXhZID8/IChwb3NpdGlvbiBhcyBQb3NpdGlvbikueVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gY2FuVG91Y2hFZGdlID8gcHJvdmlkZWRCQm94Lm1pblggPj0gYmJveC5taW5YICYmIHByb3ZpZGVkQkJveC5tYXhYIDw9IGJib3gubWF4WCAmJiBwcm92aWRlZEJCb3gubWluWSA+PSBiYm94Lm1pblkgJiYgcHJvdmlkZWRCQm94Lm1heFkgPD0gYmJveC5tYXhZIDpcclxuICAgICAgcHJvdmlkZWRCQm94Lm1pblggPiBiYm94Lm1pblggJiYgcHJvdmlkZWRCQm94Lm1heFggPCBiYm94Lm1heFggJiYgcHJvdmlkZWRCQm94Lm1pblkgPiBiYm94Lm1pblkgJiYgcHJvdmlkZWRCQm94Lm1heFkgPCBiYm94Lm1heFlcclxuICB9XHJcblxyXG4gIHN0YXRpYyBlbmxhcmdlQkJveChiYm94OiBCQm94LCBwYWRkaW5nOiBudW1iZXIpOiBCQm94IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG1pblg6IGJib3gubWluWCAtIHBhZGRpbmcsXHJcbiAgICAgIG1pblk6IGJib3gubWluWSAtIHBhZGRpbmcsXHJcbiAgICAgIG1heFg6IGJib3gubWF4WCArIHBhZGRpbmcsXHJcbiAgICAgIG1heFk6IGJib3gubWF4WSArIHBhZGRpbmdcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBtb3ZlSW5EaXJlY3Rpb24ocG9zaXRpb246IFBvc2l0aW9uLCBzaWRlOiBTaWRlLCBkaXN0YW5jZTogbnVtYmVyKTogUG9zaXRpb24ge1xyXG4gICAgc3dpdGNoIChzaWRlKSB7XHJcbiAgICAgIGNhc2UgJ3RvcCc6XHJcbiAgICAgICAgcmV0dXJuIHsgeDogcG9zaXRpb24ueCwgeTogcG9zaXRpb24ueSAtIGRpc3RhbmNlIH1cclxuICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgIHJldHVybiB7IHg6IHBvc2l0aW9uLnggKyBkaXN0YW5jZSwgeTogcG9zaXRpb24ueSB9XHJcbiAgICAgIGNhc2UgJ2JvdHRvbSc6XHJcbiAgICAgICAgcmV0dXJuIHsgeDogcG9zaXRpb24ueCwgeTogcG9zaXRpb24ueSArIGRpc3RhbmNlIH1cclxuICAgICAgY2FzZSAnbGVmdCc6XHJcbiAgICAgICAgcmV0dXJuIHsgeDogcG9zaXRpb24ueCAtIGRpc3RhbmNlLCB5OiBwb3NpdGlvbi55IH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRDZW50ZXJPZkJCb3hTaWRlKGJib3g6IEJCb3gsIHNpZGU6IFNpZGUpOiBQb3NpdGlvbiB7XHJcbiAgICBzd2l0Y2ggKHNpZGUpIHtcclxuICAgICAgY2FzZSAndG9wJzpcclxuICAgICAgICByZXR1cm4geyB4OiAoYmJveC5taW5YICsgYmJveC5tYXhYKSAvIDIsIHk6IGJib3gubWluWSB9XHJcbiAgICAgIGNhc2UgJ3JpZ2h0JzpcclxuICAgICAgICByZXR1cm4geyB4OiBiYm94Lm1heFgsIHk6IChiYm94Lm1pblkgKyBiYm94Lm1heFkpIC8gMiB9XHJcbiAgICAgIGNhc2UgJ2JvdHRvbSc6XHJcbiAgICAgICAgcmV0dXJuIHsgeDogKGJib3gubWluWCArIGJib3gubWF4WCkgLyAyLCB5OiBiYm94Lm1heFkgfVxyXG4gICAgICBjYXNlICdsZWZ0JzpcclxuICAgICAgICByZXR1cm4geyB4OiBiYm94Lm1pblgsIHk6IChiYm94Lm1pblkgKyBiYm94Lm1heFkpIC8gMiB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0U2lkZVZlY3RvcihzaWRlPzogU2lkZSk6IFBvc2l0aW9uIHtcclxuICAgIHN3aXRjaCAoc2lkZSkge1xyXG4gICAgICBjYXNlICd0b3AnOlxyXG4gICAgICAgIHJldHVybiB7IHg6IDAsIHk6IDEgfVxyXG4gICAgICBjYXNlICdyaWdodCc6XHJcbiAgICAgICAgcmV0dXJuIHsgeDogMSwgeTogMCB9XHJcbiAgICAgIGNhc2UgJ2JvdHRvbSc6XHJcbiAgICAgICAgcmV0dXJuIHsgeDogMCwgeTogLTEgfVxyXG4gICAgICBjYXNlICdsZWZ0JzpcclxuICAgICAgICByZXR1cm4geyB4OiAtMSwgeTogMCB9XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIHsgeDogMCwgeTogMCB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaXNIb3Jpem9udGFsKHNpZGU6IFNpZGUpOiBib29sZWFuIHtcclxuICAgIHJldHVybiBzaWRlID09PSAnbGVmdCcgfHwgc2lkZSA9PT0gJ3JpZ2h0J1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGRpcmVjdGlvbihzaWRlOiBTaWRlKTogbnVtYmVyIHtcclxuICAgIHJldHVybiAoc2lkZSA9PT0gJ3JpZ2h0JyB8fCBzaWRlID09PSAnYm90dG9tJykgPyAxIDogLTFcclxuICB9XHJcbn0iLCAiaW1wb3J0IEFkdmFuY2VkQ2FudmFzUGx1Z2luIGZyb20gXCJzcmMvbWFpblwiXHJcbmltcG9ydCB7IEFkdmFuY2VkQ2FudmFzUGx1Z2luU2V0dGluZ3MgfSBmcm9tIFwic3JjL3NldHRpbmdzXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgcGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpblxyXG5cclxuICBhYnN0cmFjdCBpc0VuYWJsZWQoKTogYm9vbGVhbiB8IGtleW9mIEFkdmFuY2VkQ2FudmFzUGx1Z2luU2V0dGluZ3NcclxuICBhYnN0cmFjdCBpbml0KCk6IHZvaWRcclxuXHJcbiAgY29uc3RydWN0b3IocGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpbikge1xyXG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW5cclxuXHJcbiAgICBjb25zdCBpc0VuYWJsZWQgPSB0aGlzLmlzRW5hYmxlZCgpXHJcbiAgICBcclxuICAgIGlmICghKGlzRW5hYmxlZCA9PT0gdHJ1ZSB8fCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKGlzRW5hYmxlZCBhcyBhbnkpKSkgcmV0dXJuXHJcblxyXG4gICAgdGhpcy5pbml0KClcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgQ2FudmFzLCBQb3NpdGlvbiB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcbmltcG9ydCBDYW52YXNIZWxwZXIgZnJvbSBcInNyYy91dGlscy9jYW52YXMtaGVscGVyXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwic3JjL2NvcmUvZXZlbnRzXCJcclxuaW1wb3J0IENhbnZhc0V4dGVuc2lvbiBmcm9tIFwiLi4vY29yZS9jYW52YXMtZXh0ZW5zaW9uXCJcclxuXHJcbmNvbnN0IEdST1VQX05PREVfU0laRSA9IHsgd2lkdGg6IDMwMCwgaGVpZ2h0OiAzMDAgfVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR3JvdXBDYW52YXNFeHRlbnNpb24gZXh0ZW5kcyBDYW52YXNFeHRlbnNpb24ge1xyXG4gIGlzRW5hYmxlZCgpIHsgcmV0dXJuIHRydWUgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5DYW52YXNDaGFuZ2VkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMpID0+IHtcclxuICAgICAgICBDYW52YXNIZWxwZXIuYWRkQ2FyZE1lbnVPcHRpb24oXHJcbiAgICAgICAgICBjYW52YXMsXHJcbiAgICAgICAgICBDYW52YXNIZWxwZXIuY3JlYXRlQ2FyZE1lbnVPcHRpb24oXHJcbiAgICAgICAgICAgIGNhbnZhcyxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGlkOiAnY3JlYXRlLWdyb3VwJyxcclxuICAgICAgICAgICAgICBsYWJlbDogJ0RyYWcgdG8gYWRkIGdyb3VwJyxcclxuICAgICAgICAgICAgICBpY29uOiAnZ3JvdXAnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICgpID0+IEdST1VQX05PREVfU0laRSxcclxuICAgICAgICAgICAgKGNhbnZhczogQ2FudmFzLCBwb3M6IFBvc2l0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgY2FudmFzLmNyZWF0ZUdyb3VwTm9kZSh7XHJcbiAgICAgICAgICAgICAgICBwb3M6IHBvcyxcclxuICAgICAgICAgICAgICAgIHNpemU6IEdST1VQX05PREVfU0laRVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIClcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgICkpXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IE1lbnUsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJ1xyXG5pbXBvcnQgeyBCQm94LCBDYW52YXMsIENhbnZhc0VkZ2UsIENhbnZhc0VsZW1lbnQsIENhbnZhc05vZGUsIFBvc2l0aW9uLCBTaXplIH0gZnJvbSAnc3JjL0B0eXBlcy9DYW52YXMnXHJcbmltcG9ydCB7IENhbnZhc0V2ZW50IH0gZnJvbSAnc3JjL2NvcmUvZXZlbnRzJ1xyXG5pbXBvcnQgQ2FudmFzSGVscGVyIGZyb20gXCJzcmMvdXRpbHMvY2FudmFzLWhlbHBlclwiXHJcbmltcG9ydCBCQm94SGVscGVyIGZyb20gXCJzcmMvdXRpbHMvYmJveC1oZWxwZXJcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gJy4uL2NvcmUvY2FudmFzLWV4dGVuc2lvbidcclxuXHJcbmNvbnN0IFNUQVJUX1NMSURFX05BTUUgPSAnU3RhcnQgU2xpZGUnXHJcbmNvbnN0IERFRkFVTFRfU0xJREVfTkFNRSA9ICdOZXcgU2xpZGUnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcmVzZW50YXRpb25DYW52YXNFeHRlbnNpb24gZXh0ZW5kcyBDYW52YXNFeHRlbnNpb24ge1xyXG4gIHNhdmVkVmlld3BvcnQ6IGFueSA9IG51bGxcclxuICBpc1ByZXNlbnRhdGlvbk1vZGU6IGJvb2xlYW4gPSBmYWxzZVxyXG4gIHZpc2l0ZWROb2RlczogYW55W10gPSBbXVxyXG4gIGZ1bGxzY3JlZW5Nb2RhbE9ic2VydmVyOiBNdXRhdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGxcclxuXHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gJ3ByZXNlbnRhdGlvbkZlYXR1cmVFbmFibGVkJyBhcyBjb25zdCB9XHJcbiAgXHJcbiAgaW5pdCgpIHtcclxuICAgIC8qIEFkZCB3cmFwIGluIHNsaWRlIG9wdGlvbiB0byBjb250ZXh0IG1lbnUgKi9cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgJ2NhbnZhczpzZWxlY3Rpb24tbWVudScsXHJcbiAgICAgIChtZW51OiBNZW51LCBjYW52YXM6IENhbnZhcykgPT4ge1xyXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cclxuICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgLnNldFRpdGxlKCdXcmFwIGluIHNsaWRlJylcclxuICAgICAgICAgICAgLnNldEljb24oJ2dhbGxlcnktdmVydGljYWwnKVxyXG4gICAgICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLmFkZFNsaWRlKGNhbnZhcywgdW5kZWZpbmVkLCBcclxuICAgICAgICAgICAgICBCQm94SGVscGVyLmVubGFyZ2VCQm94KEJCb3hIZWxwZXIuY29tYmluZUJCb3hlcyhcclxuICAgICAgICAgICAgICAgIFsuLi5jYW52YXMuc2VsZWN0aW9uLnZhbHVlcygpXS5tYXAoKGVsZW1lbnQ6IENhbnZhc0VsZW1lbnQpID0+IGVsZW1lbnQuZ2V0QkJveCgpKVxyXG4gICAgICAgICAgICAgICksIHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ3dyYXBJblNsaWRlUGFkZGluZycpKVxyXG4gICAgICAgICAgICApKVxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICdjcmVhdGUtbmV3LXNsaWRlJyxcclxuXHRcdFx0bmFtZTogJ0NyZWF0ZSBuZXcgc2xpZGUnLFxyXG5cdFx0XHRjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+ICFjYW52YXMucmVhZG9ubHkgJiYgIXRoaXMuaXNQcmVzZW50YXRpb25Nb2RlLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5hZGRTbGlkZShjYW52YXMpXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnc2V0LXN0YXJ0LW5vZGUnLFxyXG5cdFx0XHRuYW1lOiAnU2V0IHN0YXJ0IG5vZGUnLFxyXG5cdFx0XHRjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+ICFjYW52YXMucmVhZG9ubHkgJiYgIXRoaXMuaXNQcmVzZW50YXRpb25Nb2RlICYmIGNhbnZhcy5nZXRTZWxlY3Rpb25EYXRhKCkubm9kZXMubGVuZ3RoID09PSAxLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5zZXRTdGFydE5vZGUoY2FudmFzLCBjYW52YXMubm9kZXMuZ2V0KGNhbnZhcy5nZXRTZWxlY3Rpb25EYXRhKCkubm9kZXNbMF0uaWQpKVxyXG4gICAgICApXHJcbiAgICB9KVxyXG5cclxuICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ3N0YXJ0LXByZXNlbnRhdGlvbicsXHJcbiAgICAgIG5hbWU6ICdTdGFydCBwcmVzZW50YXRpb24nLFxyXG4gICAgICBjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAoX2NhbnZhczogQ2FudmFzKSA9PiAhdGhpcy5pc1ByZXNlbnRhdGlvbk1vZGUsXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLnN0YXJ0UHJlc2VudGF0aW9uKGNhbnZhcylcclxuICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICdjb250aW51ZS1wcmVzZW50YXRpb24nLFxyXG4gICAgICBuYW1lOiAnQ29udGludWUgcHJlc2VudGF0aW9uJyxcclxuICAgICAgY2hlY2tDYWxsYmFjazogQ2FudmFzSGVscGVyLmNhbnZhc0NvbW1hbmQoXHJcbiAgICAgICAgdGhpcy5wbHVnaW4sXHJcbiAgICAgICAgKF9jYW52YXM6IENhbnZhcykgPT4gIXRoaXMuaXNQcmVzZW50YXRpb25Nb2RlLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5zdGFydFByZXNlbnRhdGlvbihjYW52YXMsIHRydWUpXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcbiAgICAgIGlkOiAnZW5kLXByZXNlbnRhdGlvbicsXHJcbiAgICAgIG5hbWU6ICdFbmQgcHJlc2VudGF0aW9uJyxcclxuICAgICAgY2hlY2tDYWxsYmFjazogQ2FudmFzSGVscGVyLmNhbnZhc0NvbW1hbmQoXHJcbiAgICAgICAgdGhpcy5wbHVnaW4sXHJcbiAgICAgICAgKF9jYW52YXM6IENhbnZhcykgPT4gdGhpcy5pc1ByZXNlbnRhdGlvbk1vZGUsXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLmVuZFByZXNlbnRhdGlvbihjYW52YXMpXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcbiAgICAgIGlkOiAncHJldmlvdXMtbm9kZScsXHJcbiAgICAgIG5hbWU6ICdQcmV2aW91cyBub2RlJyxcclxuICAgICAgY2hlY2tDYWxsYmFjazogQ2FudmFzSGVscGVyLmNhbnZhc0NvbW1hbmQoXHJcbiAgICAgICAgdGhpcy5wbHVnaW4sXHJcbiAgICAgICAgKF9jYW52YXM6IENhbnZhcykgPT4gdGhpcy5pc1ByZXNlbnRhdGlvbk1vZGUsXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLnByZXZpb3VzTm9kZShjYW52YXMpXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnbmV4dC1ub2RlJyxcclxuICAgICAgbmFtZTogJ05leHQgbm9kZScsXHJcbiAgICAgIGNoZWNrQ2FsbGJhY2s6IENhbnZhc0hlbHBlci5jYW52YXNDb21tYW5kKFxyXG4gICAgICAgIHRoaXMucGx1Z2luLFxyXG4gICAgICAgIChfY2FudmFzOiBDYW52YXMpID0+IHRoaXMuaXNQcmVzZW50YXRpb25Nb2RlLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5uZXh0Tm9kZShjYW52YXMpXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgLy8gUmVnaXN0ZXIgZXZlbnRzXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkNhbnZhc0NoYW5nZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5vbkNhbnZhc0NoYW5nZWQoY2FudmFzKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LlBvcHVwTWVudUNyZWF0ZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5vblBvcHVwTWVudUNyZWF0ZWQoY2FudmFzKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50Lk5vZGVNb3ZlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlKSA9PiB0aGlzLm9uTm9kZU1vdmVkKGNhbnZhcywgbm9kZSlcclxuICAgICkpXHJcbiAgfVxyXG5cclxuICBvbkNhbnZhc0NoYW5nZWQoY2FudmFzOiBDYW52YXMpOiB2b2lkIHtcclxuICAgIENhbnZhc0hlbHBlci5hZGRDYXJkTWVudU9wdGlvbihcclxuICAgICAgY2FudmFzLFxyXG4gICAgICBDYW52YXNIZWxwZXIuY3JlYXRlQ2FyZE1lbnVPcHRpb24oXHJcbiAgICAgICAgY2FudmFzLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOiAnbmV3LXNsaWRlJyxcclxuICAgICAgICAgIGxhYmVsOiAnRHJhZyB0byBhZGQgc2xpZGUnLFxyXG4gICAgICAgICAgaWNvbjogJ2dhbGxlcnktdmVydGljYWwnXHJcbiAgICAgICAgfSxcclxuICAgICAgICAoKSA9PiB0aGlzLmdldERlZmF1bHRTbGlkZVNpemUoKSxcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMsIHBvczogUG9zaXRpb24pID0+IHRoaXMuYWRkU2xpZGUoY2FudmFzLCBwb3MpXHJcbiAgICAgIClcclxuICAgIClcclxuICB9XHJcblxyXG4gIG9uUG9wdXBNZW51Q3JlYXRlZChjYW52YXM6IENhbnZhcyk6IHZvaWQge1xyXG4gICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdzaG93U2V0U3RhcnROb2RlSW5Qb3B1cCcpKSByZXR1cm5cclxuXHJcbiAgICAvLyBJZiB0aGUgY2FudmFzIGlzIHJlYWRvbmx5IG9yIHRoZXJlIGFyZSBtdWx0aXBsZS9ubyBub2RlcyBzZWxlY3RlZCwgcmV0dXJuXHJcbiAgICBjb25zdCBzZWxlY3RlZE5vZGVzRGF0YSA9IGNhbnZhcy5nZXRTZWxlY3Rpb25EYXRhKCkubm9kZXNcclxuICAgIGlmIChjYW52YXMucmVhZG9ubHkgfHwgc2VsZWN0ZWROb2Rlc0RhdGEubGVuZ3RoICE9PSAxIHx8IGNhbnZhcy5zZWxlY3Rpb24uc2l6ZSA+IDEpIHJldHVyblxyXG4gICAgXHJcbiAgICBjb25zdCBzZWxlY3RlZE5vZGUgPSBjYW52YXMubm9kZXMuZ2V0KHNlbGVjdGVkTm9kZXNEYXRhWzBdLmlkKVxyXG4gICAgaWYgKCFzZWxlY3RlZE5vZGUpIHJldHVyblxyXG4gICAgXHJcbiAgICBDYW52YXNIZWxwZXIuYWRkUG9wdXBNZW51T3B0aW9uKFxyXG4gICAgICBjYW52YXMsXHJcbiAgICAgIENhbnZhc0hlbHBlci5jcmVhdGVQb3B1cE1lbnVPcHRpb24oe1xyXG4gICAgICAgIGlkOiAnc3RhcnQtbm9kZScsIFxyXG4gICAgICAgIGxhYmVsOiAnU2V0IGFzIHN0YXJ0IHNsaWRlJywgXHJcbiAgICAgICAgaWNvbjogJ3BsYXknLCBcclxuICAgICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5zZXRTdGFydE5vZGUoY2FudmFzLCBzZWxlY3RlZE5vZGUpXHJcbiAgICAgIH0pXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uTm9kZU1vdmVkKF9jYW52YXM6IENhbnZhcywgbm9kZTogQ2FudmFzTm9kZSkge1xyXG4gICAgY29uc3Qgbm9kZURhdGEgPSBub2RlLmdldERhdGEoKVxyXG4gICAgaWYgKCFub2RlRGF0YS5zaWRlUmF0aW8pIHJldHVyblxyXG5cclxuICAgIGNvbnN0IG5vZGVCQm94ID0gbm9kZS5nZXRCQm94KClcclxuICAgIGNvbnN0IG5vZGVTaXplID0ge1xyXG4gICAgICB3aWR0aDogbm9kZUJCb3gubWF4WCAtIG5vZGVCQm94Lm1pblgsXHJcbiAgICAgIGhlaWdodDogbm9kZUJCb3gubWF4WSAtIG5vZGVCQm94Lm1pbllcclxuICAgIH1cclxuICAgIGNvbnN0IG5vZGVBc3BlY3RSYXRpbyA9IG5vZGVTaXplLndpZHRoIC8gbm9kZVNpemUuaGVpZ2h0XHJcblxyXG4gICAgaWYgKG5vZGVBc3BlY3RSYXRpbyA8IG5vZGVEYXRhLnNpZGVSYXRpbylcclxuICAgICAgbm9kZVNpemUud2lkdGggPSBub2RlU2l6ZS5oZWlnaHQgKiBub2RlRGF0YS5zaWRlUmF0aW9cclxuICAgIGVsc2Ugbm9kZVNpemUuaGVpZ2h0ID0gbm9kZVNpemUud2lkdGggLyBub2RlRGF0YS5zaWRlUmF0aW9cclxuXHJcbiAgICBub2RlLnNldERhdGEoe1xyXG4gICAgICAuLi5ub2RlRGF0YSxcclxuICAgICAgd2lkdGg6IG5vZGVTaXplLndpZHRoLFxyXG4gICAgICBoZWlnaHQ6IG5vZGVTaXplLmhlaWdodFxyXG4gICAgfSlcclxuICB9XHJcbiAgXHJcbiAgcHJpdmF0ZSBnZXRTdGFydE5vZGUoY2FudmFzOiBDYW52YXMpOiBDYW52YXNOb2RlfHVuZGVmaW5lZCB7XHJcbiAgICBmb3IgKGNvbnN0IFtfLCBub2RlXSBvZiBjYW52YXMubm9kZXMpIHtcclxuICAgICAgaWYgKG5vZGUuZ2V0RGF0YSgpLmlzU3RhcnROb2RlKSByZXR1cm4gbm9kZVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB1bmRlZmluZWRcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0U3RhcnROb2RlKGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlfHVuZGVmaW5lZCkge1xyXG4gICAgaWYgKCFub2RlKSByZXR1cm5cclxuXHJcbiAgICBjb25zdCBzdGFydE5vZGUgPSB0aGlzLmdldFN0YXJ0Tm9kZShjYW52YXMpXHJcbiAgICBpZiAoc3RhcnROb2RlKSBzdGFydE5vZGUuc2V0RGF0YSh7IC4uLnN0YXJ0Tm9kZS5nZXREYXRhKCksIGlzU3RhcnROb2RlOiBmYWxzZSB9KVxyXG5cclxuICAgIGlmIChub2RlICE9PSBzdGFydE5vZGUpIG5vZGUuc2V0RGF0YSh7IC4uLm5vZGUuZ2V0RGF0YSgpLCBpc1N0YXJ0Tm9kZTogdHJ1ZSB9LCB0cnVlKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXREZWZhdWx0U2xpZGVTaXplKCk6IFNpemUge1xyXG4gICAgY29uc3Qgc2xpZGVTaXplU3RyaW5nID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnZGVmYXVsdFNsaWRlU2l6ZScpXHJcbiAgICBjb25zdCBzbGlkZVNpemVBcnJheSA9IHNsaWRlU2l6ZVN0cmluZy5zcGxpdCgneCcpLm1hcCgodmFsdWU6IHN0cmluZykgPT4gcGFyc2VJbnQodmFsdWUpKVxyXG4gICAgcmV0dXJuIHsgd2lkdGg6IHNsaWRlU2l6ZUFycmF5WzBdLCBoZWlnaHQ6IHNsaWRlU2l6ZUFycmF5WzFdIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0U2xpZGVBc3BlY3RSYXRpbygpOiBudW1iZXIge1xyXG4gICAgY29uc3Qgc2xpZGVTaXplID0gdGhpcy5nZXREZWZhdWx0U2xpZGVTaXplKClcclxuICAgIHJldHVybiBzbGlkZVNpemUud2lkdGggLyBzbGlkZVNpemUuaGVpZ2h0XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFkZFNsaWRlKGNhbnZhczogQ2FudmFzLCBwb3M/OiBQb3NpdGlvbiwgYmJveD86IEJCb3gpIHtcclxuICAgIGNvbnN0IGlzU3RhcnROb2RlID0gdGhpcy5nZXRTdGFydE5vZGUoY2FudmFzKSA9PSBudWxsXHJcbiAgICBjb25zdCBzbGlkZVNpemUgPSB0aGlzLmdldERlZmF1bHRTbGlkZVNpemUoKVxyXG4gICAgY29uc3Qgc2xpZGVBc3BlY3RSYXRpbyA9IHRoaXMuZ2V0U2xpZGVBc3BlY3RSYXRpbygpXHJcblxyXG4gICAgaWYgKGJib3gpIHtcclxuICAgICAgY29uc3QgYmJveFdpZHRoID0gYmJveC5tYXhYIC0gYmJveC5taW5YXHJcbiAgICAgIGNvbnN0IGJib3hIZWlnaHQgPSBiYm94Lm1heFkgLSBiYm94Lm1pbllcclxuXHJcbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgbm9kZXMgZml0IGluc2lkZSB0aGUgYm91bmRpbmcgYm94IHdoaWxlIGtlZXBpbmcgdGhlIGFzcGVjdCByYXRpb1xyXG4gICAgICBpZiAoYmJveFdpZHRoIC8gYmJveEhlaWdodCA+IHNsaWRlQXNwZWN0UmF0aW8pIHtcclxuICAgICAgICBzbGlkZVNpemUud2lkdGggPSBiYm94V2lkdGhcclxuICAgICAgICBzbGlkZVNpemUuaGVpZ2h0ID0gYmJveFdpZHRoIC8gc2xpZGVBc3BlY3RSYXRpb1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNsaWRlU2l6ZS5oZWlnaHQgPSBiYm94SGVpZ2h0XHJcbiAgICAgICAgc2xpZGVTaXplLndpZHRoID0gYmJveEhlaWdodCAqIHNsaWRlQXNwZWN0UmF0aW9cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcG9zID0geyBcclxuICAgICAgICB4OiBiYm94Lm1pblgsXHJcbiAgICAgICAgeTogYmJveC5taW5ZXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBubyBwb3NpdGlvbiBpcyBwcm92aWRlZCwgdXNlIHRoZSBjZW50ZXIgb2YgdGhlIGNhbnZhc1xyXG4gICAgaWYgKCFwb3MpIHBvcyA9IENhbnZhc0hlbHBlci5nZXRDZW50ZXJDb29yZGluYXRlcyhjYW52YXMsIHRoaXMuZ2V0RGVmYXVsdFNsaWRlU2l6ZSgpKVxyXG5cclxuICAgIGNvbnN0IGdyb3VwTm9kZSA9IGNhbnZhcy5jcmVhdGVHcm91cE5vZGUoe1xyXG4gICAgICBwb3M6IHBvcyxcclxuICAgICAgc2l6ZTogc2xpZGVTaXplLFxyXG4gICAgICBsYWJlbDogaXNTdGFydE5vZGUgPyBTVEFSVF9TTElERV9OQU1FIDogREVGQVVMVF9TTElERV9OQU1FLFxyXG4gICAgICBmb2N1czogZmFsc2UsXHJcbiAgICB9KVxyXG5cclxuICAgIGdyb3VwTm9kZS5zZXREYXRhKHsgXHJcbiAgICAgIC4uLmdyb3VwTm9kZS5nZXREYXRhKCksIFxyXG4gICAgICBzaWRlUmF0aW86IHNsaWRlQXNwZWN0UmF0aW8sXHJcbiAgICAgIGlzU3RhcnROb2RlOiBpc1N0YXJ0Tm9kZSA/IHRydWUgOiB1bmRlZmluZWQsXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBhbmltYXRlTm9kZVRyYW5zaXRpb24oY2FudmFzOiBDYW52YXMsIGZyb21Ob2RlOiBDYW52YXNOb2RlfHVuZGVmaW5lZCwgdG9Ob2RlOiBDYW52YXNOb2RlKSB7XHJcbiAgICBjb25zdCB1c2VDdXN0b21ab29tRnVuY3Rpb24gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCd6b29tVG9TbGlkZVdpdGhvdXRQYWRkaW5nJylcclxuICAgIGNvbnN0IGFuaW1hdGlvbkR1cmF0aW9uTXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdzbGlkZVRyYW5zaXRpb25BbmltYXRpb25EdXJhdGlvbicpICogMTAwMFxyXG4gICAgXHJcbiAgICBpZiAoYW5pbWF0aW9uRHVyYXRpb25NcyA+IDAgJiYgZnJvbU5vZGUpIHtcclxuICAgICAgY29uc3QgYW5pbWF0aW9uSW50ZW5zaXR5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnc2xpZGVUcmFuc2l0aW9uQW5pbWF0aW9uSW50ZW5zaXR5JylcclxuXHJcbiAgICAgIGNvbnN0IGN1cnJlbnROb2RlQkJveEVubGFyZ2VkID0gQkJveEhlbHBlci5zY2FsZUJCb3goZnJvbU5vZGUuZ2V0QkJveCgpLCBhbmltYXRpb25JbnRlbnNpdHkpXHJcbiAgICAgIGlmICh1c2VDdXN0b21ab29tRnVuY3Rpb24pIENhbnZhc0hlbHBlci56b29tVG9CQm94KGNhbnZhcywgY3VycmVudE5vZGVCQm94RW5sYXJnZWQpXHJcbiAgICAgIGVsc2UgY2FudmFzLnpvb21Ub0Jib3goY3VycmVudE5vZGVCQm94RW5sYXJnZWQpXHJcblxyXG4gICAgICBhd2FpdCBzbGVlcChhbmltYXRpb25EdXJhdGlvbk1zIC8gMilcclxuXHJcbiAgICAgIGNvbnN0IG5leHROb2RlQkJveEVubGFyZ2VkID0gQkJveEhlbHBlci5zY2FsZUJCb3godG9Ob2RlLmdldEJCb3goKSwgYW5pbWF0aW9uSW50ZW5zaXR5KVxyXG4gICAgICBpZiAodXNlQ3VzdG9tWm9vbUZ1bmN0aW9uKSBDYW52YXNIZWxwZXIuem9vbVRvQkJveChjYW52YXMsIG5leHROb2RlQkJveEVubGFyZ2VkKVxyXG4gICAgICBlbHNlIGNhbnZhcy56b29tVG9CYm94KG5leHROb2RlQkJveEVubGFyZ2VkKVxyXG5cclxuICAgICAgYXdhaXQgc2xlZXAoYW5pbWF0aW9uRHVyYXRpb25NcyAvIDIpXHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG5vZGVCQm94ID0gdG9Ob2RlLmdldEJCb3goKVxyXG4gICAgaWYgKHVzZUN1c3RvbVpvb21GdW5jdGlvbikgQ2FudmFzSGVscGVyLnpvb21Ub0JCb3goY2FudmFzLCBub2RlQkJveClcclxuICAgIGVsc2UgY2FudmFzLnpvb21Ub0Jib3gobm9kZUJCb3gpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIHN0YXJ0UHJlc2VudGF0aW9uKGNhbnZhczogQ2FudmFzLCB0cnlDb250aW51ZTogYm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICAvLyBPbmx5IHJlc2V0IHZpc2l0ZWQgbm9kZXMgaWYgd2UgYXJlIG5vdCB0cnlpbmcgdG8gY29udGludWVcclxuICAgIGlmICghdHJ5Q29udGludWUgfHwgdGhpcy52aXNpdGVkTm9kZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnN0IHN0YXJ0Tm9kZSA9IHRoaXMuZ2V0U3RhcnROb2RlKGNhbnZhcylcclxuICAgICAgaWYgKCFzdGFydE5vZGUpIHtcclxuICAgICAgICBuZXcgTm90aWNlKCdObyBzdGFydCBub2RlIGZvdW5kLiBQbGVhc2UgbWFyayBhIG5vZGUgYXMgYSBzdGFydCBub2RlIHRyb3VnaCB0aGUgcG9wdXAgbWVudS4nKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICB0aGlzLnZpc2l0ZWROb2RlcyA9IFtzdGFydE5vZGVdXHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2F2ZSBjdXJyZW50IHZpZXdwb3J0XHJcbiAgICB0aGlzLnNhdmVkVmlld3BvcnQgPSB7XHJcbiAgICAgIHg6IGNhbnZhcy50eCxcclxuICAgICAgeTogY2FudmFzLnR5LFxyXG4gICAgICB6b29tOiBjYW52YXMudFpvb20sXHJcbiAgICB9XHJcblxyXG4gICAgLy8gRW50ZXIgZnVsbHNjcmVlbiBtb2RlXHJcbiAgICBjYW52YXMud3JhcHBlckVsLmZvY3VzKClcclxuICAgIGNhbnZhcy53cmFwcGVyRWwucmVxdWVzdEZ1bGxzY3JlZW4oKVxyXG4gICAgY2FudmFzLndyYXBwZXJFbC5jbGFzc0xpc3QuYWRkKCdwcmVzZW50YXRpb24tbW9kZScpXHJcblxyXG4gICAgLy8gTG9jayBjYW52YXNcclxuICAgIGNhbnZhcy5zZXRSZWFkb25seSh0cnVlKVxyXG5cclxuICAgIC8vIFJlZ2lzdGVyIGV2ZW50IGhhbmRsZXIgZm9yIGtleWJvYXJkIG5hdmlnYXRpb25cclxuICAgIGNhbnZhcy53cmFwcGVyRWwub25rZXlkb3duID0gKGU6IGFueSkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygndXNlQXJyb3dLZXlzVG9DaGFuZ2VTbGlkZXMnKSkge1xyXG4gICAgICAgIGlmIChlLmtleSA9PT0gJ0Fycm93UmlnaHQnKSB0aGlzLm5leHROb2RlKGNhbnZhcylcclxuICAgICAgICBlbHNlIGlmIChlLmtleSA9PT0gJ0Fycm93TGVmdCcpIHRoaXMucHJldmlvdXNOb2RlKGNhbnZhcylcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ3VzZVBnVXBQZ0Rvd25LZXlzVG9DaGFuZ2VTbGlkZXMnKSkge1xyXG4gICAgICAgIGlmIChlLmtleSA9PT0gJ1BhZ2VEb3duJykgdGhpcy5uZXh0Tm9kZShjYW52YXMpXHJcbiAgICAgICAgZWxzZSBpZiAoZS5rZXkgPT09ICdQYWdlVXAnKSB0aGlzLnByZXZpb3VzTm9kZShjYW52YXMpXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBLZWVwIG1vZGFscyB3aGlsZSBpbiBmdWxsc2NyZWVuIG1vZGVcclxuICAgIHRoaXMuZnVsbHNjcmVlbk1vZGFsT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25SZWNvcmRzKSA9PiB7XHJcbiAgICAgIG11dGF0aW9uUmVjb3Jkcy5mb3JFYWNoKChtdXRhdGlvblJlY29yZCkgPT4ge1xyXG4gICAgICAgIG11dGF0aW9uUmVjb3JkLmFkZGVkTm9kZXMuZm9yRWFjaCgobm9kZSkgPT4ge1xyXG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChub2RlKVxyXG4gICAgICAgICAgZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQ/LmFwcGVuZENoaWxkKG5vZGUpXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGNvbnN0IGlucHV0RmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb21wdC1pbnB1dFwiKSBhcyBIVE1MSW5wdXRFbGVtZW50fG51bGxcclxuICAgICAgaWYgKGlucHV0RmllbGQpIGlucHV0RmllbGQuZm9jdXMoKVxyXG4gICAgfSlcclxuICAgIHRoaXMuZnVsbHNjcmVlbk1vZGFsT2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7IGNoaWxkTGlzdDogdHJ1ZSB9KVxyXG5cclxuICAgIC8vIFJlZ2lzdGVyIGV2ZW50IGhhbmRsZXIgZm9yIGV4aXRpbmcgcHJlc2VudGF0aW9uIG1vZGVcclxuICAgIGNhbnZhcy53cmFwcGVyRWwub25mdWxsc2NyZWVuY2hhbmdlID0gKF9lOiBhbnkpID0+IHtcclxuICAgICAgaWYgKGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50KSByZXR1cm5cclxuICAgICAgdGhpcy5lbmRQcmVzZW50YXRpb24oY2FudmFzKVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaXNQcmVzZW50YXRpb25Nb2RlID0gdHJ1ZVxyXG5cclxuICAgIC8vIFdhaXQgZm9yIGZ1bGxzY3JlZW4gdG8gYmUgZW5hYmxlZFxyXG4gICAgYXdhaXQgc2xlZXAoNTAwKVxyXG5cclxuICAgIC8vIFpvb20gdG8gZmlyc3Qgbm9kZVxyXG4gICAgdGhpcy5hbmltYXRlTm9kZVRyYW5zaXRpb24oY2FudmFzLCB1bmRlZmluZWQsIHRoaXMudmlzaXRlZE5vZGVzLmxhc3QoKSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZW5kUHJlc2VudGF0aW9uKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICAvLyBVbnJlZ2lzdGVyIGV2ZW50IGhhbmRsZXJzXHJcbiAgICB0aGlzLmZ1bGxzY3JlZW5Nb2RhbE9ic2VydmVyPy5kaXNjb25uZWN0KClcclxuICAgIHRoaXMuZnVsbHNjcmVlbk1vZGFsT2JzZXJ2ZXIgPSBudWxsXHJcbiAgICBjYW52YXMud3JhcHBlckVsLm9ua2V5ZG93biA9IG51bGxcclxuICAgIGNhbnZhcy53cmFwcGVyRWwub25mdWxsc2NyZWVuY2hhbmdlID0gbnVsbFxyXG5cclxuICAgIC8vIFVubG9jayBjYW52YXNcclxuICAgIGNhbnZhcy5zZXRSZWFkb25seShmYWxzZSlcclxuXHJcbiAgICAvLyBFeGl0IGZ1bGxzY3JlZW4gbW9kZVxyXG4gICAgY2FudmFzLndyYXBwZXJFbC5jbGFzc0xpc3QucmVtb3ZlKCdwcmVzZW50YXRpb24tbW9kZScpXHJcbiAgICBpZiAoZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQpIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKClcclxuXHJcbiAgICAvLyBSZXNldCB2aWV3cG9ydFxyXG4gICAgY2FudmFzLnNldFZpZXdwb3J0KHRoaXMuc2F2ZWRWaWV3cG9ydC54LCB0aGlzLnNhdmVkVmlld3BvcnQueSwgdGhpcy5zYXZlZFZpZXdwb3J0Lnpvb20pXHJcbiAgICB0aGlzLmlzUHJlc2VudGF0aW9uTW9kZSA9IGZhbHNlXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG5leHROb2RlKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBjb25zdCBmcm9tTm9kZSA9IHRoaXMudmlzaXRlZE5vZGVzLmxhc3QoKVxyXG4gICAgaWYgKCFmcm9tTm9kZSkgcmV0dXJuXHJcblxyXG4gICAgY29uc3Qgb3V0Z29pbmdFZGdlcyA9IGNhbnZhcy5nZXRFZGdlc0Zvck5vZGUoZnJvbU5vZGUpLmZpbHRlcigoZWRnZTogQ2FudmFzRWRnZSkgPT4gZWRnZS5mcm9tLm5vZGUgPT09IGZyb21Ob2RlKVxyXG4gICAgbGV0IHRvTm9kZSA9IG91dGdvaW5nRWRnZXMuZmlyc3QoKT8udG8ubm9kZVxyXG5cclxuICAgIC8vIElmIHRoZXJlIGFyZSBtdWx0aXBsZSBvdXRnb2luZyBlZGdlcywgd2UgbmVlZCB0byBsb29rIGF0IHRoZSBlZGdlIGxhYmVsXHJcbiAgICBpZiAob3V0Z29pbmdFZGdlcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgIC8vIENyZWF0ZSBtYXAgb2YgZWRnZSBsYWJlbHMgdG8gbm9kZXNcclxuICAgICAgY29uc3Qgc29ydGVkRWRnZXMgPSBvdXRnb2luZ0VkZ2VzXHJcbiAgICAgICAgLnNvcnQoKGE6IENhbnZhc0VkZ2UsIGI6IENhbnZhc0VkZ2UpID0+IHtcclxuICAgICAgICAgIGlmICghYS5sYWJlbCkgcmV0dXJuIDFcclxuICAgICAgICAgIGlmICghYi5sYWJlbCkgcmV0dXJuIC0xXHJcblxyXG4gICAgICAgICAgcmV0dXJuIGEubGFiZWwubG9jYWxlQ29tcGFyZShiLmxhYmVsKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAvLyBGaW5kIHdoaWNoIGVkZ2VzIGFscmVhZHkgaGF2ZSBiZWVuIHRyYXZlcnNlZFxyXG4gICAgICBjb25zdCB0cmF2ZXJzZWRFZGdlc0NvdW50ID0gdGhpcy52aXNpdGVkTm9kZXNcclxuICAgICAgICAuZmlsdGVyKCh2aXNpdGVkTm9kZTogQ2FudmFzTm9kZSkgPT4gdmlzaXRlZE5vZGUgPT0gZnJvbU5vZGUpLmxlbmd0aCAtIDFcclxuXHJcbiAgICAgIC8vIFNlbGVjdCBuZXh0IGVkZ2VcclxuICAgICAgY29uc3QgbmV4dEVkZ2UgPSBzb3J0ZWRFZGdlc1t0cmF2ZXJzZWRFZGdlc0NvdW50XVxyXG4gICAgICB0b05vZGUgPSBuZXh0RWRnZS50by5ub2RlXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRvTm9kZSkge1xyXG4gICAgICB0aGlzLnZpc2l0ZWROb2Rlcy5wdXNoKHRvTm9kZSlcclxuICAgICAgdGhpcy5hbmltYXRlTm9kZVRyYW5zaXRpb24oY2FudmFzLCBmcm9tTm9kZSwgdG9Ob2RlKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gTm8gbW9yZSBub2RlcyBsZWZ0LCBhbmltYXRlIHRvIHNhbWUgbm9kZVxyXG4gICAgICB0aGlzLmFuaW1hdGVOb2RlVHJhbnNpdGlvbihjYW52YXMsIGZyb21Ob2RlLCBmcm9tTm9kZSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgcHJldmlvdXNOb2RlKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBjb25zdCBmcm9tTm9kZSA9IHRoaXMudmlzaXRlZE5vZGVzLnBvcCgpXHJcbiAgICBpZiAoIWZyb21Ob2RlKSByZXR1cm5cclxuXHJcbiAgICBsZXQgdG9Ob2RlID0gdGhpcy52aXNpdGVkTm9kZXMubGFzdCgpXHJcblxyXG4gICAgLy8gRmFsbCBiYWNrIHRvIHNhbWUgbm9kZSBpZiB0aGVyZSBhcmUgbm8gbW9yZSBub2RlcyBiZWZvcmVcclxuICAgIGlmICghdG9Ob2RlKSB7XHJcbiAgICAgIHRvTm9kZSA9IGZyb21Ob2RlXHJcbiAgICAgIHRoaXMudmlzaXRlZE5vZGVzLnB1c2goZnJvbU5vZGUpXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5hbmltYXRlTm9kZVRyYW5zaXRpb24oY2FudmFzLCBmcm9tTm9kZSwgdG9Ob2RlKVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBDYW52YXMgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgQ2FudmFzSGVscGVyLCB7IE1lbnVPcHRpb24gfSBmcm9tIFwic3JjL3V0aWxzL2NhbnZhcy1oZWxwZXJcIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgeyBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzIH0gZnJvbSBcInNyYy9zZXR0aW5nc1wiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCZXR0ZXJSZWFkb25seUNhbnZhc0V4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gJ2JldHRlclJlYWRvbmx5RW5hYmxlZCcgYXMgY29uc3QgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgLyogUG9wdXAgbGlzdGVuZXIgKi9cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuUG9wdXBNZW51Q3JlYXRlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBfbm9kZTogYW55KSA9PiB0aGlzLnVwZGF0ZVBvcHVwTWVudShjYW52YXMpXHJcbiAgICApKVxyXG5cclxuICAgIC8qIFpvb20gYW5kIFBhbiBsaXN0ZW5lciAqL1xyXG4gICAgbGV0IG1vdmluZ1RvQkJveCA9IGZhbHNlXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5WaWV3cG9ydENoYW5nZWQuQmVmb3JlLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMpID0+IHtcclxuICAgICAgICAvLyBPbmx5IGFsbG93IHZpZXdwb3J0IGNoYW5nZSBvbmNlIHdoZW4gdXNpbmcgem9vbSB0byBiYm94XHJcbiAgICAgICAgaWYgKG1vdmluZ1RvQkJveCkge1xyXG4gICAgICAgICAgbW92aW5nVG9CQm94ID0gZmFsc2VcclxuXHJcbiAgICAgICAgICB0aGlzLnVwZGF0ZUxvY2tlZFpvb20oY2FudmFzKVxyXG4gICAgICAgICAgdGhpcy51cGRhdGVMb2NrZWRQYW4oY2FudmFzKVxyXG5cclxuICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFjYW52YXMucmVhZG9ubHkpIHJldHVyblxyXG5cclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnZGlzYWJsZVpvb20nKSkge1xyXG4gICAgICAgICAgY2FudmFzLnpvb20gPSBjYW52YXMubG9ja2VkWm9vbSA/PyBjYW52YXMuem9vbVxyXG4gICAgICAgICAgY2FudmFzLnRab29tID0gY2FudmFzLmxvY2tlZFpvb20gPz8gY2FudmFzLnRab29tXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnZGlzYWJsZVBhbicpKSB7XHJcbiAgICAgICAgICBjYW52YXMueCA9IGNhbnZhcy5sb2NrZWRYID8/IGNhbnZhcy54XHJcbiAgICAgICAgICBjYW52YXMudHggPSBjYW52YXMubG9ja2VkWCA/PyBjYW52YXMudHhcclxuICAgICAgICAgIGNhbnZhcy55ID0gY2FudmFzLmxvY2tlZFkgPz8gY2FudmFzLnlcclxuICAgICAgICAgIGNhbnZhcy50eSA9IGNhbnZhcy5sb2NrZWRZID8/IGNhbnZhcy50eVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgKSlcclxuXHJcbiAgICAvLyBBbGxvdyB2aWV3cG9ydCBjaGFuZ2Ugd2hlbiB1c2luZyB6b29tIHRvIGJib3hcclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuWm9vbVRvQmJveC5CZWZvcmUsXHJcbiAgICAgICgpID0+IG1vdmluZ1RvQkJveCA9IHRydWVcclxuICAgICkpXHJcblxyXG4gICAgLyogUmVhZG9ubHkgbGlzdGVuZXIgKi9cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuUmVhZG9ubHlDaGFuZ2VkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIF9yZWFkb25seTogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgIHRoaXMudXBkYXRlUG9wdXBNZW51KGNhbnZhcylcclxuICAgICAgICB0aGlzLnVwZGF0ZUxvY2tlZFpvb20oY2FudmFzKVxyXG4gICAgICAgIHRoaXMudXBkYXRlTG9ja2VkUGFuKGNhbnZhcylcclxuICAgICAgfVxyXG4gICAgKSlcclxuXHJcbiAgICAvKiBBZGQgc2V0dGluZ3MgKi9cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuQ2FudmFzQ2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLmFkZFF1aWNrU2V0dGluZ3MoY2FudmFzKVxyXG4gICAgKSlcclxuICB9XHJcblxyXG4gIGFkZFF1aWNrU2V0dGluZ3MoY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGNvbnN0IHNldHRpbmdzQ29udGFpbmVyID0gY2FudmFzLnF1aWNrU2V0dGluZ3NCdXR0b24/LnBhcmVudEVsZW1lbnRcclxuICAgIGlmICghc2V0dGluZ3NDb250YWluZXIpIHJldHVyblxyXG5cclxuICAgIENhbnZhc0hlbHBlci5hZGRRdWlja1NldHRpbmdzQnV0dG9uKFxyXG4gICAgICBzZXR0aW5nc0NvbnRhaW5lcixcclxuICAgICAgdGhpcy5jcmVhdGVUb2dnbGUoe1xyXG4gICAgICAgIGlkOiAnZGlzYWJsZS1ub2RlLXBvcHVwJyxcclxuICAgICAgICBsYWJlbDogJ0Rpc2FibGUgbm9kZSBwb3B1cCcsXHJcbiAgICAgICAgaWNvbjogJ2Fycm93LXVwLXJpZ2h0LWZyb20tY2lyY2xlJyxcclxuICAgICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy51cGRhdGVQb3B1cE1lbnUoY2FudmFzKVxyXG4gICAgICB9LCAnZGlzYWJsZU5vZGVQb3B1cCcpXHJcbiAgICApXHJcblxyXG4gICAgQ2FudmFzSGVscGVyLmFkZFF1aWNrU2V0dGluZ3NCdXR0b24oXHJcbiAgICAgIHNldHRpbmdzQ29udGFpbmVyLFxyXG4gICAgICB0aGlzLmNyZWF0ZVRvZ2dsZSh7XHJcbiAgICAgICAgaWQ6ICdkaXNhYmxlLXpvb20nLFxyXG4gICAgICAgIGxhYmVsOiAnRGlzYWJsZSB6b29tJyxcclxuICAgICAgICBpY29uOiAnem9vbS1pbicsXHJcbiAgICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMudXBkYXRlTG9ja2VkWm9vbShjYW52YXMpXHJcbiAgICAgIH0sICdkaXNhYmxlWm9vbScpXHJcbiAgICApXHJcblxyXG4gICAgQ2FudmFzSGVscGVyLmFkZFF1aWNrU2V0dGluZ3NCdXR0b24oXHJcbiAgICAgIHNldHRpbmdzQ29udGFpbmVyLFxyXG4gICAgICB0aGlzLmNyZWF0ZVRvZ2dsZSh7XHJcbiAgICAgICAgaWQ6ICdkaXNhYmxlLXBhbicsXHJcbiAgICAgICAgbGFiZWw6ICdEaXNhYmxlIHBhbicsXHJcbiAgICAgICAgaWNvbjogJ21vdmUnLFxyXG4gICAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnVwZGF0ZUxvY2tlZFBhbihjYW52YXMpXHJcbiAgICAgIH0sICdkaXNhYmxlUGFuJylcclxuICAgIClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY3JlYXRlVG9nZ2xlKG1lbnVPcHRpb246IE1lbnVPcHRpb24sIHNldHRpbmdLZXk6IGtleW9mIEFkdmFuY2VkQ2FudmFzUGx1Z2luU2V0dGluZ3MpOiBIVE1MRWxlbWVudCB7XHJcbiAgICBjb25zdCB0b2dnbGUgPSBDYW52YXNIZWxwZXIuY3JlYXRlUXVpY2tTZXR0aW5nc0J1dHRvbih7XHJcbiAgICAgIC4uLm1lbnVPcHRpb24sXHJcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiAoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gIXRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoc2V0dGluZ0tleSlcclxuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZXRTZXR0aW5nKHsgW3NldHRpbmdLZXldOiBuZXdWYWx1ZSB9KVxyXG5cclxuICAgICAgICB0b2dnbGUuZGF0YXNldC50b2dnbGVkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZyhzZXR0aW5nS2V5KS50b1N0cmluZygpXHJcbiAgICAgICAgbWVudU9wdGlvbi5jYWxsYmFjaz8uY2FsbCh0aGlzKVxyXG4gICAgICB9KSgpXHJcbiAgICB9KVxyXG4gICAgdG9nZ2xlLmNsYXNzTGlzdC5hZGQoJ3Nob3ctd2hpbGUtcmVhZG9ubHknKVxyXG5cclxuICAgIHRvZ2dsZS5kYXRhc2V0LnRvZ2dsZWQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKHNldHRpbmdLZXkpLnRvU3RyaW5nKClcclxuXHJcbiAgICByZXR1cm4gdG9nZ2xlXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZVBvcHVwTWVudShjYW52YXM6IENhbnZhcykge1xyXG4gICAgY29uc3QgaGlkZGVuID0gY2FudmFzLnJlYWRvbmx5ICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2Rpc2FibGVOb2RlUG9wdXAnKVxyXG4gICAgY2FudmFzLm1lbnUubWVudUVsLnN0eWxlLnZpc2liaWxpdHkgPSBoaWRkZW4gPyAnaGlkZGVuJyA6ICd2aXNpYmxlJ1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVMb2NrZWRab29tKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBjYW52YXMubG9ja2VkWm9vbSA9IGNhbnZhcy50Wm9vbVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVMb2NrZWRQYW4oY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGNhbnZhcy5sb2NrZWRYID0gY2FudmFzLnR4XHJcbiAgICBjYW52YXMubG9ja2VkWSA9IGNhbnZhcy50eVxyXG4gIH1cclxufSIsICJpbXBvcnQgQXBwLCB7IFN1Z2dlc3RNb2RhbCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbidcclxuaW1wb3J0IFBhdGhIZWxwZXIgZnJvbSAnc3JjL3V0aWxzL3BhdGgtaGVscGVyJ1xyXG5cclxuZXhwb3J0IGNsYXNzIEZpbGVOYW1lTW9kYWwgZXh0ZW5kcyBTdWdnZXN0TW9kYWw8c3RyaW5nPiB7XHJcbiAgcGFyZW50UGF0aDogc3RyaW5nXHJcbiAgZmlsZUV4dGVuc2lvbjogc3RyaW5nXHJcblxyXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwYXJlbnRQYXRoOiBzdHJpbmcsIGZpbGVFeHRlbnNpb246IHN0cmluZykge1xyXG4gICAgc3VwZXIoYXBwKVxyXG5cclxuICAgIHRoaXMucGFyZW50UGF0aCA9IHBhcmVudFBhdGhcclxuICAgIHRoaXMuZmlsZUV4dGVuc2lvbiA9IGZpbGVFeHRlbnNpb25cclxuICB9XHJcblxyXG4gIGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBzdHJpbmdbXSB7XHJcbiAgICBjb25zdCBxdWVyeVdpdGhvdXRFeHRlbnNpb24gPSBxdWVyeS5yZXBsYWNlKG5ldyBSZWdFeHAoYFxcXFwuJHt0aGlzLmZpbGVFeHRlbnNpb259JGApLCAnJylcclxuICAgIGlmIChxdWVyeVdpdGhvdXRFeHRlbnNpb24gPT09ICcnKSByZXR1cm4gW11cclxuXHJcbiAgICBjb25zdCBxdWVyeVdpdGhFeHRlbnNpb24gPSBxdWVyeVdpdGhvdXRFeHRlbnNpb24gKyAnLicgKyB0aGlzLmZpbGVFeHRlbnNpb25cclxuICAgIGNvbnN0IHN1Z2dlc3Rpb25zID0gW2Ake3RoaXMucGFyZW50UGF0aH0vJHtxdWVyeVdpdGhFeHRlbnNpb259YCwgcXVlcnlXaXRoRXh0ZW5zaW9uXVxyXG4gICAgICAvLyBGaWx0ZXIgb3V0IHN1Z2dlc3Rpb25zIGZvciBmaWxlcyB0aGF0IGFscmVhZHkgZXhpc3RcclxuICAgICAgLmZpbHRlcihzID0+IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChzKSA9PT0gbnVsbClcclxuXHJcbiAgICByZXR1cm4gc3VnZ2VzdGlvbnNcclxuICB9XHJcblxyXG4gIHJlbmRlclN1Z2dlc3Rpb24odGV4dDogc3RyaW5nLCBlbDogSFRNTEVsZW1lbnQpIHtcclxuICAgIGVsLnNldFRleHQodGV4dClcclxuICB9XHJcblxyXG4gIG9uQ2hvb3NlU3VnZ2VzdGlvbihfdGV4dDogc3RyaW5nLCBfZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCkge31cclxuXHJcbiAgYXdhaXRJbnB1dCgpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCBfcmVqZWN0KSA9PiB7XHJcbiAgICAgIHRoaXMub25DaG9vc2VTdWdnZXN0aW9uID0gKHRleHQ6IHN0cmluZykgPT4geyByZXNvbHZlKHRleHQpIH1cclxuICAgICAgdGhpcy5vcGVuKClcclxuICAgIH0pXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRmlsZVNlbGVjdE1vZGFsIGV4dGVuZHMgU3VnZ2VzdE1vZGFsPHN0cmluZz4ge1xyXG4gIGZpbGVzOiBzdHJpbmdbXVxyXG4gIHN1Z2dlc3ROZXdGaWxlOiBib29sZWFuXHJcblxyXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBleHRlbnNpb25zUmVnZXg/OiBSZWdFeHAsIHN1Z2dlc3ROZXdGaWxlOiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgIHN1cGVyKGFwcClcclxuXHJcbiAgICB0aGlzLmZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKVxyXG4gICAgICAubWFwKGZpbGUgPT4gZmlsZS5wYXRoKVxyXG4gICAgICAuZmlsdGVyKHBhdGggPT4gUGF0aEhlbHBlci5leHRlbnNpb24ocGF0aCk/Lm1hdGNoKGV4dGVuc2lvbnNSZWdleCA/PyAvLiovKSlcclxuICAgIHRoaXMuc3VnZ2VzdE5ld0ZpbGUgPSBzdWdnZXN0TmV3RmlsZVxyXG5cclxuICAgIHRoaXMuc2V0UGxhY2Vob2xkZXIoJ1R5cGUgdG8gc2VhcmNoLi4uJylcclxuICAgIHRoaXMuc2V0SW5zdHJ1Y3Rpb25zKFt7XHJcbiAgICAgICAgY29tbWFuZDogJ1x1MjE5MVx1MjE5MycsXHJcbiAgICAgICAgcHVycG9zZTogJ3RvIG5hdmlnYXRlJ1xyXG4gICAgfSwge1xyXG4gICAgICAgIGNvbW1hbmQ6ICdcdTIxQjUnLFxyXG4gICAgICAgIHB1cnBvc2U6ICd0byBvcGVuJ1xyXG4gICAgfSwge1xyXG4gICAgICAgIGNvbW1hbmQ6ICdzaGlmdCBcdTIxQjUnLFxyXG4gICAgICAgIHB1cnBvc2U6ICd0byBjcmVhdGUnXHJcbiAgICB9LCB7XHJcbiAgICAgICAgY29tbWFuZDogJ2VzYycsXHJcbiAgICAgICAgcHVycG9zZTogJ3RvIGRpc21pc3MnXHJcbiAgICB9XSlcclxuXHJcbiAgICB0aGlzLnNjb3BlLnJlZ2lzdGVyKFsnU2hpZnQnXSwgJ0VudGVyJywgKChlKSA9PiB7XHJcbiAgICAgIHRoaXMub25DaG9vc2VTdWdnZXN0aW9uKHRoaXMuaW5wdXRFbC52YWx1ZSwgZSlcclxuICAgICAgdGhpcy5jbG9zZSgpXHJcbiAgICB9KSlcclxuICB9XHJcblxyXG4gIGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBzdHJpbmdbXSB7XHJcbiAgICBjb25zdCBzdWdnZXN0aW9ucyA9IHRoaXMuZmlsZXMuZmlsdGVyKHBhdGggPT4gcGF0aC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5LnRvTG93ZXJDYXNlKCkpKVxyXG4gICAgaWYgKHN1Z2dlc3Rpb25zLmxlbmd0aCA9PT0gMCAmJiB0aGlzLnN1Z2dlc3ROZXdGaWxlKSBzdWdnZXN0aW9ucy5wdXNoKHF1ZXJ5KVxyXG5cclxuICAgIHJldHVybiBzdWdnZXN0aW9uc1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyU3VnZ2VzdGlvbihwYXRoOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgY29uc3Qgc2ltcGxpZmllZFBhdGggPSBwYXRoLnJlcGxhY2UoL1xcLm1kJC8sICcnKVxyXG4gICAgZWwuc2V0VGV4dChzaW1wbGlmaWVkUGF0aClcclxuICB9XHJcblxyXG4gIG9uQ2hvb3NlU3VnZ2VzdGlvbihfcGF0aDogc3RyaW5nLCBfZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCkge31cclxuXHJcbiAgYXdhaXRJbnB1dCgpOiBQcm9taXNlPFRGaWxlPiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIF9yZWplY3QpID0+IHtcclxuICAgICAgdGhpcy5vbkNob29zZVN1Z2dlc3Rpb24gPSAocGF0aDogc3RyaW5nLCBfZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aClcclxuXHJcbiAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSlcclxuICAgICAgICAgIHJldHVybiByZXNvbHZlKGZpbGUpXHJcblxyXG4gICAgICAgIGlmICghdGhpcy5zdWdnZXN0TmV3RmlsZSkgcmV0dXJuXHJcblxyXG4gICAgICAgIGlmIChQYXRoSGVscGVyLmV4dGVuc2lvbihwYXRoKSA9PT0gdW5kZWZpbmVkKSBwYXRoICs9ICcubWQnXHJcbiAgICAgICAgY29uc3QgbmV3RmlsZSA9IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShwYXRoLCAnJylcclxuICAgICAgICByZXNvbHZlKG5ld0ZpbGUpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMub3BlbigpXHJcbiAgICB9KVxyXG4gIH1cclxufSIsICJleHBvcnQgZGVmYXVsdCBjbGFzcyBQYXRoSGVscGVyIHtcclxuICBzdGF0aWMgZXh0ZW5zaW9uKHBhdGg6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgICByZXR1cm4gcGF0aC5pbmNsdWRlcygnLicpID8gcGF0aC5zcGxpdCgnLicpLnBvcCgpIDogdW5kZWZpbmVkXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IE1lbnUgfSBmcm9tIFwib2JzaWRpYW5cIlxyXG5pbXBvcnQgeyBDYW52YXMgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgeyBGaWxlTmFtZU1vZGFsIH0gZnJvbSBcInNyYy91dGlscy9tb2RhbC1oZWxwZXJcIlxyXG5pbXBvcnQgQ2FudmFzSGVscGVyIGZyb20gXCJzcmMvdXRpbHMvY2FudmFzLWhlbHBlclwiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcblxyXG5jb25zdCBFTkNBUFNVTEFURURfRklMRV9OT0RFX1NJWkUgPSB7IHdpZHRoOiAzMDAsIGhlaWdodDogMzAwIH1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVuY2Fwc3VsYXRlQ2FudmFzRXh0ZW5zaW9uIGV4dGVuZHMgQ2FudmFzRXh0ZW5zaW9uIHtcclxuICBpc0VuYWJsZWQoKSB7IHJldHVybiAnY2FudmFzRW5jYXBzdWxhdGlvbkVuYWJsZWQnIGFzIGNvbnN0IH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIC8qIEFkZCBjb21tYW5kIHRvIGVuY2Fwc3VsYXRlIHNlbGVjdGlvbiAqL1xyXG4gICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcbiAgICAgIGlkOiAnZW5jYXBzdWxhdGUtc2VsZWN0aW9uJyxcclxuICAgICAgbmFtZTogJ0VuY2Fwc3VsYXRlIHNlbGVjdGlvbicsXHJcbiAgICAgIGNoZWNrQ2FsbGJhY2s6IENhbnZhc0hlbHBlci5jYW52YXNDb21tYW5kKFxyXG4gICAgICAgIHRoaXMucGx1Z2luLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gIWNhbnZhcy5yZWFkb25seSAmJiBjYW52YXMuc2VsZWN0aW9uLnNpemUgPiAwLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5lbmNhcHN1bGF0ZVNlbGVjdGlvbihjYW52YXMpXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgLyogQWRkIGVuY2Fwc3VsYXRlIG9wdGlvbiB0byBjb250ZXh0IG1lbnUgKi9cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgJ2NhbnZhczpzZWxlY3Rpb24tbWVudScsXHJcbiAgICAgIChtZW51OiBNZW51LCBjYW52YXM6IENhbnZhcykgPT4ge1xyXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cclxuICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgLnNldFRpdGxlKCdFbmNhcHN1bGF0ZScpXHJcbiAgICAgICAgICAgIC5zZXRJY29uKCdmaWxlLXBsdXMnKVxyXG4gICAgICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLmVuY2Fwc3VsYXRlU2VsZWN0aW9uKGNhbnZhcykpXHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICApKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZW5jYXBzdWxhdGVTZWxlY3Rpb24oY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGNvbnN0IHNlbGVjdGlvbiA9IGNhbnZhcy5nZXRTZWxlY3Rpb25EYXRhKClcclxuXHJcbiAgICAvLyBDcmVhdGUgbmV3IGZpbGVcclxuICAgIGNvbnN0IHNvdXJjZUZpbGVGb2xkZXIgPSBjYW52YXMudmlldy5maWxlLnBhcmVudD8ucGF0aFxyXG4gICAgaWYgKCFzb3VyY2VGaWxlRm9sZGVyKSByZXR1cm4gLy8gU2hvdWxkIG5ldmVyIGhhcHBlblxyXG5cclxuICAgIGNvbnN0IHRhcmdldEZpbGVQYXRoID0gYXdhaXQgbmV3IEZpbGVOYW1lTW9kYWwoXHJcbiAgICAgIHRoaXMucGx1Z2luLmFwcCxcclxuICAgICAgc291cmNlRmlsZUZvbGRlcixcclxuICAgICAgJ2NhbnZhcydcclxuICAgICkuYXdhaXRJbnB1dCgpXHJcblxyXG4gICAgY29uc3QgbmV3RmlsZURhdGEgPSB7IG5vZGVzOiBzZWxlY3Rpb24ubm9kZXMsIGVkZ2VzOiBzZWxlY3Rpb24uZWRnZXMgfVxyXG4gICAgY29uc3QgZmlsZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5jcmVhdGUodGFyZ2V0RmlsZVBhdGgsIEpTT04uc3RyaW5naWZ5KG5ld0ZpbGVEYXRhLCBudWxsLCAyKSlcclxuXHJcbiAgICAvLyBSZW1vdmUgZnJvbSBjdXJyZW50IGNhbnZhc1xyXG4gICAgZm9yIChjb25zdCBub2RlRGF0YSBvZiBzZWxlY3Rpb24ubm9kZXMpIHtcclxuICAgICAgY29uc3Qgbm9kZSA9IGNhbnZhcy5ub2Rlcy5nZXQobm9kZURhdGEuaWQpXHJcbiAgICAgIGlmIChub2RlKSBjYW52YXMucmVtb3ZlTm9kZShub2RlKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEFkZCBsaW5rIHRvIG5ldyBmaWxlIGluIGN1cnJlbnQgY2FudmFzXHJcbiAgICBjYW52YXMuY3JlYXRlRmlsZU5vZGUoe1xyXG4gICAgICBwb3M6IHtcclxuICAgICAgICB4OiBzZWxlY3Rpb24uY2VudGVyLnggLSBFTkNBUFNVTEFURURfRklMRV9OT0RFX1NJWkUud2lkdGggLyAyLFxyXG4gICAgICAgIHk6IHNlbGVjdGlvbi5jZW50ZXIueSAtIEVOQ0FQU1VMQVRFRF9GSUxFX05PREVfU0laRS5oZWlnaHQgLyAyXHJcbiAgICAgIH0sXHJcbiAgICAgIHNpemU6IEVOQ0FQU1VMQVRFRF9GSUxFX05PREVfU0laRSxcclxuICAgICAgZmlsZTogZmlsZVxyXG4gICAgfSlcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgQ2FudmFzIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IENhbnZhc0hlbHBlciBmcm9tIFwic3JjL3V0aWxzL2NhbnZhcy1oZWxwZXJcIlxyXG5pbXBvcnQgeyBGaWxlU2VsZWN0TW9kYWwgfSBmcm9tIFwic3JjL3V0aWxzL21vZGFsLWhlbHBlclwiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcblxyXG50eXBlIERpcmVjdGlvbiA9ICd1cCcgfCAnZG93bicgfCAnbGVmdCcgfCAncmlnaHQnXHJcbmNvbnN0IERJUkVDVElPTlMgPSBbJ3VwJywgJ2Rvd24nLCAnbGVmdCcsICdyaWdodCddIGFzIERpcmVjdGlvbltdXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb21tYW5kc0NhbnZhc0V4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gJ2NvbW1hbmRzRmVhdHVyZUVuYWJsZWQnIGFzIGNvbnN0IH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogJ2NyZWF0ZS10ZXh0LW5vZGUnLFxyXG4gICAgICBuYW1lOiAnQ3JlYXRlIHRleHQgbm9kZScsXHJcbiAgICAgIGNoZWNrQ2FsbGJhY2s6IENhbnZhc0hlbHBlci5jYW52YXNDb21tYW5kKFxyXG4gICAgICAgIHRoaXMucGx1Z2luLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gIWNhbnZhcy5yZWFkb25seSxcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMuY3JlYXRlVGV4dE5vZGUoY2FudmFzKVxyXG4gICAgICApXHJcbiAgICB9KVxyXG5cclxuICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogJ2NyZWF0ZS1maWxlLW5vZGUnLFxyXG4gICAgICBuYW1lOiAnQ3JlYXRlIGZpbGUgbm9kZScsXHJcbiAgICAgIGNoZWNrQ2FsbGJhY2s6IENhbnZhc0hlbHBlci5jYW52YXNDb21tYW5kKFxyXG4gICAgICAgIHRoaXMucGx1Z2luLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gIWNhbnZhcy5yZWFkb25seSxcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMuY3JlYXRlRmlsZU5vZGUoY2FudmFzKVxyXG4gICAgICApXHJcbiAgICB9KVxyXG5cclxuICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogJ3NlbGVjdC1hbGwtZWRnZXMnLFxyXG4gICAgICBuYW1lOiAnU2VsZWN0IGFsbCBlZGdlcycsXHJcbiAgICAgIGNoZWNrQ2FsbGJhY2s6IENhbnZhc0hlbHBlci5jYW52YXNDb21tYW5kKFxyXG4gICAgICAgIHRoaXMucGx1Z2luLFxyXG4gICAgICAgIChfY2FudmFzOiBDYW52YXMpID0+IHRydWUsXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiBjYW52YXMudXBkYXRlU2VsZWN0aW9uKCgpID0+IFxyXG4gICAgICAgICAgY2FudmFzLnNlbGVjdGlvbiA9IG5ldyBTZXQoY2FudmFzLmVkZ2VzLnZhbHVlcygpKVxyXG4gICAgICAgIClcclxuICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuICAgICAgaWQ6ICd6b29tLXRvLXNlbGVjdGlvbicsXHJcbiAgICAgIG5hbWU6ICdab29tIHRvIHNlbGVjdGlvbicsXHJcbiAgICAgIGNoZWNrQ2FsbGJhY2s6IENhbnZhc0hlbHBlci5jYW52YXNDb21tYW5kKFxyXG4gICAgICAgIHRoaXMucGx1Z2luLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gY2FudmFzLnNlbGVjdGlvbi5zaXplID4gMCxcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+IGNhbnZhcy56b29tVG9TZWxlY3Rpb24oKVxyXG4gICAgICApXHJcbiAgICB9KVxyXG5cclxuICAgIGZvciAoY29uc3QgZGlyZWN0aW9uIG9mIERJUkVDVElPTlMpIHtcclxuICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgaWQ6IGBjbG9uZS1ub2RlLSR7ZGlyZWN0aW9ufWAsXHJcbiAgICAgICAgbmFtZTogYENsb25lIG5vZGUgJHtkaXJlY3Rpb259YCxcclxuICAgICAgICBjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICAgIHRoaXMucGx1Z2luLFxyXG4gICAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiAhY2FudmFzLnJlYWRvbmx5ICYmIGNhbnZhcy5zZWxlY3Rpb24uc2l6ZSA9PT0gMSAmJiBjYW52YXMuc2VsZWN0aW9uLnZhbHVlcygpLm5leHQoKS52YWx1ZT8uZ2V0RGF0YSgpLnR5cGUgPT09ICd0ZXh0JyxcclxuICAgICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5jbG9uZU5vZGUoY2FudmFzLCBkaXJlY3Rpb24pXHJcbiAgICAgICAgKVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgaWQ6IGBleHBhbmQtbm9kZS0ke2RpcmVjdGlvbn1gLFxyXG4gICAgICAgIG5hbWU6IGBFeHBhbmQgbm9kZSAke2RpcmVjdGlvbn1gLFxyXG4gICAgICAgIGNoZWNrQ2FsbGJhY2s6IENhbnZhc0hlbHBlci5jYW52YXNDb21tYW5kKFxyXG4gICAgICAgICAgdGhpcy5wbHVnaW4sXHJcbiAgICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+ICFjYW52YXMucmVhZG9ubHkgJiYgY2FudmFzLnNlbGVjdGlvbi5zaXplID09PSAxLFxyXG4gICAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLmV4cGFuZE5vZGUoY2FudmFzLCBkaXJlY3Rpb24pXHJcbiAgICAgICAgKVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjcmVhdGVUZXh0Tm9kZShjYW52YXM6IENhbnZhcykge1xyXG4gICAgY29uc3Qgc2l6ZSA9IGNhbnZhcy5jb25maWcuZGVmYXVsdFRleHROb2RlRGltZW5zaW9uc1xyXG4gICAgY29uc3QgcG9zID0gQ2FudmFzSGVscGVyLmdldENlbnRlckNvb3JkaW5hdGVzKGNhbnZhcywgc2l6ZSlcclxuXHJcbiAgICBjYW52YXMuY3JlYXRlVGV4dE5vZGUoeyBwb3M6IHBvcywgc2l6ZTogc2l6ZSB9KVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBjcmVhdGVGaWxlTm9kZShjYW52YXM6IENhbnZhcykge1xyXG4gICAgY29uc3Qgc2l6ZSA9IGNhbnZhcy5jb25maWcuZGVmYXVsdEZpbGVOb2RlRGltZW5zaW9uc1xyXG4gICAgY29uc3QgcG9zID0gQ2FudmFzSGVscGVyLmdldENlbnRlckNvb3JkaW5hdGVzKGNhbnZhcywgc2l6ZSlcclxuICAgIGNvbnN0IGZpbGUgPSBhd2FpdCBuZXcgRmlsZVNlbGVjdE1vZGFsKHRoaXMucGx1Z2luLmFwcCwgdW5kZWZpbmVkLCB0cnVlKS5hd2FpdElucHV0KClcclxuXHJcbiAgICBjYW52YXMuY3JlYXRlRmlsZU5vZGUoeyBwb3M6IHBvcywgc2l6ZTogc2l6ZSwgZmlsZTogZmlsZSB9KVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjbG9uZU5vZGUoY2FudmFzOiBDYW52YXMsIGNsb25lRGlyZWN0aW9uOiBEaXJlY3Rpb24pIHtcclxuICAgIGNvbnN0IHNvdXJjZU5vZGUgPSBjYW52YXMuc2VsZWN0aW9uLnZhbHVlcygpLm5leHQoKS52YWx1ZVxyXG4gICAgaWYgKCFzb3VyY2VOb2RlKSByZXR1cm5cclxuICAgIGNvbnN0IHNvdXJjZU5vZGVEYXRhID0gc291cmNlTm9kZS5nZXREYXRhKClcclxuXHJcbiAgICBjb25zdCBub2RlTWFyZ2luID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnY2xvbmVOb2RlTWFyZ2luJylcclxuICAgIGNvbnN0IG9mZnNldCA9IHsgXHJcbiAgICAgIHg6IChzb3VyY2VOb2RlLndpZHRoICsgbm9kZU1hcmdpbikgKiAoY2xvbmVEaXJlY3Rpb24gPT09ICdsZWZ0JyA/IC0xIDogKGNsb25lRGlyZWN0aW9uID09PSAncmlnaHQnID8gMSA6IDApKSxcclxuICAgICAgeTogKHNvdXJjZU5vZGUuaGVpZ2h0ICsgbm9kZU1hcmdpbikgKiAoY2xvbmVEaXJlY3Rpb24gPT09ICd1cCcgPyAtMSA6IChjbG9uZURpcmVjdGlvbiA9PT0gJ2Rvd24nID8gMSA6IDApKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNsb25lZE5vZGUgPSBjYW52YXMuY3JlYXRlVGV4dE5vZGUoe1xyXG4gICAgICBwb3M6IHtcclxuICAgICAgICB4OiBzb3VyY2VOb2RlLnggKyBvZmZzZXQueCxcclxuICAgICAgICB5OiBzb3VyY2VOb2RlLnkgKyBvZmZzZXQueVxyXG4gICAgICB9LFxyXG4gICAgICBzaXplOiB7XHJcbiAgICAgICAgd2lkdGg6IHNvdXJjZU5vZGUud2lkdGgsXHJcbiAgICAgICAgaGVpZ2h0OiBzb3VyY2VOb2RlLmhlaWdodFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGNsb25lZE5vZGUuc2V0RGF0YSh7IFxyXG4gICAgICAuLi5jbG9uZWROb2RlLmdldERhdGEoKSwgXHJcbiAgICAgIGNvbG9yOiBzb3VyY2VOb2RlRGF0YS5jb2xvcixcclxuICAgICAgc2hhcGU6IHNvdXJjZU5vZGVEYXRhLnNoYXBlIFxyXG4gICAgfSlcclxuXHJcbiAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnem9vbVRvQ2xvbmVkTm9kZScpKVxyXG4gICAgICBjYW52YXMuem9vbVRvQmJveChjbG9uZWROb2RlLmdldEJCb3goKSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZXhwYW5kTm9kZShjYW52YXM6IENhbnZhcywgZXhwYW5kRGlyZWN0aW9uOiBEaXJlY3Rpb24pIHtcclxuICAgIGNvbnN0IG5vZGUgPSBjYW52YXMuc2VsZWN0aW9uLnZhbHVlcygpLm5leHQoKS52YWx1ZVxyXG4gICAgaWYgKCFub2RlKSByZXR1cm5cclxuXHJcbiAgICBjb25zdCBleHBhbmROb2RlU3RlcFNpemUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdleHBhbmROb2RlU3RlcFNpemUnKVxyXG4gICAgY29uc3QgZXhwYW5kID0ge1xyXG4gICAgICB4OiBleHBhbmREaXJlY3Rpb24gPT09ICdsZWZ0JyA/IC0xIDogKGV4cGFuZERpcmVjdGlvbiA9PT0gJ3JpZ2h0JyA/IDEgOiAwKSxcclxuICAgICAgeTogZXhwYW5kRGlyZWN0aW9uID09PSAndXAnID8gLTEgOiAoZXhwYW5kRGlyZWN0aW9uID09PSAnZG93bicgPyAxIDogMClcclxuICAgIH1cclxuXHJcbiAgICBub2RlLnNldERhdGEoe1xyXG4gICAgICAuLi5ub2RlLmdldERhdGEoKSxcclxuICAgICAgd2lkdGg6IG5vZGUud2lkdGggKyBleHBhbmQueCAqIGV4cGFuZE5vZGVTdGVwU2l6ZSxcclxuICAgICAgaGVpZ2h0OiBub2RlLmhlaWdodCArIGV4cGFuZC55ICogZXhwYW5kTm9kZVN0ZXBTaXplXHJcbiAgICB9KVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiXHJcbmltcG9ydCB7IEJCb3gsIENhbnZhcywgQ2FudmFzRGF0YSwgQ2FudmFzRWRnZSwgQ2FudmFzRWxlbWVudCwgQ2FudmFzTm9kZSwgQ2FudmFzTm9kZURhdGEgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgQ2FudmFzSGVscGVyIGZyb20gXCJzcmMvdXRpbHMvY2FudmFzLWhlbHBlclwiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcblxyXG5jb25zdCBQT1JUQUxfUEFERElORyA9IDUwXHJcbmNvbnN0IE1JTl9PUEVOX1BPUlRBTF9TSVpFID0geyB3aWR0aDogMjAwLCBoZWlnaHQ6IDIwMCB9XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3J0YWxzQ2FudmFzRXh0ZW5zaW9uIGV4dGVuZHMgQ2FudmFzRXh0ZW5zaW9uIHtcclxuICBpc0VuYWJsZWQoKSB7IHJldHVybiAncG9ydGFsc0ZlYXR1cmVFbmFibGVkJyBhcyBjb25zdCB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LlBvcHVwTWVudUNyZWF0ZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy51cGRhdGVQb3B1cE1lbnUoY2FudmFzKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50Lk5vZGVSZW1vdmVkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIG5vZGU6IENhbnZhc05vZGUpID0+IHRoaXMub25Ob2RlUmVtb3ZlZChjYW52YXMsIG5vZGUpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuTm9kZU1vdmVkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIG5vZGU6IENhbnZhc05vZGUpID0+IHRoaXMub25Ob2RlTW92ZWQoY2FudmFzLCBub2RlKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkRyYWdnaW5nU3RhdGVDaGFuZ2VkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIHN0YXJ0ZWREcmFnZ2luZzogYm9vbGVhbikgPT4gdGhpcy5vbkRyYWdnaW5nU3RhdGVDaGFuZ2VkKGNhbnZhcywgc3RhcnRlZERyYWdnaW5nKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkNvbnRhaW5pbmdOb2Rlc1JlcXVlc3RlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBiYm94OiBCQm94LCBub2RlczogQ2FudmFzTm9kZVtdKSA9PiB0aGlzLm9uQ29udGFpbmluZ05vZGVzUmVxdWVzdGVkKGNhbnZhcywgYmJveCwgbm9kZXMpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuU2VsZWN0aW9uQ2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBvbGRTZWxlY3Rpb246IFNldDxDYW52YXNFbGVtZW50PiwgdXBkYXRlU2VsZWN0aW9uOiAodXBkYXRlOiAoKSA9PiB2b2lkKSA9PiB2b2lkKSA9PiB0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlZChjYW52YXMsIG9sZFNlbGVjdGlvbiwgdXBkYXRlU2VsZWN0aW9uKVxyXG4gICAgKSlcclxuICAgIFxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5EYXRhUmVxdWVzdGVkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIGRhdGE6IENhbnZhc0RhdGEpID0+IHRoaXMucmVtb3ZlUG9ydGFsQ2FudmFzRGF0YShjYW52YXMsIGRhdGEpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuTG9hZERhdGEsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgZGF0YTogQ2FudmFzRGF0YSwgc2V0RGF0YTogKGRhdGE6IENhbnZhc0RhdGEpID0+IHZvaWQpID0+IHtcclxuICAgICAgICB0aGlzLmdldENhbnZhc0RhdGFXaXRoUG9ydGFscyhjYW52YXMsIGRhdGEpXHJcbiAgICAgICAgICAudGhlbigobmV3RGF0YTogQ2FudmFzRGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBTa2lwIGlmIHRoZSBkYXRhIGRpZG4ndCBjaGFuZ2VcclxuICAgICAgICAgICAgaWYgKG5ld0RhdGEubm9kZXMubGVuZ3RoID09PSBkYXRhLm5vZGVzLmxlbmd0aCAmJiBuZXdEYXRhLmVkZ2VzLmxlbmd0aCA9PT0gZGF0YS5lZGdlcy5sZW5ndGgpIHJldHVyblxyXG4gICAgICAgICAgICBzZXREYXRhKG5ld0RhdGEpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICApKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVQb3B1cE1lbnUoY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGlmIChjYW52YXMucmVhZG9ubHkpIHJldHVyblxyXG5cclxuICAgIC8vIE9ubHkgc2VhcmNoIGZvciB2YWxpZCBub2Rlc1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRGaWxlTm9kZXMgPSBjYW52YXMuZ2V0U2VsZWN0aW9uRGF0YSgpLm5vZGVzLm1hcChub2RlRGF0YSA9PiB7XHJcbiAgICAgIGNvbnN0IG5vZGUgPSBjYW52YXMubm9kZXMuZ2V0KG5vZGVEYXRhLmlkKVxyXG4gICAgICBpZiAoIW5vZGUpIHJldHVybiBudWxsXHJcblxyXG4gICAgICBpZiAobm9kZURhdGEudHlwZSAhPT0gJ2ZpbGUnKSByZXR1cm4gbnVsbFxyXG4gICAgICBpZiAobm9kZS5maWxlPy5leHRlbnNpb24gPT09ICdjYW52YXMnKSByZXR1cm4gbm9kZVxyXG4gICAgICBcclxuICAgICAgLy8gQ2xvc2UgcG9ydGFsIG9mIG5vbi1jYW52YXMgZmlsZVxyXG4gICAgICBpZiAobm9kZURhdGEucG9ydGFsVG9GaWxlKSB0aGlzLnNldFBvcnRhbE9wZW4oY2FudmFzLCBub2RlLCBmYWxzZSlcclxuXHJcbiAgICAgIHJldHVybiBudWxsXHJcbiAgICB9KS5maWx0ZXIobm9kZSA9PiBub2RlICE9PSBudWxsKSBhcyBDYW52YXNOb2RlW11cclxuICAgIFxyXG4gICAgaWYgKHNlbGVjdGVkRmlsZU5vZGVzLmxlbmd0aCAhPT0gMSkgcmV0dXJuXHJcblxyXG4gICAgY29uc3QgcG9ydGFsTm9kZSA9IHNlbGVjdGVkRmlsZU5vZGVzWzBdXHJcbiAgICBjb25zdCBwb3J0YWxOb2RlRGF0YSA9IHBvcnRhbE5vZGUuZ2V0RGF0YSgpXHJcblxyXG4gICAgLy8gSWYgZmlsZSBjaGFuZ2VkXHJcbiAgICBpZiAocG9ydGFsTm9kZURhdGEucG9ydGFsVG9GaWxlICYmIHBvcnRhbE5vZGVEYXRhLmZpbGUgIT09IHBvcnRhbE5vZGVEYXRhLnBvcnRhbFRvRmlsZSkge1xyXG4gICAgICB0aGlzLnNldFBvcnRhbE9wZW4oY2FudmFzLCBwb3J0YWxOb2RlLCB0cnVlKVxyXG4gICAgfVxyXG5cclxuICAgIENhbnZhc0hlbHBlci5hZGRQb3B1cE1lbnVPcHRpb24oXHJcbiAgICAgIGNhbnZhcyxcclxuICAgICAgQ2FudmFzSGVscGVyLmNyZWF0ZVBvcHVwTWVudU9wdGlvbih7XHJcbiAgICAgICAgaWQ6ICd0b2dnbGUtcG9ydGFsJyxcclxuICAgICAgICBsYWJlbDogcG9ydGFsTm9kZURhdGEucG9ydGFsVG9GaWxlID8gJ0Nsb3NlIHBvcnRhbCcgOiAnT3BlbiBwb3J0YWwnLFxyXG4gICAgICAgIGljb246IHBvcnRhbE5vZGVEYXRhLnBvcnRhbFRvRmlsZSA/ICdkb29yLW9wZW4nIDogJ2Rvb3ItY2xvc2VkJyxcclxuICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5zZXRQb3J0YWxPcGVuKGNhbnZhcywgcG9ydGFsTm9kZSwgcG9ydGFsTm9kZURhdGEucG9ydGFsVG9GaWxlID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICB0aGlzLnVwZGF0ZVBvcHVwTWVudShjYW52YXMpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRQb3J0YWxPcGVuKGNhbnZhczogQ2FudmFzLCBwb3J0YWxOb2RlOiBDYW52YXNOb2RlLCBvcGVuOiBib29sZWFuKSB7XHJcbiAgICBjb25zdCBwb3J0YWxOb2RlRGF0YSA9IHBvcnRhbE5vZGUuZ2V0RGF0YSgpXHJcbiAgICBwb3J0YWxOb2RlLnNldERhdGEoe1xyXG4gICAgICAuLi5wb3J0YWxOb2RlRGF0YSxcclxuICAgICAgcG9ydGFsVG9GaWxlOiBvcGVuID8gcG9ydGFsTm9kZURhdGEuZmlsZSA6IHVuZGVmaW5lZFxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBVcGRhdGUgd2hvbGUgY2FudmFzIGRhdGFcclxuICAgIGNhbnZhcy5zZXREYXRhKGNhbnZhcy5nZXREYXRhKCkpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uTm9kZVJlbW92ZWQoY2FudmFzOiBDYW52YXMsIG5vZGU6IENhbnZhc05vZGUpIHtcclxuICAgIGNvbnN0IG5vZGVEYXRhID0gbm9kZS5nZXREYXRhKClcclxuICAgIGlmIChub2RlRGF0YS50eXBlICE9PSAnZmlsZScgfHwgIW5vZGVEYXRhLnBvcnRhbFRvRmlsZSkgcmV0dXJuXHJcblxyXG4gICAgLy8gUmVtb3ZlIG5lc3RlZCBub2RlcyBhbmQgZWRnZXNcclxuICAgIE9iamVjdC5rZXlzKG5vZGVEYXRhLnBvcnRhbElkTWFwcz8ubm9kZUlkTWFwID8/IHt9KS5tYXAocmVmTm9kZUlkID0+IGNhbnZhcy5ub2Rlcy5nZXQocmVmTm9kZUlkKSlcclxuICAgICAgLmZpbHRlcihub2RlID0+IG5vZGUgIT09IHVuZGVmaW5lZClcclxuICAgICAgLmZvckVhY2gobm9kZSA9PiBjYW52YXMucmVtb3ZlTm9kZShub2RlISkpXHJcblxyXG4gICAgT2JqZWN0LmtleXMobm9kZURhdGEucG9ydGFsSWRNYXBzPy5lZGdlSWRNYXAgPz8ge30pLm1hcChyZWZFZGdlSWQgPT4gY2FudmFzLmVkZ2VzLmdldChyZWZFZGdlSWQpKVxyXG4gICAgICAuZmlsdGVyKGVkZ2UgPT4gZWRnZSAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAuZm9yRWFjaChlZGdlID0+IGNhbnZhcy5yZW1vdmVFZGdlKGVkZ2UhKSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25Db250YWluaW5nTm9kZXNSZXF1ZXN0ZWQoX2NhbnZhczogQ2FudmFzLCBfYmJveDogQkJveCwgbm9kZXM6IENhbnZhc05vZGVbXSkge1xyXG4gICAgLy8gUmVtb3ZlIG5vZGVzIGZyb20gcG9ydGFscyBmcm9tIHRoZSBsaXN0XHJcbiAgICBub2Rlcy5zcGxpY2UoMCwgbm9kZXMubGVuZ3RoLCAuLi5ub2Rlcy5maWx0ZXIobm9kZSA9PiBub2RlLmdldERhdGEoKS5wb3J0YWxJZCA9PT0gdW5kZWZpbmVkKSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25TZWxlY3Rpb25DaGFuZ2VkKGNhbnZhczogQ2FudmFzLCBvbGRTZWxlY3Rpb246IFNldDxDYW52YXNFbGVtZW50PiwgdXBkYXRlU2VsZWN0aW9uOiAodXBkYXRlOiAoKSA9PiB2b2lkKSA9PiB2b2lkKSB7XHJcbiAgICAvLyBVbnNlbGVjdCBub2RlcyBmcm9tIHBvcnRhbHNcclxuICAgIHVwZGF0ZVNlbGVjdGlvbigoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRTZWxlY3Rpb24gPSBBcnJheS5mcm9tKGNhbnZhcy5zZWxlY3Rpb24pXHJcbiAgICAgICAgLmZpbHRlcihub2RlID0+IG5vZGUuZ2V0RGF0YSgpLnBvcnRhbElkID09PSB1bmRlZmluZWQpXHJcbiAgICAgIGNhbnZhcy5zZWxlY3Rpb24gPSBuZXcgU2V0KHVwZGF0ZWRTZWxlY3Rpb24pXHJcbiAgICB9KVxyXG5cclxuICAgIC8vIE1vdmUgcHJldmlvdXNseSBzZWxlY3RlZCBwb3J0YWxzIHRvIHRoZSBiYWNrXHJcbiAgICBjb25zdCBwcmV2aW91c2x5U2VsZWN0ZWRQb3J0YWxOb2Rlc0lkcyA9IEFycmF5LmZyb20ob2xkU2VsZWN0aW9uKVxyXG4gICAgICAuZmlsdGVyKG5vZGUgPT4gKG5vZGUuZ2V0RGF0YSgpIGFzIGFueSkucG9ydGFsVG9GaWxlICE9PSB1bmRlZmluZWQpXHJcbiAgICAgIC5mbGF0TWFwKG5vZGUgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBvcnRhbE5vZGVEYXRhID0gbm9kZS5nZXREYXRhKClcclxuICAgICAgICBjb25zdCBuZXN0ZWRQb3J0YWxzSWRzID0gdGhpcy5nZXROZXN0ZWRQb3J0YWxzSWRzKGNhbnZhcywgcG9ydGFsTm9kZURhdGEuaWQpXHJcblxyXG4gICAgICAgIHJldHVybiBbcG9ydGFsTm9kZURhdGEuaWQsIC4uLm5lc3RlZFBvcnRhbHNJZHNdXHJcbiAgICAgIH0pXHJcblxyXG4gICAgZm9yIChjb25zdCBub2RlIG9mIGNhbnZhcy5ub2Rlcy52YWx1ZXMoKSkge1xyXG4gICAgICBjb25zdCBub2RlRGF0YSA9IG5vZGUuZ2V0RGF0YSgpXHJcblxyXG4gICAgICAvLyBOb3QgZnJvbSB1bnNlbGVjdGVkIHBvcnRhbFxyXG4gICAgICBpZiAobm9kZURhdGEucG9ydGFsSWQgPT09IHVuZGVmaW5lZCB8fCAhcHJldmlvdXNseVNlbGVjdGVkUG9ydGFsTm9kZXNJZHMuaW5jbHVkZXMobm9kZURhdGEucG9ydGFsSWQpKSBjb250aW51ZVxyXG5cclxuICAgICAgLy8gTW92ZSB0byBmcm9udFxyXG4gICAgICBub2RlLnVwZGF0ZVpJbmRleCgpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldE5lc3RlZFBvcnRhbHNJZHMoY2FudmFzOiBDYW52YXMsIHBvcnRhbElkOiBzdHJpbmcpOiBzdHJpbmdbXSB7XHJcbiAgICBjb25zdCBuZXN0ZWRQb3J0YWxzSWRzOiBzdHJpbmdbXSA9IFtdXHJcblxyXG4gICAgZm9yIChjb25zdCBub2RlIG9mIGNhbnZhcy5ub2Rlcy52YWx1ZXMoKSkge1xyXG4gICAgICBjb25zdCBub2RlRGF0YSA9IG5vZGUuZ2V0RGF0YSgpXHJcblxyXG4gICAgICBpZiAobm9kZURhdGEucG9ydGFsSWQgPT09IHBvcnRhbElkKSB7XHJcbiAgICAgICAgbmVzdGVkUG9ydGFsc0lkcy5wdXNoKG5vZGVEYXRhLmlkKVxyXG4gICAgICAgIG5lc3RlZFBvcnRhbHNJZHMucHVzaCguLi50aGlzLmdldE5lc3RlZFBvcnRhbHNJZHMoY2FudmFzLCBub2RlRGF0YS5pZCkpXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbmVzdGVkUG9ydGFsc0lkc1xyXG4gIH1cclxuXHJcbiAgcmVzdG9yZU9iamVjdFNuYXBwaW5nU3RhdGU6ICgpID0+IHZvaWRcclxuICBwcml2YXRlIG9uRHJhZ2dpbmdTdGF0ZUNoYW5nZWQoY2FudmFzOiBDYW52YXMsIHN0YXJ0ZWREcmFnZ2luZzogYm9vbGVhbikge1xyXG4gICAgLy8gSWYgbm8gb3BlbiBwb3J0YWwgZ2V0cyBkcmFnZ2VkLCByZXR1cm5cclxuICAgIGlmICghY2FudmFzLmdldFNlbGVjdGlvbkRhdGEoKS5ub2Rlcy5zb21lKG5vZGUgPT4gbm9kZS50eXBlID09PSAnZmlsZScgJiYgbm9kZS5wb3J0YWxUb0ZpbGUpKSByZXR1cm5cclxuXHJcbiAgICAvLyBEaXNhYmxlIG9iamVjdCBzbmFwcGluZyB0byBmaXggc2VsZi1hbGlnbmluZ1xyXG4gICAgaWYgKHN0YXJ0ZWREcmFnZ2luZykge1xyXG4gICAgICBjb25zdCBvYmplY3RTbmFwcGluZ0VuYWJsZWQgPSBjYW52YXMub3B0aW9ucy5zbmFwVG9PYmplY3RzXHJcbiAgICAgIHRoaXMucmVzdG9yZU9iamVjdFNuYXBwaW5nU3RhdGUgPSAoKSA9PiBjYW52YXMudG9nZ2xlT2JqZWN0U25hcHBpbmcob2JqZWN0U25hcHBpbmdFbmFibGVkKVxyXG5cclxuICAgICAgaWYgKG9iamVjdFNuYXBwaW5nRW5hYmxlZCkgY2FudmFzLnRvZ2dsZU9iamVjdFNuYXBwaW5nKGZhbHNlKVxyXG4gICAgfSBlbHNlIHRoaXMucmVzdG9yZU9iamVjdFNuYXBwaW5nU3RhdGU/LigpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uTm9kZU1vdmVkKGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlKSB7XHJcbiAgICBjb25zdCBub2RlRGF0YSA9IG5vZGUuZ2V0RGF0YSgpXHJcbiAgICBpZiAobm9kZURhdGEudHlwZSAhPT0gJ2ZpbGUnIHx8ICFub2RlRGF0YS5wb3J0YWxUb0ZpbGUpIHJldHVyblxyXG5cclxuICAgIHRoaXMub25PcGVuUG9ydGFsTW92ZWQoY2FudmFzLCBub2RlKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvbk9wZW5Qb3J0YWxNb3ZlZChjYW52YXM6IENhbnZhcywgcG9ydGFsTm9kZTogQ2FudmFzTm9kZSkge1xyXG4gICAgbGV0IHBvcnRhbE5vZGVEYXRhID0gcG9ydGFsTm9kZS5nZXREYXRhKClcclxuXHJcbiAgICAvLyBVcGRhdGUgbmVzdGVkIG5vZGVzIHBvc2l0aW9uc1xyXG4gICAgY29uc3QgbmVzdGVkTm9kZXNJZE1hcCA9IHBvcnRhbE5vZGUuZ2V0RGF0YSgpLnBvcnRhbElkTWFwcz8ubm9kZUlkTWFwXHJcbiAgICBpZiAoIW5lc3RlZE5vZGVzSWRNYXApIHJldHVyblxyXG5cclxuICAgIGNvbnN0IG5lc3RlZE5vZGVzID0gT2JqZWN0LmtleXMobmVzdGVkTm9kZXNJZE1hcCkubWFwKHJlZk5vZGVJZCA9PiBjYW52YXMubm9kZXMuZ2V0KHJlZk5vZGVJZCkpXHJcbiAgICAgIC5maWx0ZXIobm9kZSA9PiBub2RlICE9PSB1bmRlZmluZWQpIGFzIENhbnZhc05vZGVbXVxyXG4gICAgY29uc3Qgc291cmNlQkJveCA9IENhbnZhc0hlbHBlci5nZXRCQm94KG5lc3RlZE5vZGVzKVxyXG5cclxuICAgIC8vIFJlc2l6ZSBwb3J0YWxcclxuICAgIGNvbnN0IHRhcmdldFNpemUgPSB0aGlzLmdldFBvcnRhbFNpemUoc291cmNlQkJveClcclxuICAgIGlmIChwb3J0YWxOb2RlRGF0YS53aWR0aCAhPT0gdGFyZ2V0U2l6ZS53aWR0aCB8fCBwb3J0YWxOb2RlRGF0YS5oZWlnaHQgIT09IHRhcmdldFNpemUuaGVpZ2h0KSB7XHJcbiAgICAgIHBvcnRhbE5vZGUuc2V0RGF0YSh7XHJcbiAgICAgICAgLi4ucG9ydGFsTm9kZURhdGEsXHJcbiAgICAgICAgd2lkdGg6IHRhcmdldFNpemUud2lkdGgsXHJcbiAgICAgICAgaGVpZ2h0OiB0YXJnZXRTaXplLmhlaWdodFxyXG4gICAgICB9KVxyXG5cclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgLy8gTW92ZSBuZXN0ZWQgbm9kZXNcclxuICAgIGNvbnN0IHBvcnRhbE9mZnNldCA9IHtcclxuICAgICAgeDogcG9ydGFsTm9kZURhdGEueCAtIHNvdXJjZUJCb3gubWluWCArIFBPUlRBTF9QQURESU5HLFxyXG4gICAgICB5OiBwb3J0YWxOb2RlRGF0YS55IC0gc291cmNlQkJveC5taW5ZICsgUE9SVEFMX1BBRERJTkdcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGNvbnN0IG5lc3RlZE5vZGUgb2YgbmVzdGVkTm9kZXMpIHtcclxuICAgICAgY29uc3QgbmVzdGVkTm9kZURhdGEgPSBuZXN0ZWROb2RlLmdldERhdGEoKVxyXG5cclxuICAgICAgbmVzdGVkTm9kZS5zZXREYXRhKHtcclxuICAgICAgICAuLi5uZXN0ZWROb2RlRGF0YSxcclxuICAgICAgICB4OiBuZXN0ZWROb2RlRGF0YS54ICsgcG9ydGFsT2Zmc2V0LngsXHJcbiAgICAgICAgeTogbmVzdGVkTm9kZURhdGEueSArIHBvcnRhbE9mZnNldC55XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlbW92ZVBvcnRhbENhbnZhc0RhdGEoX2NhbnZhczogQ2FudmFzLCBkYXRhOiBDYW52YXNEYXRhKSB7XHJcbiAgICBkYXRhLmVkZ2VzID0gZGF0YS5lZGdlcy5maWx0ZXIoZWRnZURhdGEgPT4ge1xyXG4gICAgICBpZiAoZWRnZURhdGEucG9ydGFsSWQgIT09IHVuZGVmaW5lZCkgcmV0dXJuIGZhbHNlXHJcblxyXG4gICAgICBjb25zdCBmcm9tTm9kZURhdGEgPSBkYXRhLm5vZGVzLmZpbmQobm9kZURhdGEgPT4gbm9kZURhdGEuaWQgPT09IGVkZ2VEYXRhLmZyb21Ob2RlKVxyXG4gICAgICBjb25zdCB0b05vZGVEYXRhID0gZGF0YS5ub2Rlcy5maW5kKG5vZGVEYXRhID0+IG5vZGVEYXRhLmlkID09PSBlZGdlRGF0YS50b05vZGUpXHJcbiAgICAgIGlmICghZnJvbU5vZGVEYXRhIHx8ICF0b05vZGVEYXRhKSByZXR1cm4gdHJ1ZVxyXG5cclxuICAgICAgaWYgKGZyb21Ob2RlRGF0YS5wb3J0YWxJZCA9PT0gdW5kZWZpbmVkICYmIHRvTm9kZURhdGEucG9ydGFsSWQgPT09IHVuZGVmaW5lZCkgeyAvLyBOb3JtYWwgZWRnZVxyXG4gICAgICAgIHJldHVybiB0cnVlIFxyXG4gICAgICB9IGVsc2UgaWYgKGZyb21Ob2RlRGF0YS5wb3J0YWxJZCAhPT0gdW5kZWZpbmVkICYmIHRvTm9kZURhdGEucG9ydGFsSWQgIT09IHVuZGVmaW5lZCkgeyAvLyBDb21wbGV0ZWx5IGZyb20gcG9ydGFsXHJcbiAgICAgICAgLy8gU2F2ZSB0byBwb3J0YWwgZmlsZT8gT1IgZGVsZXRlIVxyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICB9IGVsc2UgeyAvLyBQYXJ0aWFsbHkgZnJvbSBwb3J0YWxcclxuICAgICAgICBjb25zdCBmcm9tUG9ydGFsTm9kZURhdGEgPSBmcm9tTm9kZURhdGEucG9ydGFsSWQgIT09IHVuZGVmaW5lZCA/IGZyb21Ob2RlRGF0YSA6IHRvTm9kZURhdGFcclxuICAgICAgICBjb25zdCBub3RGcm9tUG9ydGFsTm9kZURhdGEgPSBmcm9tTm9kZURhdGEucG9ydGFsSWQgIT09IHVuZGVmaW5lZCA/IHRvTm9kZURhdGEgOiBmcm9tTm9kZURhdGFcclxuXHJcbiAgICAgICAgbm90RnJvbVBvcnRhbE5vZGVEYXRhLmVkZ2VzVG9Ob2RlRnJvbVBvcnRhbCA9IG5vdEZyb21Qb3J0YWxOb2RlRGF0YS5lZGdlc1RvTm9kZUZyb21Qb3J0YWwgPz8ge31cclxuICAgICAgICBub3RGcm9tUG9ydGFsTm9kZURhdGEuZWRnZXNUb05vZGVGcm9tUG9ydGFsW2Zyb21Qb3J0YWxOb2RlRGF0YS5wb3J0YWxJZCFdID0gbm90RnJvbVBvcnRhbE5vZGVEYXRhLmVkZ2VzVG9Ob2RlRnJvbVBvcnRhbFtmcm9tUG9ydGFsTm9kZURhdGEucG9ydGFsSWQhXSA/PyBbXVxyXG4gICAgICAgIG5vdEZyb21Qb3J0YWxOb2RlRGF0YS5lZGdlc1RvTm9kZUZyb21Qb3J0YWxbZnJvbVBvcnRhbE5vZGVEYXRhLnBvcnRhbElkIV0ucHVzaChlZGdlRGF0YSlcclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgZGF0YS5ub2RlcyA9IGRhdGEubm9kZXMuZmlsdGVyKG5vZGVEYXRhID0+IG5vZGVEYXRhLnBvcnRhbElkID09PSB1bmRlZmluZWQpXHJcblxyXG4gICAgZm9yIChjb25zdCBwb3J0YWxOb2RlRGF0YSBvZiBkYXRhLm5vZGVzKSB7XHJcbiAgICAgIGlmIChwb3J0YWxOb2RlRGF0YS50eXBlICE9PSAnZmlsZScpIGNvbnRpbnVlXHJcblxyXG4gICAgICAvLyBSZXNldCBwb3J0YWwgc2l6ZVxyXG4gICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnbWFpbnRhaW5DbG9zZWRQb3J0YWxTaXplJykpIHtcclxuICAgICAgICBwb3J0YWxOb2RlRGF0YS53aWR0aCA9IHBvcnRhbE5vZGVEYXRhLmNsb3NlZFBvcnRhbFdpZHRoID8/IHBvcnRhbE5vZGVEYXRhLndpZHRoXHJcbiAgICAgICAgcG9ydGFsTm9kZURhdGEuaGVpZ2h0ID0gcG9ydGFsTm9kZURhdGEuY2xvc2VkUG9ydGFsSGVpZ2h0ID8/IHBvcnRhbE5vZGVEYXRhLmhlaWdodFxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBSZW1vdmUgcmVmZXJlbmNlcyB0byBwb3J0YWwgbm9kZXMgYW5kIGVkZ2VzXHJcbiAgICAgIGRlbGV0ZSBwb3J0YWxOb2RlRGF0YS5jbG9zZWRQb3J0YWxXaWR0aFxyXG4gICAgICBkZWxldGUgcG9ydGFsTm9kZURhdGEuY2xvc2VkUG9ydGFsSGVpZ2h0XHJcbiAgICAgIGRlbGV0ZSBwb3J0YWxOb2RlRGF0YS5wb3J0YWxJZE1hcHNcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgZ2V0Q2FudmFzRGF0YVdpdGhQb3J0YWxzKGNhbnZhczogQ2FudmFzLCBkYXRhUmVmOiBDYW52YXNEYXRhKTogUHJvbWlzZTxDYW52YXNEYXRhPiB7XHJcbiAgICAvLyBEZWVwIGNvcHkgZGF0YSAtIElmIGFub3RoZXIgZmlsZSBnZXRzIG9wZW5lZCBpbiB0aGUgc2FtZSB2aWV3LCB0aGUgZGF0YSB3b3VsZCBnZXQgb3ZlcndyaXR0ZW5cclxuICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRhdGFSZWYpKSBhcyBDYW52YXNEYXRhXHJcblxyXG4gICAgLy8gT3BlbiBwb3J0YWxzXHJcbiAgICBjb25zdCBhZGRlZERhdGEgPSBhd2FpdCBQcm9taXNlLmFsbChkYXRhLm5vZGVzLm1hcChub2RlRGF0YSA9PiB0aGlzLnRyeU9wZW5Qb3J0YWwoY2FudmFzLCBub2RlRGF0YSkpKVxyXG4gICAgZm9yIChjb25zdCBuZXdEYXRhIG9mIGFkZGVkRGF0YSkge1xyXG4gICAgICBkYXRhLm5vZGVzLnB1c2goLi4ubmV3RGF0YS5ub2RlcylcclxuICAgICAgZGF0YS5lZGdlcy5wdXNoKC4uLm5ld0RhdGEuZWRnZXMpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWRkIGNyb3NzLXBvcnRhbCBlZGdlc1xyXG4gICAgZm9yIChjb25zdCBvcmlnaW5Ob2RlRGF0YSBvZiBkYXRhLm5vZGVzKSB7XHJcbiAgICAgIGlmIChvcmlnaW5Ob2RlRGF0YS5lZGdlc1RvTm9kZUZyb21Qb3J0YWwgPT09IHVuZGVmaW5lZCkgY29udGludWVcclxuXHJcbiAgICAgIGZvciAoY29uc3QgW3JlbGF0aXZlUG9ydGFsSWQsIGVkZ2VzXSBvZiBPYmplY3QuZW50cmllcyhvcmlnaW5Ob2RlRGF0YS5lZGdlc1RvTm9kZUZyb21Qb3J0YWwpKSB7XHJcbiAgICAgICAgY29uc3QgaWRQcmVmaXggPSBvcmlnaW5Ob2RlRGF0YS5wb3J0YWxJZCA/IGAke29yaWdpbk5vZGVEYXRhLnBvcnRhbElkfS1gIDogJydcclxuXHJcbiAgICAgICAgY29uc3QgcG9ydGFsSWQgPSBgJHtpZFByZWZpeH0ke3JlbGF0aXZlUG9ydGFsSWR9YFxyXG4gICAgICAgIGNvbnN0IHRhcmdldFBvcnRhbERhdGEgPSBkYXRhLm5vZGVzLmZpbmQobm9kZURhdGEgPT4gbm9kZURhdGEuaWQgPT09IHBvcnRhbElkKVxyXG5cclxuICAgICAgICAvLyBJZiB0YXJnZXQgcG9ydGFsIGlzIGRlbGV0ZWQsIHJlbW92ZSBlZGdlc1xyXG4gICAgICAgIGlmICghdGFyZ2V0UG9ydGFsRGF0YSkge1xyXG4gICAgICAgICAgZGVsZXRlIG9yaWdpbk5vZGVEYXRhLmVkZ2VzVG9Ob2RlRnJvbVBvcnRhbCFbcG9ydGFsSWRdXHJcbiAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSWYgcG9ydGFsIGlzIG9wZW4sIGFkZCBlZGdlc1xyXG4gICAgICAgIGlmICh0YXJnZXRQb3J0YWxEYXRhLnBvcnRhbFRvRmlsZSkge1xyXG4gICAgICAgICAgLy8gUHVzaCBlZGdlcyB3aXRoIHVwZGF0ZWQgZnJvbSBhbmQgdG8gaWRzXHJcbiAgICAgICAgICBkYXRhLmVkZ2VzLnB1c2goLi4uZWRnZXMubWFwKGVkZ2UgPT4gKHtcclxuICAgICAgICAgICAgLi4uZWRnZSxcclxuICAgICAgICAgICAgcG9ydGFsSWQ6IG9yaWdpbk5vZGVEYXRhLnBvcnRhbElkLFxyXG4gICAgICAgICAgICBmcm9tTm9kZTogYCR7aWRQcmVmaXh9JHtlZGdlLmZyb21Ob2RlfWAsXHJcbiAgICAgICAgICAgIHRvTm9kZTogYCR7aWRQcmVmaXh9JHtlZGdlLnRvTm9kZX1gXHJcbiAgICAgICAgICB9KSkpXHJcblxyXG4gICAgICAgICAgZGVsZXRlIG9yaWdpbk5vZGVEYXRhLmVkZ2VzVG9Ob2RlRnJvbVBvcnRhbCFbcG9ydGFsSWRdXHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdzaG93RWRnZXNJbnRvRGlzYWJsZWRQb3J0YWxzJykpIHtcclxuICAgICAgICAgIC8vIElmIHBvcnRhbCBpcyBjbG9zZWQsIGFkZCBhbHRlcm5hdGl2ZSBlZGdlcyBkaXJlY3RseSB0byBwb3J0YWxcclxuICAgICAgICAgIC8vIEJ1dCBkb24ndCBkZWxldGUgdGhlIGVkZ2VzXHJcblxyXG4gICAgICAgICAgZGF0YS5lZGdlcy5wdXNoKC4uLmVkZ2VzLm1hcChlZGdlID0+IHtcclxuICAgICAgICAgICAgLy8gV2hpY2ggZW5kIGlzIGZyb20gcG9ydGFsP1xyXG4gICAgICAgICAgICBjb25zdCBmcm9tTm9kZUlkID0gYCR7aWRQcmVmaXh9JHtlZGdlLmZyb21Ob2RlfWBcclxuICAgICAgICAgICAgY29uc3QgZnJvbU5vZGUgPSBkYXRhLm5vZGVzLmZpbmQobm9kZURhdGEgPT4gbm9kZURhdGEuaWQgPT09IGZyb21Ob2RlSWQpXHJcbiAgICAgICAgICAgIGNvbnN0IHRvTm9kZUlkID0gYCR7aWRQcmVmaXh9JHtlZGdlLnRvTm9kZX1gXHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgIC4uLmVkZ2UsXHJcbiAgICAgICAgICAgICAgZnJvbU5vZGU6IGZyb21Ob2RlID8gZnJvbU5vZGVJZCA6IHBvcnRhbElkLFxyXG4gICAgICAgICAgICAgIHRvTm9kZTogZnJvbU5vZGUgPyBwb3J0YWxJZCA6IHRvTm9kZUlkLFxyXG4gICAgICAgICAgICAgIHBvcnRhbElkOiBwb3J0YWxJZCAvLyBNYXJrIGl0IGFzIHRlbXBvcmFyeVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIElmIG5vIG1vcmUgZWRnZXMsIGRlbGV0ZSB0aGUgcHJvcGVydHlcclxuICAgICAgaWYgKE9iamVjdC5rZXlzKG9yaWdpbk5vZGVEYXRhLmVkZ2VzVG9Ob2RlRnJvbVBvcnRhbCEpLmxlbmd0aCA9PT0gMClcclxuICAgICAgICBkZWxldGUgb3JpZ2luTm9kZURhdGEuZWRnZXNUb05vZGVGcm9tUG9ydGFsXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRhdGFcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgdHJ5T3BlblBvcnRhbChjYW52YXM6IENhbnZhcywgcG9ydGFsTm9kZURhdGE6IENhbnZhc05vZGVEYXRhKTogUHJvbWlzZTxDYW52YXNEYXRhPiB7XHJcbiAgICBjb25zdCBhZGRlZERhdGE6IENhbnZhc0RhdGEgPSB7IG5vZGVzOiBbXSwgZWRnZXM6IFtdIH1cclxuICAgIGlmIChwb3J0YWxOb2RlRGF0YS50eXBlICE9PSAnZmlsZScgfHwgIXBvcnRhbE5vZGVEYXRhLnBvcnRhbFRvRmlsZSkgcmV0dXJuIGFkZGVkRGF0YVxyXG5cclxuICAgIC8vIFVwZGF0ZSBwb3J0YWwgZmlsZVxyXG4gICAgcG9ydGFsTm9kZURhdGEucG9ydGFsVG9GaWxlID0gcG9ydGFsTm9kZURhdGEuZmlsZVxyXG5cclxuICAgIC8vIEZpeCByZWN1cnNpdmUgcG9ydGFsc1xyXG4gICAgaWYgKHBvcnRhbE5vZGVEYXRhLnBvcnRhbFRvRmlsZSA9PT0gY2FudmFzLnZpZXcuZmlsZS5wYXRoKSB7XHJcbiAgICAgIHBvcnRhbE5vZGVEYXRhLnBvcnRhbFRvRmlsZSA9IHVuZGVmaW5lZFxyXG4gICAgICByZXR1cm4gYWRkZWREYXRhXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcG9ydGFsRmlsZSA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocG9ydGFsTm9kZURhdGEuZmlsZSEpXHJcbiAgICBpZiAoIShwb3J0YWxGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHx8IHBvcnRhbEZpbGUuZXh0ZW5zaW9uICE9PSAnY2FudmFzJykge1xyXG4gICAgICBwb3J0YWxOb2RlRGF0YS5wb3J0YWxUb0ZpbGUgPSB1bmRlZmluZWRcclxuICAgICAgcmV0dXJuIGFkZGVkRGF0YVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHBvcnRhbEZpbGVEYXRhID0gSlNPTi5wYXJzZShhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuY2FjaGVkUmVhZChwb3J0YWxGaWxlKSlcclxuICAgIGlmICghcG9ydGFsRmlsZURhdGEpIHtcclxuICAgICAgcG9ydGFsTm9kZURhdGEucG9ydGFsVG9GaWxlID0gdW5kZWZpbmVkXHJcbiAgICAgIHJldHVybiBhZGRlZERhdGFcclxuICAgIH1cclxuXHJcbiAgICAvLyBBZGQgcG9ydGFsIG5vZGVzIGFuZCBlZGdlcyBpZCBtYXBcclxuICAgIHBvcnRhbE5vZGVEYXRhLnBvcnRhbElkTWFwcyA9IHtcclxuICAgICAgbm9kZUlkTWFwOiB7fSxcclxuICAgICAgZWRnZUlkTWFwOiB7fVxyXG4gICAgfVxyXG5cclxuICAgIC8vIENhbGN1bGF0ZSBuZXN0ZWQgbm9kZSBvZmZzZXRcclxuICAgIGNvbnN0IHNvdXJjZU1pbkNvb3JkaW5hdGVzID0gQ2FudmFzSGVscGVyLmdldEJCb3gocG9ydGFsRmlsZURhdGEubm9kZXMpXHJcbiAgICBjb25zdCBwb3J0YWxPZmZzZXQgPSB7XHJcbiAgICAgIHg6IHBvcnRhbE5vZGVEYXRhLnggLSBzb3VyY2VNaW5Db29yZGluYXRlcy5taW5YICsgUE9SVEFMX1BBRERJTkcsXHJcbiAgICAgIHk6IHBvcnRhbE5vZGVEYXRhLnkgLSBzb3VyY2VNaW5Db29yZGluYXRlcy5taW5ZICsgUE9SVEFMX1BBRERJTkdcclxuICAgIH1cclxuXHJcbiAgICAvLyBBZGQgbm9kZXMgZnJvbSBwb3J0YWxcclxuICAgIGZvciAoY29uc3Qgbm9kZURhdGFGcm9tUG9ydGFsIG9mIHBvcnRhbEZpbGVEYXRhLm5vZGVzKSB7XHJcbiAgICAgIGNvbnN0IHJlZk5vZGVJZCA9IGAke3BvcnRhbE5vZGVEYXRhLmlkfS0ke25vZGVEYXRhRnJvbVBvcnRhbC5pZH1gXHJcbiAgICAgIHBvcnRhbE5vZGVEYXRhLnBvcnRhbElkTWFwcy5ub2RlSWRNYXBbcmVmTm9kZUlkXSA9IG5vZGVEYXRhRnJvbVBvcnRhbC5pZFxyXG4gICAgICBcclxuICAgICAgY29uc3QgYWRkZWROb2RlID0ge1xyXG4gICAgICAgIC4uLm5vZGVEYXRhRnJvbVBvcnRhbCxcclxuICAgICAgICBpZDogcmVmTm9kZUlkLFxyXG4gICAgICAgIHg6IG5vZGVEYXRhRnJvbVBvcnRhbC54ICsgcG9ydGFsT2Zmc2V0LngsXHJcbiAgICAgICAgeTogbm9kZURhdGFGcm9tUG9ydGFsLnkgKyBwb3J0YWxPZmZzZXQueSxcclxuICAgICAgICBwb3J0YWxJZDogcG9ydGFsTm9kZURhdGEuaWRcclxuICAgICAgfVxyXG5cclxuICAgICAgYWRkZWREYXRhLm5vZGVzLnB1c2goYWRkZWROb2RlKVxyXG5cclxuICAgICAgY29uc3QgbmVzdGVkTm9kZXMgPSBhd2FpdCB0aGlzLnRyeU9wZW5Qb3J0YWwoY2FudmFzLCBhZGRlZE5vZGUpXHJcbiAgICAgIGFkZGVkRGF0YS5ub2Rlcy5wdXNoKC4uLm5lc3RlZE5vZGVzLm5vZGVzKVxyXG4gICAgICBhZGRlZERhdGEuZWRnZXMucHVzaCguLi5uZXN0ZWROb2Rlcy5lZGdlcylcclxuICAgIH1cclxuXHJcbiAgICAvLyBBZGQgZWRnZXMgZnJvbSBwb3J0YWxcclxuICAgIGZvciAoY29uc3QgZWRnZURhdGFGcm9tUG9ydGFsIG9mIHBvcnRhbEZpbGVEYXRhLmVkZ2VzKSB7XHJcbiAgICAgIGNvbnN0IHJlZkVkZ2VJZCA9IGAke3BvcnRhbE5vZGVEYXRhLmlkfS0ke2VkZ2VEYXRhRnJvbVBvcnRhbC5pZH1gXHJcbiAgICAgIHBvcnRhbE5vZGVEYXRhLnBvcnRhbElkTWFwcy5lZGdlSWRNYXBbcmVmRWRnZUlkXSA9IGVkZ2VEYXRhRnJvbVBvcnRhbC5pZFxyXG5cclxuICAgICAgY29uc3QgZnJvbVJlZk5vZGUgPSBPYmplY3QuZW50cmllcyhwb3J0YWxOb2RlRGF0YS5wb3J0YWxJZE1hcHMubm9kZUlkTWFwKVxyXG4gICAgICAgIC5maW5kKChbX3JlZk5vZGVJZCwgbm9kZUlkXSkgPT4gbm9kZUlkID09PSBlZGdlRGF0YUZyb21Qb3J0YWwuZnJvbU5vZGUpPy5bMF1cclxuICAgICAgY29uc3QgdG9SZWZOb2RlID0gT2JqZWN0LmVudHJpZXMocG9ydGFsTm9kZURhdGEucG9ydGFsSWRNYXBzLm5vZGVJZE1hcClcclxuICAgICAgICAuZmluZCgoW19yZWZOb2RlSWQsIG5vZGVJZF0pID0+IG5vZGVJZCA9PT0gZWRnZURhdGFGcm9tUG9ydGFsLnRvTm9kZSk/LlswXVxyXG5cclxuICAgICAgYWRkZWREYXRhLmVkZ2VzLnB1c2goe1xyXG4gICAgICAgIC4uLmVkZ2VEYXRhRnJvbVBvcnRhbCxcclxuICAgICAgICBpZDogcmVmRWRnZUlkLFxyXG4gICAgICAgIGZyb21Ob2RlOiBmcm9tUmVmTm9kZSxcclxuICAgICAgICB0b05vZGU6IHRvUmVmTm9kZSxcclxuICAgICAgICBwb3J0YWxJZDogcG9ydGFsTm9kZURhdGEuaWRcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXNpemUgcG9ydGFsXHJcbiAgICBjb25zdCBuZXN0ZWROb2Rlc0JCb3ggPSBDYW52YXNIZWxwZXIuZ2V0QkJveChhZGRlZERhdGEubm9kZXMpXHJcbiAgICBjb25zdCB0YXJnZXRTaXplID0gdGhpcy5nZXRQb3J0YWxTaXplKG5lc3RlZE5vZGVzQkJveClcclxuXHJcbiAgICAvLyBTYXZlIGNsb3NlZCBwb3J0YWwgc2l6ZVxyXG4gICAgcG9ydGFsTm9kZURhdGEuY2xvc2VkUG9ydGFsV2lkdGggPSBwb3J0YWxOb2RlRGF0YS53aWR0aFxyXG4gICAgcG9ydGFsTm9kZURhdGEuY2xvc2VkUG9ydGFsSGVpZ2h0ID0gcG9ydGFsTm9kZURhdGEuaGVpZ2h0XHJcblxyXG4gICAgLy8gU2V0IG9wZW4gcG9ydGFsIHNpemVcclxuICAgIHBvcnRhbE5vZGVEYXRhLndpZHRoID0gdGFyZ2V0U2l6ZS53aWR0aFxyXG4gICAgcG9ydGFsTm9kZURhdGEuaGVpZ2h0ID0gdGFyZ2V0U2l6ZS5oZWlnaHRcclxuXHJcbiAgICByZXR1cm4gYWRkZWREYXRhXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFBvcnRhbFNpemUoc291cmNlQkJveDogQkJveCkge1xyXG4gICAgY29uc3Qgc291cmNlU2l6ZSA9IHtcclxuICAgICAgd2lkdGg6IHNvdXJjZUJCb3gubWF4WCAtIHNvdXJjZUJCb3gubWluWCxcclxuICAgICAgaGVpZ2h0OiBzb3VyY2VCQm94Lm1heFkgLSBzb3VyY2VCQm94Lm1pbllcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0YXJnZXRTaXplID0ge1xyXG4gICAgICB3aWR0aDogTWF0aC5tYXgoc291cmNlU2l6ZS53aWR0aCArIFBPUlRBTF9QQURESU5HICogMiwgTUlOX09QRU5fUE9SVEFMX1NJWkUud2lkdGgpLFxyXG4gICAgICBoZWlnaHQ6IE1hdGgubWF4KHNvdXJjZVNpemUuaGVpZ2h0ICsgUE9SVEFMX1BBRERJTkcgKiAyLCBNSU5fT1BFTl9QT1JUQUxfU0laRS5oZWlnaHQpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUodGFyZ2V0U2l6ZS53aWR0aCkpIHRhcmdldFNpemUud2lkdGggPSBNSU5fT1BFTl9QT1JUQUxfU0laRS53aWR0aFxyXG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUodGFyZ2V0U2l6ZS5oZWlnaHQpKSB0YXJnZXRTaXplLmhlaWdodCA9IE1JTl9PUEVOX1BPUlRBTF9TSVpFLmhlaWdodFxyXG5cclxuICAgIHJldHVybiB0YXJnZXRTaXplXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IENhbnZhcywgQ2FudmFzRWRnZSwgQ2FudmFzTm9kZSB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcbmltcG9ydCB7IENhbnZhc0V2ZW50IH0gZnJvbSBcInNyYy9jb3JlL2V2ZW50c1wiXHJcbmltcG9ydCBTZXR0aW5nc01hbmFnZXIgZnJvbSBcInNyYy9zZXR0aW5nc1wiXHJcbmltcG9ydCB7IEZpbGVTZWxlY3RNb2RhbCB9IGZyb20gXCJzcmMvdXRpbHMvbW9kYWwtaGVscGVyXCJcclxuaW1wb3J0IENhbnZhc0V4dGVuc2lvbiBmcm9tIFwiLi4vY29yZS9jYW52YXMtZXh0ZW5zaW9uXCJcclxuaW1wb3J0IENhbnZhc0hlbHBlciBmcm9tIFwic3JjL3V0aWxzL2NhbnZhcy1oZWxwZXJcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmV0dGVyRGVmYXVsdFNldHRpbmdzQ2FudmFzRXh0ZW5zaW9uICBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gdHJ1ZSB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLm1vZGlmeUNhbnZhc1NldHRpbmdzKHRoaXMucGx1Z2luLmdldEN1cnJlbnRDYW52YXMoKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIFNldHRpbmdzTWFuYWdlci5TRVRUSU5HU19DSEFOR0VEX0VWRU5ULFxyXG4gICAgICAoKSA9PiB0aGlzLm1vZGlmeUNhbnZhc1NldHRpbmdzKHRoaXMucGx1Z2luLmdldEN1cnJlbnRDYW52YXMoKSlcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5DYW52YXNDaGFuZ2VkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMubW9kaWZ5Q2FudmFzU2V0dGluZ3MoY2FudmFzKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkRvdWJsZUNsaWNrLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIGV2ZW50OiBNb3VzZUV2ZW50LCBwcmV2ZW50RGVmYXVsdDogeyB2YWx1ZTogYm9vbGVhbiB9KSA9PiB0aGlzLm9uRG91YmxlQ2xpY2soY2FudmFzLCBldmVudCwgcHJldmVudERlZmF1bHQpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuTm9kZUNyZWF0ZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgbm9kZTogQ2FudmFzTm9kZSkgPT4gdGhpcy5hcHBseURlZmF1bHROb2RlU3R5bGVzKGNhbnZhcywgbm9kZSlcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5FZGdlQ3JlYXRlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBlZGdlOiBDYW52YXNFZGdlKSA9PiB0aGlzLmFwcGx5RGVmYXVsdEVkZ2VTdHlsZXMoY2FudmFzLCBlZGdlKVxyXG4gICAgKSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgbW9kaWZ5Q2FudmFzU2V0dGluZ3MoY2FudmFzOiBDYW52YXMgfCBudWxsKSB7XHJcbiAgICBpZiAoIWNhbnZhcykgcmV0dXJuXHJcblxyXG4gICAgY2FudmFzLmNvbmZpZy5kZWZhdWx0VGV4dE5vZGVEaW1lbnNpb25zID0ge1xyXG4gICAgICB3aWR0aDogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnZGVmYXVsdFRleHROb2RlV2lkdGgnKSxcclxuICAgICAgaGVpZ2h0OiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdkZWZhdWx0VGV4dE5vZGVIZWlnaHQnKVxyXG4gICAgfVxyXG5cclxuICAgIGNhbnZhcy5jb25maWcuZGVmYXVsdEZpbGVOb2RlRGltZW5zaW9ucyA9IHtcclxuICAgICAgd2lkdGg6IHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2RlZmF1bHRGaWxlTm9kZVdpZHRoJyksXHJcbiAgICAgIGhlaWdodDogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnZGVmYXVsdEZpbGVOb2RlSGVpZ2h0JylcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgb25Eb3VibGVDbGljayhjYW52YXM6IENhbnZhcywgZXZlbnQ6IE1vdXNlRXZlbnQsIHByZXZlbnREZWZhdWx0OiB7IHZhbHVlOiBib29sZWFuIH0pIHtcclxuICAgIGlmIChldmVudC5kZWZhdWx0UHJldmVudGVkIHx8IGV2ZW50LnRhcmdldCAhPT0gY2FudmFzLndyYXBwZXJFbCB8fCBjYW52YXMuaXNEcmFnZ2luZyB8fCBjYW52YXMucmVhZG9ubHkpIHJldHVyblxyXG4gICAgcHJldmVudERlZmF1bHQudmFsdWUgPSB0cnVlXHJcblxyXG4gICAgbGV0IHBvcyA9IGNhbnZhcy5wb3NGcm9tRXZ0KGV2ZW50KVxyXG5cclxuICAgIHN3aXRjaCAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnbm9kZVR5cGVPbkRvdWJsZUNsaWNrJykpIHtcclxuICAgICAgY2FzZSAnZmlsZSc6XHJcbiAgICAgICAgY29uc3QgZmlsZSA9IGF3YWl0IG5ldyBGaWxlU2VsZWN0TW9kYWwodGhpcy5wbHVnaW4uYXBwLCB1bmRlZmluZWQsIHRydWUpLmF3YWl0SW5wdXQoKVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnYWxpZ25Eb3VibGVDbGlja2VkTm9kZVRvR3JpZCcpKSBwb3MgPSB7XHJcbiAgICAgICAgICB4OiBNYXRoLnJvdW5kKChwb3MueCAtIChjYW52YXMuY29uZmlnLmRlZmF1bHRGaWxlTm9kZURpbWVuc2lvbnMud2lkdGggLyAyKSkgLyBDYW52YXNIZWxwZXIuR1JJRF9TSVpFKSAqIENhbnZhc0hlbHBlci5HUklEX1NJWkUgKyAoY2FudmFzLmNvbmZpZy5kZWZhdWx0RmlsZU5vZGVEaW1lbnNpb25zLndpZHRoIC8gMiksXHJcbiAgICAgICAgICB5OiBNYXRoLnJvdW5kKChwb3MueSAtIChjYW52YXMuY29uZmlnLmRlZmF1bHRGaWxlTm9kZURpbWVuc2lvbnMuaGVpZ2h0IC8gMikpIC8gQ2FudmFzSGVscGVyLkdSSURfU0laRSkgKiBDYW52YXNIZWxwZXIuR1JJRF9TSVpFICsgKGNhbnZhcy5jb25maWcuZGVmYXVsdEZpbGVOb2RlRGltZW5zaW9ucy5oZWlnaHQgLyAyKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2FudmFzLmNyZWF0ZUZpbGVOb2RlKHtcclxuICAgICAgICAgIHBvczogcG9zLFxyXG4gICAgICAgICAgcG9zaXRpb246ICdjZW50ZXInLFxyXG4gICAgICAgICAgZmlsZTogZmlsZVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2FsaWduRG91YmxlQ2xpY2tlZE5vZGVUb0dyaWQnKSkgcG9zID0ge1xyXG4gICAgICAgICAgeDogTWF0aC5yb3VuZCgocG9zLnggLSAoY2FudmFzLmNvbmZpZy5kZWZhdWx0VGV4dE5vZGVEaW1lbnNpb25zLndpZHRoIC8gMikpIC8gQ2FudmFzSGVscGVyLkdSSURfU0laRSkgKiBDYW52YXNIZWxwZXIuR1JJRF9TSVpFICsgKGNhbnZhcy5jb25maWcuZGVmYXVsdFRleHROb2RlRGltZW5zaW9ucy53aWR0aCAvIDIpLFxyXG4gICAgICAgICAgeTogTWF0aC5yb3VuZCgocG9zLnkgLSAoY2FudmFzLmNvbmZpZy5kZWZhdWx0VGV4dE5vZGVEaW1lbnNpb25zLmhlaWdodCAvIDIpKSAvIENhbnZhc0hlbHBlci5HUklEX1NJWkUpICogQ2FudmFzSGVscGVyLkdSSURfU0laRSArIChjYW52YXMuY29uZmlnLmRlZmF1bHRUZXh0Tm9kZURpbWVuc2lvbnMuaGVpZ2h0IC8gMilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNhbnZhcy5jcmVhdGVUZXh0Tm9kZSh7XHJcbiAgICAgICAgICBwb3M6IHBvcyxcclxuICAgICAgICAgIHBvc2l0aW9uOiAnY2VudGVyJ1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGJyZWFrXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFwcGx5RGVmYXVsdE5vZGVTdHlsZXMoX2NhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlKSB7XHJcbiAgICBjb25zdCBub2RlRGF0YSA9IG5vZGUuZ2V0RGF0YSgpXHJcbiAgICBpZiAobm9kZURhdGEudHlwZSAhPT0gJ3RleHQnKSByZXR1cm5cclxuXHJcbiAgICBub2RlLnNldERhdGEoe1xyXG4gICAgICAuLi5ub2RlRGF0YSxcclxuICAgICAgc3R5bGVBdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgLi4ubm9kZURhdGEuc3R5bGVBdHRyaWJ1dGVzLFxyXG4gICAgICAgIC4uLnRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2RlZmF1bHRUZXh0Tm9kZVN0eWxlQXR0cmlidXRlcycpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFwcGx5RGVmYXVsdEVkZ2VTdHlsZXMoX2NhbnZhczogQ2FudmFzLCBlZGdlOiBDYW52YXNFZGdlKSB7XHJcbiAgICBjb25zdCBlZGdlRGF0YSA9IGVkZ2UuZ2V0RGF0YSgpXHJcblxyXG4gICAgZWRnZS5zZXREYXRhKHtcclxuICAgICAgLi4uZWRnZURhdGEsXHJcbiAgICAgIHN0eWxlQXR0cmlidXRlczoge1xyXG4gICAgICAgIC4uLmVkZ2VEYXRhLnN0eWxlQXR0cmlidXRlcyxcclxuICAgICAgICAuLi50aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdkZWZhdWx0RWRnZVN0eWxlQXR0cmlidXRlcycpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IFdvcmtzcGFjZVdpbmRvdyB9IGZyb20gXCJvYnNpZGlhblwiXHJcbmltcG9ydCB7IENhbnZhcyB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcbmltcG9ydCB7IENhbnZhc0V2ZW50IH0gZnJvbSBcInNyYy9jb3JlL2V2ZW50c1wiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcblxyXG5jb25zdCBERUZBVUxUX0NPTE9SU19DT1VOVCA9IDZcclxuY29uc3QgQ1VTVE9NX0NPTE9SU19NT0RfU1RZTEVTX0lEID0gJ21vZC1jdXN0b20tY29sb3JzJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29sb3JQYWxldHRlQ2FudmFzRXh0ZW5zaW9uIGV4dGVuZHMgQ2FudmFzRXh0ZW5zaW9uIHtcclxuICBvYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlcnxudWxsID0gbnVsbFxyXG4gIFxyXG4gIGlzRW5hYmxlZCgpIHsgcmV0dXJuIHRydWUgfVxyXG4gIFxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgICd3aW5kb3ctb3BlbicsXHJcbiAgICAgIChfd2luOiBXb3Jrc3BhY2VXaW5kb3csIF93aW5kb3c6IFdpbmRvdykgPT4gdGhpcy51cGRhdGVDdXN0b21Db2xvck1vZFN0eWxlQ2xhc3NlcygpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgJ2Nzcy1jaGFuZ2UnLFxyXG4gICAgICAoKSA9PiB0aGlzLnVwZGF0ZUN1c3RvbUNvbG9yTW9kU3R5bGVDbGFzc2VzKClcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy51cGRhdGVDdXN0b21Db2xvck1vZFN0eWxlQ2xhc3NlcygpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Qb3B1cE1lbnVDcmVhdGVkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMucGF0Y2hDb2xvclNlbGVjdGlvbihjYW52YXMpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyKCgpID0+IHRoaXMub2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlQ3VzdG9tQ29sb3JNb2RTdHlsZUNsYXNzZXMoKSB7XHJcbiAgICBjb25zdCBjdXN0b21Dc3MgPSB0aGlzLmdldEN1c3RvbUNvbG9ycygpLm1hcCgoY29sb3JJZCkgPT4gYFxyXG4gICAgICAubW9kLWNhbnZhcy1jb2xvci0ke2NvbG9ySWR9IHtcclxuICAgICAgICAtLWNhbnZhcy1jb2xvcjogdmFyKC0tY2FudmFzLWNvbG9yLSR7Y29sb3JJZH0pO1xyXG4gICAgICB9XHJcbiAgICBgKS5qb2luKCcnKVxyXG5cclxuICAgIGZvciAoY29uc3Qgd2luIG9mIHRoaXMucGx1Z2luLndpbmRvd3NNYW5hZ2VyLndpbmRvd3MpIHtcclxuICAgICAgY29uc3QgZG9jID0gd2luLmRvY3VtZW50XHJcbiAgICAgIFxyXG4gICAgICBkb2MuZ2V0RWxlbWVudEJ5SWQoQ1VTVE9NX0NPTE9SU19NT0RfU1RZTEVTX0lEKT8ucmVtb3ZlKClcclxuXHJcbiAgICAgIGNvbnN0IGN1c3RvbUNvbG9yTW9kU3R5bGUgPSBkb2MuY3JlYXRlRWxlbWVudCgnc3R5bGUnKVxyXG4gICAgICBjdXN0b21Db2xvck1vZFN0eWxlLmlkID0gQ1VTVE9NX0NPTE9SU19NT0RfU1RZTEVTX0lEXHJcbiAgICAgIGRvYy5oZWFkLmFwcGVuZENoaWxkKGN1c3RvbUNvbG9yTW9kU3R5bGUpXHJcblxyXG4gICAgICBjdXN0b21Db2xvck1vZFN0eWxlLnRleHRDb250ZW50ID0gY3VzdG9tQ3NzXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHBhdGNoQ29sb3JTZWxlY3Rpb24oY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGlmICh0aGlzLm9ic2VydmVyKSB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKVxyXG5cclxuICAgIHRoaXMub2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihtdXRhdGlvbnMgPT4ge1xyXG4gICAgICBjb25zdCBjb2xvck1lbnVPcGVuZWQgPSBtdXRhdGlvbnMuc29tZShtdXRhdGlvbiA9PiBcclxuICAgICAgICBPYmplY3QudmFsdWVzKG11dGF0aW9uLmFkZGVkTm9kZXMpLnNvbWUoKG5vZGU6IE5vZGUpID0+IFxyXG4gICAgICAgICAgbm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmIG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYW52YXMtc3VibWVudScpICYmIE9iamVjdC52YWx1ZXMobm9kZS5jaGlsZE5vZGVzKS5zb21lKChub2RlOiBOb2RlKSA9PlxyXG4gICAgICAgICAgICBub2RlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgJiYgbm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ2NhbnZhcy1jb2xvci1waWNrZXItaXRlbScpXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgKVxyXG4gICAgICApXHJcbiAgICAgIGlmICghY29sb3JNZW51T3BlbmVkKSByZXR1cm5cclxuXHJcbiAgICAgIGNvbnN0IHN1Ym1lbnUgPSBjYW52YXMubWVudS5tZW51RWwucXVlcnlTZWxlY3RvcignLmNhbnZhcy1zdWJtZW51JylcclxuICAgICAgaWYgKCFzdWJtZW51KSByZXR1cm5cclxuXHJcbiAgICAgIGNvbnN0IGN1cnJlbnROb2RlQ29sb3IgPSBjYW52YXMuZ2V0U2VsZWN0aW9uRGF0YSgpLm5vZGVzLm1hcChub2RlID0+IG5vZGUuY29sb3IpLmxhc3QoKVxyXG4gICAgICBmb3IgKGNvbnN0IGNvbG9ySWQgb2YgdGhpcy5nZXRDdXN0b21Db2xvcnMoKSkge1xyXG4gICAgICAgIGNvbnN0IGN1c3RvbUNvbG9yTWVudUl0ZW0gPSB0aGlzLmNyZWF0ZUNvbG9yTWVudUl0ZW0oY2FudmFzLCBjb2xvcklkKVxyXG4gICAgICAgIGlmIChjdXJyZW50Tm9kZUNvbG9yID09PSBjb2xvcklkKSBjdXN0b21Db2xvck1lbnVJdGVtLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpXHJcbiAgICAgICAgXHJcbiAgICAgICAgc3VibWVudS5pbnNlcnRCZWZvcmUoY3VzdG9tQ29sb3JNZW51SXRlbSwgc3VibWVudS5sYXN0Q2hpbGQpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5vYnNlcnZlci5vYnNlcnZlKGNhbnZhcy5tZW51Lm1lbnVFbCwgeyBjaGlsZExpc3Q6IHRydWUgfSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY3JlYXRlQ29sb3JNZW51SXRlbShjYW52YXM6IENhbnZhcywgY29sb3JJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBtZW51SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICBtZW51SXRlbS5jbGFzc0xpc3QuYWRkKCdjYW52YXMtY29sb3ItcGlja2VyLWl0ZW0nKVxyXG4gICAgbWVudUl0ZW0uY2xhc3NMaXN0LmFkZChgbW9kLWNhbnZhcy1jb2xvci0ke2NvbG9ySWR9YClcclxuXHJcbiAgICBtZW51SXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgbWVudUl0ZW0uY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJylcclxuXHJcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBjYW52YXMuc2VsZWN0aW9uKSB7XHJcbiAgICAgICAgaXRlbS5zZXRDb2xvcihjb2xvcklkKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjYW52YXMucmVxdWVzdFNhdmUoKVxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gbWVudUl0ZW1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0Q3VzdG9tQ29sb3JzKCk6IHN0cmluZ1tdIHtcclxuICAgIGNvbnN0IGNvbG9yczogc3RyaW5nW10gPSBbXVxyXG5cclxuICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgIGNvbnN0IGNvbG9ySWQgPSAoREVGQVVMVF9DT0xPUlNfQ09VTlQgKyBjb2xvcnMubGVuZ3RoICsgMSkudG9TdHJpbmcoKVxyXG4gICAgICBpZiAoIWdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShgLS1jYW52YXMtY29sb3ItJHtjb2xvcklkfWApKSBicmVha1xyXG5cclxuICAgICAgY29sb3JzLnB1c2goY29sb3JJZClcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY29sb3JzXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IHNldEljb24gfSBmcm9tIFwib2JzaWRpYW5cIlxyXG5pbXBvcnQgeyBCQm94LCBDYW52YXMsIENhbnZhc0RhdGEsIENhbnZhc05vZGUgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgQkJveEhlbHBlciBmcm9tIFwic3JjL3V0aWxzL2Jib3gtaGVscGVyXCJcclxuaW1wb3J0IENhbnZhc0V4dGVuc2lvbiBmcm9tIFwiLi4vY29yZS9jYW52YXMtZXh0ZW5zaW9uXCJcclxuaW1wb3J0IENhbnZhc0hlbHBlciBmcm9tIFwic3JjL3V0aWxzL2NhbnZhcy1oZWxwZXJcIlxyXG5cclxuY29uc3QgQ09MTEFQU0VfQlVUVE9OX0lEID0gJ2dyb3VwLWNvbGxhcHNlLWJ1dHRvbidcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbGxhcHNpYmxlR3JvdXBzQ2FudmFzRXh0ZW5zaW9uIGV4dGVuZHMgQ2FudmFzRXh0ZW5zaW9uIHtcclxuICBpc0VuYWJsZWQoKSB7IHJldHVybiAnY29sbGFwc2libGVHcm91cHNGZWF0dXJlRW5hYmxlZCcgYXMgY29uc3QgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Ob2RlQ2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlKSA9PiB0aGlzLm9uTm9kZUNoYW5nZWQoY2FudmFzLCBub2RlKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50Lk5vZGVCQm94UmVxdWVzdGVkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIG5vZGU6IENhbnZhc05vZGUsIGJib3g6IEJCb3gpID0+IHRoaXMub25Ob2RlQkJveFJlcXVlc3RlZChjYW52YXMsIG5vZGUsIGJib3gpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuRGF0YVJlcXVlc3RlZCxcclxuICAgICAgKF9jYW52YXM6IENhbnZhcywgZGF0YTogQ2FudmFzRGF0YSkgPT4gdGhpcy5leHBhbmRDb2xsYXBzZWROb2RlcyhkYXRhKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkxvYWREYXRhLFxyXG4gICAgICAoX2NhbnZhczogQ2FudmFzLCBkYXRhOiBDYW52YXNEYXRhLCBfc2V0RGF0YTogKGRhdGE6IENhbnZhc0RhdGEpID0+IHZvaWQpID0+IHRoaXMuY29sbGFwc2VOb2RlcyhkYXRhKVxyXG4gICAgKSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25Ob2RlQ2hhbmdlZChjYW52YXM6IENhbnZhcywgZ3JvdXBOb2RlOiBDYW52YXNOb2RlKSB7XHJcbiAgICBjb25zdCBncm91cE5vZGVEYXRhID0gZ3JvdXBOb2RlLmdldERhdGEoKVxyXG4gICAgaWYgKGdyb3VwTm9kZURhdGEudHlwZSAhPT0gJ2dyb3VwJykgcmV0dXJuXHJcblxyXG4gICAgLy8gUmVtb3ZlIHRoZSBjb2xsYXBzZS9leHBhbmQgYnV0dG9uXHJcbiAgICBncm91cE5vZGUubm9kZUVsPy5xdWVyeVNlbGVjdG9yQWxsKGAjJHtDT0xMQVBTRV9CVVRUT05fSUR9YCkuZm9yRWFjaCgoZWwpID0+IGVsLnJlbW92ZSgpKVxyXG5cclxuICAgIC8vIEFkZCBjb2xsYXBzZS9leHBhbmQgYnV0dG9uIG5leHQgdG8gdGhlIGxhYmVsXHJcbiAgICBjb25zdCBjb2xsYXBzZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxyXG4gICAgY29sbGFwc2VCdXR0b24uaWQgPSBDT0xMQVBTRV9CVVRUT05fSURcclxuICAgIHNldEljb24oY29sbGFwc2VCdXR0b24sIGdyb3VwTm9kZURhdGEuaXNDb2xsYXBzZWQgPyAncGx1cy1jaXJjbGUnIDogJ21pbnVzLWNpcmNsZScpXHJcblxyXG4gICAgY29sbGFwc2VCdXR0b24ub25jbGljayA9ICgpID0+IHsgdGhpcy5zZXRDb2xsYXBzZWQoY2FudmFzLCBncm91cE5vZGUsIGdyb3VwTm9kZS5nZXREYXRhKCkuaXNDb2xsYXBzZWQgPyB1bmRlZmluZWQgOiB0cnVlKSB9XHJcblxyXG4gICAgZ3JvdXBOb2RlLmxhYmVsRWw/Lmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJlbmQnLCBjb2xsYXBzZUJ1dHRvbilcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0Q29sbGFwc2VkKGNhbnZhczogQ2FudmFzLCBncm91cE5vZGU6IENhbnZhc05vZGUsIGNvbGxhcHNlZDogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xyXG4gICAgZ3JvdXBOb2RlLnNldERhdGEoeyAuLi5ncm91cE5vZGUuZ2V0RGF0YSgpLCBpc0NvbGxhcHNlZDogY29sbGFwc2VkIH0pXHJcbiAgICBjYW52YXMuc2V0RGF0YShjYW52YXMuZ2V0RGF0YSgpKVxyXG4gIH1cclxuXHJcbiAgb25Ob2RlQkJveFJlcXVlc3RlZChfY2FudmFzOiBDYW52YXMsIG5vZGU6IENhbnZhc05vZGUsIGJib3g6IEJCb3gpIHtcclxuICAgIGNvbnN0IG5vZGVEYXRhID0gbm9kZS5nZXREYXRhKClcclxuICAgIGlmIChub2RlRGF0YS50eXBlICE9PSAnZ3JvdXAnIHx8ICFub2RlRGF0YS5pc0NvbGxhcHNlZCkgcmV0dXJuXHJcblxyXG4gICAgLy8gU2V0IHdpZHRoIHRvIGxhYmVsIHdpZHRoXHJcbiAgICBiYm94Lm1heFggPSBiYm94Lm1pblggKyAobm9kZS5ub2RlRWw/LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoID8/IDApXHJcbiAgICBcclxuICAgIC8vIFNldCBoZWlnaHQgb2YgdG8gMCAoRG9uJ3QgZHJhZyBhbnkgbm9kZXMgd2l0aCBpdClcclxuICAgIGJib3gubWF4WSA9IGJib3gubWluWVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBleHBhbmRDb2xsYXBzZWROb2RlcyhkYXRhOiBDYW52YXNEYXRhKSB7XHJcbiAgICBkYXRhLm5vZGVzID0gZGF0YS5ub2Rlcy5mbGF0TWFwKChncm91cE5vZGVEYXRhKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNvbGxhcHNlZERhdGEgPSBncm91cE5vZGVEYXRhLmNvbGxhcHNlZERhdGFcclxuICAgICAgaWYgKGNvbGxhcHNlZERhdGEgPT09IHVuZGVmaW5lZCkgcmV0dXJuIFtncm91cE5vZGVEYXRhXVxyXG5cclxuICAgICAgZ3JvdXBOb2RlRGF0YS5jb2xsYXBzZWREYXRhID0gdW5kZWZpbmVkXHJcblxyXG4gICAgICBkYXRhLmVkZ2VzLnB1c2goLi4uY29sbGFwc2VkRGF0YS5lZGdlcylcclxuICAgICAgcmV0dXJuIFtncm91cE5vZGVEYXRhLCAuLi5jb2xsYXBzZWREYXRhLm5vZGVzLm1hcCgobm9kZURhdGEpID0+IChcclxuICAgICAgICB7XHJcbiAgICAgICAgICAuLi5ub2RlRGF0YSxcclxuICAgICAgICAgIC8vIFJlc3RvcmUgdGhlIHJlbGF0aXZlIHBvc2l0aW9uIG9mIHRoZSBub2RlIHRvIHRoZSBncm91cFxyXG4gICAgICAgICAgeDogbm9kZURhdGEueCArIGdyb3VwTm9kZURhdGEueCxcclxuICAgICAgICAgIHk6IG5vZGVEYXRhLnkgKyBncm91cE5vZGVEYXRhLnlcclxuICAgICAgICB9XHJcbiAgICAgICkpXVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY29sbGFwc2VOb2RlcyhkYXRhOiBDYW52YXNEYXRhKSB7XHJcbiAgICBkYXRhLm5vZGVzLmZvckVhY2goKGdyb3VwTm9kZURhdGEpID0+IHtcclxuICAgICAgaWYgKCFncm91cE5vZGVEYXRhLmlzQ29sbGFwc2VkKSByZXR1cm5cclxuXHJcbiAgICAgIGNvbnN0IGdyb3VwTm9kZUJCb3ggPSBDYW52YXNIZWxwZXIuZ2V0QkJveChbZ3JvdXBOb2RlRGF0YV0pXHJcbiAgICAgIGNvbnN0IGNvbnRhaW5lZE5vZGVzRGF0YSA9IGRhdGEubm9kZXMuZmlsdGVyKChub2RlRGF0YSkgPT5cclxuICAgICAgICBub2RlRGF0YS5pZCAhPT0gZ3JvdXBOb2RlRGF0YS5pZCAmJiBCQm94SGVscGVyLmluc2lkZUJCb3goQ2FudmFzSGVscGVyLmdldEJCb3goW25vZGVEYXRhXSksIGdyb3VwTm9kZUJCb3gsIGZhbHNlKVxyXG4gICAgICApXHJcbiAgICAgIGNvbnN0IGNvbnRhaW5lZEVkZ2VzRGF0YSA9IGRhdGEuZWRnZXMuZmlsdGVyKChlZGdlRGF0YSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBjb250YWluZWROb2Rlc0RhdGEuc29tZSgobm9kZURhdGEpID0+IG5vZGVEYXRhLmlkID09PSBlZGdlRGF0YS5mcm9tTm9kZSkgfHwgXHJcbiAgICAgICAgICBjb250YWluZWROb2Rlc0RhdGEuc29tZSgobm9kZURhdGEpID0+IG5vZGVEYXRhLmlkID09PSBlZGdlRGF0YS50b05vZGUpXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBkYXRhLm5vZGVzID0gZGF0YS5ub2Rlcy5maWx0ZXIoKG5vZGVEYXRhKSA9PiAhY29udGFpbmVkTm9kZXNEYXRhLmluY2x1ZGVzKG5vZGVEYXRhKSlcclxuICAgICAgZGF0YS5lZGdlcyA9IGRhdGEuZWRnZXMuZmlsdGVyKChlZGdlRGF0YSkgPT4gIWNvbnRhaW5lZEVkZ2VzRGF0YS5pbmNsdWRlcyhlZGdlRGF0YSkpXHJcblxyXG4gICAgICBncm91cE5vZGVEYXRhLmNvbGxhcHNlZERhdGEgPSB7XHJcbiAgICAgICAgbm9kZXM6IGNvbnRhaW5lZE5vZGVzRGF0YS5tYXAoKG5vZGVEYXRhKSA9PiAoXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIC4uLm5vZGVEYXRhLFxyXG4gICAgICAgICAgICAvLyBTdG9yZSB0aGUgcmVsYXRpdmUgcG9zaXRpb24gb2YgdGhlIG5vZGUgdG8gdGhlIGdyb3VwXHJcbiAgICAgICAgICAgIHg6IG5vZGVEYXRhLnggLSBncm91cE5vZGVEYXRhLngsXHJcbiAgICAgICAgICAgIHk6IG5vZGVEYXRhLnkgLSBncm91cE5vZGVEYXRhLnlcclxuICAgICAgICAgIH1cclxuICAgICAgICApKSxcclxuICAgICAgICBlZGdlczogY29udGFpbmVkRWRnZXNEYXRhXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG59IiwgImltcG9ydCBBcHAsIHsgTW9kYWwsIFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIlxyXG5pbXBvcnQgeyBDYW52YXMgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgQ2FudmFzSGVscGVyIGZyb20gXCJzcmMvdXRpbHMvY2FudmFzLWhlbHBlclwiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9wZXJ0aWVzQ2FudmFzRXh0ZW5zaW9uIGV4dGVuZHMgQ2FudmFzRXh0ZW5zaW9uIHtcclxuICBpc0VuYWJsZWQoKSB7IHJldHVybiB0cnVlIH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuQ2FudmFzQ2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLm9uQ2FudmFzQ2hhbmdlZChjYW52YXMpXHJcbiAgICApKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvbkNhbnZhc0NoYW5nZWQoY2FudmFzOiBDYW52YXMpIHtcclxuICAgIHRoaXMudXBkYXRlQ3NzQ2xhc3NlcyhjYW52YXMpXHJcblxyXG4gICAgY29uc3Qgc2V0dGluZ3NDb250YWluZXIgPSBjYW52YXMucXVpY2tTZXR0aW5nc0J1dHRvbj8ucGFyZW50RWxlbWVudFxyXG4gICAgaWYgKCFzZXR0aW5nc0NvbnRhaW5lcikgcmV0dXJuXHJcblxyXG4gICAgQ2FudmFzSGVscGVyLmFkZFF1aWNrU2V0dGluZ3NCdXR0b24oXHJcbiAgICAgIHNldHRpbmdzQ29udGFpbmVyLFxyXG4gICAgICBDYW52YXNIZWxwZXIuY3JlYXRlUXVpY2tTZXR0aW5nc0J1dHRvbih7XHJcbiAgICAgICAgaWQ6ICdwcm9wZXJ0aWVzJyxcclxuICAgICAgICBsYWJlbDogJ1Byb3BlcnRpZXMnLFxyXG4gICAgICAgIGljb246ICdzZXR0aW5ncy0yJyxcclxuICAgICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5vcGVuUHJvcGVydGllc0RpYWxvZyhjYW52YXMpXHJcbiAgICAgIH0pXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHByZXZpb3VzQ3NzY2xhc3Nlczogc3RyaW5nW10gPSBbXVxyXG4gIHByaXZhdGUgdXBkYXRlQ3NzQ2xhc3NlcyhjYW52YXM6IENhbnZhcykge1xyXG4gICAgdGhpcy5wcmV2aW91c0Nzc2NsYXNzZXMuZm9yRWFjaCgoY3NzY2xhc3MpID0+IHtcclxuICAgICAgY2FudmFzLndyYXBwZXJFbC5jbGFzc0xpc3QucmVtb3ZlKGNzc2NsYXNzKVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLnByZXZpb3VzQ3NzY2xhc3NlcyA9IGNhbnZhcy5tZXRhZGF0YT8ucHJvcGVydGllcz8uY3NzY2xhc3NlcyB8fCBbXVxyXG4gICAgdGhpcy5wcmV2aW91c0Nzc2NsYXNzZXMuZm9yRWFjaCgoY3NzY2xhc3MpID0+IHtcclxuICAgICAgY2FudmFzLndyYXBwZXJFbC5jbGFzc0xpc3QuYWRkKGNzc2NsYXNzKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgb3BlblByb3BlcnRpZXNEaWFsb2coY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGF3YWl0IG5ldyBQcm9wZXJ0aWVzTW9kYWwodGhpcy5wbHVnaW4uYXBwLCBjYW52YXMpLmF3YWl0RGlhbG9nKClcclxuICAgIHRoaXMudXBkYXRlQ3NzQ2xhc3NlcyhjYW52YXMpXHJcbiAgfVxyXG59XHJcblxyXG5jbGFzcyBQcm9wZXJ0aWVzTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgY2FudmFzOiBDYW52YXNcclxuXHJcbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBzdXBlcihhcHApXHJcbiAgICB0aGlzLmNhbnZhcyA9IGNhbnZhc1xyXG4gIH1cclxuXHJcbiAgb25PcGVuKCkge1xyXG4gICAgbmV3IFNldHRpbmcodGhpcy5jb250ZW50RWwpXHJcbiAgICAuc2V0SGVhZGluZygpXHJcbiAgICAuc2V0TmFtZShcIlByb3BlcnRpZXNcIilcclxuXHJcbiAgICBuZXcgU2V0dGluZyh0aGlzLmNvbnRlbnRFbClcclxuICAgICAgLnNldENsYXNzKFwicHJvcGVydGllcy1maWVsZFwiKVxyXG4gICAgICAuc2V0TmFtZShcImNzc2NsYXNzZXNcIilcclxuICAgICAgLnNldFRvb2x0aXAoXCJBZGQgY2xhc3NlcyB0byB0aGUgY2FudmFzIHdyYXBwZXIgZWxlbWVudC4gU2VwYXJhdGUgbXVsdGlwbGUgY2xhc3NlcyB3aXRoIHNwYWNlcy5cIilcclxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuY2FudmFzLm1ldGFkYXRhLnByb3BlcnRpZXM/LmNzc2NsYXNzZXM/LmpvaW4oJyAnKSlcclxuICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMubWV0YWRhdGEucHJvcGVydGllcyA9IHRoaXMuY2FudmFzLm1ldGFkYXRhPy5wcm9wZXJ0aWVzID8/IHt9XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLm1ldGFkYXRhLnByb3BlcnRpZXMuY3NzY2xhc3NlcyA9IHZhbHVlLnNwbGl0KCcgJylcclxuICAgICAgICAgIH0pXHJcbiAgICAgIClcclxuICB9XHJcblxyXG4gIG9uQ2xvc2UoKSB7fVxyXG5cclxuICBhd2FpdERpYWxvZygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICB0aGlzLm9uQ2xvc2UgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKVxyXG4gICAgICAgIHJlc29sdmUoKVxyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLm9wZW4oKVxyXG4gICAgfSlcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgQ2FudmFzIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IENhbnZhc0hlbHBlciBmcm9tIFwic3JjL3V0aWxzL2NhbnZhcy1oZWxwZXJcIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi8uLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5pbXBvcnQgeyBCVUlMVElOX05PREVfU1RZTEVfQVRUUklCVVRFUywgU3R5bGVBdHRyaWJ1dGUgfSBmcm9tIFwiLi9zdHlsZS1jb25maWdcIlxyXG5pbXBvcnQgU2V0dGluZ3NNYW5hZ2VyIGZyb20gXCJzcmMvc2V0dGluZ3NcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm9kZVN0eWxlc0V4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgYWxsTm9kZVN0eWxlczogU3R5bGVBdHRyaWJ1dGVbXVxyXG5cclxuICBpc0VuYWJsZWQoKSB7IHJldHVybiAnbm9kZVN0eWxpbmdGZWF0dXJlRW5hYmxlZCcgYXMgY29uc3QgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5hbGxOb2RlU3R5bGVzID0gWy4uLkJVSUxUSU5fTk9ERV9TVFlMRV9BVFRSSUJVVEVTLCAuLi50aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdjdXN0b21Ob2RlU3R5bGVBdHRyaWJ1dGVzJyldXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIFNldHRpbmdzTWFuYWdlci5TRVRUSU5HU19DSEFOR0VEX0VWRU5ULFxyXG4gICAgICAoKSA9PiB0aGlzLmFsbE5vZGVTdHlsZXMgPSBbLi4uQlVJTFRJTl9OT0RFX1NUWUxFX0FUVFJJQlVURVMsIC4uLnRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2N1c3RvbU5vZGVTdHlsZUF0dHJpYnV0ZXMnKV1cclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Qb3B1cE1lbnVDcmVhdGVkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMub25Qb3B1cE1lbnVDcmVhdGVkKGNhbnZhcylcclxuICAgICkpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uUG9wdXBNZW51Q3JlYXRlZChjYW52YXM6IENhbnZhcyk6IHZvaWQge1xyXG4gICAgY29uc3Qgc2VsZWN0aW9uTm9kZURhdGEgPSBjYW52YXMuZ2V0U2VsZWN0aW9uRGF0YSgpLm5vZGVzXHJcbiAgICBpZiAoY2FudmFzLnJlYWRvbmx5IHx8IHNlbGVjdGlvbk5vZGVEYXRhLmxlbmd0aCA9PT0gMCB8fCBzZWxlY3Rpb25Ob2RlRGF0YS5sZW5ndGggIT09IGNhbnZhcy5zZWxlY3Rpb24uc2l6ZSlcclxuICAgICAgcmV0dXJuXHJcblxyXG4gICAgY29uc3Qgc2VsZWN0ZWROb2RlVHlwZXMgPSBuZXcgU2V0KHNlbGVjdGlvbk5vZGVEYXRhLm1hcChub2RlID0+IG5vZGUudHlwZSkpXHJcbiAgICBjb25zdCBhdmFpbGFibGVOb2RlU3R5bGVzID0gdGhpcy5hbGxOb2RlU3R5bGVzLmZpbHRlcihzdHlsZSA9PiAhc3R5bGUubm9kZVR5cGVzIHx8IHN0eWxlLm5vZGVUeXBlcy5zb21lKHR5cGUgPT4gc2VsZWN0ZWROb2RlVHlwZXMuaGFzKHR5cGUpKSlcclxuXHJcbiAgICBDYW52YXNIZWxwZXIuY3JlYXRlU3R5bGVEcm9wZG93bk1lbnUoXHJcbiAgICAgIGNhbnZhcywgYXZhaWxhYmxlTm9kZVN0eWxlcyxcclxuICAgICAgc2VsZWN0aW9uTm9kZURhdGFbMF0uc3R5bGVBdHRyaWJ1dGVzID8/IHt9LFxyXG4gICAgICAoYXR0cmlidXRlLCB2YWx1ZSkgPT4gdGhpcy5zZXRTdHlsZUF0dHJpYnV0ZUZvclNlbGVjdGlvbihjYW52YXMsIGF0dHJpYnV0ZSwgdmFsdWUpXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldFN0eWxlQXR0cmlidXRlRm9yU2VsZWN0aW9uKGNhbnZhczogQ2FudmFzLCBhdHRyaWJ1dGU6IFN0eWxlQXR0cmlidXRlLCB2YWx1ZTogc3RyaW5nIHwgbnVsbCk6IHZvaWQge1xyXG4gICAgY29uc3Qgc2VsZWN0aW9uTm9kZURhdGEgPSBjYW52YXMuZ2V0U2VsZWN0aW9uRGF0YSgpLm5vZGVzXHJcbiAgICBmb3IgKGNvbnN0IG5vZGVEYXRhIG9mIHNlbGVjdGlvbk5vZGVEYXRhKSB7XHJcbiAgICAgIGNvbnN0IG5vZGUgPSBjYW52YXMubm9kZXMuZ2V0KG5vZGVEYXRhLmlkKVxyXG4gICAgICBpZiAoIW5vZGUpIGNvbnRpbnVlXHJcblxyXG4gICAgICAvLyBPbmx5IGFwcGx5IHRoZSBhdHRyaWJ1dGUgaWYgdGhlIG5vZGUgdHlwZSBpcyBhbGxvd2VkXHJcbiAgICAgIGlmIChhdHRyaWJ1dGUubm9kZVR5cGVzICYmICFhdHRyaWJ1dGUubm9kZVR5cGVzLmluY2x1ZGVzKG5vZGVEYXRhLnR5cGUpKSBjb250aW51ZVxyXG5cclxuICAgICAgbm9kZS5zZXREYXRhKHtcclxuICAgICAgICAuLi5ub2RlRGF0YSxcclxuICAgICAgICBzdHlsZUF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgIC4uLm5vZGVEYXRhLnN0eWxlQXR0cmlidXRlcyxcclxuICAgICAgICAgIFthdHRyaWJ1dGUuZGF0YXNldEtleV06IHZhbHVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjYW52YXMucHVzaEhpc3RvcnkoY2FudmFzLmdldERhdGEoKSlcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgQ2FudmFzLCBQb3NpdGlvbiwgU2lkZSB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcbmltcG9ydCBBZHZhbmNlZENhbnZhc1BsdWdpbiBmcm9tIFwic3JjL21haW5cIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgRWRnZVBhdGhmaW5kaW5nTWV0aG9kIHtcclxuICBhYnN0cmFjdCBnZXRQYXRoKHBsdWdpbjogQWR2YW5jZWRDYW52YXNQbHVnaW4sIGNhbnZhczogQ2FudmFzLCBmcm9tUG9zOiBQb3NpdGlvbiwgZnJvbUJCb3hTaWRlUG9zOiBQb3NpdGlvbiwgZnJvbVNpZGU6IFNpZGUsIHRvUG9zOiBQb3NpdGlvbiwgdG9CQm94U2lkZVBvczogUG9zaXRpb24sIHRvU2lkZTogU2lkZSwgaXNEcmFnZ2luZzogYm9vbGVhbik6IEVkZ2VQYXRoIHwgbnVsbFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEVkZ2VQYXRoIHtcclxuICBzdmdQYXRoOiBzdHJpbmdcclxuICBjZW50ZXI6IFBvc2l0aW9uXHJcbiAgcm90YXRlQXJyb3dzOiBib29sZWFuXHJcbn0iLCAiaW1wb3J0IHsgUG9zaXRpb24gfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3ZnUGF0aEhlbHBlciB7XHJcbiAgc3RhdGljIHBhdGhBcnJheVRvU3ZnUGF0aChwb3NpdGlvbnM6IFBvc2l0aW9uW10sIHJvdW5kZWQgPSBmYWxzZSk6IHN0cmluZyB7XHJcbiAgICBjb25zdCB0ZW5zaW9uID0gMC4yXHJcbiAgICBsZXQgbmV3UG9zaXRpb25zID0gWy4uLnBvc2l0aW9uc11cclxuXHJcbiAgICBpZiAocm91bmRlZCAmJiBwb3NpdGlvbnMubGVuZ3RoID4gMikge1xyXG4gICAgICBuZXdQb3NpdGlvbnMgPSBbcG9zaXRpb25zWzBdXVxyXG5cclxuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwb3NpdGlvbnMubGVuZ3RoIC0gMjsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgcDEgPSBwb3NpdGlvbnNbaV1cclxuICAgICAgICBjb25zdCBwMiA9IHBvc2l0aW9uc1tpICsgMV1cclxuICAgICAgICBjb25zdCBwMyA9IHBvc2l0aW9uc1tpICsgMl1cclxuXHJcbiAgICAgICAgY29uc3QgdDEgPSAoMSAtIHRlbnNpb24pIC8gMlxyXG4gICAgICAgIGNvbnN0IHQyID0gMSAtIHQxXHJcblxyXG4gICAgICAgIGNvbnN0IHggPVxyXG4gICAgICAgICAgdDIgKiB0MiAqIHQyICogcDEueCArXHJcbiAgICAgICAgICAzICogdDIgKiB0MiAqIHQxICogcDIueCArXHJcbiAgICAgICAgICAzICogdDIgKiB0MSAqIHQxICogcDMueCArXHJcbiAgICAgICAgICB0MSAqIHQxICogdDEgKiBwMi54XHJcblxyXG4gICAgICAgIGNvbnN0IHkgPVxyXG4gICAgICAgICAgdDIgKiB0MiAqIHQyICogcDEueSArXHJcbiAgICAgICAgICAzICogdDIgKiB0MiAqIHQxICogcDIueSArXHJcbiAgICAgICAgICAzICogdDIgKiB0MSAqIHQxICogcDMueSArXHJcbiAgICAgICAgICB0MSAqIHQxICogdDEgKiBwMi55XHJcblxyXG4gICAgICAgIG5ld1Bvc2l0aW9ucy5wdXNoKHsgeDogeCwgeTogeSB9KVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBsYXN0UG9pbnQgPSBwb3NpdGlvbnNbcG9zaXRpb25zLmxlbmd0aCAtIDFdXHJcbiAgICAgIG5ld1Bvc2l0aW9ucy5wdXNoKGxhc3RQb2ludClcclxuICAgIH1cclxuICAgICAgXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld1Bvc2l0aW9ucy5sZW5ndGggLSAyOyBpKyspIHtcclxuICAgICAgY29uc3QgcDEgPSBuZXdQb3NpdGlvbnNbaV1cclxuICAgICAgY29uc3QgcDIgPSBuZXdQb3NpdGlvbnNbaSArIDFdXHJcbiAgICAgIGNvbnN0IHAzID0gbmV3UG9zaXRpb25zW2kgKyAyXVxyXG5cclxuICAgICAgY29uc3QgY3VycmVudERpcmVjdGlvbiA9IHtcclxuICAgICAgICB4OiBwMi54IC0gcDEueCxcclxuICAgICAgICB5OiBwMi55IC0gcDEueVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBuZXh0RGlyZWN0aW9uID0ge1xyXG4gICAgICAgIHg6IHAzLnggLSBwMi54LFxyXG4gICAgICAgIHk6IHAzLnkgLSBwMi55XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChjdXJyZW50RGlyZWN0aW9uLnggIT09IG5leHREaXJlY3Rpb24ueCAmJiBjdXJyZW50RGlyZWN0aW9uLnkgIT09IG5leHREaXJlY3Rpb24ueSkgY29udGludWVcclxuXHJcbiAgICAgIG5ld1Bvc2l0aW9ucy5zcGxpY2UoaSArIDEsIDEpXHJcbiAgICAgIGktLVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBuZXdQb3NpdGlvbnMubWFwKChwb3NpdGlvbiwgaW5kZXgpID0+IFxyXG4gICAgICBgJHtpbmRleCA9PT0gMCA/ICdNJyA6ICdMJ30gJHtwb3NpdGlvbi54fSAke3Bvc2l0aW9uLnl9YFxyXG4gICAgKS5qb2luKCcgJylcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgQ2FudmFzLCBQb3NpdGlvbiwgU2lkZSB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcbmltcG9ydCBFZGdlUGF0aGZpbmRpbmdNZXRob2QsIHsgRWRnZVBhdGggfSBmcm9tIFwiLi9lZGdlLXBhdGhmaW5kaW5nLW1ldGhvZFwiXHJcbmltcG9ydCBTdmdQYXRoSGVscGVyIGZyb20gXCJzcmMvdXRpbHMvc3ZnLXBhdGgtaGVscGVyXCJcclxuaW1wb3J0IEFkdmFuY2VkQ2FudmFzUGx1Z2luIGZyb20gXCJzcmMvbWFpblwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFZGdlUGF0aGZpbmRpbmdEaXJlY3QgZXh0ZW5kcyBFZGdlUGF0aGZpbmRpbmdNZXRob2Qge1xyXG4gIGdldFBhdGgoX3BsdWdpbjogQWR2YW5jZWRDYW52YXNQbHVnaW4sIF9jYW52YXM6IENhbnZhcywgZnJvbVBvczogUG9zaXRpb24sIF9mcm9tQkJveFNpZGVQb3M6IFBvc2l0aW9uLCBfZnJvbVNpZGU6IFNpZGUsIHRvUG9zOiBQb3NpdGlvbiwgX3RvQkJveFNpZGVQb3M6IFBvc2l0aW9uLCBfdG9TaWRlOiBTaWRlLCBfaXNEcmFnZ2luZzogYm9vbGVhbik6IEVkZ2VQYXRoIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN2Z1BhdGg6IFN2Z1BhdGhIZWxwZXIucGF0aEFycmF5VG9TdmdQYXRoKFtmcm9tUG9zLCB0b1Bvc10sIGZhbHNlKSxcclxuICAgICAgY2VudGVyOiB7XHJcbiAgICAgICAgeDogKGZyb21Qb3MueCArIHRvUG9zLngpIC8gMixcclxuICAgICAgICB5OiAoZnJvbVBvcy55ICsgdG9Qb3MueSkgLyAyXHJcbiAgICAgIH0sXHJcbiAgICAgIHJvdGF0ZUFycm93czogdHJ1ZVxyXG4gICAgfVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBDYW52YXMsIFBvc2l0aW9uLCBTaWRlIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IEVkZ2VQYXRoZmluZGluZ01ldGhvZCwgeyBFZGdlUGF0aCB9IGZyb20gXCIuL2VkZ2UtcGF0aGZpbmRpbmctbWV0aG9kXCJcclxuaW1wb3J0IFN2Z1BhdGhIZWxwZXIgZnJvbSBcInNyYy91dGlscy9zdmctcGF0aC1oZWxwZXJcIlxyXG5pbXBvcnQgQWR2YW5jZWRDYW52YXNQbHVnaW4gZnJvbSBcInNyYy9tYWluXCJcclxuaW1wb3J0IEJCb3hIZWxwZXIgZnJvbSBcInNyYy91dGlscy9iYm94LWhlbHBlclwiXHJcbmltcG9ydCBDYW52YXNIZWxwZXIgZnJvbSBcInNyYy91dGlscy9jYW52YXMtaGVscGVyXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVkZ2VQYXRoZmluZGluZ1NxdWFyZSBleHRlbmRzIEVkZ2VQYXRoZmluZGluZ01ldGhvZCB7XHJcbiAgZ2V0UGF0aChfcGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpbiwgX2NhbnZhczogQ2FudmFzLCBmcm9tUG9zOiBQb3NpdGlvbiwgZnJvbUJCb3hTaWRlUG9zOiBQb3NpdGlvbiwgZnJvbVNpZGU6IFNpZGUsIHRvUG9zOiBQb3NpdGlvbiwgdG9CQm94U2lkZVBvczogUG9zaXRpb24sIHRvU2lkZTogU2lkZSwgX2lzRHJhZ2dpbmc6IGJvb2xlYW4pOiBFZGdlUGF0aCB7XHJcbiAgICBsZXQgcGF0aEFycmF5OiBQb3NpdGlvbltdID0gW11cclxuICAgIGxldCBjZW50ZXI6IFBvc2l0aW9uID0geyB4OiAwLCB5OiAwIH1cclxuXHJcbiAgICBpZiAoZnJvbVNpZGUgPT09IHRvU2lkZSkge1xyXG4gICAgICAvLyBTYW1lIHNpZGUgLT4gTWFrZSBhIFVcclxuICAgICAgY29uc3QgZGlyZWN0aW9uID0gQkJveEhlbHBlci5kaXJlY3Rpb24oZnJvbVNpZGUpXHJcblxyXG4gICAgICBpZiAoQkJveEhlbHBlci5pc0hvcml6b250YWwoZnJvbVNpZGUpKSB7XHJcbiAgICAgICAgcGF0aEFycmF5ID0gW1xyXG4gICAgICAgICAgZnJvbVBvcyxcclxuICAgICAgICAgIHsgeDogTWF0aC5tYXgoZnJvbUJCb3hTaWRlUG9zLngsIHRvQkJveFNpZGVQb3MueCkgKyBkaXJlY3Rpb24gKiBDYW52YXNIZWxwZXIuR1JJRF9TSVpFLCB5OiBmcm9tQkJveFNpZGVQb3MueSB9LFxyXG4gICAgICAgICAgeyB4OiBNYXRoLm1heChmcm9tQkJveFNpZGVQb3MueCwgdG9CQm94U2lkZVBvcy54KSArIGRpcmVjdGlvbiAqIENhbnZhc0hlbHBlci5HUklEX1NJWkUsIHk6IHRvQkJveFNpZGVQb3MueSB9LFxyXG4gICAgICAgICAgdG9Qb3NcclxuICAgICAgICBdXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcGF0aEFycmF5ID0gW1xyXG4gICAgICAgICAgZnJvbVBvcyxcclxuICAgICAgICAgIHsgeDogZnJvbUJCb3hTaWRlUG9zLngsIHk6IE1hdGgubWF4KGZyb21CQm94U2lkZVBvcy55LCB0b0JCb3hTaWRlUG9zLnkpICsgZGlyZWN0aW9uICogQ2FudmFzSGVscGVyLkdSSURfU0laRSB9LFxyXG4gICAgICAgICAgeyB4OiB0b0JCb3hTaWRlUG9zLngsIHk6IE1hdGgubWF4KGZyb21CQm94U2lkZVBvcy55LCB0b0JCb3hTaWRlUG9zLnkpICsgZGlyZWN0aW9uICogQ2FudmFzSGVscGVyLkdSSURfU0laRSB9LFxyXG4gICAgICAgICAgdG9Qb3NcclxuICAgICAgICBdXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNlbnRlciA9IHsgXHJcbiAgICAgICAgeDogKHBhdGhBcnJheVsxXS54ICsgcGF0aEFycmF5WzJdLngpIC8gMixcclxuICAgICAgICB5OiAocGF0aEFycmF5WzFdLnkgKyBwYXRoQXJyYXlbMl0ueSkgLyAyXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoQkJveEhlbHBlci5pc0hvcml6b250YWwoZnJvbVNpZGUpID09PSBCQm94SGVscGVyLmlzSG9yaXpvbnRhbCh0b1NpZGUpKSB7XHJcbiAgICAgIC8vIFNhbWUgYXhpcywgZGlmZmVyZW50IHNpZGUgLT4gTWFrZSBhIFpcclxuICAgICAgaWYgKEJCb3hIZWxwZXIuaXNIb3Jpem9udGFsKGZyb21TaWRlKSkge1xyXG4gICAgICAgIHBhdGhBcnJheSA9IFtcclxuICAgICAgICAgIGZyb21Qb3MsXHJcbiAgICAgICAgICB7IHg6IGZyb21CQm94U2lkZVBvcy54ICsgKHRvQkJveFNpZGVQb3MueCAtIGZyb21CQm94U2lkZVBvcy54KSAvIDIsIHk6IGZyb21CQm94U2lkZVBvcy55IH0sXHJcbiAgICAgICAgICB7IHg6IGZyb21CQm94U2lkZVBvcy54ICsgKHRvQkJveFNpZGVQb3MueCAtIGZyb21CQm94U2lkZVBvcy54KSAvIDIsIHk6IHRvQkJveFNpZGVQb3MueSB9LFxyXG4gICAgICAgICAgdG9Qb3NcclxuICAgICAgICBdXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcGF0aEFycmF5ID0gW1xyXG4gICAgICAgICAgZnJvbVBvcyxcclxuICAgICAgICAgIHsgeDogZnJvbUJCb3hTaWRlUG9zLngsIHk6IGZyb21CQm94U2lkZVBvcy55ICsgKHRvQkJveFNpZGVQb3MueSAtIGZyb21CQm94U2lkZVBvcy55KSAvIDIgfSxcclxuICAgICAgICAgIHsgeDogdG9CQm94U2lkZVBvcy54LCB5OiBmcm9tQkJveFNpZGVQb3MueSArICh0b0JCb3hTaWRlUG9zLnkgLSBmcm9tQkJveFNpZGVQb3MueSkgLyAyIH0sXHJcbiAgICAgICAgICB0b1Bvc1xyXG4gICAgICAgIF1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY2VudGVyID0geyBcclxuICAgICAgICB4OiAoZnJvbUJCb3hTaWRlUG9zLnggKyB0b0JCb3hTaWRlUG9zLngpIC8gMiwgXHJcbiAgICAgICAgeTogKGZyb21CQm94U2lkZVBvcy55ICsgdG9CQm94U2lkZVBvcy55KSAvIDIgXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIERpZmZlcmVudCBheGlzIC0+IE1ha2UgYSBMXHJcbiAgICAgIGlmIChCQm94SGVscGVyLmlzSG9yaXpvbnRhbChmcm9tU2lkZSkpIHtcclxuICAgICAgICBwYXRoQXJyYXkgPSBbXHJcbiAgICAgICAgICBmcm9tUG9zLFxyXG4gICAgICAgICAgeyB4OiB0b0JCb3hTaWRlUG9zLngsIHk6IGZyb21CQm94U2lkZVBvcy55IH0sXHJcbiAgICAgICAgICB0b1Bvc1xyXG4gICAgICAgIF1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBwYXRoQXJyYXkgPSBbXHJcbiAgICAgICAgICBmcm9tUG9zLFxyXG4gICAgICAgICAgeyB4OiBmcm9tQkJveFNpZGVQb3MueCwgeTogdG9CQm94U2lkZVBvcy55IH0sXHJcbiAgICAgICAgICB0b1Bvc1xyXG4gICAgICAgIF1cclxuICAgICAgfVxyXG5cclxuICAgICAgY2VudGVyID0geyBcclxuICAgICAgICB4OiBwYXRoQXJyYXlbMV0ueCxcclxuICAgICAgICB5OiBwYXRoQXJyYXlbMV0ueVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3ZnUGF0aDogU3ZnUGF0aEhlbHBlci5wYXRoQXJyYXlUb1N2Z1BhdGgocGF0aEFycmF5LCBmYWxzZSksXHJcbiAgICAgIGNlbnRlcjogY2VudGVyLFxyXG4gICAgICByb3RhdGVBcnJvd3M6IGZhbHNlXHJcbiAgICB9XHJcbiAgfVxyXG59IiwgImltcG9ydCB7IEJCb3gsIENhbnZhcywgUG9zaXRpb24sIFNpZGUgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgRWRnZVBhdGhmaW5kaW5nTWV0aG9kLCB7IEVkZ2VQYXRoIH0gZnJvbSBcIi4vZWRnZS1wYXRoZmluZGluZy1tZXRob2RcIlxyXG5pbXBvcnQgU3ZnUGF0aEhlbHBlciBmcm9tIFwic3JjL3V0aWxzL3N2Zy1wYXRoLWhlbHBlclwiXHJcbmltcG9ydCBBZHZhbmNlZENhbnZhc1BsdWdpbiBmcm9tIFwic3JjL21haW5cIlxyXG5pbXBvcnQgQkJveEhlbHBlciBmcm9tIFwic3JjL3V0aWxzL2Jib3gtaGVscGVyXCJcclxuXHJcbmNvbnN0IERJUkVDVElPTlMgPSBbXHJcbiAgeyBkeDogMSwgZHk6IDAgfSwgeyBkeDogLTEsIGR5OiAwIH0sIHsgZHg6IDAsIGR5OiAxIH0sIHsgZHg6IDAsIGR5OiAtMSB9LFxyXG4gIHsgZHg6IDEsIGR5OiAxIH0sIHsgZHg6IC0xLCBkeTogMSB9LCB7IGR4OiAxLCBkeTogLTEgfSwgeyBkeDogLTEsIGR5OiAtMSB9LFxyXG5dIGFzIGNvbnN0XHJcbmNvbnN0IERJQUdPTkFMX0NPU1QgPSBNYXRoLnNxcnQoMilcclxuXHJcbmNsYXNzIE5vZGUge1xyXG4gIHg6IG51bWJlclxyXG4gIHk6IG51bWJlclxyXG4gIGdDb3N0OiBudW1iZXJcclxuICBoQ29zdDogbnVtYmVyXHJcbiAgZkNvc3Q6IG51bWJlclxyXG4gIHBhcmVudDogTm9kZXxudWxsXHJcblxyXG4gIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnggPSB4XHJcbiAgICB0aGlzLnkgPSB5XHJcblxyXG4gICAgdGhpcy5nQ29zdCA9IDBcclxuICAgIHRoaXMuaENvc3QgPSAwXHJcbiAgICB0aGlzLmZDb3N0ID0gMFxyXG4gICAgdGhpcy5wYXJlbnQgPSBudWxsXHJcbiAgfVxyXG5cclxuICAvLyBPbmx5IGNoZWNrIGZvciB4IGFuZCB5LCBub3QgZ0Nvc3QsIGhDb3N0LCBmQ29zdCwgb3IgcGFyZW50XHJcbiAgaW5MaXN0KG5vZGVzOiBOb2RlW10pOiBib29sZWFuIHtcclxuICAgIHJldHVybiBub2Rlcy5zb21lKG4gPT4gbi54ID09PSB0aGlzLnggJiYgbi55ID09PSB0aGlzLnkpXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFZGdlUGF0aGZpbmRpbmdBU3RhciBleHRlbmRzIEVkZ2VQYXRoZmluZGluZ01ldGhvZCB7XHJcbiAgZ2V0UGF0aChwbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luLCBjYW52YXM6IENhbnZhcywgZnJvbVBvczogUG9zaXRpb24sIF9mcm9tQkJveFNpZGVQb3M6IFBvc2l0aW9uLCBmcm9tU2lkZTogU2lkZSwgdG9Qb3M6IFBvc2l0aW9uLCBfdG9CQm94U2lkZVBvczogUG9zaXRpb24sIHRvU2lkZTogU2lkZSwgaXNEcmFnZ2luZzogYm9vbGVhbik6IEVkZ2VQYXRoIHwgbnVsbCB7XHJcbiAgICBpZiAoaXNEcmFnZ2luZyAmJiAhcGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2VkZ2VTdHlsZVBhdGhmaW5kZXJQYXRoTGl2ZVVwZGF0ZScpKSByZXR1cm4gbnVsbFxyXG4gICAgICAgIFxyXG4gICAgY29uc3Qgbm9kZUJCb3hlcyA9IFsuLi5jYW52YXMubm9kZXMudmFsdWVzKCldXHJcbiAgICAgIC5maWx0ZXIobm9kZSA9PiB7XHJcbiAgICAgICAgY29uc3Qgbm9kZURhdGEgPSBub2RlLmdldERhdGEoKVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGlzR3JvdXAgPSBub2RlRGF0YS50eXBlID09PSAnZ3JvdXAnIC8vIEV4Y2x1ZGUgZ3JvdXAgbm9kZXNcclxuICAgICAgICBjb25zdCBpc09wZW5Qb3J0YWwgPSBub2RlRGF0YS5wb3J0YWxUb0ZpbGUgIT09IHVuZGVmaW5lZCAvLyBFeGNsdWRlIG9wZW4gcG9ydGFsc1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiAhaXNHcm91cCAmJiAhaXNPcGVuUG9ydGFsXHJcbiAgICAgIH0pLm1hcChub2RlID0+IG5vZGUuZ2V0QkJveCgpKVxyXG4gICAgXHJcbiAgICBjb25zdCBmcm9tUG9zV2l0aE1hcmdpbiA9IEJCb3hIZWxwZXIubW92ZUluRGlyZWN0aW9uKGZyb21Qb3MsIGZyb21TaWRlLCAxMClcclxuICAgIGNvbnN0IHRvUG9zV2l0aE1hcmdpbiA9IEJCb3hIZWxwZXIubW92ZUluRGlyZWN0aW9uKHRvUG9zLCB0b1NpZGUsIDEwKVxyXG5cclxuICAgIGNvbnN0IGdyaWRSZXNvbHV0aW9uID0gcGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2VkZ2VTdHlsZVBhdGhmaW5kZXJHcmlkUmVzb2x1dGlvbicpXHJcbiAgICBjb25zdCBwYXRoQXJyYXkgPSB0aGlzLmFTdGFyQWxnb3JpdGhtKGZyb21Qb3NXaXRoTWFyZ2luLCBmcm9tU2lkZSwgdG9Qb3NXaXRoTWFyZ2luLCB0b1NpZGUsIG5vZGVCQm94ZXMsIGdyaWRSZXNvbHV0aW9uKVxyXG4gICAgaWYgKCFwYXRoQXJyYXkpIHJldHVybiBudWxsIC8vIE5vIHBhdGggZm91bmQgLSB1c2UgZGVmYXVsdCBwYXRoXHJcblxyXG4gICAgLy8gTWFrZSBjb25uZWN0aW9uIHBvaW50cyB0byB0aGUgbm9kZSByZW1vdmluZyB0aGUgbWFyZ2luXHJcbiAgICBwYXRoQXJyYXkuc3BsaWNlKDAsIDAsIGZyb21Qb3MpXHJcbiAgICBwYXRoQXJyYXkuc3BsaWNlKHBhdGhBcnJheS5sZW5ndGgsIDAsIHRvUG9zKVxyXG5cclxuICAgIGNvbnN0IHJvdW5kZWRQYXRoID0gcGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2VkZ2VTdHlsZVBhdGhmaW5kZXJQYXRoUm91bmRlZCcpXHJcbiAgICBjb25zdCBzdmdQYXRoID0gU3ZnUGF0aEhlbHBlci5wYXRoQXJyYXlUb1N2Z1BhdGgocGF0aEFycmF5LCByb3VuZGVkUGF0aClcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdmdQYXRoOiBzdmdQYXRoLFxyXG4gICAgICBjZW50ZXI6IHBhdGhBcnJheVtNYXRoLmZsb29yKHBhdGhBcnJheS5sZW5ndGggLyAyKV0sXHJcbiAgICAgIHJvdGF0ZUFycm93czogZmFsc2VcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYVN0YXJBbGdvcml0aG0oZnJvbVBvczogUG9zaXRpb24sIGZyb21TaWRlOiBTaWRlLCB0b1BvczogUG9zaXRpb24sIHRvU2lkZTogU2lkZSwgb2JzdGFjbGVzOiBCQm94W10sIGdyaWRSZXNvbHV0aW9uOiBudW1iZXIpOiBQb3NpdGlvbltdIHwgbnVsbCB7XHJcbiAgICBjb25zdCBzdGFydDogTm9kZSA9IG5ldyBOb2RlKFxyXG4gICAgICBNYXRoLmZsb29yKGZyb21Qb3MueCAvIGdyaWRSZXNvbHV0aW9uKSAqIGdyaWRSZXNvbHV0aW9uLFxyXG4gICAgICBNYXRoLmZsb29yKGZyb21Qb3MueSAvIGdyaWRSZXNvbHV0aW9uKSAqIGdyaWRSZXNvbHV0aW9uXHJcbiAgICApXHJcbiAgICAvLyBSb3VuZCBzdGFydCBhbmQgZW5kIHBvc2l0aW9ucyB0byB0aGUgbmVhcmVzdCBncmlkIGNlbGwgb3V0c2lkZSBvZiB0aGUgbm9kZXMgdG8gY29ubmVjdFxyXG4gICAgaWYgKGZyb21TaWRlID09PSAncmlnaHQnICYmIGZyb21Qb3MueCAhPT0gc3RhcnQueCkgc3RhcnQueCArPSBncmlkUmVzb2x1dGlvblxyXG4gICAgaWYgKGZyb21TaWRlID09PSAnYm90dG9tJyAmJiBmcm9tUG9zLnkgIT09IHN0YXJ0LnkpIHN0YXJ0LnkgKz0gZ3JpZFJlc29sdXRpb25cclxuICBcclxuICAgIGNvbnN0IGVuZDogTm9kZSA9IG5ldyBOb2RlKFxyXG4gICAgICBNYXRoLmZsb29yKHRvUG9zLnggLyBncmlkUmVzb2x1dGlvbikgKiBncmlkUmVzb2x1dGlvbixcclxuICAgICAgTWF0aC5mbG9vcih0b1Bvcy55IC8gZ3JpZFJlc29sdXRpb24pICogZ3JpZFJlc29sdXRpb25cclxuICAgIClcclxuICAgIC8vIFJvdW5kIHN0YXJ0IGFuZCBlbmQgcG9zaXRpb25zIHRvIHRoZSBuZWFyZXN0IGdyaWQgY2VsbCBvdXRzaWRlIG9mIHRoZSBub2RlcyB0byBjb25uZWN0XHJcbiAgICBpZiAodG9TaWRlID09PSAncmlnaHQnICYmIHRvUG9zLnggIT09IGVuZC54KSBlbmQueCArPSBncmlkUmVzb2x1dGlvblxyXG4gICAgaWYgKHRvU2lkZSA9PT0gJ2JvdHRvbScgJiYgdG9Qb3MueSAhPT0gZW5kLnkpIGVuZC55ICs9IGdyaWRSZXNvbHV0aW9uXHJcbiAgICBcclxuICAgIC8vIENoZWNrIGlmIHN0YXJ0IGFuZCBlbmQgcG9zaXRpb25zIGFyZSB2YWxpZFxyXG4gICAgaWYgKHRoaXMuaXNJbnNpZGVPYnN0YWNsZShzdGFydCwgb2JzdGFjbGVzKSB8fCB0aGlzLmlzSW5zaWRlT2JzdGFjbGUoZW5kLCBvYnN0YWNsZXMpKSByZXR1cm4gbnVsbFxyXG4gIFxyXG4gICAgY29uc3Qgb3BlblNldDogTm9kZVtdID0gW3N0YXJ0XVxyXG4gICAgY29uc3QgY2xvc2VkU2V0OiBOb2RlW10gPSBbXVxyXG4gIFxyXG4gICAgd2hpbGUgKG9wZW5TZXQubGVuZ3RoID4gMCkge1xyXG4gICAgICAvLyBGaW5kIHRoZSBub2RlIHdpdGggdGhlIGxvd2VzdCBmQ29zdCBpbiB0aGUgb3BlbiBzZXRcclxuICAgICAgbGV0IGN1cnJlbnQ6IE5vZGV8bnVsbCA9IG51bGxcclxuICAgICAgbGV0IGxvd2VzdEZDb3N0ID0gSW5maW5pdHlcclxuICBcclxuICAgICAgZm9yIChjb25zdCBub2RlIG9mIG9wZW5TZXQpIHtcclxuICAgICAgICBpZiAobm9kZS5mQ29zdCA8IGxvd2VzdEZDb3N0KSB7XHJcbiAgICAgICAgICBjdXJyZW50ID0gbm9kZVxyXG4gICAgICAgICAgbG93ZXN0RkNvc3QgPSBub2RlLmZDb3N0XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIC8vIE5vIHBhdGggZm91bmRcclxuICAgICAgaWYgKCFjdXJyZW50KSByZXR1cm4gbnVsbFxyXG4gIFxyXG4gICAgICAvLyBSZW1vdmUgdGhlIGN1cnJlbnQgbm9kZSBmcm9tIHRoZSBvcGVuIHNldCBhbmQgYWRkIGl0IHRvIHRoZSBjbG9zZWQgc2V0XHJcbiAgICAgIG9wZW5TZXQuc3BsaWNlKG9wZW5TZXQuaW5kZXhPZihjdXJyZW50KSwgMSlcclxuICAgICAgY2xvc2VkU2V0LnB1c2goY3VycmVudClcclxuICBcclxuICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmRcclxuICAgICAgaWYgKGN1cnJlbnQueCA9PT0gZW5kLnggJiYgY3VycmVudC55ID09PSBlbmQueSkge1xyXG4gICAgICAgIHJldHVybiBbZnJvbVBvcywgLi4udGhpcy5yZWNvbnN0cnVjdFBhdGgoY3VycmVudCksIHRvUG9zXS5tYXAobm9kZSA9PiAoeyB4OiBub2RlLngsIHk6IG5vZGUueSB9KSlcclxuICAgICAgfVxyXG4gIFxyXG4gICAgICAvLyBMb2NhdGlvbiBpcyBub3Qgc3RhcnQgb3IgZW5kLCBhbGwgdG91Y2hpbmcgcG9zaXRpb25zIGFyZSBpbnZhbGlkXHJcbiAgICAgIGlmICghKGN1cnJlbnQueCA9PT0gc3RhcnQueCAmJiBjdXJyZW50LnkgPT09IHN0YXJ0LnkpICYmIHRoaXMuaXNUb3VjaGluZ09ic3RhY2xlKGN1cnJlbnQsIG9ic3RhY2xlcykpIGNvbnRpbnVlXHJcbiAgXHJcbiAgICAgIC8vIEV4cGFuZCBuZWlnaGJvcnNcclxuICAgICAgZm9yIChjb25zdCBuZWlnaGJvciBvZiB0aGlzLmdldFBvc3NpYmxlTmVpZ2hib3JzKGN1cnJlbnQsIG9ic3RhY2xlcywgZ3JpZFJlc29sdXRpb24pKSB7XHJcbiAgICAgICAgaWYgKG5laWdoYm9yLmluTGlzdChjbG9zZWRTZXQpKSBjb250aW51ZVxyXG4gIFxyXG4gICAgICAgIC8vIENhbGN1bGF0ZSB0ZW50YXRpdmUgZ0Nvc3RcclxuICAgICAgICBjb25zdCB0ZW50YXRpdmVHQ29zdCA9IGN1cnJlbnQuZ0Nvc3QgKyB0aGlzLmdldE1vdmVtZW50Q29zdCh7XHJcbiAgICAgICAgICBkeDogbmVpZ2hib3IueCAtIGN1cnJlbnQueCxcclxuICAgICAgICAgIGR5OiBuZWlnaGJvci55IC0gY3VycmVudC55LFxyXG4gICAgICAgIH0pXHJcbiAgXHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgbmVpZ2hib3IgaXMgbm90IGFscmVhZHkgaW4gdGhlIG9wZW4gc2V0IG9yIGlmIHRoZSBuZXcgZ0Nvc3QgaXMgbG93ZXJcclxuICAgICAgICBpZiAoIW5laWdoYm9yLmluTGlzdChvcGVuU2V0KSB8fCB0ZW50YXRpdmVHQ29zdCA8IG5laWdoYm9yLmdDb3N0KSB7XHJcbiAgICAgICAgICBuZWlnaGJvci5wYXJlbnQgPSBjdXJyZW50XHJcbiAgICAgICAgICBuZWlnaGJvci5nQ29zdCA9IHRlbnRhdGl2ZUdDb3N0XHJcbiAgICAgICAgICBuZWlnaGJvci5oQ29zdCA9IHRoaXMuaGV1cmlzdGljKG5laWdoYm9yLCBlbmQpXHJcbiAgICAgICAgICBuZWlnaGJvci5mQ29zdCA9IG5laWdoYm9yLmdDb3N0ICsgbmVpZ2hib3IuaENvc3RcclxuICBcclxuICAgICAgICAgIC8vIEFkZCBuZWlnaGJvciB0byB0aGUgb3BlbiBzZXRcclxuICAgICAgICAgIG9wZW5TZXQucHVzaChuZWlnaGJvcilcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICBcclxuICAgIC8vIE5vIHBhdGggZm91bmRcclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG4gIFxyXG4gIC8vIE1hbmhhdHRhbiBkaXN0YW5jZVxyXG4gIHByaXZhdGUgaGV1cmlzdGljKG5vZGU6IE5vZGUsIGVuZDogTm9kZSk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gTWF0aC5hYnMobm9kZS54IC0gZW5kLngpICsgTWF0aC5hYnMobm9kZS55IC0gZW5kLnkpXHJcbiAgfVxyXG4gIFxyXG4gIC8vIERlZmluZSBhIGZ1bmN0aW9uIHRvIGNoZWNrIGlmIGEgcG9zaXRpb24gaXNuJ3QgaW5zaWRlIGFueSBvYnN0YWNsZVxyXG4gIHByaXZhdGUgaXNUb3VjaGluZ09ic3RhY2xlKG5vZGU6IFBvc2l0aW9uLCBvYnN0YWNsZXM6IEJCb3hbXSk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIG9ic3RhY2xlcy5zb21lKG9ic3RhY2xlID0+IEJCb3hIZWxwZXIuaW5zaWRlQkJveChub2RlLCBvYnN0YWNsZSwgdHJ1ZSkpXHJcbiAgfVxyXG4gIFxyXG4gIHByaXZhdGUgaXNJbnNpZGVPYnN0YWNsZShub2RlOiBQb3NpdGlvbiwgb2JzdGFjbGVzOiBCQm94W10pOiBib29sZWFuIHtcclxuICAgIHJldHVybiBvYnN0YWNsZXMuc29tZShvYnN0YWNsZSA9PiBCQm94SGVscGVyLmluc2lkZUJCb3gobm9kZSwgb2JzdGFjbGUsIGZhbHNlKSlcclxuICB9XHJcbiAgXHJcbiAgLy8gRGVmaW5lIGEgZnVuY3Rpb24gdG8gY2FsY3VsYXRlIG1vdmVtZW50IGNvc3QgYmFzZWQgb24gZGlyZWN0aW9uXHJcbiAgcHJpdmF0ZSBnZXRNb3ZlbWVudENvc3QoZGlyZWN0aW9uOiB7IGR4OiBudW1iZXI7IGR5OiBudW1iZXIgfSk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gZGlyZWN0aW9uLmR4ICE9PSAwICYmIGRpcmVjdGlvbi5keSAhPT0gMCA/IERJQUdPTkFMX0NPU1QgOiAxXHJcbiAgfVxyXG4gIFxyXG4gIHByaXZhdGUgZ2V0UG9zc2libGVOZWlnaGJvcnMobm9kZTogTm9kZSwgb2JzdGFjbGVzOiBCQm94W10sIGdyaWRSZXNvbHV0aW9uOiBudW1iZXIpOiBOb2RlW10ge1xyXG4gICAgY29uc3QgbmVpZ2hib3JzOiBOb2RlW10gPSBbXVxyXG4gICAgXHJcbiAgICBmb3IgKGNvbnN0IGRpcmVjdGlvbiBvZiBESVJFQ1RJT05TKSB7XHJcbiAgICAgIGNvbnN0IG5laWdoYm9yID0gbmV3IE5vZGUoXHJcbiAgICAgICAgbm9kZS54ICsgZGlyZWN0aW9uLmR4ICogZ3JpZFJlc29sdXRpb24sIFxyXG4gICAgICAgIG5vZGUueSArIGRpcmVjdGlvbi5keSAqIGdyaWRSZXNvbHV0aW9uXHJcbiAgICAgIClcclxuICAgICAgbmVpZ2hib3IuZ0Nvc3QgPSBub2RlLmdDb3N0ICsgdGhpcy5nZXRNb3ZlbWVudENvc3QoZGlyZWN0aW9uKVxyXG4gIFxyXG4gICAgICBpZiAodGhpcy5pc0luc2lkZU9ic3RhY2xlKG5laWdoYm9yLCBvYnN0YWNsZXMpKSBjb250aW51ZVxyXG4gIFxyXG4gICAgICBuZWlnaGJvcnMucHVzaChuZWlnaGJvcilcclxuICAgIH1cclxuICBcclxuICAgIHJldHVybiBuZWlnaGJvcnNcclxuICB9XHJcbiAgXHJcbiAgcHJpdmF0ZSByZWNvbnN0cnVjdFBhdGgobm9kZTogTm9kZSk6IE5vZGVbXSB7XHJcbiAgICBjb25zdCBwYXRoOiBOb2RlW10gPSBbXVxyXG4gICAgd2hpbGUgKG5vZGUpIHtcclxuICAgICAgcGF0aC5wdXNoKG5vZGUpXHJcbiAgICAgIG5vZGUgPSBub2RlLnBhcmVudCFcclxuICAgIH1cclxuICAgIHJldHVybiBwYXRoLnJldmVyc2UoKVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBDYW52YXMsIENhbnZhc0VkZ2UsIENhbnZhc05vZGUsIFBvc2l0aW9uLCBTaWRlIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IENhbnZhc0hlbHBlciBmcm9tIFwic3JjL3V0aWxzL2NhbnZhcy1oZWxwZXJcIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgQkJveEhlbHBlciBmcm9tIFwic3JjL3V0aWxzL2Jib3gtaGVscGVyXCJcclxuaW1wb3J0IENhbnZhc0V4dGVuc2lvbiBmcm9tIFwiLi4vLi4vY29yZS9jYW52YXMtZXh0ZW5zaW9uXCJcclxuaW1wb3J0IHsgQlVJTFRJTl9FREdFX1NUWUxFX0FUVFJJQlVURVMsIFN0eWxlQXR0cmlidXRlIH0gZnJvbSBcIi4vc3R5bGUtY29uZmlnXCJcclxuaW1wb3J0IFNldHRpbmdzTWFuYWdlciBmcm9tIFwic3JjL3NldHRpbmdzXCJcclxuaW1wb3J0IEVkZ2VQYXRoZmluZGluZ01ldGhvZCBmcm9tIFwiLi9lZGdlLXBhdGhmaW5kaW5nLW1ldGhvZHMvZWRnZS1wYXRoZmluZGluZy1tZXRob2RcIlxyXG5pbXBvcnQgRWRnZVBhdGhmaW5kaW5nRGlyZWN0IGZyb20gXCIuL2VkZ2UtcGF0aGZpbmRpbmctbWV0aG9kcy9wYXRoZmluZGluZy1kaXJlY3RcIlxyXG5pbXBvcnQgRWRnZVBhdGhmaW5kaW5nU3F1YXJlIGZyb20gXCIuL2VkZ2UtcGF0aGZpbmRpbmctbWV0aG9kcy9wYXRoZmluZGluZy1zcXVhcmVcIlxyXG5pbXBvcnQgRWRnZVBhdGhmaW5kaW5nQVN0YXIgZnJvbSBcIi4vZWRnZS1wYXRoZmluZGluZy1tZXRob2RzL3BhdGhmaW5kaW5nLWEtc3RhclwiXHJcblxyXG5jb25zdCBFREdFX1BBVEhGSU5ESU5HX01FVEhPRFM6IHsgW2tleTogc3RyaW5nXTogbmV3KCkgPT4gRWRnZVBhdGhmaW5kaW5nTWV0aG9kIH0gPSB7XHJcbiAgJ2RpcmVjdCc6IEVkZ2VQYXRoZmluZGluZ0RpcmVjdCxcclxuICAnc3F1YXJlJzogRWRnZVBhdGhmaW5kaW5nU3F1YXJlLFxyXG4gICdhLXN0YXInOiBFZGdlUGF0aGZpbmRpbmdBU3RhclxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFZGdlU3R5bGVzRXh0ZW5zaW9uIGV4dGVuZHMgQ2FudmFzRXh0ZW5zaW9uIHtcclxuICBhbGxFZGdlU3R5bGVBdHRyaWJ1dGVzOiBTdHlsZUF0dHJpYnV0ZVtdXHJcblxyXG4gIGlzRW5hYmxlZCgpIHsgcmV0dXJuICdlZGdlc1N0eWxpbmdGZWF0dXJlRW5hYmxlZCcgYXMgY29uc3QgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5hbGxFZGdlU3R5bGVBdHRyaWJ1dGVzID0gWy4uLkJVSUxUSU5fRURHRV9TVFlMRV9BVFRSSUJVVEVTLCAuLi50aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdjdXN0b21FZGdlU3R5bGVBdHRyaWJ1dGVzJyldXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIFNldHRpbmdzTWFuYWdlci5TRVRUSU5HU19DSEFOR0VEX0VWRU5ULFxyXG4gICAgICAoKSA9PiB0aGlzLmFsbEVkZ2VTdHlsZUF0dHJpYnV0ZXMgPSBbLi4uQlVJTFRJTl9FREdFX1NUWUxFX0FUVFJJQlVURVMsIC4uLnRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2N1c3RvbUVkZ2VTdHlsZUF0dHJpYnV0ZXMnKV1cclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Qb3B1cE1lbnVDcmVhdGVkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMub25Qb3B1cE1lbnVDcmVhdGVkKGNhbnZhcylcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5FZGdlQ2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBlZGdlOiBDYW52YXNFZGdlKSA9PiB0aGlzLm9uRWRnZUNoYW5nZWQoY2FudmFzLCBlZGdlKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkVkZ2VDZW50ZXJSZXF1ZXN0ZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgZWRnZTogQ2FudmFzRWRnZSwgY2VudGVyOiBQb3NpdGlvbikgPT4gdGhpcy5vbkVkZ2VDZW50ZXJSZXF1ZXN0ZWQoY2FudmFzLCBlZGdlLCBjZW50ZXIpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuTm9kZUFkZGVkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIF9ub2RlOiBDYW52YXNOb2RlKSA9PiB0aGlzLnVwZGF0ZUFsbEVkZ2VzKGNhbnZhcylcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Ob2RlTW92ZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgX25vZGU6IENhbnZhc05vZGUpID0+IHRoaXMudXBkYXRlQWxsRWRnZXMoY2FudmFzKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50Lk5vZGVSZW1vdmVkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIF9ub2RlOiBDYW52YXNOb2RlKSA9PiB0aGlzLnVwZGF0ZUFsbEVkZ2VzKGNhbnZhcylcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5EcmFnZ2luZ1N0YXRlQ2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBpc0RyYWdnaW5nOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgaWYgKGlzRHJhZ2dpbmcpIHJldHVyblxyXG4gICAgICAgIHRoaXMudXBkYXRlQWxsRWRnZXMoY2FudmFzKVxyXG4gICAgICB9XHJcbiAgICApKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvblBvcHVwTWVudUNyZWF0ZWQoY2FudmFzOiBDYW52YXMpOiB2b2lkIHtcclxuICAgIGNvbnN0IHNlbGVjdGVkRWRnZXMgPSBbLi4uY2FudmFzLnNlbGVjdGlvbl0uZmlsdGVyKChpdGVtOiBhbnkpID0+IGl0ZW0ucGF0aCAhPT0gdW5kZWZpbmVkKSBhcyBDYW52YXNFZGdlW11cclxuICAgIGlmIChjYW52YXMucmVhZG9ubHkgfHwgc2VsZWN0ZWRFZGdlcy5sZW5ndGggPT09IDAgfHwgc2VsZWN0ZWRFZGdlcy5sZW5ndGggIT09IGNhbnZhcy5zZWxlY3Rpb24uc2l6ZSlcclxuICAgICAgcmV0dXJuXHJcblxyXG4gICAgQ2FudmFzSGVscGVyLmNyZWF0ZVN0eWxlRHJvcGRvd25NZW51KFxyXG4gICAgICBjYW52YXMsIHRoaXMuYWxsRWRnZVN0eWxlQXR0cmlidXRlcyxcclxuICAgICAgc2VsZWN0ZWRFZGdlc1swXS5nZXREYXRhKCkuc3R5bGVBdHRyaWJ1dGVzID8/IHt9LFxyXG4gICAgICAoYXR0cmlidXRlLCB2YWx1ZSkgPT4gdGhpcy5zZXRTdHlsZUF0dHJpYnV0ZUZvclNlbGVjdGlvbihjYW52YXMsIGF0dHJpYnV0ZSwgdmFsdWUpXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldFN0eWxlQXR0cmlidXRlRm9yU2VsZWN0aW9uKGNhbnZhczogQ2FudmFzLCBhdHRyaWJ1dGU6IFN0eWxlQXR0cmlidXRlLCB2YWx1ZTogc3RyaW5nIHwgbnVsbCk6IHZvaWQge1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRFZGdlcyA9IFsuLi5jYW52YXMuc2VsZWN0aW9uXS5maWx0ZXIoKGl0ZW06IGFueSkgPT4gaXRlbS5wYXRoICE9PSB1bmRlZmluZWQpIGFzIENhbnZhc0VkZ2VbXVxyXG5cclxuICAgIGZvciAoY29uc3QgZWRnZSBvZiBzZWxlY3RlZEVkZ2VzKSB7XHJcbiAgICAgIGNvbnN0IGVkZ2VEYXRhID0gZWRnZS5nZXREYXRhKClcclxuXHJcbiAgICAgIGVkZ2Uuc2V0RGF0YSh7XHJcbiAgICAgICAgLi4uZWRnZURhdGEsXHJcbiAgICAgICAgc3R5bGVBdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAuLi5lZGdlRGF0YS5zdHlsZUF0dHJpYnV0ZXMsXHJcbiAgICAgICAgICBbYXR0cmlidXRlLmRhdGFzZXRLZXldOiB2YWx1ZVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIFxyXG4gICAgY2FudmFzLnB1c2hIaXN0b3J5KGNhbnZhcy5nZXREYXRhKCkpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZUFsbEVkZ2VzKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBmb3IgKGNvbnN0IGVkZ2Ugb2YgY2FudmFzLmVkZ2VzLnZhbHVlcygpKSB7XHJcbiAgICAgIHRoaXMub25FZGdlQ2hhbmdlZChjYW52YXMsIGVkZ2UpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uRWRnZUNoYW5nZWQoY2FudmFzOiBDYW52YXMsIGVkZ2U6IENhbnZhc0VkZ2UpIHtcclxuICAgIGNvbnN0IGVkZ2VEYXRhID0gZWRnZS5nZXREYXRhKClcclxuICAgIFxyXG4gICAgLy8gUmVzZXQgcGF0aCB0byBkZWZhdWx0XHJcbiAgICBpZiAoIWVkZ2UuYmV6aWVyKSByZXR1cm5cclxuICAgIGVkZ2UuY2VudGVyID0gdW5kZWZpbmVkXHJcbiAgICBlZGdlLnVwZGF0ZVBhdGgoKVxyXG5cclxuICAgIC8vIFNldCBwYXRoZmluZGluZyBtZXRob2RcclxuICAgIGNvbnN0IHBhdGhmaW5kaW5nTWV0aG9kID0gZWRnZURhdGEuc3R5bGVBdHRyaWJ1dGVzPy5wYXRoZmluZGluZ01ldGhvZFxyXG4gICAgaWYgKHBhdGhmaW5kaW5nTWV0aG9kKSB7XHJcbiAgICAgIGNvbnN0IGZyb21CQm94U2lkZVBvcyA9IEJCb3hIZWxwZXIuZ2V0Q2VudGVyT2ZCQm94U2lkZShlZGdlLmZyb20ubm9kZS5nZXRCQm94KCksIGVkZ2UuZnJvbS5zaWRlKVxyXG4gICAgICBjb25zdCBmcm9tUG9zID0gZWRnZS5mcm9tLmVuZCA9PT0gJ25vbmUnID8gXHJcbiAgICAgICAgZnJvbUJCb3hTaWRlUG9zIDpcclxuICAgICAgICBlZGdlLmJlemllci5mcm9tXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB0b0JCb3hTaWRlUG9zID0gQkJveEhlbHBlci5nZXRDZW50ZXJPZkJCb3hTaWRlKGVkZ2UudG8ubm9kZS5nZXRCQm94KCksIGVkZ2UudG8uc2lkZSlcclxuICAgICAgY29uc3QgdG9Qb3MgPSBlZGdlLnRvLmVuZCA9PT0gJ25vbmUnID8gXHJcbiAgICAgICAgdG9CQm94U2lkZVBvcyA6XHJcbiAgICAgICAgZWRnZS5iZXppZXIudG9cclxuXHJcbiAgICAgIGNvbnN0IHBhdGggPSBuZXcgRURHRV9QQVRIRklORElOR19NRVRIT0RTW3BhdGhmaW5kaW5nTWV0aG9kXSgpLmdldFBhdGgodGhpcy5wbHVnaW4sIGNhbnZhcywgZnJvbVBvcywgZnJvbUJCb3hTaWRlUG9zLCBlZGdlLmZyb20uc2lkZSwgdG9Qb3MsIHRvQkJveFNpZGVQb3MsIGVkZ2UudG8uc2lkZSwgY2FudmFzLmlzRHJhZ2dpbmcpXHJcbiAgICAgIGlmICghcGF0aCkgcmV0dXJuXHJcblxyXG4gICAgICBlZGdlLmNlbnRlciA9IHBhdGguY2VudGVyXHJcbiAgICAgIGVkZ2UucGF0aC5pbnRlcmFjdGlvbi5zZXRBdHRyKFwiZFwiLCBwYXRoPy5zdmdQYXRoKVxyXG4gICAgICBlZGdlLnBhdGguZGlzcGxheS5zZXRBdHRyKFwiZFwiLCBwYXRoPy5zdmdQYXRoKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZSBsYWJlbCBwb3NpdGlvblxyXG4gICAgZWRnZS5sYWJlbEVsZW1lbnQ/LnJlbmRlcigpXHJcblxyXG4gICAgLy8gU2V0IGFycm93IHBvbHlnb25cclxuICAgIGNvbnN0IGFycm93UG9seWdvblBvaW50cyA9IHRoaXMuZ2V0QXJyb3dQb2x5Z29uUG9pbnRzKGVkZ2VEYXRhLnN0eWxlQXR0cmlidXRlcz8uYXJyb3cpXHJcbiAgICBpZiAoZWRnZS5mcm9tTGluZUVuZD8uZWwpIGVkZ2UuZnJvbUxpbmVFbmQuZWwucXVlcnlTZWxlY3RvcigncG9seWdvbicpPy5zZXRBdHRyaWJ1dGUoJ3BvaW50cycsIGFycm93UG9seWdvblBvaW50cylcclxuICAgIGlmIChlZGdlLnRvTGluZUVuZD8uZWwpIGVkZ2UudG9MaW5lRW5kLmVsLnF1ZXJ5U2VsZWN0b3IoJ3BvbHlnb24nKT8uc2V0QXR0cmlidXRlKCdwb2ludHMnLCBhcnJvd1BvbHlnb25Qb2ludHMpXHJcblxyXG4gICAgLy8gUm90YXRlIGFycm93cyBhY2NvcmRpbmdseVxyXG4gICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2VkZ2VTdHlsZURpcmVjdFJvdGF0ZUFycm93JykpIHtcclxuICAgICAgdGhpcy5yb3RhdGVBcnJvd3MoZWRnZSwgcGF0aGZpbmRpbmdNZXRob2QpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uRWRnZUNlbnRlclJlcXVlc3RlZChfY2FudmFzOiBDYW52YXMsIGVkZ2U6IENhbnZhc0VkZ2UsIGNlbnRlcjogUG9zaXRpb24pIHtcclxuICAgIGNlbnRlci54ID0gZWRnZS5jZW50ZXI/LnggPz8gY2VudGVyLnhcclxuICAgIGNlbnRlci55ID0gZWRnZS5jZW50ZXI/LnkgPz8gY2VudGVyLnlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0QXJyb3dQb2x5Z29uUG9pbnRzKGFycm93U3R5bGU/OiBzdHJpbmcgfCBudWxsKTogc3RyaW5nIHtcclxuICAgIGlmIChhcnJvd1N0eWxlID09PSAnaGFsdmVkLXRyaWFuZ2xlJylcclxuICAgICAgcmV0dXJuIGAtMiwwIDcuNSwxMiAtMiwxMmBcclxuICAgIGVsc2UgaWYgKGFycm93U3R5bGUgPT09ICd0aGluLXRyaWFuZ2xlJylcclxuICAgICAgcmV0dXJuIGAwLDAgNywxMCAwLDAgMCwxMCAwLDAgLTcsMTBgXHJcbiAgICBlbHNlIGlmIChhcnJvd1N0eWxlID09PSAnZGlhbW9uZCcgfHwgYXJyb3dTdHlsZSA9PT0gJ2RpYW1vbmQtb3V0bGluZScpXHJcbiAgICAgIHJldHVybiBgMCwwIDUsMTAgMCwyMCAtNSwxMGBcclxuICAgIGVsc2UgaWYgKGFycm93U3R5bGUgPT09ICdjaXJjbGUnIHx8IGFycm93U3R5bGUgPT09ICdjaXJjbGUtb3V0bGluZScpXHJcbiAgICAgIHJldHVybiBgMCAwLCA0Ljk1IDEuOCwgNy41IDYuNDUsIDYuNiAxMS43LCAyLjcgMTUsIC0yLjcgMTUsIC02LjYgMTEuNywgLTcuNSA2LjQ1LCAtNC45NSAxLjhgXHJcbiAgICBlbHNlIC8vIERlZmF1bHQgdHJpYW5nbGVcclxuICAgICAgcmV0dXJuIGAwLDAgNi41LDEwLjQgLTYuNSwxMC40YFxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByb3RhdGVBcnJvd3MoZWRnZTogQ2FudmFzRWRnZSwgcGF0aFJvdXRlVHlwZT86IHN0cmluZyB8IG51bGwpIHtcclxuICAgIC8vIFJlc2V0IGFycm93IHJvdGF0aW9uXHJcbiAgICBpZiAocGF0aFJvdXRlVHlwZSAhPT0gJ2RpcmVjdCcpIHtcclxuICAgICAgaWYgKGVkZ2UuZnJvbUxpbmVFbmQ/LmVsKSBlZGdlLmZyb21MaW5lRW5kLmVsLnN0eWxlLnRyYW5zbGF0ZSA9IFwiXCJcclxuICAgICAgaWYgKGVkZ2UudG9MaW5lRW5kPy5lbCkgZWRnZS50b0xpbmVFbmQuZWwuc3R5bGUudHJhbnNsYXRlID0gXCJcIlxyXG5cclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IHNldEFycm93Um90YXRpb24gPSAoZWxlbWVudDogSFRNTEVsZW1lbnQsIHNpZGU6IFNpZGUsIHJvdGF0aW9uOiBudW1iZXIpID0+IHtcclxuICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybVxyXG4gICAgICAgIC5yZXBsYWNlKC9yb3RhdGVcXChbLVxcZF0rKGRlZ3xyYWQpXFwpL2csIGByb3RhdGUoJHtyb3RhdGlvbn1yYWQpYClcclxuXHJcbiAgICAgIGNvbnN0IG9mZnNldCA9IEJCb3hIZWxwZXIuZ2V0U2lkZVZlY3RvcihzaWRlKVxyXG4gICAgICBlbGVtZW50LnN0eWxlLnRyYW5zbGF0ZSA9IGAke29mZnNldC54ICogN31weCAke29mZnNldC55ICogLTd9cHhgXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZWRnZVJvdGF0aW9uID0gTWF0aC5hdGFuMihlZGdlLmJlemllci50by55IC0gZWRnZS5iZXppZXIuZnJvbS55LCBlZGdlLmJlemllci50by54IC0gZWRnZS5iZXppZXIuZnJvbS54KSAtIChNYXRoLlBJIC8gMilcclxuXHJcbiAgICBpZiAoZWRnZS5mcm9tTGluZUVuZD8uZWwpIHNldEFycm93Um90YXRpb24oZWRnZS5mcm9tTGluZUVuZC5lbCwgZWRnZS5mcm9tLnNpZGUsIGVkZ2VSb3RhdGlvbilcclxuICAgIGlmIChlZGdlLnRvTGluZUVuZD8uZWwpIHNldEFycm93Um90YXRpb24oZWRnZS50b0xpbmVFbmQuZWwsIGVkZ2UudG8uc2lkZSwgZWRnZVJvdGF0aW9uIC0gTWF0aC5QSSlcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgQ2FudmFzLCBDYW52YXNOb2RlLCBDYW52YXNOb2RlRGF0YSB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcbmltcG9ydCB7IENhbnZhc0V2ZW50IH0gZnJvbSBcInNyYy9jb3JlL2V2ZW50c1wiXHJcbmltcG9ydCBTZXR0aW5nc01hbmFnZXIgZnJvbSBcInNyYy9zZXR0aW5nc1wiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uLy4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXhwb3NlZE5vZGVEYXRhKHNldHRpbmdzOiBTZXR0aW5nc01hbmFnZXIpOiAoa2V5b2YgQ2FudmFzTm9kZURhdGEpW10ge1xyXG4gIGNvbnN0IGV4cG9zZWREYXRhOiAoa2V5b2YgQ2FudmFzTm9kZURhdGEpW10gPSBbXVxyXG5cclxuICBpZiAoc2V0dGluZ3MuZ2V0U2V0dGluZygnbm9kZVN0eWxpbmdGZWF0dXJlRW5hYmxlZCcpKSBleHBvc2VkRGF0YS5wdXNoKCdzdHlsZUF0dHJpYnV0ZXMnKVxyXG4gIGlmIChzZXR0aW5ncy5nZXRTZXR0aW5nKCdjb2xsYXBzaWJsZUdyb3Vwc0ZlYXR1cmVFbmFibGVkJykpIGV4cG9zZWREYXRhLnB1c2goJ2lzQ29sbGFwc2VkJylcclxuICBpZiAoc2V0dGluZ3MuZ2V0U2V0dGluZygncHJlc2VudGF0aW9uRmVhdHVyZUVuYWJsZWQnKSkgZXhwb3NlZERhdGEucHVzaCgnaXNTdGFydE5vZGUnKVxyXG4gIGlmIChzZXR0aW5ncy5nZXRTZXR0aW5nKCdwb3J0YWxzRmVhdHVyZUVuYWJsZWQnKSkgZXhwb3NlZERhdGEucHVzaCgncG9ydGFsVG9GaWxlJywgJ3BvcnRhbElkJylcclxuXHJcbiAgcmV0dXJuIGV4cG9zZWREYXRhXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vZGVFeHBvc2VyRXh0ZW5zaW9uIGV4dGVuZHMgQ2FudmFzRXh0ZW5zaW9uIHtcclxuICBpc0VuYWJsZWQoKSB7IHJldHVybiB0cnVlIH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuTm9kZUNoYW5nZWQsXHJcbiAgICAgIChfY2FudmFzOiBDYW52YXMsIG5vZGU6IENhbnZhc05vZGUpID0+IHtcclxuICAgICAgICBjb25zdCBub2RlRGF0YSA9IG5vZGU/LmdldERhdGEoKVxyXG4gICAgICAgIGlmICghbm9kZURhdGEpIHJldHVyblxyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGV4cG9zZWREYXRhS2V5IG9mIGdldEV4cG9zZWROb2RlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncykpIHtcclxuICAgICAgICAgIGNvbnN0IGRhdGFzZXRQYWlycyA9IG5vZGVEYXRhW2V4cG9zZWREYXRhS2V5XSBpbnN0YW5jZW9mIE9iamVjdFxyXG4gICAgICAgICAgICA/IE9iamVjdC5lbnRyaWVzKG5vZGVEYXRhW2V4cG9zZWREYXRhS2V5XSlcclxuICAgICAgICAgICAgOiBbW2V4cG9zZWREYXRhS2V5LCBub2RlRGF0YVtleHBvc2VkRGF0YUtleV1dXVxyXG5cclxuICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGRhdGFzZXRQYWlycykge1xyXG4gICAgICAgICAgICBpZiAoIXZhbHVlKSBkZWxldGUgbm9kZS5ub2RlRWwuZGF0YXNldFtrZXldXHJcbiAgICAgICAgICAgIGVsc2Ugbm9kZS5ub2RlRWwuZGF0YXNldFtrZXldID0gdmFsdWVcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICkpXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IENhbnZhcywgQ2FudmFzTm9kZSB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcbmltcG9ydCB7IGdldEV4cG9zZWROb2RlRGF0YSB9IGZyb20gXCIuL25vZGUtZXhwb3NlclwiXHJcbmltcG9ydCB7IENhbnZhc0V2ZW50IH0gZnJvbSBcInNyYy9jb3JlL2V2ZW50c1wiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uLy4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcblxyXG5leHBvcnQgY29uc3QgVEFSR0VUX05PREVfREFUQVNFVF9QUkVGSVggPSBcInRhcmdldFwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb2RlSW50ZXJhY3Rpb25FeHBvc2VyRXh0ZW5zaW9uIGV4dGVuZHMgQ2FudmFzRXh0ZW5zaW9uIHtcclxuICBpc0VuYWJsZWQoKSB7IHJldHVybiB0cnVlIH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuTm9kZUludGVyYWN0aW9uLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIG5vZGU6IENhbnZhc05vZGUpID0+IHtcclxuICAgICAgICBjb25zdCBub2RlRGF0YSA9IG5vZGU/LmdldERhdGEoKVxyXG4gICAgICAgIGlmICghbm9kZURhdGEpIHJldHVyblxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGludGVyYWN0aW9uRWwgPSBjYW52YXMubm9kZUludGVyYWN0aW9uTGF5ZXIuaW50ZXJhY3Rpb25FbFxyXG4gICAgICAgIGlmICghaW50ZXJhY3Rpb25FbCkgcmV0dXJuXHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZXhwb3NlZERhdGFLZXkgb2YgZ2V0RXhwb3NlZE5vZGVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKSkge1xyXG4gICAgICAgICAgY29uc3QgZGF0YXNldFBhaXJzID0gbm9kZURhdGFbZXhwb3NlZERhdGFLZXldIGluc3RhbmNlb2YgT2JqZWN0XHJcbiAgICAgICAgICAgID8gT2JqZWN0LmVudHJpZXMobm9kZURhdGFbZXhwb3NlZERhdGFLZXldKVxyXG4gICAgICAgICAgICA6IFtbZXhwb3NlZERhdGFLZXksIG5vZGVEYXRhW2V4cG9zZWREYXRhS2V5XV1dXHJcblxyXG4gICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgZGF0YXNldFBhaXJzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vZGlmaWVkS2V5ID0gVEFSR0VUX05PREVfREFUQVNFVF9QUkVGSVggKyBrZXkudG9TdHJpbmcoKS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGtleS50b1N0cmluZygpLnNsaWNlKDEpXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIXZhbHVlKSBkZWxldGUgaW50ZXJhY3Rpb25FbC5kYXRhc2V0W21vZGlmaWVkS2V5XVxyXG4gICAgICAgICAgICBlbHNlIGludGVyYWN0aW9uRWwuZGF0YXNldFttb2RpZmllZEtleV0gPSB2YWx1ZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgKSlcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgQ2FudmFzLCBDYW52YXNFZGdlLCBDYW52YXNFZGdlRGF0YSB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcbmltcG9ydCB7IENhbnZhc0V2ZW50IH0gZnJvbSBcInNyYy9jb3JlL2V2ZW50c1wiXHJcbmltcG9ydCBTZXR0aW5nc01hbmFnZXIgZnJvbSBcInNyYy9zZXR0aW5nc1wiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uLy4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXhwb3NlZEVkZ2VEYXRhKHNldHRpbmdzOiBTZXR0aW5nc01hbmFnZXIpOiAoa2V5b2YgQ2FudmFzRWRnZURhdGEpW10ge1xyXG4gIGNvbnN0IGV4cG9zZWREYXRhOiAoa2V5b2YgQ2FudmFzRWRnZURhdGEpW10gPSBbXVxyXG5cclxuICBpZiAoc2V0dGluZ3MuZ2V0U2V0dGluZygnZWRnZXNTdHlsaW5nRmVhdHVyZUVuYWJsZWQnKSkgZXhwb3NlZERhdGEucHVzaCgnc3R5bGVBdHRyaWJ1dGVzJylcclxuXHJcbiAgcmV0dXJuIGV4cG9zZWREYXRhXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVkZ2VFeHBvc2VyRXh0ZW5zaW9uIGV4dGVuZHMgQ2FudmFzRXh0ZW5zaW9uIHtcclxuICBpc0VuYWJsZWQoKSB7IHJldHVybiB0cnVlIH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuRWRnZUNoYW5nZWQsXHJcbiAgICAgIChfY2FudmFzOiBDYW52YXMsIGVkZ2U6IENhbnZhc0VkZ2UpID0+IHtcclxuICAgICAgICBjb25zdCBlZGdlRGF0YSA9IGVkZ2U/LmdldERhdGEoKVxyXG4gICAgICAgIGlmICghZWRnZURhdGEpIHJldHVyblxyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGV4cG9zZWREYXRhS2V5IG9mIGdldEV4cG9zZWRFZGdlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncykpIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0YXNldFBhaXJzID0gZWRnZURhdGFbZXhwb3NlZERhdGFLZXldIGluc3RhbmNlb2YgT2JqZWN0XHJcbiAgICAgICAgICAgICAgPyBPYmplY3QuZW50cmllcyhlZGdlRGF0YVtleHBvc2VkRGF0YUtleV0pXHJcbiAgICAgICAgICAgICAgOiBbW2V4cG9zZWREYXRhS2V5LCBlZGdlRGF0YVtleHBvc2VkRGF0YUtleV1dXVxyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgZGF0YXNldFBhaXJzKSB7XHJcbiAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIGVkZ2UucGF0aC5kaXNwbGF5LmRhdGFzZXRba2V5XVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlZGdlLmZyb21MaW5lRW5kPy5lbCkgZGVsZXRlIGVkZ2UuZnJvbUxpbmVFbmQuZWwuZGF0YXNldFtrZXldXHJcbiAgICAgICAgICAgICAgICBpZiAoZWRnZS50b0xpbmVFbmQ/LmVsKSBkZWxldGUgZWRnZS50b0xpbmVFbmQuZWwuZGF0YXNldFtrZXldXHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVkZ2UucGF0aC5kaXNwbGF5LmRhdGFzZXRba2V5XSA9IHZhbHVlXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGVkZ2UuZnJvbUxpbmVFbmQ/LmVsKSBlZGdlLmZyb21MaW5lRW5kLmVsLmRhdGFzZXRba2V5XSA9IHZhbHVlXHJcbiAgICAgICAgICAgICAgICBpZiAoZWRnZS50b0xpbmVFbmQ/LmVsKSBlZGdlLnRvTGluZUVuZC5lbC5kYXRhc2V0W2tleV0gPSB2YWx1ZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgKSlcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgQ2FudmFzIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwic3JjL2NvcmUvZXZlbnRzXCJcclxuaW1wb3J0IFNldHRpbmdzTWFuYWdlciwgeyBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzIH0gZnJvbSBcInNyYy9zZXR0aW5nc1wiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uLy4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcblxyXG5jb25zdCBFWFBPU0VEX1NFVFRJTkdTOiAoa2V5b2YgQWR2YW5jZWRDYW52YXNQbHVnaW5TZXR0aW5ncylbXSA9IFtcclxuICAncGVyZm9ybWFuY2VPcHRpbWl6YXRpb25FbmFibGVkJyxcclxuICAnY29sbGFwc2libGVHcm91cHNGZWF0dXJlRW5hYmxlZCcsXHJcbiAgJ2NvbGxhcHNlZEdyb3VwUHJldmlld09uRHJhZydcclxuXVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FudmFzV3JhcHBlckV4cG9zZXJFeHRlbnNpb24gZXh0ZW5kcyBDYW52YXNFeHRlbnNpb24ge1xyXG4gIGlzRW5hYmxlZCgpIHsgcmV0dXJuIHRydWUgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBTZXR0aW5nc01hbmFnZXIuU0VUVElOR1NfQ0hBTkdFRF9FVkVOVCxcclxuICAgICAgKCkgPT4gdGhpcy51cGRhdGVFeHBvc2VkU2V0dGluZ3ModGhpcy5wbHVnaW4uZ2V0Q3VycmVudENhbnZhcygpKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkNhbnZhc0NoYW5nZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy51cGRhdGVFeHBvc2VkU2V0dGluZ3MoY2FudmFzKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkRyYWdnaW5nU3RhdGVDaGFuZ2VkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIGRyYWdnaW5nOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgaWYgKGRyYWdnaW5nKSBjYW52YXMud3JhcHBlckVsLmRhdGFzZXQuaXNEcmFnZ2luZyA9ICd0cnVlJ1xyXG4gICAgICAgIGVsc2UgZGVsZXRlIGNhbnZhcy53cmFwcGVyRWwuZGF0YXNldC5pc0RyYWdnaW5nXHJcbiAgICAgIH1cclxuICAgICkpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZUV4cG9zZWRTZXR0aW5ncyhjYW52YXM6IENhbnZhcyB8IG51bGwpIHtcclxuICAgIGlmICghY2FudmFzKSByZXR1cm5cclxuXHJcbiAgICBmb3IgKGNvbnN0IHNldHRpbmcgb2YgRVhQT1NFRF9TRVRUSU5HUykge1xyXG4gICAgICBjYW52YXMud3JhcHBlckVsLmRhdGFzZXRbc2V0dGluZ10gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKHNldHRpbmcpLnRvU3RyaW5nKClcclxuICAgIH1cclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgQ2FudmFzIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwic3JjL2NvcmUvZXZlbnRzXCJcclxuaW1wb3J0IEFkdmFuY2VkQ2FudmFzUGx1Z2luIGZyb20gXCJzcmMvbWFpblwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaWdyYXRpb25IZWxwZXIge1xyXG4gIHByaXZhdGUgcGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpblxyXG5cclxuICBjb25zdHJ1Y3RvcihwbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luKSB7XHJcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpblxyXG4gIH1cclxuXHJcbiAgYXN5bmMgbWlncmF0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRoaXMubWlncmF0ZU5vZGVBbmRFZGdlU3R5bGVzKClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgbWlncmF0ZU5vZGVBbmRFZGdlU3R5bGVzKCk6IHZvaWQge1xyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5DYW52YXNDaGFuZ2VkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMpID0+IHtcclxuICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgY2FudmFzLm5vZGVzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgICBjb25zdCBub2RlRGF0YSA9IG5vZGUuZ2V0RGF0YSgpXHJcblxyXG4gICAgICAgICAgY29uc3QgbmV3U3R5bGVBdHRyaWJ1dGVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB8IG51bGwgfSA9IHt9XHJcblxyXG4gICAgICAgICAgaWYgKG5vZGVEYXRhLmlzU3RpY2tlcikgbmV3U3R5bGVBdHRyaWJ1dGVzWydib3JkZXInXSA9ICdpbnZpc2libGUnXHJcbiAgICAgICAgICBpZiAobm9kZURhdGEuYm9yZGVyU3R5bGUpIG5ld1N0eWxlQXR0cmlidXRlc1snYm9yZGVyJ10gPSBub2RlRGF0YS5ib3JkZXJTdHlsZVxyXG4gICAgICAgICAgaWYgKG5vZGVEYXRhLnNoYXBlKSB7XHJcbiAgICAgICAgICAgIG5ld1N0eWxlQXR0cmlidXRlcy50ZXh0QWxpZ24gPSAnY2VudGVyJ1xyXG4gICAgICAgICAgICBuZXdTdHlsZUF0dHJpYnV0ZXMuc2hhcGUgPSBub2RlRGF0YS5zaGFwZVxyXG5cclxuICAgICAgICAgICAgaWYgKG5ld1N0eWxlQXR0cmlidXRlcz8uc2hhcGUgPT09ICdjZW50ZXJlZC1yZWN0YW5nbGUnKSBkZWxldGUgbmV3U3R5bGVBdHRyaWJ1dGVzLnNoYXBlXHJcbiAgICAgICAgICAgIGlmIChuZXdTdHlsZUF0dHJpYnV0ZXM/LnNoYXBlID09PSAnb3ZhbCcpIG5ld1N0eWxlQXR0cmlidXRlcy5zaGFwZSA9ICdwaWxsJ1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGRlbGV0ZSBub2RlRGF0YS5pc1N0aWNrZXJcclxuICAgICAgICAgIGRlbGV0ZSBub2RlRGF0YS5ib3JkZXJTdHlsZVxyXG4gICAgICAgICAgZGVsZXRlIG5vZGVEYXRhLnNoYXBlXHJcblxyXG4gICAgICAgICAgbm9kZS5zZXREYXRhKHtcclxuICAgICAgICAgICAgLi4ubm9kZURhdGEsXHJcbiAgICAgICAgICAgIHN0eWxlQXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgIC4uLm5vZGVEYXRhLnN0eWxlQXR0cmlidXRlcyxcclxuICAgICAgICAgICAgICAuLi5uZXdTdHlsZUF0dHJpYnV0ZXNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZWRnZSBvZiBjYW52YXMuZWRnZXMudmFsdWVzKCkpIHtcclxuICAgICAgICAgIGNvbnN0IGVkZ2VEYXRhID0gZWRnZS5nZXREYXRhKClcclxuXHJcbiAgICAgICAgICBjb25zdCBuZXdTdHlsZUF0dHJpYnV0ZXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIHwgbnVsbCB9ID0ge31cclxuXHJcbiAgICAgICAgICBpZiAoZWRnZURhdGEuZWRnZVN0eWxlKSBuZXdTdHlsZUF0dHJpYnV0ZXMuZWRnZSA9IGVkZ2VEYXRhLmVkZ2VTdHlsZVxyXG4gICAgICAgICAgaWYgKGVkZ2VEYXRhLmVkZ2VQYXRoUm91dGUpIG5ld1N0eWxlQXR0cmlidXRlcy5wYXRoZmluZGluZ01ldGhvZCA9IGVkZ2VEYXRhLmVkZ2VQYXRoUm91dGVcclxuXHJcbiAgICAgICAgICBkZWxldGUgZWRnZURhdGEuZWRnZVN0eWxlXHJcbiAgICAgICAgICBkZWxldGUgZWRnZURhdGEuZWRnZVBhdGhSb3V0ZVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgKSlcclxuICB9XHJcbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQWlDOzs7QUNBMUIsU0FBUyxPQUFPLEtBQUssV0FBVztBQUNuQyxRQUFNLFdBQVcsT0FBTyxLQUFLLFNBQVMsRUFBRSxJQUFJLFNBQU8sUUFBUSxLQUFLLEtBQUssVUFBVSxHQUFHLENBQUMsQ0FBQztBQUNwRixTQUFPLFNBQVMsV0FBVyxJQUFJLFNBQVMsQ0FBQyxJQUFJLFdBQVk7QUFBRSxhQUFTLFFBQVEsT0FBSyxFQUFFLENBQUM7QUFBQSxFQUFHO0FBQzNGO0FBQ0EsU0FBUyxRQUFRLEtBQUssUUFBUSxlQUFlO0FBQ3pDLFFBQU0sV0FBVyxJQUFJLE1BQU0sR0FBRyxTQUFTLElBQUksZUFBZSxNQUFNO0FBQ2hFLE1BQUksVUFBVSxjQUFjLFFBQVE7QUFHcEMsTUFBSTtBQUNBLFdBQU8sZUFBZSxTQUFTLFFBQVE7QUFDM0MsU0FBTyxlQUFlLFNBQVMsT0FBTztBQUN0QyxNQUFJLE1BQU0sSUFBSTtBQUVkLFNBQU87QUFDUCxXQUFTLFdBQVcsTUFBTTtBQUV0QixRQUFJLFlBQVksWUFBWSxJQUFJLE1BQU0sTUFBTTtBQUN4QyxhQUFPO0FBQ1gsV0FBTyxRQUFRLE1BQU0sTUFBTSxJQUFJO0FBQUEsRUFDbkM7QUFDQSxXQUFTLFNBQVM7QUFFZCxRQUFJLElBQUksTUFBTSxNQUFNLFNBQVM7QUFDekIsVUFBSTtBQUNBLFlBQUksTUFBTSxJQUFJO0FBQUE7QUFFZCxlQUFPLElBQUksTUFBTTtBQUFBLElBQ3pCO0FBQ0EsUUFBSSxZQUFZO0FBQ1o7QUFFSixjQUFVO0FBQ1YsV0FBTyxlQUFlLFNBQVMsWUFBWSxRQUFRO0FBQUEsRUFDdkQ7QUFDSjs7O0FDaENBLElBQXFCLGNBQXJCLE1BQWlDO0FBQUEsRUFDL0IsT0FBTywyQkFBOEIsUUFBZ0IsV0FBOEIsV0FBZ0Y7QUFDakssV0FBTyxJQUFJLFFBQVEsQ0FBQyxZQUFZO0FBQzlCLFlBQU0sV0FBVyxNQUFNO0FBQ3JCLGNBQU0sU0FBUyxVQUFVO0FBQ3pCLFlBQUksQ0FBQztBQUFRLGlCQUFPO0FBRXBCLGNBQU0sY0FBYyxPQUFPLE9BQU8sWUFBWSxXQUFXLFNBQVM7QUFDbEUsZUFBTyxTQUFTLFdBQVc7QUFFM0IsZUFBTztBQUFBLE1BQ1Q7QUFFQSxZQUFNLFNBQVMsU0FBUztBQUN4QixVQUFJLFFBQVE7QUFDVixnQkFBUSxNQUFNO0FBQ2Q7QUFBQSxNQUNGO0FBRUEsWUFBTSxXQUFXLE9BQU8sSUFBSSxVQUFVLEdBQUcsaUJBQWlCLE1BQU07QUFDOUQsY0FBTUMsVUFBUyxTQUFTO0FBRXhCLFlBQUlBLFNBQVE7QUFDVixpQkFBTyxJQUFJLFVBQVUsT0FBTyxRQUFRO0FBQ3BDLGtCQUFRQSxPQUFNO0FBQUEsUUFDaEI7QUFBQSxNQUNGLENBQUM7QUFFRCxhQUFPLGNBQWMsUUFBUTtBQUFBLElBQy9CLENBQUM7QUFBQSxFQUNIO0FBQUEsRUFFQSxPQUFPLHFCQUF3QixRQUFnQixRQUFXLFdBQTBFO0FBQ2xJLFVBQU0sY0FBYyxPQUFRLE9BQWUsWUFBWSxXQUFXLFNBQVM7QUFDM0UsV0FBTyxTQUFTLFdBQVc7QUFBQSxFQUM3QjtBQUFBLEVBRUEsT0FBTyxvQkFBdUIsUUFBZ0IsUUFBVyxXQUEwRTtBQUNqSSxVQUFNLGNBQWMsT0FBTyxRQUFlLFNBQVM7QUFDbkQsV0FBTyxTQUFTLFdBQVc7QUFBQSxFQUM3QjtBQUNGOzs7QUM1Q0EsSUFBTSxzQkFBc0I7QUFFckIsSUFBTSxjQUFjO0FBQUEsRUFDekIsZUFBZSxHQUFHLG1CQUFtQjtBQUFBLEVBQ3JDLGlCQUFpQjtBQUFBLElBQ2YsUUFBUSxHQUFHLG1CQUFtQjtBQUFBLElBQzlCLE9BQU8sR0FBRyxtQkFBbUI7QUFBQSxFQUMvQjtBQUFBLEVBQ0EsV0FBVyxHQUFHLG1CQUFtQjtBQUFBLEVBQ2pDLGFBQWEsR0FBRyxtQkFBbUI7QUFBQSxFQUNuQyxzQkFBc0IsR0FBRyxtQkFBbUI7QUFBQSxFQUM1QyxhQUFhLEdBQUcsbUJBQW1CO0FBQUEsRUFDbkMsYUFBYSxHQUFHLG1CQUFtQjtBQUFBLEVBQ25DLFdBQVcsR0FBRyxtQkFBbUI7QUFBQSxFQUNqQyxXQUFXLEdBQUcsbUJBQW1CO0FBQUEsRUFDakMsYUFBYSxHQUFHLG1CQUFtQjtBQUFBLEVBQ25DLGFBQWEsR0FBRyxtQkFBbUI7QUFBQSxFQUNuQyxhQUFhLEdBQUcsbUJBQW1CO0FBQUEsRUFDbkMsYUFBYSxHQUFHLG1CQUFtQjtBQUFBLEVBQ25DLG1CQUFtQixHQUFHLG1CQUFtQjtBQUFBLEVBQ3pDLHFCQUFxQixHQUFHLG1CQUFtQjtBQUFBLEVBQzNDLDBCQUEwQixHQUFHLG1CQUFtQjtBQUFBLEVBQ2hELGtCQUFrQixHQUFHLG1CQUFtQjtBQUFBLEVBQ3hDLFlBQVk7QUFBQSxJQUNWLFFBQVEsR0FBRyxtQkFBbUI7QUFBQSxJQUM5QixPQUFPLEdBQUcsbUJBQW1CO0FBQUEsRUFDL0I7QUFBQSxFQUNBLGtCQUFrQixHQUFHLG1CQUFtQjtBQUFBLEVBQ3hDLGlCQUFpQixHQUFHLG1CQUFtQjtBQUFBLEVBQ3ZDLE1BQU0sR0FBRyxtQkFBbUI7QUFBQSxFQUM1QixNQUFNLEdBQUcsbUJBQW1CO0FBQUEsRUFDNUIsaUJBQWlCLEdBQUcsbUJBQW1CO0FBQUEsRUFDdkMsZUFBZSxHQUFHLG1CQUFtQjtBQUFBLEVBQ3JDLFVBQVUsR0FBRyxtQkFBbUI7QUFBQSxFQUNoQyxhQUFhO0FBQUEsSUFDWCxRQUFRLEdBQUcsbUJBQW1CO0FBQUEsSUFDOUIsT0FBTyxHQUFHLG1CQUFtQjtBQUFBLEVBQy9CO0FBQ0Y7OztBQ3JDQSxJQUFNLG9CQUFvQjtBQUMxQixJQUFNLDBCQUEwQjtBQUVoQyxJQUFNLFFBQVE7QUFBQSxFQUNWLE9BQU8sQ0FBQyxTQUFTO0FBQ2IsV0FBTyxPQUFPLElBQUk7QUFDbEIsUUFBSTtBQUNBLGFBQU8sS0FBSyxNQUFNLElBQUk7QUFBQSxJQUMxQixTQUNNO0FBQ0YsYUFBTyxLQUFLLE1BQU0sS0FBSyxRQUFRLG1CQUFtQixJQUFJLEVBQUUsUUFBUSx5QkFBeUIsSUFBSSxDQUFDO0FBQUEsSUFDbEc7QUFBQSxFQUNKO0FBQ0o7QUFFQSxJQUFPLGVBQVE7OztBQ1JmLElBQXFCLGdCQUFyQixNQUFtQztBQUFBLEVBR2pDLFlBQVksUUFBOEI7QUFDeEMsU0FBSyxTQUFTO0FBQ2QsU0FBSyxhQUFhO0FBQUEsRUFDcEI7QUFBQSxFQUVBLE1BQWMsZUFBZTtBQWhCL0I7QUFpQkksVUFBTSxPQUFPO0FBR2IsVUFBTSxjQUNKLHNCQUFLLE9BQU8sSUFBSSxVQUFVLGdCQUFnQixRQUFRLE1BQWxELG1CQUFxRCxZQUFyRCxtQkFBOEQsU0FBOUQsWUFDQSxNQUFNLElBQUksUUFBb0IsQ0FBQyxZQUFZO0FBRXpDLFlBQU0sWUFBWSxPQUFPLEtBQUssT0FBTyxJQUFJLGdCQUFnQixRQUFRLE9BQU8sT0FBTztBQUFBLFFBQzdFLFFBQVEsQ0FBQyxTQUFjLFlBQWEsTUFBVztBQUM3QyxnQkFBTSxTQUFTLEtBQUssS0FBSyxNQUFNLEdBQUcsSUFBSTtBQUV0QyxrQkFBUSxNQUFNO0FBQ2Qsb0JBQVU7QUFFVixpQkFBTztBQUFBLFFBQ1Q7QUFBQSxNQUNGLENBQUM7QUFDRCxXQUFLLE9BQU8sU0FBUyxTQUFTO0FBQUEsSUFDaEMsQ0FBQztBQUlILGdCQUFZLHFCQUFxQixLQUFLLFFBQVEsWUFBWTtBQUFBLE1BQ3hELGFBQWEsQ0FBQyxVQUFlLFlBQWEsT0FBWTtBQXhDNUQsWUFBQUM7QUF5Q1EsY0FBTSxhQUFhLEtBQUssT0FBTyxRQUFRO0FBQ3ZDLG1CQUFXLFlBQVdBLE1BQUEsS0FBSyxPQUFPLGFBQVosT0FBQUEsTUFBd0IsQ0FBQztBQUUvQyxlQUFPLEtBQUssVUFBVSxZQUFZLE1BQU0sQ0FBQztBQUFBLE1BQzNDO0FBQUEsTUFDQSxhQUFhLENBQUMsU0FBYyxTQUFVLFNBQWlCLE1BQVc7QUFDaEUsWUFBSSxZQUFZO0FBQ2hCLFlBQUk7QUFHSixZQUFJO0FBQUUsdUJBQWEsS0FBSyxNQUFNLElBQUk7QUFBQSxRQUFFLFNBQzdCLEdBQUc7QUFFUixlQUFLLE9BQU8sbUJBQW1CLEtBQUssS0FBSyxNQUFNLElBQUk7QUFHbkQsdUJBQWEsYUFBTSxNQUFNLElBQUk7QUFDN0Isc0JBQVksS0FBSyxVQUFVLFlBQVksTUFBTSxDQUFDO0FBQUEsUUFDaEQ7QUFFQSxjQUFNLFNBQVMsS0FBSyxLQUFLLE1BQU0sV0FBVyxHQUFHLElBQUk7QUFFakQsWUFBSTtBQUFFLGVBQUssT0FBTyxXQUFXLFdBQVc7QUFBQSxRQUFTLFNBQzFDLElBQUk7QUFBRSxlQUFLLE9BQU8sV0FBVyxDQUFDO0FBQUEsUUFBRTtBQUV2QyxhQUFLLHNCQUFzQixZQUFZLGVBQWUsS0FBSyxNQUFNO0FBRWpFLGVBQU87QUFBQSxNQUNUO0FBQUEsSUFDRixDQUFDO0FBR0QsZ0JBQVkscUJBQXFCLEtBQUssUUFBUSxXQUFXLFFBQVE7QUFBQSxNQUMvRCxxQkFBcUIsQ0FBQyxTQUFjLFlBQWEsTUFBVztBQUMxRCxhQUFLLHNCQUFzQixZQUFZLGdCQUFnQixRQUFRLElBQUk7QUFDbkUsY0FBTSxTQUFTLEtBQUssS0FBSyxNQUFNLEdBQUcsSUFBSTtBQUN0QyxhQUFLLHNCQUFzQixZQUFZLGdCQUFnQixPQUFPLElBQUk7QUFDbEUsZUFBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBLFdBQVcsQ0FBQyxTQUFjLFNBQVUsTUFBa0I7QUFDcEQsY0FBTSxTQUFTLEtBQUssS0FBSyxNQUFNLElBQUk7QUFDbkMsYUFBSyxzQkFBc0IsWUFBWSxXQUFXLE1BQU0sSUFBSTtBQUM1RCxlQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0EsZUFBZSxDQUFDLFNBQWMsU0FBVSxPQUFtQjtBQUN6RCxjQUFNLGlCQUFpQixFQUFFLE9BQU8sTUFBTTtBQUN0QyxhQUFLLHNCQUFzQixZQUFZLGFBQWEsTUFBTSxPQUFPLGNBQWM7QUFDL0UsWUFBSSxDQUFDLGVBQWU7QUFBTyxlQUFLLEtBQUssTUFBTSxLQUFLO0FBQUEsTUFDbEQ7QUFBQSxNQUNBLGFBQWEsQ0FBQyxTQUFjLFNBQVUsVUFBbUI7QUFDdkQsY0FBTSxTQUFTLEtBQUssS0FBSyxNQUFNLFFBQVE7QUFDdkMsYUFBSyxzQkFBc0IsWUFBWSxzQkFBc0IsTUFBTSxRQUFRO0FBQzNFLGVBQU87QUFBQSxNQUNUO0FBQUEsTUFDQSxvQkFBb0IsQ0FBQyxTQUFjLFNBQVUsTUFBWTtBQUN2RCxjQUFNLFNBQVMsS0FBSyxLQUFLLE1BQU0sSUFBSTtBQUNuQyxhQUFLLHNCQUFzQixZQUFZLDBCQUEwQixNQUFNLE1BQU0sTUFBTTtBQUNuRixlQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0EsaUJBQWlCLENBQUMsU0FBYyxTQUFVLFFBQW9CO0FBQzVELGNBQU0sZUFBZSxJQUFJLElBQUksS0FBSyxTQUFTO0FBQzNDLGNBQU0sU0FBUyxLQUFLLEtBQUssTUFBTSxNQUFNO0FBQ3JDLGFBQUssc0JBQXNCLFlBQVksa0JBQWtCLE1BQU0sY0FBZSxDQUFDQyxZQUF1QixLQUFLLEtBQUssTUFBTUEsT0FBTSxDQUFFO0FBQzlILGVBQU87QUFBQSxNQUNUO0FBQUEsTUFDQSxnQkFBZ0IsQ0FBQyxTQUFjLFlBQWEsTUFBVztBQUNyRCxjQUFNLE9BQU8sS0FBSyxLQUFLLE1BQU0sR0FBRyxJQUFJO0FBQ3BDLGFBQUssc0JBQXNCLFlBQVksYUFBYSxNQUFNLElBQUk7QUFDOUQsZUFBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBLGdCQUFnQixDQUFDLFNBQWMsWUFBYSxNQUFXO0FBQ3JELGNBQU0sT0FBTyxLQUFLLEtBQUssTUFBTSxHQUFHLElBQUk7QUFDcEMsYUFBSyxzQkFBc0IsWUFBWSxhQUFhLE1BQU0sSUFBSTtBQUM5RCxlQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0EsaUJBQWlCLENBQUMsU0FBYyxZQUFhLE1BQVc7QUFDdEQsY0FBTSxRQUFRLEtBQUssS0FBSyxNQUFNLEdBQUcsSUFBSTtBQUNyQyxjQUFNLFFBQVEsQ0FBQyxTQUFxQixLQUFLLHNCQUFzQixZQUFZLGFBQWEsTUFBTSxJQUFJLENBQUM7QUFDbkcsZUFBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBLGlCQUFpQixDQUFDLFNBQWMsWUFBYSxNQUFXO0FBQ3RELGNBQU0sT0FBTyxLQUFLLEtBQUssTUFBTSxHQUFHLElBQUk7QUFDcEMsYUFBSyxzQkFBc0IsWUFBWSxhQUFhLE1BQU0sSUFBSTtBQUM5RCxlQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0EsZ0JBQWdCLENBQUMsU0FBYyxZQUFhLE1BQVc7QUFDckQsY0FBTSxPQUFPLEtBQUssS0FBSyxNQUFNLEdBQUcsSUFBSTtBQUNwQyxhQUFLLHNCQUFzQixZQUFZLGFBQWEsTUFBTSxJQUFJO0FBQzlELGVBQU87QUFBQSxNQUNUO0FBQUEsTUFDQSxTQUFTLENBQUMsU0FBYyxTQUFVLE1BQWtCO0FBQ2xELGFBQUssVUFBVSxJQUFJO0FBQ25CLGVBQU8sS0FBSyxLQUFLLE1BQU0sSUFBSTtBQUFBLE1BQzdCO0FBQUEsTUFDQSxTQUFTLENBQUMsU0FBYyxTQUFVLE1BQWtCO0FBQ2xELGFBQUssVUFBVSxJQUFJO0FBQ25CLFlBQUksQ0FBQyxLQUFLO0FBQWlCLGVBQUssc0JBQXNCLFlBQVksYUFBYSxNQUFNLElBQUk7QUFDekYsZUFBTyxLQUFLLEtBQUssTUFBTSxJQUFJO0FBQUEsTUFDN0I7QUFBQSxNQUNBLFlBQVksQ0FBQyxTQUFjLFNBQVUsTUFBa0I7QUFDckQsY0FBTSxTQUFTLEtBQUssS0FBSyxNQUFNLElBQUk7QUFDbkMsYUFBSyxzQkFBc0IsWUFBWSxhQUFhLE1BQU0sSUFBSTtBQUM5RCxlQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0EsWUFBWSxDQUFDLFNBQWMsU0FBVSxNQUFrQjtBQUNyRCxjQUFNLFNBQVMsS0FBSyxLQUFLLE1BQU0sSUFBSTtBQUNuQyxhQUFLLHNCQUFzQixZQUFZLGFBQWEsTUFBTSxJQUFJO0FBQzlELGVBQU87QUFBQSxNQUNUO0FBQUEsTUFDQSxZQUFZLENBQUMsU0FBYyxTQUFVLE1BQVk7QUFDL0MsYUFBSyxzQkFBc0IsWUFBWSxXQUFXLFFBQVEsTUFBTSxJQUFJO0FBQ3BFLGNBQU0sU0FBUyxLQUFLLEtBQUssTUFBTSxJQUFJO0FBQ25DLGFBQUssc0JBQXNCLFlBQVksV0FBVyxPQUFPLE1BQU0sSUFBSTtBQUNuRSxlQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0EsYUFBYSxDQUFDLFNBQWMsU0FBVSxVQUFtQjtBQUN2RCxjQUFNLFNBQVMsS0FBSyxLQUFLLE1BQU0sUUFBUTtBQUN2QyxhQUFLLHNCQUFzQixZQUFZLGlCQUFpQixNQUFNLFFBQVE7QUFDdEUsZUFBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBLE1BQU0sQ0FBQyxTQUFjLFlBQWEsTUFBVztBQUMzQyxjQUFNLFNBQVMsS0FBSyxLQUFLLE1BQU0sR0FBRyxJQUFJO0FBQ3RDLGFBQUssV0FBVyxLQUFLLFFBQVEsR0FBRyxJQUFJO0FBQ3BDLGFBQUssc0JBQXNCLFlBQVksTUFBTSxJQUFJO0FBQ2pELGVBQU87QUFBQSxNQUNUO0FBQUEsTUFDQSxNQUFNLENBQUMsU0FBYyxZQUFhLE1BQVc7QUFDM0MsY0FBTSxTQUFTLEtBQUssS0FBSyxNQUFNLEdBQUcsSUFBSTtBQUN0QyxhQUFLLFdBQVcsS0FBSyxRQUFRLEdBQUcsSUFBSTtBQUNwQyxhQUFLLHNCQUFzQixZQUFZLE1BQU0sSUFBSTtBQUNqRCxlQUFPO0FBQUEsTUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLE1BT0EsU0FBUyxDQUFDLFNBQWMsWUFBYSxNQUFXO0FBQzlDLGNBQU0sU0FBUyxLQUFLLEtBQUssTUFBTSxHQUFHLElBQUk7QUFDdEMsYUFBSyxzQkFBc0IsWUFBWSxlQUFlLE1BQU0sTUFBTTtBQUNsRSxlQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0EsWUFBWSxDQUFDLFNBQWMsU0FBVSxNQUFrQixhQUF1QixRQUFrQjtBQUM5RixjQUFNLGlCQUFpQixLQUFLLEtBQUssS0FBSztBQUN0QyxjQUFNLFVBQVUsQ0FBQ0MsVUFBcUI7QUFFcEMsY0FBSSxDQUFDLEtBQUssS0FBSyxRQUFRLEtBQUssS0FBSyxLQUFLLFNBQVM7QUFBZ0I7QUFFL0QsZUFBSyxXQUFXQSxPQUFNLE1BQU0sSUFBSTtBQUNoQyxlQUFLLGdDQUFnQyxJQUFJO0FBQUEsUUFDM0M7QUFFQSxZQUFJLENBQUM7QUFBUSxlQUFLLHNCQUFzQixZQUFZLFVBQVUsTUFBTSxNQUFNLE9BQU87QUFDakYsY0FBTSxTQUFTLEtBQUssS0FBSyxNQUFNLE1BQU0sV0FBVztBQUNoRCxhQUFLLGdDQUFnQyxJQUFJO0FBQ3pDLGVBQU87QUFBQSxNQUNUO0FBQUEsTUFDQSxhQUFhLENBQUMsU0FBYyxZQUFhLE1BQVc7QUFDbEQsYUFBSyxzQkFBc0IsWUFBWSxZQUFZLFFBQVEsSUFBSTtBQUMvRCxjQUFNLFNBQVMsS0FBSyxLQUFLLE1BQU0sR0FBRyxJQUFJO0FBQ3RDLGFBQUssc0JBQXNCLFlBQVksWUFBWSxPQUFPLElBQUk7QUFDOUQsZUFBTztBQUFBLE1BQ1Q7QUFBQSxJQUNGLENBQUM7QUFHRCxnQkFBWSxxQkFBcUIsS0FBSyxRQUFRLFdBQVcsT0FBTyxNQUFNO0FBQUEsTUFDcEUsUUFBUSxDQUFDLFNBQWMsWUFBYSxNQUFXO0FBQzdDLGNBQU0sU0FBUyxLQUFLLEtBQUssTUFBTSxHQUFHLElBQUk7QUFDdEMsYUFBSyxzQkFBc0IsWUFBWSxrQkFBa0IsS0FBSyxNQUFNO0FBQ3BFLGFBQUssS0FBSyxJQUFJO0FBQ2QsZUFBTztBQUFBLE1BQ1Q7QUFBQSxJQUNGLENBQUM7QUFHRCxnQkFBWSxxQkFBcUIsS0FBSyxRQUFRLFdBQVcsT0FBTyxzQkFBc0I7QUFBQSxNQUNwRixXQUFXLENBQUMsU0FBYyxTQUFVLE1BQWtCO0FBQ3BELGNBQU0sU0FBUyxLQUFLLEtBQUssTUFBTSxJQUFJO0FBQ25DLGFBQUssc0JBQXNCLFlBQVksaUJBQWlCLEtBQUssUUFBUSxJQUFJO0FBQ3pFLGVBQU87QUFBQSxNQUNUO0FBQUEsSUFDRixDQUFDO0FBR0QsU0FBSyxPQUFPLElBQUksVUFBVSxpQkFBaUIsQ0FBQyxTQUF3QjtBQUNsRSxVQUFJLEtBQUssS0FBSyxZQUFZLE1BQU07QUFBVTtBQUUxQyxZQUFNQyxjQUFhLEtBQUs7QUFFeEIsTUFBQUEsWUFBVyxLQUFLLFlBQVk7QUFBQSxJQUM5QixDQUFDO0FBQUEsRUFDSDtBQUFBLEVBRVEsVUFBVSxNQUFrQjtBQUNsQyxVQUFNLE9BQU87QUFFYixnQkFBWSxvQkFBb0IsS0FBSyxRQUFRLE1BQU07QUFBQSxNQUNqRCxTQUFTLENBQUMsU0FBYyxTQUFVLE1BQXNCLFlBQXNCO0FBQzVFLGNBQU0sU0FBUyxLQUFLLEtBQUssTUFBTSxJQUFJO0FBRW5DLFlBQUksS0FBSyxlQUFlLENBQUMsS0FBSyxTQUFTO0FBQ3JDLGVBQUssVUFBVTtBQUNmLGVBQUssc0JBQXNCLFlBQVksYUFBYSxLQUFLLFFBQVEsSUFBSTtBQUNyRSxpQkFBTyxLQUFLO0FBQUEsUUFDZDtBQUdBLGFBQUssT0FBTyxPQUFPLEtBQUssT0FBTyxRQUFRO0FBQ3ZDLGFBQUssT0FBTyxLQUFLLFlBQVk7QUFHN0IsWUFBSTtBQUFZLGVBQUssT0FBTyxZQUFZLEtBQUssT0FBTyxRQUFRLENBQUM7QUFFN0QsZUFBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBLFNBQVMsQ0FBQyxTQUFjLFlBQWEsTUFBVztBQUM5QyxjQUFNLFNBQVMsS0FBSyxLQUFLLE1BQU0sR0FBRyxJQUFJO0FBQ3RDLGFBQUssc0JBQXNCLFlBQVksbUJBQW1CLEtBQUssUUFBUSxNQUFNLE1BQU07QUFDbkYsZUFBTztBQUFBLE1BQ1Q7QUFBQSxJQUNGLENBQUM7QUFFRCxTQUFLLG9CQUFvQixNQUFNLE1BQU07QUFDbkMsV0FBSyxzQkFBc0IsWUFBWSxXQUFXLEtBQUssUUFBUSxJQUFJO0FBQ25FLFdBQUssc0JBQXNCLFlBQVksYUFBYSxLQUFLLFFBQVEsSUFBSTtBQUFBLElBQ3ZFLENBQUM7QUFBQSxFQUNIO0FBQUEsRUFFUSxVQUFVLE1BQWtCO0FBQ2xDLFVBQU0sT0FBTztBQUViLGdCQUFZLG9CQUFvQixLQUFLLFFBQVEsTUFBTTtBQUFBLE1BQ2pELFNBQVMsQ0FBQyxTQUFjLFNBQVUsTUFBc0IsWUFBc0I7QUFDNUUsY0FBTSxTQUFTLEtBQUssS0FBSyxNQUFNLElBQUk7QUFFbkMsWUFBSSxLQUFLLGVBQWUsQ0FBQyxLQUFLLFNBQVM7QUFDckMsZUFBSyxVQUFVO0FBQ2YsZUFBSyxzQkFBc0IsWUFBWSxhQUFhLEtBQUssUUFBUSxJQUFJO0FBQ3JFLGlCQUFPLEtBQUs7QUFBQSxRQUNkO0FBR0EsYUFBSyxPQUFPLE9BQU8sS0FBSyxPQUFPLFFBQVE7QUFDdkMsYUFBSyxPQUFPLEtBQUssWUFBWTtBQUc3QixZQUFJO0FBQVksZUFBSyxPQUFPLFlBQVksS0FBSyxPQUFPLFFBQVEsQ0FBQztBQUU3RCxlQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0EsUUFBUSxDQUFDLFNBQWMsWUFBYSxNQUFXO0FBQzdDLGNBQU0sU0FBUyxLQUFLLEtBQUssTUFBTSxHQUFHLElBQUk7QUFDdEMsYUFBSyxzQkFBc0IsWUFBWSxhQUFhLEtBQUssUUFBUSxJQUFJO0FBQ3JFLGVBQU87QUFBQSxNQUNUO0FBQUEsTUFDQSxXQUFXLENBQUMsU0FBYyxZQUFhLE1BQVc7QUFDaEQsY0FBTSxTQUFTLEtBQUssS0FBSyxNQUFNLEdBQUcsSUFBSTtBQUN0QyxhQUFLLHNCQUFzQixZQUFZLHFCQUFxQixLQUFLLFFBQVEsTUFBTSxNQUFNO0FBQ3JGLGVBQU87QUFBQSxNQUNUO0FBQUEsSUFDRixDQUFDO0FBRUQsU0FBSyxvQkFBb0IsTUFBTSxNQUFNO0FBQ25DLFdBQUssc0JBQXNCLFlBQVksV0FBVyxLQUFLLFFBQVEsSUFBSTtBQUFBLElBQ3JFLENBQUM7QUFBQSxFQUNIO0FBQUEsRUFFUSxvQkFBb0IsZUFBOEIsU0FBcUI7QUFDN0UsUUFBSSxjQUFjLGFBQWE7QUFDN0IsY0FBUTtBQUNSO0FBQUEsSUFDRjtBQUVBLFVBQU0sT0FBTztBQUdiLFVBQU0sWUFBWSxPQUFPLGVBQWU7QUFBQSxNQUN0QyxZQUFZLENBQUMsU0FBYyxZQUFhLE1BQVc7QUFDakQsY0FBTSxTQUFTLEtBQUssS0FBSyxNQUFNLEdBQUcsSUFBSTtBQUV0QyxnQkFBUTtBQUNSLGtCQUFVO0FBRVYsZUFBTztBQUFBLE1BQ1Q7QUFBQSxJQUNGLENBQUM7QUFFRCxTQUFLLE9BQU8sU0FBUyxTQUFTO0FBQUEsRUFDaEM7QUFBQSxFQUVRLGdDQUFnQyxRQUFnQjtBQUV0RCxXQUFPLE1BQU0sUUFBUSxDQUFDLFNBQXFCLEtBQUssb0JBQW9CLE1BQU0sTUFBTTtBQUM5RSxXQUFLLHNCQUFzQixZQUFZLGFBQWEsS0FBSyxRQUFRLElBQUk7QUFBQSxJQUN2RSxDQUFDLENBQUM7QUFHRixXQUFPLE1BQU0sUUFBUSxDQUFDLFNBQXFCLEtBQUssb0JBQW9CLE1BQU0sTUFBTTtBQUM5RSxXQUFLLHNCQUFzQixZQUFZLGFBQWEsS0FBSyxRQUFRLElBQUk7QUFBQSxJQUN2RSxDQUFDLENBQUM7QUFBQSxFQUNKO0FBQUEsRUFFUSxzQkFBc0IsVUFBa0IsTUFBVztBQUN6RCxTQUFLLE9BQU8sSUFBSSxVQUFVLFFBQVEsT0FBTyxHQUFHLElBQUk7QUFBQSxFQUNsRDtBQUNGOzs7QUM1VkEsc0JBQXdCO0FBRXhCLElBQU0sZUFBZTtBQUFBLEVBQ25CLGNBQWM7QUFBQSxFQUNkLHVCQUF1QjtBQUFBLEVBQ3ZCLDRCQUE0QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTzVCLGtCQUFrQjtBQUFBLEVBQ2xCLGtCQUFrQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9sQixnQkFBZ0I7QUFBQSxFQUNoQixpQkFBaUI7QUFBQSxFQUNqQixpQkFBaUI7QUFBQSxFQUVqQixjQUFjO0FBQUEsRUFDZCxlQUFlO0FBQUEsRUFDZixxQkFBcUI7QUFBQSxFQUNyQixvQkFBb0I7QUFBQSxFQUVwQixrQkFBa0I7QUFBQSxFQUNsQiwwQkFBMEI7QUFBQSxFQUMxQix1QkFBdUI7QUFBQSxFQUN2Qix5QkFBeUI7QUFBQSxFQUN6QixpQkFBaUI7QUFBQSxFQUNqQix5QkFBeUI7QUFBQSxFQUN6QixnQkFBZ0I7QUFBQSxFQUNoQix3QkFBd0I7QUFBQSxFQUV4Qiw2QkFBNkI7QUFBQSxFQUM3Qiw2QkFBNkI7QUFDL0I7QUFFQSxJQUFxQixjQUFyQixNQUFpQztBQUFBLEVBQy9CLE9BQU8sV0FBVztBQUNoQixlQUFXLENBQUMsSUFBSSxHQUFHLEtBQUssT0FBTyxRQUFRLFlBQVksR0FBRztBQUNwRCxtQ0FBUSxJQUFJLEdBQUc7QUFBQSxJQUNqQjtBQUFBLEVBQ0Y7QUFDRjs7O0FDNUNBLElBQXFCLGNBQXJCLE1BQWlDO0FBQUEsRUFHL0IsWUFBWSxRQUE4QjtBQUN4QyxTQUFLLFNBQVM7QUFFZCxTQUFLLE9BQU8sY0FBYyxLQUFLLE9BQU8sSUFBSSxVQUFVO0FBQUEsTUFDbEQsWUFBWTtBQUFBLE1BQ1osQ0FBQyxTQUFpQixVQUFzQixRQUFRLE1BQU0scUJBQWM7QUFBQSxJQUN0RSxDQUFDO0FBRUQsU0FBSyxPQUFPLGNBQWMsS0FBSyxPQUFPLElBQUksVUFBVTtBQUFBLE1BQ2xELFlBQVk7QUFBQSxNQUNaLENBQUMsU0FBaUIsVUFBc0IsUUFBUSxNQUFNLHVCQUFnQjtBQUFBLElBQ3hFLENBQUM7QUFFRCxTQUFLLE9BQU8sY0FBYyxLQUFLLE9BQU8sSUFBSSxVQUFVO0FBQUEsTUFDbEQsWUFBWTtBQUFBLE1BQ1osQ0FBQyxTQUFpQixVQUFzQixRQUFRLE1BQU0scUJBQWM7QUFBQSxJQUN0RSxDQUFDO0FBRUQsU0FBSyxPQUFPLGNBQWMsS0FBSyxPQUFPLElBQUksVUFBVTtBQUFBLE1BQ2xELFlBQVk7QUFBQSxNQUNaLENBQUMsU0FBaUIsVUFBc0IsUUFBUSxNQUFNLHVCQUFnQjtBQUFBLElBQ3hFLENBQUM7QUFBQSxFQUNIO0FBQ0Y7OztBQzlCQSxJQUFBQyxtQkFBa0Q7OztBQ2UzQyxJQUFNLGdDQUFnQztBQUFBLEVBQzNDO0FBQUEsSUFDRSxZQUFZO0FBQUEsSUFDWixPQUFPO0FBQUEsSUFDUCxXQUFXLENBQUMsTUFBTTtBQUFBLElBQ2xCLFNBQVM7QUFBQSxNQUNQO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsTUFDQTtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1Q7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUFBLEVBQ0E7QUFBQSxJQUNFLFlBQVk7QUFBQSxJQUNaLE9BQU87QUFBQSxJQUNQLFdBQVcsQ0FBQyxNQUFNO0FBQUEsSUFDbEIsU0FBUztBQUFBLE1BQ1A7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsTUFDQTtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsTUFDQTtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsTUFDQTtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1Q7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUFBLEVBQ0E7QUFBQSxJQUNFLFlBQVk7QUFBQSxJQUNaLE9BQU87QUFBQSxJQUNQLFNBQVM7QUFBQSxNQUNQO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsTUFDQTtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1B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QUE7QUFBQSxFQUdBO0FBQUEsRUFDQTtBQUFBO0FBQUEsRUFHQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQTtBQUFBLEVBR0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0Y7QUFFQSxJQUFxQix1QkFBckIsY0FBa0Qsd0JBQU87QUFBQSxFQVV4RCxNQUFNLFNBQVM7QUFDWixTQUFLLGtCQUFrQixJQUFJLGdCQUFnQixJQUFJO0FBQy9DLFVBQU0sS0FBSyxnQkFBZ0IsUUFBUTtBQUVuQyxnQkFBWSxTQUFTO0FBRXJCLFNBQUssV0FBVyxJQUFJLGdCQUFnQixJQUFJO0FBQ3hDLFVBQU0sS0FBSyxTQUFTLGFBQWE7QUFDakMsU0FBSyxTQUFTLGVBQWU7QUFFN0IsU0FBSyxpQkFBaUIsSUFBSSxlQUFlLElBQUk7QUFFN0MsU0FBSyxnQkFBZ0IsSUFBSSxjQUFjLElBQUk7QUFDM0MsU0FBSyxtQkFBbUIsa0JBQWtCLElBQUksQ0FBQyxjQUFtQixJQUFJLFVBQVUsSUFBSSxDQUFDO0FBQUEsRUFDeEY7QUFBQSxFQUVDLFdBQVc7QUFBQSxFQUFDO0FBQUEsRUFFWix1QkFBMEM7QUFDeEMsVUFBTSxhQUFhLEtBQUssSUFBSSxVQUFVLG9CQUFvQix5QkFBUTtBQUNsRSxTQUFJLHlDQUFZLG1CQUFrQjtBQUFVLGFBQU87QUFDbkQsV0FBTztBQUFBLEVBQ1Q7QUFBQSxFQUVBLG1CQUFrQztBQWhHcEM7QUFpR0ksYUFBTyxVQUFLLHFCQUFxQixNQUExQixtQkFBNkIsV0FBVTtBQUFBLEVBQ2hEO0FBQUEsRUFFQSxtQkFBbUIsTUFBYyxTQUFpQjtBQXBHcEQ7QUFxR0ksVUFBTSxzQkFBcUIsVUFBSyxJQUFJLGdCQUFnQixRQUFRLGVBQWUsTUFBaEQsbUJBQW1EO0FBQzlFLFFBQUksQ0FBQztBQUFvQjtBQUV6Qix1QkFBbUIsU0FBUyxNQUFNLE9BQU87QUFBQSxFQUMzQztBQUFBO0FBQUEsRUFHQSxrQkFBa0I7QUFDaEIsUUFBSSxLQUFLO0FBQWE7QUFDdEIsU0FBSyxjQUFjLElBQUksWUFBWSxJQUFJO0FBQUEsRUFDekM7QUFDRjsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgInJlc3VsdCIsICJfYSIsICJ1cGRhdGUiLCAiZGF0YSIsICJjYW52YXNWaWV3IiwgImltcG9ydF9vYnNpZGlhbiIsICJ3aW5kb3ciLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgIl9iIiwgImxlZnRQb3NpdGlvbiIsICJyaWdodFBvc2l0aW9uIiwgImNhbnZhcyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiY2FudmFzIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAibm9kZSIsICJfYSIsICJfYiIsICJub2RlIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiX2EiLCAiX2IiLCAiRElSRUNUSU9OUyJdCn0K
